(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(t,e,n){var r=n("b622"),i=r("toStringTag"),a={};a[i]="z",t.exports="[object z]"===String(a)},"0366":function(t,e,n){var r=n("1c0b");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?s(t):i(r(t))}},"06cf":function(t,e,n){var r=n("83ab"),i=n("d1e7"),a=n("5c6c"),o=n("fc6a"),s=n("c04e"),l=n("5135"),u=n("0cfb"),c=Object.getOwnPropertyDescriptor;e.f=r?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(n){}if(l(t,e))return a(!i.f.call(t,e),t[e])}},"0cfb":function(t,e,n){var r=n("83ab"),i=n("d039"),a=n("cc12");t.exports=!r&&!i((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},"14c3":function(t,e,n){var r=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"159b":function(t,e,n){var r=n("da84"),i=n("fdbc"),a=n("17c2"),o=n("9112");for(var s in i){var l=r[s],u=l&&l.prototype;if(u&&u.forEach!==a)try{o(u,"forEach",a)}catch(c){u.forEach=a}}},"17c2":function(t,e,n){"use strict";var r=n("b727").forEach,i=n("a640"),a=n("ae40"),o=i("forEach"),s=a("forEach");t.exports=o&&s?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1be4":function(t,e,n){var r=n("d066");t.exports=r("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,n){var r=n("b622"),i=r("iterator"),a=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){a=!0}};s[i]=function(){return this},Array.from(s,(function(){throw 2}))}catch(l){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var r={};r[i]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(l){}return n}},"1cdc":function(t,e,n){var r=n("342f");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},"1d1c":function(t,e,n){var r=n("23e7"),i=n("83ab"),a=n("37e8");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperties:a})},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1da1":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d3b7");function r(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(u){return void n(u)}s.done?e(l):Promise.resolve(l).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,l,"next",t)}function l(t){r(o,i,a,s,l,"throw",t)}s(void 0)}))}}},"1dde":function(t,e,n){var r=n("d039"),i=n("b622"),a=n("2d00"),o=i("species");t.exports=function(t){return a>=51||!r((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"21a1":function(t,e,n){(function(e){(function(e,n){t.exports=n()})(0,(function(){"use strict";"undefined"!==typeof window?window:"undefined"!==typeof e||"undefined"!==typeof self&&self;function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}var n=t((function(t,e){(function(e,n){t.exports=n()})(0,(function(){function t(t){var e=t&&"object"===typeof t;return e&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function n(n,r){var i=r&&!0===r.clone;return i&&t(n)?a(e(n),n,r):n}function r(e,r,i){var o=e.slice();return r.forEach((function(r,s){"undefined"===typeof o[s]?o[s]=n(r,i):t(r)?o[s]=a(e[s],r,i):-1===e.indexOf(r)&&o.push(n(r,i))})),o}function i(e,r,i){var o={};return t(e)&&Object.keys(e).forEach((function(t){o[t]=n(e[t],i)})),Object.keys(r).forEach((function(s){t(r[s])&&e[s]?o[s]=a(e[s],r[s],i):o[s]=n(r[s],i)})),o}function a(t,e,a){var o=Array.isArray(e),s=a||{arrayMerge:r},l=s.arrayMerge||r;return o?Array.isArray(t)?l(t,e,a):n(e,a):i(t,e,a)}return a.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return a(t,n,e)}))},a}))}));function r(t){return t=t||Object.create(null),{on:function(e,n){(t[e]||(t[e]=[])).push(n)},off:function(e,n){t[e]&&t[e].splice(t[e].indexOf(n)>>>0,1)},emit:function(e,n){(t[e]||[]).map((function(t){t(n)})),(t["*"]||[]).map((function(t){t(e,n)}))}}}var i=t((function(t,e){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};e.default=n,t.exports=e.default})),a=function(t){return Object.keys(t).map((function(e){var n=t[e].toString().replace(/"/g,"&quot;");return e+'="'+n+'"'})).join(" ")},o=i.svg,s=i.xlink,l={};l[o.name]=o.uri,l[s.name]=s.uri;var u,c=function(t,e){void 0===t&&(t="");var r=n(l,e||{}),i=a(r);return"<svg "+i+">"+t+"</svg>"},h=i.svg,d=i.xlink,f={attrs:(u={style:["position: absolute","width: 0","height: 0"].join("; "),"aria-hidden":"true"},u[h.name]=h.uri,u[d.name]=d.uri,u)},p=function(t){this.config=n(f,t||{}),this.symbols=[]};p.prototype.add=function(t){var e=this,n=e.symbols,r=this.find(t.id);return r?(n[n.indexOf(r)]=t,!1):(n.push(t),!0)},p.prototype.remove=function(t){var e=this,n=e.symbols,r=this.find(t);return!!r&&(n.splice(n.indexOf(r),1),r.destroy(),!0)},p.prototype.find=function(t){return this.symbols.filter((function(e){return e.id===t}))[0]||null},p.prototype.has=function(t){return null!==this.find(t)},p.prototype.stringify=function(){var t=this.config,e=t.attrs,n=this.symbols.map((function(t){return t.stringify()})).join("");return c(n,e)},p.prototype.toString=function(){return this.stringify()},p.prototype.destroy=function(){this.symbols.forEach((function(t){return t.destroy()}))};var g=function(t){var e=t.id,n=t.viewBox,r=t.content;this.id=e,this.viewBox=n,this.content=r};g.prototype.stringify=function(){return this.content},g.prototype.toString=function(){return this.stringify()},g.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))};var m=function(t){var e=!!document.importNode,n=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(n,!0):n},v=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"===typeof t?document.querySelector(t):t,n=this.render();return this.node=n,e.appendChild(n),n},e.prototype.render=function(){var t=this.stringify();return m(c(t)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,n),e}(g),y={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},b=function(t){return Array.prototype.slice.call(t,0)},_={isChrome:function(){return/chrome/i.test(navigator.userAgent)},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},isEdge:function(){return/edge/i.test(navigator.userAgent)}},E=function(t,e){var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!1,!1,e),window.dispatchEvent(n)},A=function(t){var e=[];return b(t.querySelectorAll("style")).forEach((function(t){t.textContent+="",e.push(t)})),e},T=function(t){return(t||window.location.href).split("#")[0]},w=function(t){angular.module("ng").run(["$rootScope",function(e){e.$on("$locationChangeSuccess",(function(e,n,r){E(t,{oldUrl:r,newUrl:n})}))}])},S="linearGradient, radialGradient, pattern, mask, clipPath",x=function(t,e){return void 0===e&&(e=S),b(t.querySelectorAll("symbol")).forEach((function(t){b(t.querySelectorAll(e)).forEach((function(e){t.parentNode.insertBefore(e,t)}))})),t};function L(t,e){var n=b(t).reduce((function(t,n){if(!n.attributes)return t;var r=b(n.attributes),i=e?r.filter(e):r;return t.concat(i)}),[]);return n}var M=i.xlink.uri,k="xlink:href",C=/[{}|\\\^\[\]`"<>]/g;function R(t){return t.replace(C,(function(t){return"%"+t[0].charCodeAt(0).toString(16).toUpperCase()}))}function P(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(t,e,n){return b(t).forEach((function(t){var r=t.getAttribute(k);if(r&&0===r.indexOf(e)){var i=r.replace(e,n);t.setAttributeNS(M,k,i)}})),t}var D,I=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],N=I.map((function(t){return"["+t+"]"})).join(","),F=function(t,e,n,r){var i=R(n),a=R(r),o=t.querySelectorAll(N),s=L(o,(function(t){var e=t.localName,n=t.value;return-1!==I.indexOf(e)&&-1!==n.indexOf("url("+i)}));s.forEach((function(t){return t.value=t.value.replace(new RegExp(P(i),"g"),a)})),O(e,i,a)},B={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"},U=function(t){function e(e){var i=this;void 0===e&&(e={}),t.call(this,n(y,e));var a=r();this._emitter=a,this.node=null;var o=this,s=o.config;if(s.autoConfigure&&this._autoConfigure(e),s.syncUrlsWithBaseTag){var l=document.getElementsByTagName("base")[0].getAttribute("href");a.on(B.MOUNT,(function(){return i.updateUrls("#",l)}))}var u=this._handleLocationChange.bind(this);this._handleLocationChange=u,s.listenLocationChangeEvent&&window.addEventListener(s.locationChangeEvent,u),s.locationChangeAngularEmitter&&w(s.locationChangeEvent),a.on(B.MOUNT,(function(t){s.moveGradientsOutsideSymbol&&x(t)})),a.on(B.SYMBOL_MOUNT,(function(t){s.moveGradientsOutsideSymbol&&x(t.parentNode),(_.isIE()||_.isEdge())&&A(t)}))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={isMounted:{}};return i.isMounted.get=function(){return!!this.node},e.prototype._autoConfigure=function(t){var e=this,n=e.config;"undefined"===typeof t.syncUrlsWithBaseTag&&(n.syncUrlsWithBaseTag="undefined"!==typeof document.getElementsByTagName("base")[0]),"undefined"===typeof t.locationChangeAngularEmitter&&(n.locationChangeAngularEmitter="undefined"!==typeof window.angular),"undefined"===typeof t.moveGradientsOutsideSymbol&&(n.moveGradientsOutsideSymbol=_.isFirefox())},e.prototype._handleLocationChange=function(t){var e=t.detail,n=e.oldUrl,r=e.newUrl;this.updateUrls(n,r)},e.prototype.add=function(e){var n=this,r=t.prototype.add.call(this,e);return this.isMounted&&r&&(e.mount(n.node),this._emitter.emit(B.SYMBOL_MOUNT,e.node)),r},e.prototype.attach=function(t){var e=this,n=this;if(n.isMounted)return n.node;var r="string"===typeof t?document.querySelector(t):t;return n.node=r,this.symbols.forEach((function(t){t.mount(n.node),e._emitter.emit(B.SYMBOL_MOUNT,t.node)})),b(r.querySelectorAll("symbol")).forEach((function(t){var e=v.createFromExistingNode(t);e.node=t,n.add(e)})),this._emitter.emit(B.MOUNT,r),r},e.prototype.destroy=function(){var t=this,e=t.config,n=t.symbols,r=t._emitter;n.forEach((function(t){return t.destroy()})),r.off("*"),window.removeEventListener(e.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},e.prototype.mount=function(t,e){void 0===t&&(t=this.config.mountTo),void 0===e&&(e=!1);var n=this;if(n.isMounted)return n.node;var r="string"===typeof t?document.querySelector(t):t,i=n.render();return this.node=i,e&&r.childNodes[0]?r.insertBefore(i,r.childNodes[0]):r.appendChild(i),this._emitter.emit(B.MOUNT,i),i},e.prototype.render=function(){return m(this.stringify())},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},e.prototype.updateUrls=function(t,e){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return F(this.node,n,T(t)+"#",T(e)+"#"),!0},Object.defineProperties(e.prototype,i),e}(p),j=t((function(t){
/*!
  * domready (c) Dustin Diaz 2014 - License MIT
  */
!function(e,n){t.exports=n()}(0,(function(){var t,e=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",a=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return a||n.addEventListener(i,t=function(){n.removeEventListener(i,t),a=1;while(t=e.shift())t()}),function(t){a?setTimeout(t,0):e.push(t)}}))})),V="__SVG_SPRITE_NODE__",G="__SVG_SPRITE__",z=!!window[G];z?D=window[G]:(D=new U({attrs:{id:V}}),window[G]=D);var Y=function(){var t=document.getElementById(V);t?D.attach(t):D.mount(document.body,!0)};document.body?Y():j(Y);var H=D;return H}))}).call(this,n("c8ba"))},2266:function(t,e,n){var r=n("825a"),i=n("e95a"),a=n("50c4"),o=n("0366"),s=n("35a1"),l=n("9bdd"),u=function(t,e){this.stopped=t,this.result=e},c=t.exports=function(t,e,n,c,h){var d,f,p,g,m,v,y,b=o(e,n,c?2:1);if(h)d=t;else{if(f=s(t),"function"!=typeof f)throw TypeError("Target is not iterable");if(i(f)){for(p=0,g=a(t.length);g>p;p++)if(m=c?b(r(y=t[p])[0],y[1]):b(t[p]),m&&m instanceof u)return m;return new u(!1)}d=f.call(t)}v=d.next;while(!(y=v.call(d)).done)if(m=l(d,b,y.value,c),"object"==typeof m&&m&&m instanceof u)return m;return new u(!1)};c.stop=function(t){return new u(!0,t)}},"23cb":function(t,e,n){var r=n("a691"),i=Math.max,a=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):a(n,e)}},"23e7":function(t,e,n){var r=n("da84"),i=n("06cf").f,a=n("9112"),o=n("6eeb"),s=n("ce4e"),l=n("e893"),u=n("94ca");t.exports=function(t,e){var n,c,h,d,f,p,g=t.target,m=t.global,v=t.stat;if(c=m?r:v?r[g]||s(g,{}):(r[g]||{}).prototype,c)for(h in e){if(f=e[h],t.noTargetGet?(p=i(c,h),d=p&&p.value):d=c[h],n=u(m?h:g+(v?".":"#")+h,t.forced),!n&&void 0!==d){if(typeof f===typeof d)continue;l(f,d)}(t.sham||d&&d.sham)&&a(f,"sham",!0),o(c,h,f,t)}}},"241c":function(t,e,n){var r=n("ca84"),i=n("7839"),a=i.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},2626:function(t,e,n){"use strict";var r=n("d066"),i=n("9bf2"),a=n("b622"),o=n("83ab"),s=a("species");t.exports=function(t){var e=r(t),n=i.f;o&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},2877:function(t,e,n){"use strict";function r(t,e,n,r,i,a,o,s){var l,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=n,u._compiled=!0),r&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=l):i&&(l=s?function(){i.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(u.functional){u._injectStyles=l;var c=u.render;u.render=function(t,e){return l.call(e),c(t,e)}}else{var h=u.beforeCreate;u.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:u}}n.d(e,"a",(function(){return r}))},"2b0e":function(t,e,n){"use strict";(function(t){
/*!
 * Vue.js v2.6.11
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function a(t){return!0===t}function o(t){return!1===t}function s(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function l(t){return null!==t&&"object"===typeof t}var u=Object.prototype.toString;function c(t){return"[object Object]"===u.call(t)}function h(t){return"[object RegExp]"===u.call(t)}function d(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function f(t){return i(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function p(t){return null==t?"":Array.isArray(t)||c(t)&&t.toString===u?JSON.stringify(t,null,2):String(t)}function g(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}m("slot,component",!0);var v=m("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function _(t,e){return b.call(t,e)}function E(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var A=/-(\w)/g,T=E((function(t){return t.replace(A,(function(t,e){return e?e.toUpperCase():""}))})),w=E((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),S=/\B([A-Z])/g,x=E((function(t){return t.replace(S,"-$1").toLowerCase()}));function L(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function M(t,e){return t.bind(e)}var k=Function.prototype.bind?M:L;function C(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function R(t,e){for(var n in e)t[n]=e[n];return t}function P(t){for(var e={},n=0;n<t.length;n++)t[n]&&R(e,t[n]);return e}function O(t,e,n){}var D=function(t,e,n){return!1},I=function(t){return t};function N(t,e){if(t===e)return!0;var n=l(t),r=l(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),a=Array.isArray(e);if(i&&a)return t.length===e.length&&t.every((function(t,n){return N(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(i||a)return!1;var o=Object.keys(t),s=Object.keys(e);return o.length===s.length&&o.every((function(n){return N(t[n],e[n])}))}catch(u){return!1}}function F(t,e){for(var n=0;n<t.length;n++)if(N(t[n],e))return n;return-1}function B(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var U="data-server-rendered",j=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],G={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:O,parsePlatformTagName:I,mustUseProp:D,async:!0,_lifecycleHooks:V},z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function Y(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function H(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var $=new RegExp("[^"+z.source+".$_\\d]");function W(t){if(!$.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var K,X="__proto__"in{},q="undefined"!==typeof window,Z="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,J=Z&&WXEnvironment.platform.toLowerCase(),Q=q&&window.navigator.userAgent.toLowerCase(),tt=Q&&/msie|trident/.test(Q),et=Q&&Q.indexOf("msie 9.0")>0,nt=Q&&Q.indexOf("edge/")>0,rt=(Q&&Q.indexOf("android"),Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===J),it=(Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q),Q&&Q.match(/firefox\/(\d+)/)),at={}.watch,ot=!1;if(q)try{var st={};Object.defineProperty(st,"passive",{get:function(){ot=!0}}),window.addEventListener("test-passive",null,st)}catch(To){}var lt=function(){return void 0===K&&(K=!q&&!Z&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),K},ut=q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ct(t){return"function"===typeof t&&/native code/.test(t.toString())}var ht,dt="undefined"!==typeof Symbol&&ct(Symbol)&&"undefined"!==typeof Reflect&&ct(Reflect.ownKeys);ht="undefined"!==typeof Set&&ct(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ft=O,pt=0,gt=function(){this.id=pt++,this.subs=[]};gt.prototype.addSub=function(t){this.subs.push(t)},gt.prototype.removeSub=function(t){y(this.subs,t)},gt.prototype.depend=function(){gt.target&&gt.target.addDep(this)},gt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},gt.target=null;var mt=[];function vt(t){mt.push(t),gt.target=t}function yt(){mt.pop(),gt.target=mt[mt.length-1]}var bt=function(t,e,n,r,i,a,o,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=a,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},_t={child:{configurable:!0}};_t.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,_t);var Et=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function At(t){return new bt(void 0,void 0,void 0,String(t))}function Tt(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var wt=Array.prototype,St=Object.create(wt),xt=["push","pop","shift","unshift","splice","sort","reverse"];xt.forEach((function(t){var e=wt[t];H(St,t,(function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,a=e.apply(this,n),o=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&o.observeArray(i),o.dep.notify(),a}))}));var Lt=Object.getOwnPropertyNames(St),Mt=!0;function kt(t){Mt=t}var Ct=function(t){this.value=t,this.dep=new gt,this.vmCount=0,H(t,"__ob__",this),Array.isArray(t)?(X?Rt(t,St):Pt(t,St,Lt),this.observeArray(t)):this.walk(t)};function Rt(t,e){t.__proto__=e}function Pt(t,e,n){for(var r=0,i=n.length;r<i;r++){var a=n[r];H(t,a,e[a])}}function Ot(t,e){var n;if(l(t)&&!(t instanceof bt))return _(t,"__ob__")&&t.__ob__ instanceof Ct?n=t.__ob__:Mt&&!lt()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Ct(t)),e&&n&&n.vmCount++,n}function Dt(t,e,n,r,i){var a=new gt,o=Object.getOwnPropertyDescriptor(t,e);if(!o||!1!==o.configurable){var s=o&&o.get,l=o&&o.set;s&&!l||2!==arguments.length||(n=t[e]);var u=!i&&Ot(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return gt.target&&(a.depend(),u&&(u.dep.depend(),Array.isArray(e)&&Ft(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!==e&&r!==r||s&&!l||(l?l.call(t,e):n=e,u=!i&&Ot(e),a.notify())}})}}function It(t,e,n){if(Array.isArray(t)&&d(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Dt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Nt(t,e){if(Array.isArray(t)&&d(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||_(t,e)&&(delete t[e],n&&n.dep.notify())}}function Ft(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Ft(e)}Ct.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Dt(t,e[n])},Ct.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Ot(t[e])};var Bt=G.optionMergeStrategies;function Ut(t,e){if(!e)return t;for(var n,r,i,a=dt?Reflect.ownKeys(e):Object.keys(e),o=0;o<a.length;o++)n=a[o],"__ob__"!==n&&(r=t[n],i=e[n],_(t,n)?r!==i&&c(r)&&c(i)&&Ut(r,i):It(t,n,i));return t}function jt(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,i="function"===typeof t?t.call(n,n):t;return r?Ut(r,i):i}:e?t?function(){return Ut("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Vt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Gt(n):n}function Gt(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function zt(t,e,n,r){var i=Object.create(t||null);return e?R(i,e):i}Bt.data=function(t,e,n){return n?jt(t,e,n):e&&"function"!==typeof e?t:jt(t,e)},V.forEach((function(t){Bt[t]=Vt})),j.forEach((function(t){Bt[t+"s"]=zt})),Bt.watch=function(t,e,n,r){if(t===at&&(t=void 0),e===at&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var a in R(i,t),e){var o=i[a],s=e[a];o&&!Array.isArray(o)&&(o=[o]),i[a]=o?o.concat(s):Array.isArray(s)?s:[s]}return i},Bt.props=Bt.methods=Bt.inject=Bt.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return R(i,t),e&&R(i,e),i},Bt.provide=jt;var Yt=function(t,e){return void 0===e?t:e};function Ht(t,e){var n=t.props;if(n){var r,i,a,o={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(a=T(i),o[a]={type:null})}else if(c(n))for(var s in n)i=n[s],a=T(s),o[a]=c(i)?i:{type:i};else 0;t.props=o}}function $t(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(c(n))for(var a in n){var o=n[a];r[a]=c(o)?R({from:a},o):{from:o}}else 0}}function Wt(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function Kt(t,e,n){if("function"===typeof e&&(e=e.options),Ht(e,n),$t(e,n),Wt(e),!e._base&&(e.extends&&(t=Kt(t,e.extends,n)),e.mixins))for(var r=0,i=e.mixins.length;r<i;r++)t=Kt(t,e.mixins[r],n);var a,o={};for(a in t)s(a);for(a in e)_(t,a)||s(a);function s(r){var i=Bt[r]||Yt;o[r]=i(t[r],e[r],n,r)}return o}function Xt(t,e,n,r){if("string"===typeof n){var i=t[e];if(_(i,n))return i[n];var a=T(n);if(_(i,a))return i[a];var o=w(a);if(_(i,o))return i[o];var s=i[n]||i[a]||i[o];return s}}function qt(t,e,n,r){var i=e[t],a=!_(n,t),o=n[t],s=te(Boolean,i.type);if(s>-1)if(a&&!_(i,"default"))o=!1;else if(""===o||o===x(t)){var l=te(String,i.type);(l<0||s<l)&&(o=!0)}if(void 0===o){o=Zt(r,i,t);var u=Mt;kt(!0),Ot(o),kt(u)}return o}function Zt(t,e,n){if(_(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Jt(e.type)?r.call(t):r}}function Jt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Qt(t,e){return Jt(t)===Jt(e)}function te(t,e){if(!Array.isArray(e))return Qt(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(Qt(e[n],t))return n;return-1}function ee(t,e,n){vt();try{if(e){var r=e;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var a=0;a<i.length;a++)try{var o=!1===i[a].call(r,t,e,n);if(o)return}catch(To){re(To,r,"errorCaptured hook")}}}re(t,e,n)}finally{yt()}}function ne(t,e,n,r,i){var a;try{a=n?t.apply(e,n):t.call(e),a&&!a._isVue&&f(a)&&!a._handled&&(a.catch((function(t){return ee(t,r,i+" (Promise/async)")})),a._handled=!0)}catch(To){ee(To,r,i)}return a}function re(t,e,n){if(G.errorHandler)try{return G.errorHandler.call(null,t,e,n)}catch(To){To!==t&&ie(To,null,"config.errorHandler")}ie(t,e,n)}function ie(t,e,n){if(!q&&!Z||"undefined"===typeof console)throw t;console.error(t)}var ae,oe=!1,se=[],le=!1;function ue(){le=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&ct(Promise)){var ce=Promise.resolve();ae=function(){ce.then(ue),rt&&setTimeout(O)},oe=!0}else if(tt||"undefined"===typeof MutationObserver||!ct(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())ae="undefined"!==typeof setImmediate&&ct(setImmediate)?function(){setImmediate(ue)}:function(){setTimeout(ue,0)};else{var he=1,de=new MutationObserver(ue),fe=document.createTextNode(String(he));de.observe(fe,{characterData:!0}),ae=function(){he=(he+1)%2,fe.data=String(he)},oe=!0}function pe(t,e){var n;if(se.push((function(){if(t)try{t.call(e)}catch(To){ee(To,e,"nextTick")}else n&&n(e)})),le||(le=!0,ae()),!t&&"undefined"!==typeof Promise)return new Promise((function(t){n=t}))}var ge=new ht;function me(t){ve(t,ge),ge.clear()}function ve(t,e){var n,r,i=Array.isArray(t);if(!(!i&&!l(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var a=t.__ob__.dep.id;if(e.has(a))return;e.add(a)}if(i){n=t.length;while(n--)ve(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ve(t[r[n]],e)}}}var ye=E((function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}}));function be(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return ne(r,null,arguments,e,"v-on handler");for(var i=r.slice(),a=0;a<i.length;a++)ne(i[a],null,t,e,"v-on handler")}return n.fns=t,n}function _e(t,e,n,i,o,s){var l,u,c,h;for(l in t)u=t[l],c=e[l],h=ye(l),r(u)||(r(c)?(r(u.fns)&&(u=t[l]=be(u,s)),a(h.once)&&(u=t[l]=o(h.name,u,h.capture)),n(h.name,u,h.capture,h.passive,h.params)):u!==c&&(c.fns=u,t[l]=c));for(l in e)r(t[l])&&(h=ye(l),i(h.name,e[l],h.capture))}function Ee(t,e,n){var o;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function l(){n.apply(this,arguments),y(o.fns,l)}r(s)?o=be([l]):i(s.fns)&&a(s.merged)?(o=s,o.fns.push(l)):o=be([s,l]),o.merged=!0,t[e]=o}function Ae(t,e,n){var a=e.options.props;if(!r(a)){var o={},s=t.attrs,l=t.props;if(i(s)||i(l))for(var u in a){var c=x(u);Te(o,l,u,c,!0)||Te(o,s,u,c,!1)}return o}}function Te(t,e,n,r,a){if(i(e)){if(_(e,n))return t[n]=e[n],a||delete e[n],!0;if(_(e,r))return t[n]=e[r],a||delete e[r],!0}return!1}function we(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Se(t){return s(t)?[At(t)]:Array.isArray(t)?Le(t):void 0}function xe(t){return i(t)&&i(t.text)&&o(t.isComment)}function Le(t,e){var n,o,l,u,c=[];for(n=0;n<t.length;n++)o=t[n],r(o)||"boolean"===typeof o||(l=c.length-1,u=c[l],Array.isArray(o)?o.length>0&&(o=Le(o,(e||"")+"_"+n),xe(o[0])&&xe(u)&&(c[l]=At(u.text+o[0].text),o.shift()),c.push.apply(c,o)):s(o)?xe(u)?c[l]=At(u.text+o):""!==o&&c.push(At(o)):xe(o)&&xe(u)?c[l]=At(u.text+o.text):(a(t._isVList)&&i(o.tag)&&r(o.key)&&i(e)&&(o.key="__vlist"+e+"_"+n+"__"),c.push(o)));return c}function Me(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function ke(t){var e=Ce(t.$options.inject,t);e&&(kt(!1),Object.keys(e).forEach((function(n){Dt(t,n,e[n])})),kt(!0))}function Ce(t,e){if(t){for(var n=Object.create(null),r=dt?Reflect.ownKeys(t):Object.keys(t),i=0;i<r.length;i++){var a=r[i];if("__ob__"!==a){var o=t[a].from,s=e;while(s){if(s._provided&&_(s._provided,o)){n[a]=s._provided[o];break}s=s.$parent}if(!s)if("default"in t[a]){var l=t[a].default;n[a]="function"===typeof l?l.call(e):l}else 0}}return n}}function Re(t,e){if(!t||!t.length)return{};for(var n={},r=0,i=t.length;r<i;r++){var a=t[r],o=a.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,a.context!==e&&a.fnContext!==e||!o||null==o.slot)(n.default||(n.default=[])).push(a);else{var s=o.slot,l=n[s]||(n[s]=[]);"template"===a.tag?l.push.apply(l,a.children||[]):l.push(a)}}for(var u in n)n[u].every(Pe)&&delete n[u];return n}function Pe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Oe(t,e,r){var i,a=Object.keys(e).length>0,o=t?!!t.$stable:!a,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&r&&r!==n&&s===r.$key&&!a&&!r.$hasNormal)return r;for(var l in i={},t)t[l]&&"$"!==l[0]&&(i[l]=De(e,l,t[l]))}else i={};for(var u in e)u in i||(i[u]=Ie(e,u));return t&&Object.isExtensible(t)&&(t._normalized=i),H(i,"$stable",o),H(i,"$key",s),H(i,"$hasNormal",a),i}function De(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});return t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Se(t),t&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function Ie(t,e){return function(){return t[e]}}function Ne(t,e){var n,r,a,o,s;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),r=0,a=t.length;r<a;r++)n[r]=e(t[r],r);else if("number"===typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(l(t))if(dt&&t[Symbol.iterator]){n=[];var u=t[Symbol.iterator](),c=u.next();while(!c.done)n.push(e(c.value,n.length)),c=u.next()}else for(o=Object.keys(t),n=new Array(o.length),r=0,a=o.length;r<a;r++)s=o[r],n[r]=e(t[s],s,r);return i(n)||(n=[]),n._isVList=!0,n}function Fe(t,e,n,r){var i,a=this.$scopedSlots[t];a?(n=n||{},r&&(n=R(R({},r),n)),i=a(n)||e):i=this.$slots[t]||e;var o=n&&n.slot;return o?this.$createElement("template",{slot:o},i):i}function Be(t){return Xt(this.$options,"filters",t,!0)||I}function Ue(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function je(t,e,n,r,i){var a=G.keyCodes[e]||n;return i&&r&&!G.keyCodes[e]?Ue(i,r):a?Ue(a,t):r?x(r)!==e:void 0}function Ve(t,e,n,r,i){if(n)if(l(n)){var a;Array.isArray(n)&&(n=P(n));var o=function(o){if("class"===o||"style"===o||v(o))a=t;else{var s=t.attrs&&t.attrs.type;a=r||G.mustUseProp(e,s,o)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=T(o),u=x(o);if(!(l in a)&&!(u in a)&&(a[o]=n[o],i)){var c=t.on||(t.on={});c["update:"+o]=function(t){n[o]=t}}};for(var s in n)o(s)}else;return t}function Ge(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e||(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Ye(r,"__static__"+t,!1)),r}function ze(t,e,n){return Ye(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ye(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&He(t[r],e+"_"+r,n);else He(t,e,n)}function He(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function $e(t,e){if(e)if(c(e)){var n=t.on=t.on?R({},t.on):{};for(var r in e){var i=n[r],a=e[r];n[r]=i?[].concat(i,a):a}}else;return t}function We(t,e,n,r){e=e||{$stable:!n};for(var i=0;i<t.length;i++){var a=t[i];Array.isArray(a)?We(a,e,n):a&&(a.proxy&&(a.fn.proxy=!0),e[a.key]=a.fn)}return r&&(e.$key=r),e}function Ke(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"===typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Xe(t,e){return"string"===typeof t?e+t:t}function qe(t){t._o=ze,t._n=g,t._s=p,t._l=Ne,t._t=Fe,t._q=N,t._i=F,t._m=Ge,t._f=Be,t._k=je,t._b=Ve,t._v=At,t._e=Et,t._u=We,t._g=$e,t._d=Ke,t._p=Xe}function Ze(t,e,r,i,o){var s,l=this,u=o.options;_(i,"_uid")?(s=Object.create(i),s._original=i):(s=i,i=i._original);var c=a(u._compiled),h=!c;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||n,this.injections=Ce(u.inject,i),this.slots=function(){return l.$slots||Oe(t.scopedSlots,l.$slots=Re(r,i)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Oe(t.scopedSlots,this.slots())}}),c&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Oe(t.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,n,r){var a=hn(s,t,e,n,r,h);return a&&!Array.isArray(a)&&(a.fnScopeId=u._scopeId,a.fnContext=i),a}:this._c=function(t,e,n,r){return hn(s,t,e,n,r,h)}}function Je(t,e,r,a,o){var s=t.options,l={},u=s.props;if(i(u))for(var c in u)l[c]=qt(c,u,e||n);else i(r.attrs)&&tn(l,r.attrs),i(r.props)&&tn(l,r.props);var h=new Ze(r,l,o,a,t),d=s.render.call(null,h._c,h);if(d instanceof bt)return Qe(d,r,h.parent,s,h);if(Array.isArray(d)){for(var f=Se(d)||[],p=new Array(f.length),g=0;g<f.length;g++)p[g]=Qe(f[g],r,h.parent,s,h);return p}}function Qe(t,e,n,r,i){var a=Tt(t);return a.fnContext=n,a.fnOptions=r,e.slot&&((a.data||(a.data={})).slot=e.slot),a}function tn(t,e){for(var n in e)t[T(n)]=e[n]}qe(Ze.prototype);var en={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;en.prepatch(n,n)}else{var r=t.componentInstance=an(t,Cn);r.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;In(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Un(n,"mounted")),t.data.keepAlive&&(e._isMounted?Jn(n):Fn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Bn(e,!0):e.$destroy())}},nn=Object.keys(en);function rn(t,e,n,o,s){if(!r(t)){var u=n.$options._base;if(l(t)&&(t=u.extend(t)),"function"===typeof t){var c;if(r(t.cid)&&(c=t,t=En(c,u),void 0===t))return _n(c,e,n,o,s);e=e||{},Er(t),i(e.model)&&ln(t.options,e);var h=Ae(e,t,s);if(a(t.options.functional))return Je(t,h,e,n,o);var d=e.on;if(e.on=e.nativeOn,a(t.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}on(e);var p=t.options.name||s,g=new bt("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:h,listeners:d,tag:s,children:o},c);return g}}}function an(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},r=t.data.inlineTemplate;return i(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new t.componentOptions.Ctor(n)}function on(t){for(var e=t.hook||(t.hook={}),n=0;n<nn.length;n++){var r=nn[n],i=e[r],a=en[r];i===a||i&&i._merged||(e[r]=i?sn(a,i):a)}}function sn(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function ln(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var a=e.on||(e.on={}),o=a[r],s=e.model.callback;i(o)?(Array.isArray(o)?-1===o.indexOf(s):o!==s)&&(a[r]=[s].concat(o)):a[r]=s}var un=1,cn=2;function hn(t,e,n,r,i,o){return(Array.isArray(n)||s(n))&&(i=r,r=n,n=void 0),a(o)&&(i=cn),dn(t,e,n,r,i)}function dn(t,e,n,r,a){if(i(n)&&i(n.__ob__))return Et();if(i(n)&&i(n.is)&&(e=n.is),!e)return Et();var o,s,l;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),a===cn?r=Se(r):a===un&&(r=we(r)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||G.getTagNamespace(e),o=G.isReservedTag(e)?new bt(G.parsePlatformTagName(e),n,r,void 0,void 0,t):n&&n.pre||!i(l=Xt(t.$options,"components",e))?new bt(e,n,r,void 0,void 0,t):rn(l,n,t,r,e)):o=rn(e,n,t,r);return Array.isArray(o)?o:i(o)?(i(s)&&fn(o,s),i(n)&&pn(n),o):Et()}function fn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var o=0,s=t.children.length;o<s;o++){var l=t.children[o];i(l.tag)&&(r(l.ns)||a(n)&&"svg"!==l.tag)&&fn(l,e,n)}}function pn(t){l(t.style)&&me(t.style),l(t.class)&&me(t.class)}function gn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,i=r&&r.context;t.$slots=Re(e._renderChildren,i),t.$scopedSlots=n,t._c=function(e,n,r,i){return hn(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return hn(t,e,n,r,i,!0)};var a=r&&r.data;Dt(t,"$attrs",a&&a.attrs||n,null,!0),Dt(t,"$listeners",e._parentListeners||n,null,!0)}var mn,vn=null;function yn(t){qe(t.prototype),t.prototype.$nextTick=function(t){return pe(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,i=n._parentVnode;i&&(e.$scopedSlots=Oe(i.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=i;try{vn=e,t=r.call(e._renderProxy,e.$createElement)}catch(To){ee(To,e,"render"),t=e._vnode}finally{vn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=Et()),t.parent=i,t}}function bn(t,e){return(t.__esModule||dt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),l(t)?e.extend(t):t}function _n(t,e,n,r,i){var a=Et();return a.asyncFactory=t,a.asyncMeta={data:e,context:n,children:r,tag:i},a}function En(t,e){if(a(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;var n=vn;if(n&&i(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),a(t.loading)&&i(t.loadingComp))return t.loadingComp;if(n&&!i(t.owners)){var o=t.owners=[n],s=!0,u=null,c=null;n.$on("hook:destroyed",(function(){return y(o,n)}));var h=function(t){for(var e=0,n=o.length;e<n;e++)o[e].$forceUpdate();t&&(o.length=0,null!==u&&(clearTimeout(u),u=null),null!==c&&(clearTimeout(c),c=null))},d=B((function(n){t.resolved=bn(n,e),s?o.length=0:h(!0)})),p=B((function(e){i(t.errorComp)&&(t.error=!0,h(!0))})),g=t(d,p);return l(g)&&(f(g)?r(t.resolved)&&g.then(d,p):f(g.component)&&(g.component.then(d,p),i(g.error)&&(t.errorComp=bn(g.error,e)),i(g.loading)&&(t.loadingComp=bn(g.loading,e),0===g.delay?t.loading=!0:u=setTimeout((function(){u=null,r(t.resolved)&&r(t.error)&&(t.loading=!0,h(!1))}),g.delay||200)),i(g.timeout)&&(c=setTimeout((function(){c=null,r(t.resolved)&&p(null)}),g.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function An(t){return t.isComment&&t.asyncFactory}function Tn(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||An(n)))return n}}function wn(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Mn(t,e)}function Sn(t,e){mn.$on(t,e)}function xn(t,e){mn.$off(t,e)}function Ln(t,e){var n=mn;return function r(){var i=e.apply(null,arguments);null!==i&&n.$off(t,r)}}function Mn(t,e,n){mn=t,_e(e,n||{},Sn,xn,Ln,t),mn=void 0}function kn(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.$on(t[i],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)n.$off(t[r],e);return n}var a,o=n._events[t];if(!o)return n;if(!e)return n._events[t]=null,n;var s=o.length;while(s--)if(a=o[s],a===e||a.fn===e){o.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?C(n):n;for(var r=C(arguments,1),i='event handler for "'+t+'"',a=0,o=n.length;a<o;a++)ne(n[a],e,r,e,i)}return e}}var Cn=null;function Rn(t){var e=Cn;return Cn=t,function(){Cn=e}}function Pn(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function On(t){t.prototype._update=function(t,e){var n=this,r=n.$el,i=n._vnode,a=Rn(n);n._vnode=t,n.$el=i?n.__patch__(i,t):n.__patch__(n.$el,t,e,!1),a(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Un(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Un(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Dn(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=Et),Un(t,"beforeMount"),r=function(){t._update(t._render(),n)},new nr(t,r,O,{before:function(){t._isMounted&&!t._isDestroyed&&Un(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Un(t,"mounted")),t}function In(t,e,r,i,a){var o=i.data.scopedSlots,s=t.$scopedSlots,l=!!(o&&!o.$stable||s!==n&&!s.$stable||o&&t.$scopedSlots.$key!==o.$key),u=!!(a||t.$options._renderChildren||l);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=a,t.$attrs=i.data.attrs||n,t.$listeners=r||n,e&&t.$options.props){kt(!1);for(var c=t._props,h=t.$options._propKeys||[],d=0;d<h.length;d++){var f=h[d],p=t.$options.props;c[f]=qt(f,p,e,t)}kt(!0),t.$options.propsData=e}r=r||n;var g=t.$options._parentListeners;t.$options._parentListeners=r,Mn(t,r,g),u&&(t.$slots=Re(a,i.context),t.$forceUpdate())}function Nn(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Fn(t,e){if(e){if(t._directInactive=!1,Nn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Fn(t.$children[n]);Un(t,"activated")}}function Bn(t,e){if((!e||(t._directInactive=!0,!Nn(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Bn(t.$children[n]);Un(t,"deactivated")}}function Un(t,e){vt();var n=t.$options[e],r=e+" hook";if(n)for(var i=0,a=n.length;i<a;i++)ne(n[i],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),yt()}var jn=[],Vn=[],Gn={},zn=!1,Yn=!1,Hn=0;function $n(){Hn=jn.length=Vn.length=0,Gn={},zn=Yn=!1}var Wn=0,Kn=Date.now;if(q&&!tt){var Xn=window.performance;Xn&&"function"===typeof Xn.now&&Kn()>document.createEvent("Event").timeStamp&&(Kn=function(){return Xn.now()})}function qn(){var t,e;for(Wn=Kn(),Yn=!0,jn.sort((function(t,e){return t.id-e.id})),Hn=0;Hn<jn.length;Hn++)t=jn[Hn],t.before&&t.before(),e=t.id,Gn[e]=null,t.run();var n=Vn.slice(),r=jn.slice();$n(),Qn(n),Zn(r),ut&&G.devtools&&ut.emit("flush")}function Zn(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&Un(r,"updated")}}function Jn(t){t._inactive=!1,Vn.push(t)}function Qn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Fn(t[e],!0)}function tr(t){var e=t.id;if(null==Gn[e]){if(Gn[e]=!0,Yn){var n=jn.length-1;while(n>Hn&&jn[n].id>t.id)n--;jn.splice(n+1,0,t)}else jn.push(t);zn||(zn=!0,pe(qn))}}var er=0,nr=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++er,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ht,this.newDepIds=new ht,this.expression="","function"===typeof e?this.getter=e:(this.getter=W(e),this.getter||(this.getter=O)),this.value=this.lazy?void 0:this.get()};nr.prototype.get=function(){var t;vt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(To){if(!this.user)throw To;ee(To,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&me(t),yt(),this.cleanupDeps()}return t},nr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},nr.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},nr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():tr(this)},nr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||l(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(To){ee(To,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},nr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},nr.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},nr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var rr={enumerable:!0,configurable:!0,get:O,set:O};function ir(t,e,n){rr.get=function(){return this[e][n]},rr.set=function(t){this[e][n]=t},Object.defineProperty(t,n,rr)}function ar(t){t._watchers=[];var e=t.$options;e.props&&or(t,e.props),e.methods&&pr(t,e.methods),e.data?sr(t):Ot(t._data={},!0),e.computed&&cr(t,e.computed),e.watch&&e.watch!==at&&gr(t,e.watch)}function or(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],a=!t.$parent;a||kt(!1);var o=function(a){i.push(a);var o=qt(a,e,n,t);Dt(r,a,o),a in t||ir(t,"_props",a)};for(var s in e)o(s);kt(!0)}function sr(t){var e=t.$options.data;e=t._data="function"===typeof e?lr(e,t):e||{},c(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);while(i--){var a=n[i];0,r&&_(r,a)||Y(a)||ir(t,"_data",a)}Ot(e,!0)}function lr(t,e){vt();try{return t.call(e,e)}catch(To){return ee(To,e,"data()"),{}}finally{yt()}}var ur={lazy:!0};function cr(t,e){var n=t._computedWatchers=Object.create(null),r=lt();for(var i in e){var a=e[i],o="function"===typeof a?a:a.get;0,r||(n[i]=new nr(t,o||O,O,ur)),i in t||hr(t,i,a)}}function hr(t,e,n){var r=!lt();"function"===typeof n?(rr.get=r?dr(e):fr(n),rr.set=O):(rr.get=n.get?r&&!1!==n.cache?dr(e):fr(n.get):O,rr.set=n.set||O),Object.defineProperty(t,e,rr)}function dr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),gt.target&&e.depend(),e.value}}function fr(t){return function(){return t.call(this,this)}}function pr(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?O:k(e[n],t)}function gr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)mr(t,n,r[i]);else mr(t,n,r)}}function mr(t,e,n,r){return c(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function vr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=It,t.prototype.$delete=Nt,t.prototype.$watch=function(t,e,n){var r=this;if(c(e))return mr(r,t,e,n);n=n||{},n.user=!0;var i=new nr(r,t,e,n);if(n.immediate)try{e.call(r,i.value)}catch(a){ee(a,r,'callback for immediate watcher "'+i.expression+'"')}return function(){i.teardown()}}}var yr=0;function br(t){t.prototype._init=function(t){var e=this;e._uid=yr++,e._isVue=!0,t&&t._isComponent?_r(e,t):e.$options=Kt(Er(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Pn(e),wn(e),gn(e),Un(e,"beforeCreate"),ke(e),ar(e),Me(e),Un(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function _r(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function Er(t){var e=t.options;if(t.super){var n=Er(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=Ar(t);i&&R(t.extendOptions,i),e=t.options=Kt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function Ar(t){var e,n=t.options,r=t.sealedOptions;for(var i in n)n[i]!==r[i]&&(e||(e={}),e[i]=n[i]);return e}function Tr(t){this._init(t)}function wr(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=C(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Sr(t){t.mixin=function(t){return this.options=Kt(this.options,t),this}}function xr(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var a=t.name||n.options.name;var o=function(t){this._init(t)};return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.cid=e++,o.options=Kt(n.options,t),o["super"]=n,o.options.props&&Lr(o),o.options.computed&&Mr(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,j.forEach((function(t){o[t]=n[t]})),a&&(o.options.components[a]=o),o.superOptions=n.options,o.extendOptions=t,o.sealedOptions=R({},o.options),i[r]=o,o}}function Lr(t){var e=t.options.props;for(var n in e)ir(t.prototype,"_props",n)}function Mr(t){var e=t.options.computed;for(var n in e)hr(t.prototype,n,e[n])}function kr(t){j.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}function Cr(t){return t&&(t.Ctor.options.name||t.tag)}function Rr(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function Pr(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var a in n){var o=n[a];if(o){var s=Cr(o.componentOptions);s&&!e(s)&&Or(n,a,r,i)}}}function Or(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,y(n,e)}br(Tr),vr(Tr),kn(Tr),On(Tr),yn(Tr);var Dr=[String,RegExp,Array],Ir={name:"keep-alive",abstract:!0,props:{include:Dr,exclude:Dr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Or(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",(function(e){Pr(t,(function(t){return Rr(e,t)}))})),this.$watch("exclude",(function(e){Pr(t,(function(t){return!Rr(e,t)}))}))},render:function(){var t=this.$slots.default,e=Tn(t),n=e&&e.componentOptions;if(n){var r=Cr(n),i=this,a=i.include,o=i.exclude;if(a&&(!r||!Rr(a,r))||o&&r&&Rr(o,r))return e;var s=this,l=s.cache,u=s.keys,c=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;l[c]?(e.componentInstance=l[c].componentInstance,y(u,c),u.push(c)):(l[c]=e,u.push(c),this.max&&u.length>parseInt(this.max)&&Or(l,u[0],u,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Nr={KeepAlive:Ir};function Fr(t){var e={get:function(){return G}};Object.defineProperty(t,"config",e),t.util={warn:ft,extend:R,mergeOptions:Kt,defineReactive:Dt},t.set=It,t.delete=Nt,t.nextTick=pe,t.observable=function(t){return Ot(t),t},t.options=Object.create(null),j.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,R(t.options.components,Nr),wr(t),Sr(t),xr(t),kr(t)}Fr(Tr),Object.defineProperty(Tr.prototype,"$isServer",{get:lt}),Object.defineProperty(Tr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Tr,"FunctionalRenderContext",{value:Ze}),Tr.version="2.6.11";var Br=m("style,class"),Ur=m("input,textarea,option,select,progress"),jr=function(t,e,n){return"value"===n&&Ur(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Vr=m("contenteditable,draggable,spellcheck"),Gr=m("events,caret,typing,plaintext-only"),zr=function(t,e){return Kr(e)||"false"===e?"false":"contenteditable"===t&&Gr(e)?e:"true"},Yr=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Hr="http://www.w3.org/1999/xlink",$r=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Wr=function(t){return $r(t)?t.slice(6,t.length):""},Kr=function(t){return null==t||!1===t};function Xr(t){var e=t.data,n=t,r=t;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=qr(r.data,e));while(i(n=n.parent))n&&n.data&&(e=qr(e,n.data));return Zr(e.staticClass,e.class)}function qr(t,e){return{staticClass:Jr(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Zr(t,e){return i(t)||i(e)?Jr(t,Qr(e)):""}function Jr(t,e){return t?e?t+" "+e:t:e||""}function Qr(t){return Array.isArray(t)?ti(t):l(t)?ei(t):"string"===typeof t?t:""}function ti(t){for(var e,n="",r=0,a=t.length;r<a;r++)i(e=Qr(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function ei(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var ni={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ri=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ii=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ai=function(t){return ri(t)||ii(t)};function oi(t){return ii(t)?"svg":"math"===t?"math":void 0}var si=Object.create(null);function li(t){if(!q)return!0;if(ai(t))return!1;if(t=t.toLowerCase(),null!=si[t])return si[t];var e=document.createElement(t);return t.indexOf("-")>-1?si[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:si[t]=/HTMLUnknownElement/.test(e.toString())}var ui=m("text,number,password,search,email,tel,url");function ci(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function hi(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function di(t,e){return document.createElementNS(ni[t],e)}function fi(t){return document.createTextNode(t)}function pi(t){return document.createComment(t)}function gi(t,e,n){t.insertBefore(e,n)}function mi(t,e){t.removeChild(e)}function vi(t,e){t.appendChild(e)}function yi(t){return t.parentNode}function bi(t){return t.nextSibling}function _i(t){return t.tagName}function Ei(t,e){t.textContent=e}function Ai(t,e){t.setAttribute(e,"")}var Ti=Object.freeze({createElement:hi,createElementNS:di,createTextNode:fi,createComment:pi,insertBefore:gi,removeChild:mi,appendChild:vi,parentNode:yi,nextSibling:bi,tagName:_i,setTextContent:Ei,setStyleScope:Ai}),wi={create:function(t,e){Si(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Si(t,!0),Si(e))},destroy:function(t){Si(t,!0)}};function Si(t,e){var n=t.data.ref;if(i(n)){var r=t.context,a=t.componentInstance||t.elm,o=r.$refs;e?Array.isArray(o[n])?y(o[n],a):o[n]===a&&(o[n]=void 0):t.data.refInFor?Array.isArray(o[n])?o[n].indexOf(a)<0&&o[n].push(a):o[n]=[a]:o[n]=a}}var xi=new bt("",{},[]),Li=["create","activate","update","remove","destroy"];function Mi(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&ki(t,e)||a(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function ki(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,a=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===a||ui(r)&&ui(a)}function Ci(t,e,n){var r,a,o={};for(r=e;r<=n;++r)a=t[r].key,i(a)&&(o[a]=r);return o}function Ri(t){var e,n,o={},l=t.modules,u=t.nodeOps;for(e=0;e<Li.length;++e)for(o[Li[e]]=[],n=0;n<l.length;++n)i(l[n][Li[e]])&&o[Li[e]].push(l[n][Li[e]]);function c(t){return new bt(u.tagName(t).toLowerCase(),{},[],void 0,t)}function h(t,e){function n(){0===--n.listeners&&d(t)}return n.listeners=e,n}function d(t){var e=u.parentNode(t);i(e)&&u.removeChild(e,t)}function f(t,e,n,r,o,s,l){if(i(t.elm)&&i(s)&&(t=s[l]=Tt(t)),t.isRootInsert=!o,!p(t,e,n,r)){var c=t.data,h=t.children,d=t.tag;i(d)?(t.elm=t.ns?u.createElementNS(t.ns,d):u.createElement(d,t),A(t),b(t,h,e),i(c)&&E(t,e),y(n,t.elm,r)):a(t.isComment)?(t.elm=u.createComment(t.text),y(n,t.elm,r)):(t.elm=u.createTextNode(t.text),y(n,t.elm,r))}}function p(t,e,n,r){var o=t.data;if(i(o)){var s=i(t.componentInstance)&&o.keepAlive;if(i(o=o.hook)&&i(o=o.init)&&o(t,!1),i(t.componentInstance))return g(t,e),y(n,t.elm,r),a(s)&&v(t,e,n,r),!0}}function g(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,_(t)?(E(t,e),A(t)):(Si(t),e.push(t))}function v(t,e,n,r){var a,s=t;while(s.componentInstance)if(s=s.componentInstance._vnode,i(a=s.data)&&i(a=a.transition)){for(a=0;a<o.activate.length;++a)o.activate[a](xi,s);e.push(s);break}y(n,t.elm,r)}function y(t,e,n){i(t)&&(i(n)?u.parentNode(n)===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)f(e[r],n,t.elm,null,!0,e,r)}else s(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function _(t){while(t.componentInstance)t=t.componentInstance._vnode;return i(t.tag)}function E(t,n){for(var r=0;r<o.create.length;++r)o.create[r](xi,t);e=t.data.hook,i(e)&&(i(e.create)&&e.create(xi,t),i(e.insert)&&n.push(t))}function A(t){var e;if(i(e=t.fnScopeId))u.setStyleScope(t.elm,e);else{var n=t;while(n)i(e=n.context)&&i(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent}i(e=Cn)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function T(t,e,n,r,i,a){for(;r<=i;++r)f(n[r],a,t,e,!1,n,r)}function w(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<o.destroy.length;++e)o.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)w(t.children[n])}function S(t,e,n){for(;e<=n;++e){var r=t[e];i(r)&&(i(r.tag)?(x(r),w(r)):d(r.elm))}}function x(t,e){if(i(e)||i(t.data)){var n,r=o.remove.length+1;for(i(e)?e.listeners+=r:e=h(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&x(n,e),n=0;n<o.remove.length;++n)o.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else d(t.elm)}function L(t,e,n,a,o){var s,l,c,h,d=0,p=0,g=e.length-1,m=e[0],v=e[g],y=n.length-1,b=n[0],_=n[y],E=!o;while(d<=g&&p<=y)r(m)?m=e[++d]:r(v)?v=e[--g]:Mi(m,b)?(k(m,b,a,n,p),m=e[++d],b=n[++p]):Mi(v,_)?(k(v,_,a,n,y),v=e[--g],_=n[--y]):Mi(m,_)?(k(m,_,a,n,y),E&&u.insertBefore(t,m.elm,u.nextSibling(v.elm)),m=e[++d],_=n[--y]):Mi(v,b)?(k(v,b,a,n,p),E&&u.insertBefore(t,v.elm,m.elm),v=e[--g],b=n[++p]):(r(s)&&(s=Ci(e,d,g)),l=i(b.key)?s[b.key]:M(b,e,d,g),r(l)?f(b,a,t,m.elm,!1,n,p):(c=e[l],Mi(c,b)?(k(c,b,a,n,p),e[l]=void 0,E&&u.insertBefore(t,c.elm,m.elm)):f(b,a,t,m.elm,!1,n,p)),b=n[++p]);d>g?(h=r(n[y+1])?null:n[y+1].elm,T(t,h,n,p,y,a)):p>y&&S(e,d,g)}function M(t,e,n,r){for(var a=n;a<r;a++){var o=e[a];if(i(o)&&Mi(t,o))return a}}function k(t,e,n,s,l,c){if(t!==e){i(e.elm)&&i(s)&&(e=s[l]=Tt(e));var h=e.elm=t.elm;if(a(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?P(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(a(e.isStatic)&&a(t.isStatic)&&e.key===t.key&&(a(e.isCloned)||a(e.isOnce)))e.componentInstance=t.componentInstance;else{var d,f=e.data;i(f)&&i(d=f.hook)&&i(d=d.prepatch)&&d(t,e);var p=t.children,g=e.children;if(i(f)&&_(e)){for(d=0;d<o.update.length;++d)o.update[d](t,e);i(d=f.hook)&&i(d=d.update)&&d(t,e)}r(e.text)?i(p)&&i(g)?p!==g&&L(h,p,g,n,c):i(g)?(i(t.text)&&u.setTextContent(h,""),T(h,null,g,0,g.length-1,n)):i(p)?S(p,0,p.length-1):i(t.text)&&u.setTextContent(h,""):t.text!==e.text&&u.setTextContent(h,e.text),i(f)&&i(d=f.hook)&&i(d=d.postpatch)&&d(t,e)}}}function C(t,e,n){if(a(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var R=m("attrs,class,staticClass,staticStyle,key");function P(t,e,n,r){var o,s=e.tag,l=e.data,u=e.children;if(r=r||l&&l.pre,e.elm=t,a(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(l)&&(i(o=l.hook)&&i(o=o.init)&&o(e,!0),i(o=e.componentInstance)))return g(e,n),!0;if(i(s)){if(i(u))if(t.hasChildNodes())if(i(o=l)&&i(o=o.domProps)&&i(o=o.innerHTML)){if(o!==t.innerHTML)return!1}else{for(var c=!0,h=t.firstChild,d=0;d<u.length;d++){if(!h||!P(h,u[d],n,r)){c=!1;break}h=h.nextSibling}if(!c||h)return!1}else b(e,u,n);if(i(l)){var f=!1;for(var p in l)if(!R(p)){f=!0,E(e,n);break}!f&&l["class"]&&me(l["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!r(e)){var l=!1,h=[];if(r(t))l=!0,f(e,h);else{var d=i(t.nodeType);if(!d&&Mi(t,e))k(t,e,h,null,null,s);else{if(d){if(1===t.nodeType&&t.hasAttribute(U)&&(t.removeAttribute(U),n=!0),a(n)&&P(t,e,h))return C(e,h,!0),t;t=c(t)}var p=t.elm,g=u.parentNode(p);if(f(e,h,p._leaveCb?null:g,u.nextSibling(p)),i(e.parent)){var m=e.parent,v=_(e);while(m){for(var y=0;y<o.destroy.length;++y)o.destroy[y](m);if(m.elm=e.elm,v){for(var b=0;b<o.create.length;++b)o.create[b](xi,m);var E=m.data.hook.insert;if(E.merged)for(var A=1;A<E.fns.length;A++)E.fns[A]()}else Si(m);m=m.parent}}i(g)?S([t],0,0):i(t.tag)&&w(t)}}return C(e,h,l),e.elm}i(t)&&w(t)}}var Pi={create:Oi,update:Oi,destroy:function(t){Oi(t,xi)}};function Oi(t,e){(t.data.directives||e.data.directives)&&Di(t,e)}function Di(t,e){var n,r,i,a=t===xi,o=e===xi,s=Ni(t.data.directives,t.context),l=Ni(e.data.directives,e.context),u=[],c=[];for(n in l)r=s[n],i=l[n],r?(i.oldValue=r.value,i.oldArg=r.arg,Bi(i,"update",e,t),i.def&&i.def.componentUpdated&&c.push(i)):(Bi(i,"bind",e,t),i.def&&i.def.inserted&&u.push(i));if(u.length){var h=function(){for(var n=0;n<u.length;n++)Bi(u[n],"inserted",e,t)};a?Ee(e,"insert",h):h()}if(c.length&&Ee(e,"postpatch",(function(){for(var n=0;n<c.length;n++)Bi(c[n],"componentUpdated",e,t)})),!a)for(n in s)l[n]||Bi(s[n],"unbind",t,t,o)}var Ii=Object.create(null);function Ni(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=Ii),i[Fi(r)]=r,r.def=Xt(e.$options,"directives",r.name,!0);return i}function Fi(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Bi(t,e,n,r,i){var a=t.def&&t.def[e];if(a)try{a(n.elm,t,n,r,i)}catch(To){ee(To,n.context,"directive "+t.name+" "+e+" hook")}}var Ui=[wi,Pi];function ji(t,e){var n=e.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var a,o,s,l=e.elm,u=t.data.attrs||{},c=e.data.attrs||{};for(a in i(c.__ob__)&&(c=e.data.attrs=R({},c)),c)o=c[a],s=u[a],s!==o&&Vi(l,a,o);for(a in(tt||nt)&&c.value!==u.value&&Vi(l,"value",c.value),u)r(c[a])&&($r(a)?l.removeAttributeNS(Hr,Wr(a)):Vr(a)||l.removeAttribute(a))}}function Vi(t,e,n){t.tagName.indexOf("-")>-1?Gi(t,e,n):Yr(e)?Kr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Vr(e)?t.setAttribute(e,zr(e,n)):$r(e)?Kr(n)?t.removeAttributeNS(Hr,Wr(e)):t.setAttributeNS(Hr,e,n):Gi(t,e,n)}function Gi(t,e,n){if(Kr(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var zi={create:ji,update:ji};function Yi(t,e){var n=e.elm,a=e.data,o=t.data;if(!(r(a.staticClass)&&r(a.class)&&(r(o)||r(o.staticClass)&&r(o.class)))){var s=Xr(e),l=n._transitionClasses;i(l)&&(s=Jr(s,Qr(l))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Hi,$i={create:Yi,update:Yi},Wi="__r",Ki="__c";function Xi(t){if(i(t[Wi])){var e=tt?"change":"input";t[e]=[].concat(t[Wi],t[e]||[]),delete t[Wi]}i(t[Ki])&&(t.change=[].concat(t[Ki],t.change||[]),delete t[Ki])}function qi(t,e,n){var r=Hi;return function i(){var a=e.apply(null,arguments);null!==a&&Qi(t,i,n,r)}}var Zi=oe&&!(it&&Number(it[1])<=53);function Ji(t,e,n,r){if(Zi){var i=Wn,a=e;e=a._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=i||t.timeStamp<=0||t.target.ownerDocument!==document)return a.apply(this,arguments)}}Hi.addEventListener(t,e,ot?{capture:n,passive:r}:n)}function Qi(t,e,n,r){(r||Hi).removeEventListener(t,e._wrapper||e,n)}function ta(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};Hi=e.elm,Xi(n),_e(n,i,Ji,Qi,qi,e.context),Hi=void 0}}var ea,na={create:ta,update:ta};function ra(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,a,o=e.elm,s=t.data.domProps||{},l=e.data.domProps||{};for(n in i(l.__ob__)&&(l=e.data.domProps=R({},l)),s)n in l||(o[n]="");for(n in l){if(a=l[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),a===s[n])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===n&&"PROGRESS"!==o.tagName){o._value=a;var u=r(a)?"":String(a);ia(o,u)&&(o.value=u)}else if("innerHTML"===n&&ii(o.tagName)&&r(o.innerHTML)){ea=ea||document.createElement("div"),ea.innerHTML="<svg>"+a+"</svg>";var c=ea.firstChild;while(o.firstChild)o.removeChild(o.firstChild);while(c.firstChild)o.appendChild(c.firstChild)}else if(a!==s[n])try{o[n]=a}catch(To){}}}}function ia(t,e){return!t.composing&&("OPTION"===t.tagName||aa(t,e)||oa(t,e))}function aa(t,e){var n=!0;try{n=document.activeElement!==t}catch(To){}return n&&t.value!==e}function oa(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.number)return g(n)!==g(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var sa={create:ra,update:ra},la=E((function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach((function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}));function ua(t){var e=ca(t.style);return t.staticStyle?R(t.staticStyle,e):e}function ca(t){return Array.isArray(t)?P(t):"string"===typeof t?la(t):t}function ha(t,e){var n,r={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=ua(i.data))&&R(r,n)}(n=ua(t.data))&&R(r,n);var a=t;while(a=a.parent)a.data&&(n=ua(a.data))&&R(r,n);return r}var da,fa=/^--/,pa=/\s*!important$/,ga=function(t,e,n){if(fa.test(e))t.style.setProperty(e,n);else if(pa.test(n))t.style.setProperty(x(e),n.replace(pa,""),"important");else{var r=va(e);if(Array.isArray(n))for(var i=0,a=n.length;i<a;i++)t.style[r]=n[i];else t.style[r]=n}},ma=["Webkit","Moz","ms"],va=E((function(t){if(da=da||document.createElement("div").style,t=T(t),"filter"!==t&&t in da)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<ma.length;n++){var r=ma[n]+e;if(r in da)return r}}));function ya(t,e){var n=e.data,a=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(a.staticStyle)&&r(a.style))){var o,s,l=e.elm,u=a.staticStyle,c=a.normalizedStyle||a.style||{},h=u||c,d=ca(e.data.style)||{};e.data.normalizedStyle=i(d.__ob__)?R({},d):d;var f=ha(e,!0);for(s in h)r(f[s])&&ga(l,s,"");for(s in f)o=f[s],o!==h[s]&&ga(l,s,null==o?"":o)}}var ba={create:ya,update:ya},_a=/\s+/;function Ea(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(_a).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Aa(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(_a).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Ta(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&R(e,wa(t.name||"v")),R(e,t),e}return"string"===typeof t?wa(t):void 0}}var wa=E((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Sa=q&&!et,xa="transition",La="animation",Ma="transition",ka="transitionend",Ca="animation",Ra="animationend";Sa&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ma="WebkitTransition",ka="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ca="WebkitAnimation",Ra="webkitAnimationEnd"));var Pa=q?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Oa(t){Pa((function(){Pa(t)}))}function Da(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Ea(t,e))}function Ia(t,e){t._transitionClasses&&y(t._transitionClasses,e),Aa(t,e)}function Na(t,e,n){var r=Ba(t,e),i=r.type,a=r.timeout,o=r.propCount;if(!i)return n();var s=i===xa?ka:Ra,l=0,u=function(){t.removeEventListener(s,c),n()},c=function(e){e.target===t&&++l>=o&&u()};setTimeout((function(){l<o&&u()}),a+1),t.addEventListener(s,c)}var Fa=/\b(transform|all)(,|$)/;function Ba(t,e){var n,r=window.getComputedStyle(t),i=(r[Ma+"Delay"]||"").split(", "),a=(r[Ma+"Duration"]||"").split(", "),o=Ua(i,a),s=(r[Ca+"Delay"]||"").split(", "),l=(r[Ca+"Duration"]||"").split(", "),u=Ua(s,l),c=0,h=0;e===xa?o>0&&(n=xa,c=o,h=a.length):e===La?u>0&&(n=La,c=u,h=l.length):(c=Math.max(o,u),n=c>0?o>u?xa:La:null,h=n?n===xa?a.length:l.length:0);var d=n===xa&&Fa.test(r[Ma+"Property"]);return{type:n,timeout:c,propCount:h,hasTransform:d}}function Ua(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return ja(e)+ja(t[n])})))}function ja(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Va(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var a=Ta(t.data.transition);if(!r(a)&&!i(n._enterCb)&&1===n.nodeType){var o=a.css,s=a.type,u=a.enterClass,c=a.enterToClass,h=a.enterActiveClass,d=a.appearClass,f=a.appearToClass,p=a.appearActiveClass,m=a.beforeEnter,v=a.enter,y=a.afterEnter,b=a.enterCancelled,_=a.beforeAppear,E=a.appear,A=a.afterAppear,T=a.appearCancelled,w=a.duration,S=Cn,x=Cn.$vnode;while(x&&x.parent)S=x.context,x=x.parent;var L=!S._isMounted||!t.isRootInsert;if(!L||E||""===E){var M=L&&d?d:u,k=L&&p?p:h,C=L&&f?f:c,R=L&&_||m,P=L&&"function"===typeof E?E:v,O=L&&A||y,D=L&&T||b,I=g(l(w)?w.enter:w);0;var N=!1!==o&&!et,F=Ya(P),U=n._enterCb=B((function(){N&&(Ia(n,C),Ia(n,k)),U.cancelled?(N&&Ia(n,M),D&&D(n)):O&&O(n),n._enterCb=null}));t.data.show||Ee(t,"insert",(function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),P&&P(n,U)})),R&&R(n),N&&(Da(n,M),Da(n,k),Oa((function(){Ia(n,M),U.cancelled||(Da(n,C),F||(za(I)?setTimeout(U,I):Na(n,s,U)))}))),t.data.show&&(e&&e(),P&&P(n,U)),N||F||U()}}}function Ga(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var a=Ta(t.data.transition);if(r(a)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var o=a.css,s=a.type,u=a.leaveClass,c=a.leaveToClass,h=a.leaveActiveClass,d=a.beforeLeave,f=a.leave,p=a.afterLeave,m=a.leaveCancelled,v=a.delayLeave,y=a.duration,b=!1!==o&&!et,_=Ya(f),E=g(l(y)?y.leave:y);0;var A=n._leaveCb=B((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(Ia(n,c),Ia(n,h)),A.cancelled?(b&&Ia(n,u),m&&m(n)):(e(),p&&p(n)),n._leaveCb=null}));v?v(T):T()}function T(){A.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),b&&(Da(n,u),Da(n,h),Oa((function(){Ia(n,u),A.cancelled||(Da(n,c),_||(za(E)?setTimeout(A,E):Na(n,s,A)))}))),f&&f(n,A),b||_||A())}}function za(t){return"number"===typeof t&&!isNaN(t)}function Ya(t){if(r(t))return!1;var e=t.fns;return i(e)?Ya(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Ha(t,e){!0!==e.data.show&&Va(e)}var $a=q?{create:Ha,activate:Ha,remove:function(t,e){!0!==t.data.show?Ga(t,e):e()}}:{},Wa=[zi,$i,na,sa,ba,$a],Ka=Wa.concat(Ui),Xa=Ri({nodeOps:Ti,modules:Ka});et&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ro(t,"input")}));var qa={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?Ee(n,"postpatch",(function(){qa.componentUpdated(t,e,n)})):Za(t,e,n.context),t._vOptions=[].map.call(t.options,to)):("textarea"===n.tag||ui(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",eo),t.addEventListener("compositionend",no),t.addEventListener("change",no),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Za(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,to);if(i.some((function(t,e){return!N(t,r[e])}))){var a=t.multiple?e.value.some((function(t){return Qa(t,i)})):e.value!==e.oldValue&&Qa(e.value,i);a&&ro(t,"change")}}}};function Za(t,e,n){Ja(t,e,n),(tt||nt)&&setTimeout((function(){Ja(t,e,n)}),0)}function Ja(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var a,o,s=0,l=t.options.length;s<l;s++)if(o=t.options[s],i)a=F(r,to(o))>-1,o.selected!==a&&(o.selected=a);else if(N(to(o),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));i||(t.selectedIndex=-1)}}function Qa(t,e){return e.every((function(e){return!N(e,t)}))}function to(t){return"_value"in t?t._value:t.value}function eo(t){t.target.composing=!0}function no(t){t.target.composing&&(t.target.composing=!1,ro(t.target,"input"))}function ro(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function io(t){return!t.componentInstance||t.data&&t.data.transition?t:io(t.componentInstance._vnode)}var ao={bind:function(t,e,n){var r=e.value;n=io(n);var i=n.data&&n.data.transition,a=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,Va(n,(function(){t.style.display=a}))):t.style.display=r?a:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(!r!==!i){n=io(n);var a=n.data&&n.data.transition;a?(n.data.show=!0,r?Va(n,(function(){t.style.display=t.__vOriginalDisplay})):Ga(n,(function(){t.style.display="none"}))):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},oo={model:qa,show:ao},so={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function lo(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?lo(Tn(e.children)):t}function uo(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var a in i)e[T(a)]=i[a];return e}function co(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function ho(t){while(t=t.parent)if(t.data.transition)return!0}function fo(t,e){return e.key===t.key&&e.tag===t.tag}var po=function(t){return t.tag||An(t)},go=function(t){return"show"===t.name},mo={name:"transition",props:so,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(po),n.length)){0;var r=this.mode;0;var i=n[0];if(ho(this.$vnode))return i;var a=lo(i);if(!a)return i;if(this._leaving)return co(t,i);var o="__transition-"+this._uid+"-";a.key=null==a.key?a.isComment?o+"comment":o+a.tag:s(a.key)?0===String(a.key).indexOf(o)?a.key:o+a.key:a.key;var l=(a.data||(a.data={})).transition=uo(this),u=this._vnode,c=lo(u);if(a.data.directives&&a.data.directives.some(go)&&(a.data.show=!0),c&&c.data&&!fo(a,c)&&!An(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var h=c.data.transition=R({},l);if("out-in"===r)return this._leaving=!0,Ee(h,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),co(t,i);if("in-out"===r){if(An(a))return u;var d,f=function(){d()};Ee(l,"afterEnter",f),Ee(l,"enterCancelled",f),Ee(h,"delayLeave",(function(t){d=t}))}}return i}}},vo=R({tag:String,moveClass:String},so);delete vo.mode;var yo={props:vo,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var i=Rn(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,i(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],a=this.children=[],o=uo(this),s=0;s<i.length;s++){var l=i[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))a.push(l),n[l.key]=l,(l.data||(l.data={})).transition=o;else;}if(r){for(var u=[],c=[],h=0;h<r.length;h++){var d=r[h];d.data.transition=o,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?u.push(d):c.push(d)}this.kept=t(e,null,u),this.removed=c}return t(e,null,a)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(bo),t.forEach(_o),t.forEach(Eo),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,r=n.style;Da(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(ka,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(ka,t),n._moveCb=null,Ia(n,e))})}})))},methods:{hasMove:function(t,e){if(!Sa)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){Aa(n,t)})),Ea(n,e),n.style.display="none",this.$el.appendChild(n);var r=Ba(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function bo(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function _o(t){t.data.newPos=t.elm.getBoundingClientRect()}function Eo(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var a=t.elm.style;a.transform=a.WebkitTransform="translate("+r+"px,"+i+"px)",a.transitionDuration="0s"}}var Ao={Transition:mo,TransitionGroup:yo};Tr.config.mustUseProp=jr,Tr.config.isReservedTag=ai,Tr.config.isReservedAttr=Br,Tr.config.getTagNamespace=oi,Tr.config.isUnknownElement=li,R(Tr.options.directives,oo),R(Tr.options.components,Ao),Tr.prototype.__patch__=q?Xa:O,Tr.prototype.$mount=function(t,e){return t=t&&q?ci(t):void 0,Dn(this,t,e)},q&&setTimeout((function(){G.devtools&&ut&&ut.emit("init",Tr)}),0),e["a"]=Tr}).call(this,n("c8ba"))},"2cf4":function(t,e,n){var r,i,a,o=n("da84"),s=n("d039"),l=n("c6b6"),u=n("0366"),c=n("1be4"),h=n("cc12"),d=n("1cdc"),f=o.location,p=o.setImmediate,g=o.clearImmediate,m=o.process,v=o.MessageChannel,y=o.Dispatch,b=0,_={},E="onreadystatechange",A=function(t){if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},T=function(t){return function(){A(t)}},w=function(t){A(t.data)},S=function(t){o.postMessage(t+"",f.protocol+"//"+f.host)};p&&g||(p=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return _[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(b),b},g=function(t){delete _[t]},"process"==l(m)?r=function(t){m.nextTick(T(t))}:y&&y.now?r=function(t){y.now(T(t))}:v&&!d?(i=new v,a=i.port2,i.port1.onmessage=w,r=u(a.postMessage,a,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||s(S)||"file:"===f.protocol?r=E in h("script")?function(t){c.appendChild(h("script"))[E]=function(){c.removeChild(this),A(t)}}:function(t){setTimeout(T(t),0)}:(r=S,o.addEventListener("message",w,!1))),t.exports={set:p,clear:g}},"2d00":function(t,e,n){var r,i,a=n("da84"),o=n("342f"),s=a.process,l=s&&s.versions,u=l&&l.v8;u?(r=u.split("."),i=r[0]+r[1]):o&&(r=o.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/),r&&(i=r[1]))),t.exports=i&&+i},"2f62":function(t,e,n){"use strict";(function(t){
/*!
 * vuex v3.5.1
 * (c) 2020 Evan You
 * @license MIT
 */
function r(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:r});else{var n=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[r].concat(t.init):r,n.call(this,t)}}function r(){var t=this.$options;t.store?this.$store="function"===typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}n.d(e,"b",(function(){return N})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return O}));var i="undefined"!==typeof window?window:"undefined"!==typeof t?t:{},a=i.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(t){a&&(t._devtoolHook=a,a.emit("vuex:init",t),a.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){a.emit("vuex:mutation",t,e)}),{prepend:!0}),t.subscribeAction((function(t,e){a.emit("vuex:action",t,e)}),{prepend:!0}))}function s(t,e){return t.filter(e)[0]}function l(t,e){if(void 0===e&&(e=[]),null===t||"object"!==typeof t)return t;var n=s(e,(function(e){return e.original===t}));if(n)return n.copy;var r=Array.isArray(t)?[]:{};return e.push({original:t,copy:r}),Object.keys(t).forEach((function(n){r[n]=l(t[n],e)})),r}function u(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function c(t){return null!==t&&"object"===typeof t}function h(t){return t&&"function"===typeof t.then}function d(t,e){return function(){return t(e)}}var f=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},p={namespaced:{configurable:!0}};p.namespaced.get=function(){return!!this._rawModule.namespaced},f.prototype.addChild=function(t,e){this._children[t]=e},f.prototype.removeChild=function(t){delete this._children[t]},f.prototype.getChild=function(t){return this._children[t]},f.prototype.hasChild=function(t){return t in this._children},f.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},f.prototype.forEachChild=function(t){u(this._children,t)},f.prototype.forEachGetter=function(t){this._rawModule.getters&&u(this._rawModule.getters,t)},f.prototype.forEachAction=function(t){this._rawModule.actions&&u(this._rawModule.actions,t)},f.prototype.forEachMutation=function(t){this._rawModule.mutations&&u(this._rawModule.mutations,t)},Object.defineProperties(f.prototype,p);var g=function(t){this.register([],t,!1)};function m(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return void 0;m(t.concat(r),e.getChild(r),n.modules[r])}}g.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},g.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},g.prototype.update=function(t){m([],this.root,t)},g.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var i=new f(e,n);if(0===t.length)this.root=i;else{var a=this.get(t.slice(0,-1));a.addChild(t[t.length-1],i)}e.modules&&u(e.modules,(function(e,i){r.register(t.concat(i),e,n)}))},g.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},g.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return e.hasChild(n)};var v;var y=function(t){var e=this;void 0===t&&(t={}),!v&&"undefined"!==typeof window&&window.Vue&&P(window.Vue);var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new g(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new v,this._makeLocalGettersCache=Object.create(null);var i=this,a=this,s=a.dispatch,l=a.commit;this.dispatch=function(t,e){return s.call(i,t,e)},this.commit=function(t,e,n){return l.call(i,t,e,n)},this.strict=r;var u=this._modules.root.state;T(this,u,[],this._modules.root),A(this,u),n.forEach((function(t){return t(e)}));var c=void 0!==t.devtools?t.devtools:v.config.devtools;c&&o(this)},b={state:{configurable:!0}};function _(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function E(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;T(t,n,[],t._modules.root,!0),A(t,n,e)}function A(t,e,n){var r=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,a={};u(i,(function(e,n){a[n]=d(e,t),Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})}));var o=v.config.silent;v.config.silent=!0,t._vm=new v({data:{$$state:e},computed:a}),v.config.silent=o,t.strict&&k(t),r&&(n&&t._withCommit((function(){r._data.$$state=null})),v.nextTick((function(){return r.$destroy()})))}function T(t,e,n,r,i){var a=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!a&&!i){var s=C(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit((function(){v.set(s,l,r.state)}))}var u=r.context=w(t,o,n);r.forEachMutation((function(e,n){var r=o+n;x(t,r,e,u)})),r.forEachAction((function(e,n){var r=e.root?n:o+n,i=e.handler||e;L(t,r,i,u)})),r.forEachGetter((function(e,n){var r=o+n;M(t,r,e,u)})),r.forEachChild((function(r,a){T(t,e,n.concat(a),r,i)}))}function w(t,e,n){var r=""===e,i={dispatch:r?t.dispatch:function(n,r,i){var a=R(n,r,i),o=a.payload,s=a.options,l=a.type;return s&&s.root||(l=e+l),t.dispatch(l,o)},commit:r?t.commit:function(n,r,i){var a=R(n,r,i),o=a.payload,s=a.options,l=a.type;s&&s.root||(l=e+l),t.commit(l,o,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return t.getters}:function(){return S(t,e)}},state:{get:function(){return C(t.state,n)}}}),i}function S(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(i){if(i.slice(0,r)===e){var a=i.slice(r);Object.defineProperty(n,a,{get:function(){return t.getters[i]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function x(t,e,n,r){var i=t._mutations[e]||(t._mutations[e]=[]);i.push((function(e){n.call(t,r.state,e)}))}function L(t,e,n,r){var i=t._actions[e]||(t._actions[e]=[]);i.push((function(e){var i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return h(i)||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}function M(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)})}function k(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function C(t,e){return e.reduce((function(t,e){return t[e]}),t)}function R(t,e,n){return c(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}function P(t){v&&t===v||(v=t,r(v))}b.state.get=function(){return this._vm._data.$$state},b.state.set=function(t){0},y.prototype.commit=function(t,e,n){var r=this,i=R(t,e,n),a=i.type,o=i.payload,s=(i.options,{type:a,payload:o}),l=this._mutations[a];l&&(this._withCommit((function(){l.forEach((function(t){t(o)}))})),this._subscribers.slice().forEach((function(t){return t(s,r.state)})))},y.prototype.dispatch=function(t,e){var n=this,r=R(t,e),i=r.type,a=r.payload,o={type:i,payload:a},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(o,n.state)}))}catch(u){0}var l=s.length>1?Promise.all(s.map((function(t){return t(a)}))):s[0](a);return new Promise((function(t,e){l.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(o,n.state)}))}catch(u){0}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(o,n.state,t)}))}catch(u){0}e(t)}))}))}},y.prototype.subscribe=function(t,e){return _(t,this._subscribers,e)},y.prototype.subscribeAction=function(t,e){var n="function"===typeof t?{before:t}:t;return _(n,this._actionSubscribers,e)},y.prototype.watch=function(t,e,n){var r=this;return this._watcherVM.$watch((function(){return t(r.state,r.getters)}),e,n)},y.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},y.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),T(this,this.state,t,this._modules.get(t),n.preserveState),A(this,this.state)},y.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=C(e.state,t.slice(0,-1));v.delete(n,t[t.length-1])})),E(this)},y.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),this._modules.isRegistered(t)},y.prototype.hotUpdate=function(t){this._modules.update(t),E(this,!0)},y.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(y.prototype,b);var O=j((function(t,e){var n={};return B(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var r=V(this.$store,"mapState",t);if(!r)return;e=r.context.state,n=r.context.getters}return"function"===typeof i?i.call(this,e,n):e[i]},n[r].vuex=!0})),n})),D=j((function(t,e){var n={};return B(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.commit;if(t){var a=V(this.$store,"mapMutations",t);if(!a)return;r=a.context.commit}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n})),I=j((function(t,e){var n={};return B(e).forEach((function(e){var r=e.key,i=e.val;i=t+i,n[r]=function(){if(!t||V(this.$store,"mapGetters",t))return this.$store.getters[i]},n[r].vuex=!0})),n})),N=j((function(t,e){var n={};return B(e).forEach((function(e){var r=e.key,i=e.val;n[r]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var r=this.$store.dispatch;if(t){var a=V(this.$store,"mapActions",t);if(!a)return;r=a.context.dispatch}return"function"===typeof i?i.apply(this,[r].concat(e)):r.apply(this.$store,[i].concat(e))}})),n})),F=function(t){return{mapState:O.bind(null,t),mapGetters:I.bind(null,t),mapMutations:D.bind(null,t),mapActions:N.bind(null,t)}};function B(t){return U(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function U(t){return Array.isArray(t)||c(t)}function j(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function V(t,e,n){var r=t._modulesNamespaceMap[n];return r}function G(t){void 0===t&&(t={});var e=t.collapsed;void 0===e&&(e=!0);var n=t.filter;void 0===n&&(n=function(t,e,n){return!0});var r=t.transformer;void 0===r&&(r=function(t){return t});var i=t.mutationTransformer;void 0===i&&(i=function(t){return t});var a=t.actionFilter;void 0===a&&(a=function(t,e){return!0});var o=t.actionTransformer;void 0===o&&(o=function(t){return t});var s=t.logMutations;void 0===s&&(s=!0);var u=t.logActions;void 0===u&&(u=!0);var c=t.logger;return void 0===c&&(c=console),function(t){var h=l(t.state);"undefined"!==typeof c&&(s&&t.subscribe((function(t,a){var o=l(a);if(n(t,h,o)){var s=H(),u=i(t),d="mutation "+t.type+s;z(c,d,e),c.log("%c prev state","color: #9E9E9E; font-weight: bold",r(h)),c.log("%c mutation","color: #03A9F4; font-weight: bold",u),c.log("%c next state","color: #4CAF50; font-weight: bold",r(o)),Y(c)}h=o})),u&&t.subscribeAction((function(t,n){if(a(t,n)){var r=H(),i=o(t),s="action "+t.type+r;z(c,s,e),c.log("%c action","color: #03A9F4; font-weight: bold",i),Y(c)}})))}}function z(t,e,n){var r=n?t.groupCollapsed:t.group;try{r.call(t,e)}catch(i){t.log(e)}}function Y(t){try{t.groupEnd()}catch(e){t.log(" log end ")}}function H(){var t=new Date;return" @ "+W(t.getHours(),2)+":"+W(t.getMinutes(),2)+":"+W(t.getSeconds(),2)+"."+W(t.getMilliseconds(),3)}function $(t,e){return new Array(e+1).join(t)}function W(t,e){return $("0",e-t.toString().length)+t}var K={Store:y,install:P,version:"3.5.1",mapState:O,mapMutations:D,mapGetters:I,mapActions:N,createNamespacedHelpers:F,createLogger:G};e["a"]=K}).call(this,n("c8ba"))},"342f":function(t,e,n){var r=n("d066");t.exports=r("navigator","userAgent")||""},"35a1":function(t,e,n){var r=n("f5df"),i=n("3f8c"),a=n("b622"),o=a("iterator");t.exports=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},"36f2":function(t,e,n){!function(e,r){t.exports=r(n("aff4"))}(0,(function(t){"use strict";function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var a=function(){var t=/iphone.*(7|8|9)_[0-9]/i.test(navigator.userAgent),e=/(iPhone|iPod).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);return t||e},o=function(){return/trident|edge/i.test(navigator.userAgent)};function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}var g,m,v,y,b,_,E,A,T,w,S,x,L,M,k,C,R,P,O,D,I,N,F,B,U,j,V,G,z,Y,H,$,W,K,X,q,Z,J,Q,tt,et,nt,rt,it,at,ot,st,lt,ut,ct,ht,dt,ft,pt,gt,mt,vt,yt,bt,_t,Et,At,Tt,wt,St,xt,Lt,Mt,kt,Ct,Rt,Pt,Ot,Dt,It,Nt,Ft,Bt,Ut,jt,Vt,Gt,zt,Yt,Ht,$t,Wt,Kt,Xt,qt,Zt,Jt,Qt,te,ee,ne,re,ie,ae,oe,se,le,ue,ce,he,de,fe,pe,ge,me,ve,ye,be,_e,Ee,Ae,Te,we,Se,xe,Le,Me,ke,Ce,Re,Pe,Oe,De,Ie,Ne,Fe,Be={REVISION:"75"},Ue=Be;function je(t,e,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function Ve(t,e,n,r,i,a,o){return Be.Triangle.barycoordFromPoint(t,e,n,r,Me),i.multiplyScalar(Me.x),a.multiplyScalar(Me.y),o.multiplyScalar(Me.z),i.add(a).add(o),i.clone()}function Ge(t,e,n,r,i,a,o){var s=t.material;if(null===(s.side===Be.BackSide?n.intersectTriangle(a,i,r,!0,o):n.intersectTriangle(r,i,a,s.side!==Be.DoubleSide,o)))return null;Ce.copy(o),Ce.applyMatrix4(t.matrixWorld);var l=e.ray.origin.distanceTo(Ce);return l<e.near||l>e.far?null:{distance:l,point:Ce.clone(),object:t}}function ze(t,e,n,r,i,a,o,s){be.fromArray(r,3*a),_e.fromArray(r,3*o),Ee.fromArray(r,3*s);var l=Ge(t,e,n,be,_e,Ee,ke);return l&&(i&&(Se.fromArray(i,2*a),xe.fromArray(i,2*o),Le.fromArray(i,2*s),l.uv=Ve(ke,be,_e,Ee,Se,xe,Le)),l.face=new Be.Face3(a,o,s,Be.Triangle.normal(be,_e,Ee)),l.faceIndex=a),l}function Ye(t){switch(t){case Be.LinearEncoding:return["Linear","( value )"];case Be.sRGBEncoding:return["sRGB","( value )"];case Be.RGBEEncoding:return["RGBE","( value )"];case Be.RGBM7Encoding:return["RGBM","( value, 7.0 )"];case Be.RGBM16Encoding:return["RGBM","( value, 16.0 )"];case Be.RGBDEncoding:return["RGBD","( value, 256.0 )"];case Be.GammaEncoding:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function He(t,e){var n=Ye(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function $e(t){return""!==t}function We(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Ke(t){return t.replace(/#include +<([\w\d.]+)>/g,(function(t,e){var n=Be.ShaderChunk[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ke(n)}))}function Xe(t){return t.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(t,e,n,r){for(var i="",a=parseInt(e);a<parseInt(n);a++)i+=r.replace(/\[ i \]/g,"[ "+a+" ]");return i}))}function qe(t){return--t*t*(2.70158*t+1.70158)+1}function Ze(t){return new(a()?rn:o()?nn:en)(t)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:0<t?1:+t}),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&Object.defineProperty(Object,"assign",{writable:!0,configurable:!0,value:function(t){if(null==t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),n=1,r=arguments.length;n!==r;++n){var i=arguments[n];if(null!=i){i=Object(i);for(var a=Object.keys(i),o=0,s=a.length;o!==s;++o){var l=a[o],u=Object.getOwnPropertyDescriptor(i,l);void 0!==u&&u.enumerable&&(e[l]=i[l])}}}return e}}),Be.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},Be.CullFaceNone=0,Be.CullFaceBack=1,Be.CullFaceFront=2,Be.CullFaceFrontBack=3,Be.FrontFaceDirectionCW=0,Be.FrontFaceDirectionCCW=1,Be.BasicShadowMap=0,Be.PCFShadowMap=1,Be.PCFSoftShadowMap=2,Be.FrontSide=0,Be.BackSide=1,Be.DoubleSide=2,Be.FlatShading=1,Be.SmoothShading=2,Be.NoColors=0,Be.FaceColors=1,Be.VertexColors=2,Be.NoBlending=0,Be.NormalBlending=1,Be.AdditiveBlending=2,Be.SubtractiveBlending=3,Be.MultiplyBlending=4,Be.CustomBlending=5,Be.AddEquation=100,Be.SubtractEquation=101,Be.ReverseSubtractEquation=102,Be.MinEquation=103,Be.MaxEquation=104,Be.ZeroFactor=200,Be.OneFactor=201,Be.SrcColorFactor=202,Be.OneMinusSrcColorFactor=203,Be.SrcAlphaFactor=204,Be.OneMinusSrcAlphaFactor=205,Be.DstAlphaFactor=206,Be.OneMinusDstAlphaFactor=207,Be.DstColorFactor=208,Be.OneMinusDstColorFactor=209,Be.SrcAlphaSaturateFactor=210,Be.NeverDepth=0,Be.AlwaysDepth=1,Be.LessDepth=2,Be.LessEqualDepth=3,Be.EqualDepth=4,Be.GreaterEqualDepth=5,Be.GreaterDepth=6,Be.NotEqualDepth=7,Be.MultiplyOperation=0,Be.MixOperation=1,Be.AddOperation=2,Be.NoToneMapping=0,Be.LinearToneMapping=1,Be.ReinhardToneMapping=2,Be.Uncharted2ToneMapping=3,Be.CineonToneMapping=4,Be.UVMapping=300,Be.CubeReflectionMapping=301,Be.CubeRefractionMapping=302,Be.EquirectangularReflectionMapping=303,Be.EquirectangularRefractionMapping=304,Be.SphericalReflectionMapping=305,Be.CubeUVReflectionMapping=306,Be.CubeUVRefractionMapping=307,Be.RepeatWrapping=1e3,Be.ClampToEdgeWrapping=1001,Be.MirroredRepeatWrapping=1002,Be.NearestFilter=1003,Be.NearestMipMapNearestFilter=1004,Be.NearestMipMapLinearFilter=1005,Be.LinearFilter=1006,Be.LinearMipMapNearestFilter=1007,Be.LinearMipMapLinearFilter=1008,Be.UnsignedByteType=1009,Be.ByteType=1010,Be.ShortType=1011,Be.UnsignedShortType=1012,Be.IntType=1013,Be.UnsignedIntType=1014,Be.FloatType=1015,Be.HalfFloatType=1025,Be.UnsignedShort4444Type=1016,Be.UnsignedShort5551Type=1017,Be.UnsignedShort565Type=1018,Be.AlphaFormat=1019,Be.RGBFormat=1020,Be.RGBAFormat=1021,Be.LuminanceFormat=1022,Be.LuminanceAlphaFormat=1023,Be.RGBEFormat=Be.RGBAFormat,Be.RGB_S3TC_DXT1_Format=2001,Be.RGBA_S3TC_DXT1_Format=2002,Be.RGBA_S3TC_DXT3_Format=2003,Be.RGBA_S3TC_DXT5_Format=2004,Be.RGB_PVRTC_4BPPV1_Format=2100,Be.RGB_PVRTC_2BPPV1_Format=2101,Be.RGBA_PVRTC_4BPPV1_Format=2102,Be.RGBA_PVRTC_2BPPV1_Format=2103,Be.RGB_ETC1_Format=2151,Be.LoopOnce=2200,Be.LoopRepeat=2201,Be.LoopPingPong=2202,Be.InterpolateDiscrete=2300,Be.InterpolateLinear=2301,Be.InterpolateSmooth=2302,Be.ZeroCurvatureEnding=2400,Be.ZeroSlopeEnding=2401,Be.WrapAroundEnding=2402,Be.TrianglesDrawMode=0,Be.TriangleStripDrawMode=1,Be.TriangleFanDrawMode=2,Be.LinearEncoding=3e3,Be.sRGBEncoding=3001,Be.GammaEncoding=3007,Be.RGBEEncoding=3002,Be.LogLuvEncoding=3003,Be.RGBM7Encoding=3004,Be.RGBM16Encoding=3005,Be.RGBDEncoding=3006,Be.Math={generateUUID:(y="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=new Array(36),_=0,function(){for(var t=0;t<36;t++)8===t||13===t||18===t||23===t?b[t]="-":14===t?b[t]="4":(_<=2&&(_=33554432+16777216*Math.random()|0),v=15&_,_>>=4,b[t]=y[19===t?3&v|8:v]);return b.join("")}),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:n<=t?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},random16:function(){return Math.random()},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:(m=Math.PI/180,function(t){return t*m}),radToDeg:(g=180/Math.PI,function(t){return t*g}),isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}},Be.Color=function(t){return 3===arguments.length?this.fromArray(arguments):this.set(t)},Be.Color.prototype={constructor:Be.Color,r:1,g:1,b:1,set:function(t){return t instanceof Be.Color?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){this.r=t,this.g=t,this.b=t},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=Be.Math.euclideanModulo(t,1),e=Be.Math.clamp(e,0,1),n=Be.Math.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=je(i,r,t+1/3),this.g=je(i,r,t),this.b=je(i,r,t-1/3)}return this},setStyle:function(t){var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=e[1],i=e[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,n[5],this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,n[5],this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(i)){var a=parseFloat(n[1])/360,o=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100;return n[5],this.setHSL(a,o,s)}}}else if(e=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,u=(l=e[1]).length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&0<t.length&&void 0!==(l=Be.ColorKeywords[t])&&this.setHex(l),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=0<e?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(){var t=this.r,e=this.g,n=this.b;return this.r=t*t,this.g=e*e,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,n,r=t||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(l+s)/2;if(l===s)n=e=0;else{var c=s-l;switch(n=u<=.5?c/(s+l):c/(2-s-l),s){case i:e=(a-o)/c+(a<o?6:0);break;case a:e=(o-i)/c+2;break;case o:e=(i-a)/c+4}e/=6}return r.h=e,r.s=n,r.l=u,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){var r=this.getHSL();return r.h+=t,r.s+=e,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},Be.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Be.Vector2=function(t,e){this.x=t||0,this.y=e||0},Be.Vector2.prototype={constructor:Be.Vector2,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return void 0===E&&(E=new Be.Vector2,A=new Be.Vector2),E.set(t,t),A.set(e,e),this.clamp(E,A)},clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,a=this.y-t.y;return this.x=i*n-a*r+t.x,this.y=i*r+a*n+t.y,this}},Be.Vector3=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},Be.Vector3.prototype={constructor:Be.Vector3,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return void 0===P&&(P=new Be.Quaternion),this.applyQuaternion(P.setFromEuler(t)),this},applyAxisAngle:function(t,e){return void 0===R&&(R=new Be.Quaternion),this.applyQuaternion(R.setFromAxisAngle(t,e)),this},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,a=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,a=t.y,o=t.z,s=t.w,l=s*e+a*r-o*n,u=s*n+o*e-i*r,c=s*r+i*n-a*e,h=-i*e-a*n-o*r;return this.x=l*s+h*-i+u*-o-c*-a,this.y=u*s+h*-a+c*-i-l*-o,this.z=c*s+h*-o+l*-a-u*-i,this},project:function(t){return void 0===C&&(C=new Be.Matrix4),C.multiplyMatrices(t.projectionMatrix,C.getInverse(t.matrixWorld)),this.applyProjection(C)},unproject:function(t){return void 0===k&&(k=new Be.Matrix4),k.multiplyMatrices(t.matrixWorld,k.getInverse(t.projectionMatrix)),this.applyProjection(k)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return void 0===L&&(L=new Be.Vector3,M=new Be.Vector3),L.set(t,t,t),M.set(e,e,e),this.clamp(L,M)},clampLength:function(t,e){var n=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,n))/n),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},cross:function(t,e){if(void 0!==e)return this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,a=e.x,o=e.y,s=e.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(t){return void 0===S&&(S=new Be.Vector3),S.copy(t).normalize(),x=this.dot(S),this.copy(S).multiplyScalar(x)},projectOnPlane:function(t){return void 0===w&&(w=new Be.Vector3),w.copy(this).projectOnVector(t),this.sub(w)},reflect:function(t){return void 0===T&&(T=new Be.Vector3),this.sub(T.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(Be.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return"number"==typeof t&&(t=arguments[1],e=arguments[0]),this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}},Be.Vector4=function(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1},Be.Vector4.prototype={constructor:Be.Vector4,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*e+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*e+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*e+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,a=t.elements,o=a[0],s=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(s-u)<.01&&Math.abs(l-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(l+d)<.1&&Math.abs(h+f)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var g=(o+1)/2,m=(c+1)/2,v=(p+1)/2,y=(s+u)/4,b=(l+d)/4,_=(h+f)/4;return m<g&&v<g?i=g<.01?(n=0,r=.707106781):(r=y/(n=Math.sqrt(g)),b/n):v<m?i=m<.01?(r=0,n=.707106781):(n=y/(r=Math.sqrt(m)),_/r):v<.01?(r=n=.707106781,i=0):(n=b/(i=Math.sqrt(v)),r=_/i),this.set(n,r,i,e),this}var E=Math.sqrt((f-h)*(f-h)+(l-d)*(l-d)+(u-s)*(u-s));return Math.abs(E)<.001&&(E=1),this.x=(f-h)/E,this.y=(l-d)/E,this.z=(u-s)/E,this.w=Math.acos((o+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return void 0===O&&(O=new Be.Vector4,D=new Be.Vector4),O.set(t,t,t,t),D.set(e,e,e,e),this.clamp(O,D)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this.w=t.array[e+3],this}},Be.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1])},Be.Matrix3.prototype={constructor:Be.Matrix3,set:function(t,e,n,r,i,a,o,s,l){var u=this.elements;return u[0]=t,u[1]=r,u[2]=o,u[3]=e,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToVector3Array:function(t,e,n){void 0===N&&(N=new Be.Vector3),void 0===e&&(e=0),void 0===n&&(n=t.length);for(var r=0,i=e;r<n;r+=3,i+=3)N.fromArray(t,i),N.applyMatrix3(this),N.toArray(t,i);return t},applyToBuffer:function(t,e,n){void 0===I&&(I=new Be.Vector3),void 0===e&&(e=0),void 0===n&&(n=t.length/t.itemSize);for(var r=0,i=e;r<n;r++,i++)I.x=t.getX(i),I.y=t.getY(i),I.z=t.getZ(i),I.applyMatrix3(this),t.setXYZ(I.x,I.y,I.z);return t},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],u=t[8];return e*a*u-e*o*l-n*i*u+n*o*s+r*i*l-r*a*s},getInverse:function(t,e){var n=t.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],u=n[5],c=n[6],h=n[7],d=n[8],f=d*l-u*h,p=u*c-d*s,g=h*s-l*c,m=i*f+a*p+o*g;if(0!=m)return r[0]=f,r[1]=o*h-d*a,r[2]=u*a-o*l,r[3]=p,r[4]=d*i-o*c,r[5]=o*s-u*i,r[6]=g,r[7]=a*c-h*i,r[8]=l*i-a*s,this.multiplyScalar(1/m);if(e)throw new Error("THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0");return this.identity()},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}},Be.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},Be.Matrix4.prototype={constructor:Be.Matrix4,set:function(t,e,n,r,i,a,o,s,l,u,c,h,d,f,p,g){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Be.Matrix4).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){void 0===H&&(H=new Be.Vector3);var e=this.elements,n=t.elements,r=1/H.setFromMatrixColumn(t,0).length(),i=1/H.setFromMatrixColumn(t,1).length(),a=1/H.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,this},makeRotationFromEuler:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=a*u,d=a*c,f=o*u,p=o*c;e[0]=s*u,e[4]=-s*c,e[8]=l,e[1]=d+f*l,e[5]=h-p*l,e[9]=-o*s,e[2]=p-h*l,e[6]=f+d*l,e[10]=a*s}else if("YXZ"===t.order){var g=s*u,m=s*c,v=l*u,y=l*c;e[0]=g+y*o,e[4]=v*o-m,e[8]=a*l,e[1]=a*c,e[5]=a*u,e[9]=-o,e[2]=m*o-v,e[6]=y+g*o,e[10]=a*s}else if("ZXY"===t.order)g=s*u,m=s*c,v=l*u,y=l*c,e[0]=g-y*o,e[4]=-a*c,e[8]=v+m*o,e[1]=m+v*o,e[5]=a*u,e[9]=y-g*o,e[2]=-a*l,e[6]=o,e[10]=a*s;else if("ZYX"===t.order)h=a*u,d=a*c,f=o*u,p=o*c,e[0]=s*u,e[4]=f*l-d,e[8]=h*l+p,e[1]=s*c,e[5]=p*l+h,e[9]=d*l-f,e[2]=-l,e[6]=o*s,e[10]=a*s;else if("YZX"===t.order){var b=a*s,_=a*l,E=o*s,A=o*l;e[0]=s*u,e[4]=A-b*c,e[8]=E*c+_,e[1]=c,e[5]=a*u,e[9]=-o*u,e[2]=-l*u,e[6]=_*c+E,e[10]=b-A*c}else"XZY"===t.order&&(b=a*s,_=a*l,E=o*s,A=o*l,e[0]=s*u,e[4]=-c,e[8]=l*u,e[1]=b*c+A,e[5]=a*u,e[9]=_*c-E,e[2]=E*c-_,e[6]=o*u,e[10]=A*c+b);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,a=t.w,o=n+n,s=r+r,l=i+i,u=n*o,c=n*s,h=n*l,d=r*s,f=r*l,p=i*l,g=a*o,m=a*s,v=a*l;return e[0]=1-(d+p),e[4]=c-v,e[8]=h+m,e[1]=c+v,e[5]=1-(u+p),e[9]=f-g,e[2]=h-m,e[6]=f+g,e[10]=1-(u+d),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(t,e,n){void 0===G&&(G=new Be.Vector3),void 0===z&&(z=new Be.Vector3),void 0===Y&&(Y=new Be.Vector3);var r=this.elements;return Y.subVectors(t,e).normalize(),0===Y.lengthSq()&&(Y.z=1),G.crossVectors(n,Y).normalize(),0===G.lengthSq()&&(Y.x+=1e-4,G.crossVectors(n,Y).normalize()),z.crossVectors(Y,G),r[0]=G.x,r[4]=z.x,r[8]=Y.x,r[1]=G.y,r[5]=z.y,r[9]=Y.y,r[2]=G.z,r[6]=z.z,r[10]=Y.z,this},multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],f=n[2],p=n[6],g=n[10],m=n[14],v=n[3],y=n[7],b=n[11],_=n[15],E=r[0],A=r[4],T=r[8],w=r[12],S=r[1],x=r[5],L=r[9],M=r[13],k=r[2],C=r[6],R=r[10],P=r[14],O=r[3],D=r[7],I=r[11],N=r[15];return i[0]=a*E+o*S+s*k+l*O,i[4]=a*A+o*x+s*C+l*D,i[8]=a*T+o*L+s*R+l*I,i[12]=a*w+o*M+s*P+l*N,i[1]=u*E+c*S+h*k+d*O,i[5]=u*A+c*x+h*C+d*D,i[9]=u*T+c*L+h*R+d*I,i[13]=u*w+c*M+h*P+d*N,i[2]=f*E+p*S+g*k+m*O,i[6]=f*A+p*x+g*C+m*D,i[10]=f*T+p*L+g*R+m*I,i[14]=f*w+p*M+g*P+m*N,i[3]=v*E+y*S+b*k+_*O,i[7]=v*A+y*x+b*C+_*D,i[11]=v*T+y*L+b*R+_*I,i[15]=v*w+y*M+b*P+_*N,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToVector3Array:function(t,e,n){void 0===V&&(V=new Be.Vector3),void 0===e&&(e=0),void 0===n&&(n=t.length);for(var r=0,i=e;r<n;r+=3,i+=3)V.fromArray(t,i),V.applyMatrix4(this),V.toArray(t,i);return t},applyToBuffer:function(t,e,n){void 0===j&&(j=new Be.Vector3),void 0===e&&(e=0),void 0===n&&(n=t.length/t.itemSize);for(var r=0,i=e;r<n;r++,i++)j.x=t.getX(i),j.y=t.getY(i),j.z=t.getZ(i),j.applyMatrix4(this),t.setXYZ(j.x,j.y,j.z);return t},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],a=t[1],o=t[5],s=t[9],l=t[13],u=t[2],c=t[6],h=t[10],d=t[14];return t[3]*(i*s*c-r*l*c-i*o*h+n*l*h+r*o*d-n*s*d)+t[7]*(e*s*d-e*l*h+i*a*h-r*a*d+r*l*u-i*s*u)+t[11]*(e*l*c-e*o*d-i*a*c+n*a*d+i*o*u-n*l*u)+t[15]*(-r*o*u-e*s*c+e*o*h+r*a*c-n*a*h+n*s*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},getPosition:function(){return void 0===U&&(U=new Be.Vector3),U.setFromMatrixColumn(this,3)},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],d=r[8],f=r[9],p=r[10],g=r[11],m=r[12],v=r[13],y=r[14],b=r[15],_=f*y*h-v*p*h+v*c*g-u*y*g-f*c*b+u*p*b,E=m*p*h-d*y*h-m*c*g+l*y*g+d*c*b-l*p*b,A=d*v*h-m*f*h+m*u*g-l*v*g-d*u*b+l*f*b,T=m*f*c-d*v*c-m*u*p+l*v*p+d*u*y-l*f*y,w=i*_+a*E+o*A+s*T;if(0!=w)return n[0]=_,n[1]=v*p*s-f*y*s-v*o*g+a*y*g+f*o*b-a*p*b,n[2]=u*y*s-v*c*s+v*o*h-a*y*h-u*o*b+a*c*b,n[3]=f*c*s-u*p*s-f*o*h+a*p*h+u*o*g-a*c*g,n[4]=E,n[5]=d*y*s-m*p*s+m*o*g-i*y*g-d*o*b+i*p*b,n[6]=m*c*s-l*y*s-m*o*h+i*y*h+l*o*b-i*c*b,n[7]=l*p*s-d*c*s+d*o*h-i*p*h-l*o*g+i*c*g,n[8]=A,n[9]=m*f*s-d*v*s-m*a*g+i*v*g+d*a*b-i*f*b,n[10]=l*v*s-m*u*s+m*a*h-i*v*h-l*a*b+i*u*b,n[11]=d*u*s-l*f*s-d*a*h+i*f*h+l*a*g-i*u*g,n[12]=T,n[13]=d*v*o-m*f*o+m*a*p-i*v*p-d*a*y+i*f*y,n[14]=m*u*o-l*v*o-m*a*c+i*v*c+l*a*y-i*u*y,n[15]=l*f*o-d*u*o+d*a*c-i*f*c-l*a*p+i*u*p,this.multiplyScalar(1/w);if(e)throw new Error("THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0");return this.identity()},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,a=t.x,o=t.y,s=t.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(t,e,n){void 0===F&&(F=new Be.Vector3),void 0===B&&(B=new Be.Matrix4);var r=this.elements,i=F.set(r[0],r[1],r[2]).length(),a=F.set(r[4],r[5],r[6]).length(),o=F.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],B.elements.set(this.elements);var s=1/i,l=1/a,u=1/o;return B.elements[0]*=s,B.elements[1]*=s,B.elements[2]*=s,B.elements[4]*=l,B.elements[5]*=l,B.elements[6]*=l,B.elements[8]*=u,B.elements[9]*=u,B.elements[10]*=u,e.setFromRotationMatrix(B),n.x=i,n.y=a,n.z=o,this},makeFrustum:function(t,e,n,r,i,a){var o=this.elements,s=2*i/(e-t),l=2*i/(r-n),u=(e+t)/(e-t),c=(r+n)/(r-n),h=-(a+i)/(a-i),d=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(t,e,n,r){var i=n*Math.tan(Be.Math.degToRad(.5*t)),a=-i,o=a*e,s=i*e;return this.makeFrustum(o,s,a,i,n,r)},makeOrthographic:function(t,e,n,r,i,a){var o=this.elements,s=1/(e-t),l=1/(n-r),u=1/(a-i),c=(e+t)*s,h=(n+r)*l,d=(a+i)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}},Be.Plane=function(t,e){this.normal=void 0!==t?t:new Be.Vector3(1,0,0),this.constant=void 0!==e?e:0},Be.Plane.prototype={constructor:Be.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:(q=new Be.Vector3,Z=new Be.Vector3,function(t,e,n){var r=q.subVectors(n,e).cross(Z.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t);return(e||new Be.Vector3).copy(this.normal).multiplyScalar(n)},intersectLine:(X=new Be.Vector3,function(t,e){var n=e||new Be.Vector3,r=t.delta(X),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/i;return a<0||1<a?void 0:n.copy(r).multiplyScalar(a).add(t.start)}),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&0<n||n<0&&0<e},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new Be.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:($=new Be.Vector3,W=new Be.Vector3,K=new Be.Matrix3,function(t,e){var n=e||K.getNormalMatrix(t),r=$.copy(this.normal).applyMatrix3(n),i=this.coplanarPoint(W);return i.applyMatrix4(t),this.setFromNormalAndCoplanarPoint(r,i),this}),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},Be.Quaternion=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1},Be.Quaternion.prototype={constructor:Be.Quaternion,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof Be.Euler==0)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),r=Math.cos(t._y/2),i=Math.cos(t._z/2),a=Math.sin(t._x/2),o=Math.sin(t._y/2),s=Math.sin(t._z/2),l=t.order;return"XYZ"===l?(this._x=a*r*i+n*o*s,this._y=n*o*i-a*r*s,this._z=n*r*s+a*o*i,this._w=n*r*i-a*o*s):"YXZ"===l?(this._x=a*r*i+n*o*s,this._y=n*o*i-a*r*s,this._z=n*r*s-a*o*i,this._w=n*r*i+a*o*s):"ZXY"===l?(this._x=a*r*i-n*o*s,this._y=n*o*i+a*r*s,this._z=n*r*s+a*o*i,this._w=n*r*i-a*o*s):"ZYX"===l?(this._x=a*r*i-n*o*s,this._y=n*o*i+a*r*s,this._z=n*r*s-a*o*i,this._w=n*r*i+a*o*s):"YZX"===l?(this._x=a*r*i+n*o*s,this._y=n*o*i+a*r*s,this._z=n*r*s-a*o*i,this._w=n*r*i-a*o*s):"XZY"===l&&(this._x=a*r*i-n*o*s,this._y=n*o*i-a*r*s,this._z=n*r*s+a*o*i,this._w=n*r*i+a*o*s),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],l=n[9],u=n[2],c=n[6],h=n[10],d=r+s+h;return 0<d?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(c-l)*e,this._y=(a-u)*e,this._z=(o-i)*e):s<r&&h<r?(e=2*Math.sqrt(1+r-s-h),this._w=(c-l)/e,this._x=.25*e,this._y=(i+o)/e,this._z=(a+u)/e):h<s?(e=2*Math.sqrt(1+s-r-h),this._w=(a-u)/e,this._x=(i+o)/e,this._y=.25*e,this._z=(l+c)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(o-i)/e,this._x=(a+u)/e,this._y=(l+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){return void 0===J&&(J=new Be.Vector3),(Q=t.dot(e)+1)<1e-6?(Q=0,Math.abs(t.x)>Math.abs(t.z)?J.set(-t.y,t.x,0):J.set(0,-t.z,t.y)):J.crossVectors(t,e),this._x=J.x,this._y=J.y,this._z=J.z,this._w=Q,this.normalize(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,a=t._w,o=e._x,s=e._y,l=e._z,u=e._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*t._w+n*t._x+r*t._y+i*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),1<=o)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var l=Math.atan2(s,o),u=Math.sin((1-e)*l)/s,c=Math.sin(e*l)/s;return this._w=a*u+this._w*c,this._x=n*u+this._x*c,this._y=r*u+this._y*c,this._z=i*u+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(Be.Quaternion,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,a,o){var s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],h=i[a+0],d=i[a+1],f=i[a+2],p=i[a+3];if(c!==p||s!==h||l!==d||u!==f){var g=1-o,m=s*h+l*d+u*f+c*p,v=0<=m?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,m*v);g=Math.sin(g*_)/b,o=Math.sin(o*_)/b}var E=o*v;if(s=s*g+h*E,l=l*g+d*E,u=u*g+f*E,c=c*g+p*E,g===1-o){var A=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=A,l*=A,u*=A,c*=A}}t[e]=s,t[e+1]=l,t[e+2]=u,t[e+3]=c}}),Be.Triangle=function(t,e,n){this.a=void 0!==t?t:new Be.Vector3,this.b=void 0!==e?e:new Be.Vector3,this.c=void 0!==n?n:new Be.Vector3},Be.Triangle.normal=(tt=new Be.Vector3,function(t,e,n,r){var i=r||new Be.Vector3;i.subVectors(n,e),tt.subVectors(t,e),i.cross(tt);var a=i.lengthSq();return 0<a?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}),Be.Triangle.barycoordFromPoint=(et=new Be.Vector3,nt=new Be.Vector3,rt=new Be.Vector3,function(t,e,n,r,i){et.subVectors(r,e),nt.subVectors(n,e),rt.subVectors(t,e);var a=et.dot(et),o=et.dot(nt),s=et.dot(rt),l=nt.dot(nt),u=nt.dot(rt),c=a*l-o*o,h=i||new Be.Vector3;if(0==c)return h.set(-2,-1,-1);var d=1/c,f=(l*s-o*u)*d,p=(a*u-o*s)*d;return h.set(1-f-p,p,f)}),Be.Triangle.containsPoint=(it=new Be.Vector3,function(t,e,n,r){var i=Be.Triangle.barycoordFromPoint(t,e,n,r,it);return 0<=i.x&&0<=i.y&&i.x+i.y<=1}),Be.Triangle.prototype={constructor:Be.Triangle,set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:(at=new Be.Vector3,ot=new Be.Vector3,function(){return at.subVectors(this.c,this.b),ot.subVectors(this.a,this.b),.5*at.cross(ot).length()}),midpoint:function(t){return(t||new Be.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return Be.Triangle.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new Be.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return Be.Triangle.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return Be.Triangle.containsPoint(t,this.a,this.b,this.c)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},Be.Box3=function(t,e){this.min=void 0!==t?t:new Be.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new Be.Vector3(-1/0,-1/0,-1/0)},Be.Box3.prototype={constructor:Be.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){this.makeEmpty();for(var e=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,l=t.length;s<l;s+=3){var u=t[s],c=t[s+1],h=t[s+2];u<e&&(e=u),c<n&&(n=c),h<r&&(r=h),i<u&&(i=u),a<c&&(a=c),o<h&&(o=h)}this.min.set(e,n,r),this.max.set(i,a,o)},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:(dt=new Be.Vector3,function(t,e){var n=dt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}),setFromObject:function(t){void 0===ht&&(ht=new Be.Box3);var e=this;return this.makeEmpty(),t.updateMatrixWorld(!0),t.traverse((function(t){var n=t.geometry;void 0!==n&&(null===n.boundingBox&&n.computeBoundingBox(),!1===n.boundingBox.isEmpty()&&(ht.copy(n.boundingBox),ht.applyMatrix4(t.matrixWorld),e.union(ht)))})),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){return(t||new Be.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new Be.Vector3).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new Be.Vector3).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return void 0===ct&&(ct=new Be.Vector3),this.clampPoint(t.center,ct),ct.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return n=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x),0<t.normal.y?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},clampPoint:function(t,e){return(e||new Be.Vector3).copy(t).clamp(this.min,this.max)},distanceToPoint:(ut=new Be.Vector3,function(t){return ut.copy(t).clamp(this.min,this.max).sub(t).length()}),getBoundingSphere:(lt=new Be.Vector3,function(t){var e=t||new Be.Sphere;return e.center=this.center(),e.radius=.5*this.size(lt).length(),e}),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(st=[new Be.Vector3,new Be.Vector3,new Be.Vector3,new Be.Vector3,new Be.Vector3,new Be.Vector3,new Be.Vector3,new Be.Vector3],function(t){return st[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),st[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),st[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),st[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),st[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),st[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),st[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),st[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(st),this}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Be.Euler=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||Be.Euler.DefaultOrder},Be.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Be.Euler.DefaultOrder="XYZ",Be.Euler.prototype={constructor:Be.Euler,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=Be.Math.clamp,i=t.elements,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],f=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===e?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===e?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===e&&(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,f),this._y=0)),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(t,e,n){return void 0===pt&&(pt=new Be.Matrix4),pt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(pt,e,n),this},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(ft=new Be.Quaternion,function(t){ft.setFromEuler(this),this.setFromQuaternion(ft,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Be.Vector3(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Be.Ray=function(t,e){this.origin=void 0!==t?t:new Be.Vector3,this.direction=void 0!==e?e:new Be.Vector3},Be.Ray.prototype={constructor:Be.Ray,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new Be.Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){this.direction.copy(t).sub(this.origin).normalize()},recast:(St=new Be.Vector3,function(t){return this.origin.copy(this.at(t,St)),this}),closestPointToPoint:function(t,e){var n=e||new Be.Vector3;n.subVectors(t,this.origin);var r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:(wt=new Be.Vector3,function(t){var e=wt.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(wt.copy(this.direction).multiplyScalar(e).add(this.origin),wt.distanceToSquared(t))}),distanceSqToSegment:(Et=new Be.Vector3,At=new Be.Vector3,Tt=new Be.Vector3,function(t,e,n,r){Et.copy(t).add(e).multiplyScalar(.5),At.copy(e).sub(t).normalize(),Tt.copy(this.origin).sub(Et);var i,a,o,s,l=.5*t.distanceTo(e),u=-this.direction.dot(At),c=Tt.dot(this.direction),h=-Tt.dot(At),d=Tt.lengthSq(),f=Math.abs(1-u*u);if(0<f)if(a=u*c-h,s=l*f,0<=(i=u*h-c))if(-s<=a)if(a<=s){var p=1/f;o=(i*=p)*(i+u*(a*=p)+2*c)+a*(u*i+a+2*h)+d}else a=l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;else a=-l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;else o=a<=-s?-(i=Math.max(0,-(-u*l+c)))*i+(a=0<i?-l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d:a<=s?(i=0,(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+d):-(i=Math.max(0,-(u*l+c)))*i+(a=0<i?l:Math.min(Math.max(-l,-h),l))*(a+2*h)+d;else a=0<u?-l:l,o=-(i=Math.max(0,-(u*a+c)))*i+a*(a+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(At).multiplyScalar(a).add(Et),o}),intersectSphere:(_t=new Be.Vector3,function(t,e){_t.subVectors(t.center,this.origin);var n=_t.dot(this.direction),r=_t.dot(_t)-n*n,i=t.radius*t.radius;if(i<r)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)}),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return 0<=n?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,r,i,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return r=0<=l?(n=(t.min.x-h.x)*l,(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,(t.min.x-h.x)*l),(a=0<=u?(i=(t.min.y-h.y)*u,(t.max.y-h.y)*u):(i=(t.max.y-h.y)*u,(t.min.y-h.y)*u))<n||r<i?null:((n<i||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),(s=0<=c?(o=(t.min.z-h.z)*c,(t.max.z-h.z)*c):(o=(t.max.z-h.z)*c,(t.min.z-h.z)*c))<n||r<o?null:((n<o||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(0<=n?n:r,e)))},intersectsBox:(bt=new Be.Vector3,function(t){return null!==this.intersectBox(t,bt)}),intersectTriangle:(gt=new Be.Vector3,mt=new Be.Vector3,vt=new Be.Vector3,yt=new Be.Vector3,function(t,e,n,r,i){mt.subVectors(e,t),vt.subVectors(n,t),yt.crossVectors(mt,vt);var a,o=this.direction.dot(yt);if(0<o){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}gt.subVectors(this.origin,t);var s=a*this.direction.dot(vt.crossVectors(gt,vt));if(s<0)return null;var l=a*this.direction.dot(mt.cross(gt));if(l<0)return null;if(o<s+l)return null;var u=-a*gt.dot(yt);return u<0?null:this.at(u/o,i)}),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},Be.Sphere=function(t,e){this.center=void 0!==t?t:new Be.Vector3,this.radius=void 0!==e?e:0},Be.Sphere.prototype={constructor:Be.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(xt=new Be.Box3,function(t,e){var n=this.center;void 0!==e?n.copy(e):xt.setFromPoints(t).center(n);for(var r=0,i=0,a=t.length;i<a;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),r=e||new Be.Vector3;return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var e=t||new Be.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},Be.Frustum=function(t,e,n,r,i,a){this.planes=[void 0!==t?t:new Be.Plane,void 0!==e?e:new Be.Plane,void 0!==n?n:new Be.Plane,void 0!==r?r:new Be.Plane,void 0!==i?i:new Be.Plane,void 0!==a?a:new Be.Plane]},Be.Frustum.prototype={constructor:Be.Frustum,set:function(t,e,n,r,i,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15];return e[0].setComponents(o-r,c-s,p-h,y-g).normalize(),e[1].setComponents(o+r,c+s,p+h,y+g).normalize(),e[2].setComponents(o+i,c+l,p+d,y+m).normalize(),e[3].setComponents(o-i,c-l,p-d,y-m).normalize(),e[4].setComponents(o-a,c-u,p-f,y-v).normalize(),e[5].setComponents(o+a,c+u,p+f,y+v).normalize(),this},intersectsObject:(kt=new Be.Sphere,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),kt.copy(e.boundingSphere),kt.applyMatrix4(t.matrixWorld),this.intersectsSphere(kt)}),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(Lt=new Be.Vector3,Mt=new Be.Vector3,function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];Lt.x=0<r.normal.x?t.min.x:t.max.x,Mt.x=0<r.normal.x?t.max.x:t.min.x,Lt.y=0<r.normal.y?t.min.y:t.max.y,Mt.y=0<r.normal.y?t.max.y:t.min.y,Lt.z=0<r.normal.z?t.min.z:t.max.z,Mt.z=0<r.normal.z?t.max.z:t.min.z;var i=r.distanceToPoint(Lt),a=r.distanceToPoint(Mt);if(i<0&&a<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},Be.EventDispatcher=function(){},Be.EventDispatcher.prototype={constructor:Be.EventDispatcher,apply:function(t){t.addEventListener=Be.EventDispatcher.prototype.addEventListener,t.hasEventListener=Be.EventDispatcher.prototype.hasEventListener,t.removeEventListener=Be.EventDispatcher.prototype.removeEventListener,t.dispatchEvent=Be.EventDispatcher.prototype.dispatchEvent},addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=[],r=e.length,i=0;i<r;i++)n[i]=e[i];for(i=0;i<r;i++)n[i].call(this,t)}}}},Be.Layers=function(){this.mask=1},Be.Layers.prototype={constructor:Be.Layers,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!=(this.mask&t.mask)}},Be.Object3D=function(){Object.defineProperty(this,"id",{value:Be.Object3DIdCount++}),this.uuid=Be.Math.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Be.Object3D.DefaultUp.clone();var t=new Be.Vector3,e=new Be.Euler,n=new Be.Quaternion,r=new Be.Vector3(1,1,1);e.onChange((function(){n.setFromEuler(e,!1)})),n.onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new Be.Matrix4},normalMatrix:{value:new Be.Matrix3}}),this.rotationAutoUpdate=!0,this.matrix=new Be.Matrix4,this.matrixWorld=new Be.Matrix4,this.matrixAutoUpdate=Be.Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Be.Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}},Be.Object3D.DefaultUp=new Be.Vector3(0,1,0),Be.Object3D.DefaultMatrixAutoUpdate=!0,Be.Object3D.prototype={constructor:Be.Object3D,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:(Ht=new Be.Quaternion,function(t,e){return Ht.setFromAxisAngle(t,e),this.quaternion.multiply(Ht),this}),rotateX:(Yt=new Be.Vector3(1,0,0),function(t){return this.rotateOnAxis(Yt,t)}),rotateY:(zt=new Be.Vector3(0,1,0),function(t){return this.rotateOnAxis(zt,t)}),rotateZ:(Gt=new Be.Vector3(0,0,1),function(t){return this.rotateOnAxis(Gt,t)}),translateOnAxis:(Vt=new Be.Vector3,function(t,e){return Vt.copy(t).applyQuaternion(this.quaternion),this.position.add(Vt.multiplyScalar(e)),this}),translateX:(jt=new Be.Vector3(1,0,0),function(t){return this.translateOnAxis(jt,t)}),translateY:(Ut=new Be.Vector3(0,1,0),function(t){return this.translateOnAxis(Ut,t)}),translateZ:(Bt=new Be.Vector3(0,0,1),function(t){return this.translateOnAxis(Bt,t)}),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:(Ft=new Be.Matrix4,function(t){return t.applyMatrix4(Ft.getInverse(this.matrixWorld))}),lookAt:(Nt=new Be.Matrix4,function(t){Nt.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(Nt)}),add:function(t){if(1<arguments.length){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this||t instanceof Be.Object3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)),this},remove:function(t){if(1<arguments.length)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var n=this.children.indexOf(t);-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){var e=t||new Be.Vector3;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Dt=new Be.Vector3,It=new Be.Vector3,function(t){var e=t||new Be.Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Dt,e,It),e}),getWorldRotation:(Ot=new Be.Quaternion,function(t){var e=t||new Be.Euler;return this.getWorldQuaternion(Ot),e.setFromQuaternion(Ot,this.rotation.order,!1)}),getWorldScale:(Rt=new Be.Vector3,Pt=new Be.Quaternion,function(t){var e=t||new Be.Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(Rt,Pt,e),e}),getWorldDirection:(Ct=new Be.Quaternion,function(t){var e=t||new Be.Vector3;return this.getWorldQuaternion(Ct),e.set(0,0,1).applyQuaternion(Ct)}),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==t||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t=!(this.matrixWorldNeedsUpdate=!1));for(var e=0,n=this.children.length;e<n;e++)this.children[e].updateMatrixWorld(t)},toJSON:function(t){var e=void 0===t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),0<this.children.length){r.children=[];for(var i=0;i<this.children.length;i++)r.children.push(this.children[i].toJSON(t).object)}if(e){var a=u(t.geometries),o=u(t.materials),s=u(t.textures),l=u(t.images);0<a.length&&(n.geometries=a),0<o.length&&(n.materials=o),0<s.length&&(n.textures=s),0<l.length&&(n.images=l)}return n.object=r,n;function u(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.rotationAutoUpdate=t.rotationAutoUpdate,this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}},Be.EventDispatcher.prototype.apply(Be.Object3D.prototype),Be.Object3DIdCount=0,Be.Face3=function(t,e,n,r,i,a){this.a=t,this.b=e,this.c=n,this.normal=r instanceof Be.Vector3?r:new Be.Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=i instanceof Be.Color?i:new Be.Color,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0},Be.Face3.prototype={constructor:Be.Face3,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},Be.BufferAttribute=function(t,e){this.uuid=Be.Math.generateUUID(),this.array=t,this.itemSize=e,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0},Be.BufferAttribute.prototype={constructor:Be.BufferAttribute,get count(){return this.array.length/this.itemSize},set needsUpdate(t){!0===t&&this.version++},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(a=new Be.Color),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];e[n++]=a.a,e[n++]=a.b,e[n++]=a.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(a=new Be.Vector2),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(a=new Be.Vector3),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var a=t[r];void 0===a&&(a=new Be.Vector4),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z,e[n++]=a.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},clone:function(){return(new this.constructor).copy(this)}},Be.Int8Attribute=function(t,e){return new Be.BufferAttribute(new Int8Array(t),e)},Be.Uint8Attribute=function(t,e){return new Be.BufferAttribute(new Uint8Array(t),e)},Be.Uint8ClampedAttribute=function(t,e){return new Be.BufferAttribute(new Uint8ClampedArray(t),e)},Be.Int16Attribute=function(t,e){return new Be.BufferAttribute(new Int16Array(t),e)},Be.Uint16Attribute=function(t,e){return new Be.BufferAttribute(new Uint16Array(t),e)},Be.Int32Attribute=function(t,e){return new Be.BufferAttribute(new Int32Array(t),e)},Be.Uint32Attribute=function(t,e){return new Be.BufferAttribute(new Uint32Array(t),e)},Be.Float32Attribute=function(t,e){return new Be.BufferAttribute(new Float32Array(t),e)},Be.Float64Attribute=function(t,e){return new Be.BufferAttribute(new Float64Array(t),e)},Be.DynamicBufferAttribute=function(t,e){return new Be.BufferAttribute(t,e).setDynamic(!0)},Be.InstancedBufferAttribute=function(t,e,n){Be.BufferAttribute.call(this,t,e),this.meshPerAttribute=n||1},Be.InstancedBufferAttribute.prototype=Object.create(Be.BufferAttribute.prototype),Be.InstancedBufferAttribute.prototype.constructor=Be.InstancedBufferAttribute,Be.InstancedBufferAttribute.prototype.copy=function(t){return Be.BufferAttribute.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},Be.BufferGeometry=function(){Object.defineProperty(this,"id",{value:Be.GeometryIdCount++}),this.uuid=Be.Math.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}},Be.BufferGeometry.prototype={constructor:Be.BufferGeometry,getIndex:function(){return this.index},setIndex:function(t){this.index=t},addAttribute:function(t,e){if(e instanceof Be.BufferAttribute!=0||e instanceof Be.InterleavedBufferAttribute!=0){if("index"!==t)return this.attributes[t]=e,this;this.setIndex(e)}else this.addAttribute(t,new Be.BufferAttribute(e,arguments[2]))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToVector3Array(e.array),e.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new Be.Matrix3).getNormalMatrix(t).applyToVector3Array(n.array),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return void 0===Qt&&(Qt=new Be.Matrix4),Qt.makeRotationX(t),this.applyMatrix(Qt),this},rotateY:function(t){return void 0===Jt&&(Jt=new Be.Matrix4),Jt.makeRotationY(t),this.applyMatrix(Jt),this},rotateZ:function(t){return void 0===Zt&&(Zt=new Be.Matrix4),Zt.makeRotationZ(t),this.applyMatrix(Zt),this},translate:function(t,e,n){return void 0===qt&&(qt=new Be.Matrix4),qt.makeTranslation(t,e,n),this.applyMatrix(qt),this},scale:function(t,e,n){return void 0===Xt&&(Xt=new Be.Matrix4),Xt.makeScale(t,e,n),this.applyMatrix(Xt),this},lookAt:function(t){void 0===Kt&&(Kt=new Be.Object3D),Kt.lookAt(t),Kt.updateMatrix(),this.applyMatrix(Kt.matrix)},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t instanceof Be.Points||t instanceof Be.Line){var n=new Be.Float32Attribute(3*e.vertices.length,3),r=new Be.Float32Attribute(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new Be.Float32Attribute(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t instanceof Be.Mesh&&e instanceof Be.Geometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e,n=t.geometry;if(t instanceof Be.Mesh){var r=n.__directGeometry;if(void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Be.DirectGeometry).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Be.BufferAttribute(e,3).copyVector3sArray(t.vertices)),0<t.normals.length){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Be.BufferAttribute(n,3).copyVector3sArray(t.normals))}if(0<t.colors.length){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new Be.BufferAttribute(r,3).copyColorsArray(t.colors))}if(0<t.uvs.length){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Be.BufferAttribute(i,2).copyVector2sArray(t.uvs))}if(0<t.uvs2.length){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Be.BufferAttribute(a,2).copyVector2sArray(t.uvs2))}if(0<t.indices.length){var o=new(65535<t.vertices.length?Uint32Array:Uint16Array)(3*t.indices.length);this.setIndex(new Be.BufferAttribute(o,1).copyIndicesArray(t.indices))}for(var s in this.groups=t.groups,t.morphTargets){for(var l=[],u=t.morphTargets[s],c=0,h=u.length;c<h;c++){var d=u[c],f=new Be.Float32Attribute(3*d.length,3);l.push(f.copyVector3sArray(d))}this.morphAttributes[s]=l}if(0<t.skinIndices.length){var p=new Be.Float32Attribute(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(0<t.skinWeights.length){var g=new Be.Float32Attribute(4*t.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){return new Be.Vector3,function(){null===this.boundingBox&&(this.boundingBox=new Be.Box3);var t=this.attributes.position.array;t&&this.boundingBox.setFromArray(t),void 0!==t&&0!==t.length||(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)),isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}(),computeBoundingSphere:($t=new Be.Box3,Wt=new Be.Vector3,function(){null===this.boundingSphere&&(this.boundingSphere=new Be.Sphere);var t=this.attributes.position.array;if(t){var e=this.boundingSphere.center;$t.setFromArray(t),$t.center(e);for(var n=0,r=0,i=t.length;r<i;r+=3)Wt.fromArray(t,r),n=Math.max(n,e.distanceToSquared(Wt));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var r=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Be.BufferAttribute(new Float32Array(r.length),3));else for(var i=e.normal.array,a=0,o=i.length;a<o;a++)i[a]=0;var s,l,u,c=e.normal.array,h=new Be.Vector3,d=new Be.Vector3,f=new Be.Vector3,p=new Be.Vector3,g=new Be.Vector3;if(t){var m=t.array;0===n.length&&this.addGroup(0,m.length);for(var v=0,y=n.length;v<y;++v){var b=n[v],_=b.start;for(a=_,o=_+b.count;a<o;a+=3)s=3*m[a+0],l=3*m[a+1],u=3*m[a+2],h.fromArray(r,s),d.fromArray(r,l),f.fromArray(r,u),p.subVectors(f,d),g.subVectors(h,d),p.cross(g),c[s]+=p.x,c[1+s]+=p.y,c[2+s]+=p.z,c[l]+=p.x,c[1+l]+=p.y,c[2+l]+=p.z,c[u]+=p.x,c[1+u]+=p.y,c[2+u]+=p.z}}else for(a=0,o=r.length;a<o;a+=9)h.fromArray(r,a),d.fromArray(r,a+3),f.fromArray(r,a+6),p.subVectors(f,d),g.subVectors(h,d),p.cross(g),c[a]=p.x,c[a+1]=p.y,c[a+2]=p.z,c[a+3]=p.x,c[a+4]=p.y,c[a+5]=p.z,c[a+6]=p.x,c[a+7]=p.y,c[a+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t instanceof Be.BufferGeometry!=0){void 0===e&&(e=0);var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,a=t.attributes[r],o=a.array,s=0,l=a.itemSize*e;s<o.length;s++,l++)i[l]=o[s];return this}},normalizeNormals:function(){for(var t,e,n,r,i=this.attributes.normal.array,a=0,o=i.length;a<o;a+=3)t=i[a],e=i[a+1],n=i[a+2],r=1/Math.sqrt(t*t+e*e+n*n),i[a]*=r,i[a+1]*=r,i[a+2]*=r},toNonIndexed:function(){if(null===this.index)return this;var t=new Be.BufferGeometry,e=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],a=i.array,o=i.itemSize,s=new a.constructor(e.length*o),l=0,u=0,c=0,h=e.length;c<h;c++){l=e[c]*o;for(var d=0;d<o;d++)s[u++]=a[l++]}t.addAttribute(r,new Be.BufferAttribute(s,o))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var a=this.attributes;for(var n in a){var o=a[n];i=Array.prototype.slice.call(o.array),t.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:i}}var s=this.groups;0<s.length&&(t.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(t.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),t},clone:function(){return(new Be.BufferGeometry).copy(this)},copy:function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var a=t.groups,o=0,s=a.length;o<s;o++){var l=a[o];this.addGroup(l.start,l.count)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Be.EventDispatcher.prototype.apply(Be.BufferGeometry.prototype),Be.BufferGeometry.MaxIndex=65535,Be.InterleavedBufferAttribute=function(t,e,n){this.uuid=Be.Math.generateUUID(),this.data=t,this.itemSize=e,this.offset=n},Be.InterleavedBufferAttribute.prototype={constructor:Be.InterleavedBufferAttribute,get length(){return this.array.length},get count(){return this.data.count},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}},Be.InstancedBufferGeometry=function(){Be.BufferGeometry.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0},Be.InstancedBufferGeometry.prototype=Object.create(Be.BufferGeometry.prototype),Be.InstancedBufferGeometry.prototype.constructor=Be.InstancedBufferGeometry,Be.InstancedBufferGeometry.prototype.addGroup=function(t,e,n){this.groups.push({start:t,count:e,instances:n})},Be.InstancedBufferGeometry.prototype.copy=function(t){var e=t.index;null!==e&&this.setIndex(e.clone());var n=t.attributes;for(var r in n){var i=n[r];this.addAttribute(r,i.clone())}for(var a=t.groups,o=0,s=a.length;o<s;o++){var l=a[o];this.addGroup(l.start,l.count,l.instances)}return this},Be.EventDispatcher.prototype.apply(Be.InstancedBufferGeometry.prototype),Be.Geometry=function(){Object.defineProperty(this,"id",{value:Be.GeometryIdCount++}),this.uuid=Be.Math.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1},Be.Geometry.prototype={constructor:Be.Geometry,applyMatrix:function(t){for(var e=(new Be.Matrix3).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return void 0===ae&&(ae=new Be.Matrix4),ae.makeRotationX(t),this.applyMatrix(ae),this},rotateY:function(t){return void 0===ie&&(ie=new Be.Matrix4),ie.makeRotationY(t),this.applyMatrix(ie),this},rotateZ:function(t){return void 0===re&&(re=new Be.Matrix4),re.makeRotationZ(t),this.applyMatrix(re),this},translate:function(t,e,n){return void 0===ne&&(ne=new Be.Matrix4),ne.makeTranslation(t,e,n),this.applyMatrix(ne),this},scale:function(t,e,n){return void 0===ee&&(ee=new Be.Matrix4),ee.makeScale(t,e,n),this.applyMatrix(ee),this},lookAt:function(t){void 0===te&&(te=new Be.Object3D),te.lookAt(t),te.updateMatrix(),this.applyMatrix(te.matrix)},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,i=r.position.array,a=void 0!==r.normal?r.normal.array:void 0,o=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=[],c=[],h=[],d=0,f=0;d<i.length;d+=3,f+=2)e.vertices.push(new Be.Vector3(i[d],i[d+1],i[d+2])),void 0!==a&&u.push(new Be.Vector3(a[d],a[d+1],a[d+2])),void 0!==o&&e.colors.push(new Be.Color(o[d],o[d+1],o[d+2])),void 0!==s&&c.push(new Be.Vector2(s[f],s[f+1])),void 0!==l&&h.push(new Be.Vector2(l[f],l[f+1]));function p(t,n,r,i){var d=void 0!==a?[u[t].clone(),u[n].clone(),u[r].clone()]:[],f=void 0!==o?[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()]:[],p=new Be.Face3(t,n,r,d,f,i);e.faces.push(p),void 0!==s&&e.faceVertexUvs[0].push([c[t].clone(),c[n].clone(),c[r].clone()]),void 0!==l&&e.faceVertexUvs[1].push([h[t].clone(),h[n].clone(),h[r].clone()])}if(void 0!==n){var g=t.groups;if(0<g.length)for(d=0;d<g.length;d++)for(var m=g[d],v=m.start,y=(f=v,v+m.count);f<y;f+=3)p(n[f],n[f+1],n[f+2],m.materialIndex);else for(d=0;d<n.length;d+=3)p(n[d],n[d+1],n[d+2])}else for(d=0;d<i.length/3;d+=3)p(d,d+1,d+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.center().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new Be.Matrix4;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new Be.Vector3,e=new Be.Vector3,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,a,o;for(void 0===t&&(t=!0),o=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)o[e]=new Be.Vector3;if(t){var s,l,u,c=new Be.Vector3,h=new Be.Vector3;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),h.subVectors(s,l),c.cross(h),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(r=0,i=this.faces.length;r<i;r++)o[(a=this.faces[r]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,n=this.vertices.length;e<n;e++)o[e].normalize();for(r=0,i=this.faces.length;r<i;r++){var d=(a=this.faces[r]).vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var a=new Be.Geometry;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)l=new Be.Vector3,u={a:new Be.Vector3,b:new Be.Vector3,c:new Be.Vector3},o.push(l),s.push(u)}var l,u,c=this.morphNormals[t];for(a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],l=c.faceNormals[n],u=c.vertexNormals[n],l.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeTangents:function(){},computeLineDistances:function(){for(var t=0,e=this.vertices,n=0,r=e.length;n<r;n++)0<n&&(t+=e[n].distanceTo(e[n-1])),this.lineDistances[n]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Be.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Be.Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t instanceof Be.Geometry!=0){var r,i=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,l=t.faces,u=this.faceVertexUvs[0],c=t.faceVertexUvs[0];void 0===n&&(n=0),void 0!==e&&(r=(new Be.Matrix3).getNormalMatrix(e));for(var h=0,d=o.length;h<d;h++){var f=o[h].clone();void 0!==e&&f.applyMatrix4(e),a.push(f)}for(h=0,d=l.length;h<d;h++){var p,g,m,v=l[h],y=v.vertexNormals,b=v.vertexColors;(p=new Be.Face3(v.a+i,v.b+i,v.c+i)).normal.copy(v.normal),void 0!==r&&p.normal.applyMatrix3(r).normalize();for(var _=0,E=y.length;_<E;_++)g=y[_].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),p.vertexNormals.push(g);for(p.color.copy(v.color),_=0,E=b.length;_<E;_++)m=b[_],p.vertexColors.push(m.clone());p.materialIndex=v.materialIndex+n,s.push(p)}for(h=0,d=c.length;h<d;h++){var A=c[h],T=[];if(void 0!==A){for(_=0,E=A.length;_<E;_++)T.push(A[_].clone());u.push(T)}}}},mergeMesh:function(t){t instanceof Be.Mesh!=0&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,n,r,i,a,o,s,l={},u=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],void 0===l[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(l[e]=n,u.push(this.vertices[n]),c[n]=u.length-1):c[n]=c[l[e]];var d=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],a=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){d.push(n);break}}for(n=d.length-1;0<=n;n--){var p=d[n];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var g=this.vertices.length-u.length;return this.vertices=u,g},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var r,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===e&&(r=[]),o&&o.length===e&&(i=[]),n=0;n<e;n++){var s=t[n]._id;r&&r.push(a[s]),i&&i.push(o[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}var o=[],s=[],l={},u=[],c={},h=[],d={};for(i=0;i<this.faces.length;i++){var f=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],g=0<f.normal.length(),m=0<f.vertexNormals.length,v=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=0<f.vertexColors.length,b=0;if(b=T(b,0,0),b=T(b,1,!0),b=T(b,2,!1),b=T(b,3,p),b=T(b,4,g),b=T(b,5,m),b=T(b,6,v),b=T(b,7,y),o.push(b),o.push(f.a,f.b,f.c),o.push(f.materialIndex),p){var _=this.faceVertexUvs[0][i];o.push(x(_[0]),x(_[1]),x(_[2]))}if(g&&o.push(w(f.normal)),m){var E=f.vertexNormals;o.push(w(E[0]),w(E[1]),w(E[2]))}if(v&&o.push(S(f.color)),y){var A=f.vertexColors;o.push(S(A[0]),S(A[1]),S(A[2]))}}function T(t,e,n){return n?t|1<<e:t&~(1<<e)}function w(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]||(l[e]=s.length/3,s.push(t.x,t.y,t.z)),l[e]}function S(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]||(c[e]=u.length,u.push(t.getHex())),c[e]}function x(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]||(d[e]=h.length/2,h.push(t.x,t.y)),d[e]}return t.data={},t.data.vertices=r,t.data.normals=s,0<u.length&&(t.data.colors=u),0<h.length&&(t.data.uvs=[h]),t.data.faces=o,t},clone:function(){return(new Be.Geometry).copy(this)},copy:function(t){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]];for(var e=t.vertices,n=0,r=e.length;n<r;n++)this.vertices.push(e[n].clone());var i=t.faces;for(n=0,r=i.length;n<r;n++)this.faces.push(i[n].clone());for(n=0,r=t.faceVertexUvs.length;n<r;n++){var a=t.faceVertexUvs[n];void 0===this.faceVertexUvs[n]&&(this.faceVertexUvs[n]=[]);for(var o=0,s=a.length;o<s;o++){for(var l=a[o],u=[],c=0,h=l.length;c<h;c++){var d=l[c];u.push(d.clone())}this.faceVertexUvs[n].push(u)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Be.EventDispatcher.prototype.apply(Be.Geometry.prototype),Be.GeometryIdCount=0,Be.DirectGeometry=function(){Object.defineProperty(this,"id",{value:Be.GeometryIdCount++}),this.uuid=Be.Math.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1},Be.DirectGeometry.prototype={constructor:Be.DirectGeometry,computeBoundingBox:Be.Geometry.prototype.computeBoundingBox,computeBoundingSphere:Be.Geometry.prototype.computeBoundingSphere,computeFaceNormals:function(){},computeVertexNormals:function(){},computeGroups:function(t){for(var e,n,r=[],i=t.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,r.push(e)),e={start:3*a,materialIndex:n})}void 0!==e&&(e.count=3*a-e.start,r.push(e)),this.groups=r},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,a=i[0]&&0<i[0].length,o=i[1]&&0<i[1].length,s=t.morphTargets,l=s.length;if(0<l){e=[];for(var u=0;u<l;u++)e[u]=[];this.morphTargets.position=e}var c,h=t.morphNormals,d=h.length;if(0<d){for(c=[],u=0;u<d;u++)c[u]=[];this.morphTargets.normal=c}var f=t.skinIndices,p=t.skinWeights,g=f.length===r.length,m=p.length===r.length;for(u=0;u<n.length;u++){var v=n[u];this.vertices.push(r[v.a],r[v.b],r[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=v.normal;this.normals.push(b,b,b)}var _,E=v.vertexColors;if(3===E.length)this.colors.push(E[0],E[1],E[2]);else{var A=v.color;this.colors.push(A,A,A)}!0===a&&(void 0!==(_=i[0][u])?this.uvs.push(_[0],_[1],_[2]):this.uvs.push(new Be.Vector2,new Be.Vector2,new Be.Vector2)),!0===o&&(void 0!==(_=i[1][u])?this.uvs2.push(_[0],_[1],_[2]):this.uvs2.push(new Be.Vector2,new Be.Vector2,new Be.Vector2));for(var T=0;T<l;T++){var w=s[T].vertices;e[T].push(w[v.a],w[v.b],w[v.c])}for(T=0;T<d;T++){var S=h[T].vertexNormals[u];c[T].push(S.a,S.b,S.c)}g&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),m&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Be.EventDispatcher.prototype.apply(Be.DirectGeometry.prototype),Be.Camera=function(){Be.Object3D.call(this),this.type="Camera",this.matrixWorldInverse=new Be.Matrix4,this.projectionMatrix=new Be.Matrix4},Be.Camera.prototype=Object.create(Be.Object3D.prototype),Be.Camera.prototype.constructor=Be.Camera,Be.Camera.prototype.getWorldDirection=(oe=new Be.Quaternion,function(t){var e=t||new Be.Vector3;return this.getWorldQuaternion(oe),e.set(0,0,-1).applyQuaternion(oe)}),Be.Camera.prototype.lookAt=(se=new Be.Matrix4,function(t){se.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(se)}),Be.Camera.prototype.clone=function(){return(new this.constructor).copy(this)},Be.Camera.prototype.copy=function(t){return Be.Object3D.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},Be.PerspectiveCamera=function(t,e,n,r){Be.Camera.call(this),this.type="PerspectiveCamera",this.focalLength=10,this.zoom=1,this.fov=void 0!==t?t:50,this.aspect=void 0!==e?e:1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},Be.PerspectiveCamera.prototype=Object.create(Be.Camera.prototype),Be.PerspectiveCamera.prototype.constructor=Be.PerspectiveCamera,Be.PerspectiveCamera.prototype.setLens=function(t,e){void 0===e&&(e=24),this.fov=2*Be.Math.radToDeg(Math.atan(e/(2*t))),this.updateProjectionMatrix()},Be.PerspectiveCamera.prototype.setViewOffset=function(t,e,n,r,i,a){this.fullWidth=t,this.fullHeight=e,this.x=n,this.y=r,this.width=i,this.height=a,this.updateProjectionMatrix()},Be.PerspectiveCamera.prototype.updateProjectionMatrix=function(){var t=Be.Math.radToDeg(2*Math.atan(Math.tan(.5*Be.Math.degToRad(this.fov))/this.zoom));if(this.fullWidth){var e=this.fullWidth/this.fullHeight,n=Math.tan(Be.Math.degToRad(.5*t))*this.near,r=-n,i=e*r,a=e*n,o=Math.abs(a-i),s=Math.abs(n-r);this.projectionMatrix.makeFrustum(i+this.x*o/this.fullWidth,i+(this.x+this.width)*o/this.fullWidth,n-(this.y+this.height)*s/this.fullHeight,n-this.y*s/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(t,this.aspect,this.near,this.far)},Be.PerspectiveCamera.prototype.copy=function(t){return Be.Camera.prototype.copy.call(this,t),this.focalLength=t.focalLength,this.zoom=t.zoom,this.fov=t.fov,this.aspect=t.aspect,this.near=t.near,this.far=t.far,this},Be.PerspectiveCamera.prototype.toJSON=function(t){var e=Be.Object3D.prototype.toJSON.call(this,t);return e.object.focalLength=this.focalLength,e.object.zoom=this.zoom,e.object.fov=this.fov,e.object.aspect=this.aspect,e.object.near=this.near,e.object.far=this.far,e},Be.Light=function(t,e){Be.Object3D.call(this),this.type="Light",this.color=new Be.Color(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0},Be.Light.prototype=Object.create(Be.Object3D.prototype),Be.Light.prototype.constructor=Be.Light,Be.Light.prototype.copy=function(t){return Be.Object3D.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},Be.Light.prototype.toJSON=function(t){var e=Be.Object3D.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),e},Be.Scene=function(){Be.Object3D.call(this),this.type="Scene",this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0},Be.Scene.prototype=Object.create(Be.Object3D.prototype),Be.Scene.prototype.constructor=Be.Scene,Be.Scene.prototype.copy=function(t,e){return Be.Object3D.prototype.copy.call(this,t,e),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},Be.FogExp2=function(t,e){this.name="",this.color=new Be.Color(t),this.density=void 0!==e?e:25e-5},Be.FogExp2.prototype.clone=function(){return new Be.FogExp2(this.color.getHex(),this.density)},Be.ImmediateRenderObject=function(t){Be.Object3D.call(this),this.material=t,this.render=function(t){}},Be.ImmediateRenderObject.prototype=Object.create(Be.Object3D.prototype),Be.ImmediateRenderObject.prototype.constructor=Be.ImmediateRenderObject,Be.SphereBufferGeometry=function(t,e,n,r,i,a,o){Be.BufferGeometry.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=t||50,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;for(var s=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),l=(e+1)*(n+1),u=new Be.BufferAttribute(new Float32Array(3*l),3),c=new Be.BufferAttribute(new Float32Array(3*l),3),h=new Be.BufferAttribute(new Float32Array(2*l),2),d=0,f=[],p=new Be.Vector3,g=0;g<=n;g++){for(var m=[],v=g/n,y=0;y<=e;y++){var b=y/e,_=-t*Math.cos(r+b*i)*Math.sin(a+v*o),E=t*Math.cos(a+v*o),A=t*Math.sin(r+b*i)*Math.sin(a+v*o);p.set(_,E,A).normalize(),u.setXYZ(d,_,E,A),c.setXYZ(d,p.x,p.y,p.z),h.setXY(d,b,1-v),m.push(d),d++}f.push(m)}var T=[];for(g=0;g<n;g++)for(y=0;y<e;y++){var w=f[g][y+1],S=f[g][y],x=f[g+1][y],L=f[g+1][y+1];(0!==g||0<a)&&T.push(w,S,L),(g!==n-1||s<Math.PI)&&T.push(S,x,L)}this.setIndex(new(65535<u.count?Be.Uint32Attribute:Be.Uint16Attribute)(T,1)),this.addAttribute("position",u),this.addAttribute("normal",c),this.addAttribute("uv",h),this.boundingSphere=new Be.Sphere(new Be.Vector3,t)},Be.SphereBufferGeometry.prototype=Object.create(Be.BufferGeometry.prototype),Be.SphereBufferGeometry.prototype.constructor=Be.SphereBufferGeometry,Be.SphereGeometry=function(t,e,n,r,i,a,o){Be.Geometry.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Be.SphereBufferGeometry(t,e,n,r,i,a,o))},Be.SphereGeometry.prototype=Object.create(Be.Geometry.prototype),Be.SphereGeometry.prototype.constructor=Be.SphereGeometry,Be.Material=function(){Object.defineProperty(this,"id",{value:Be.MaterialIdCount++}),this.uuid=Be.Math.generateUUID(),this.name="",this.type="Material",this.side=Be.FrontSide,this.opacity=1,this.transparent=!1,this.blending=Be.NormalBlending,this.blendSrc=Be.SrcAlphaFactor,this.blendDst=Be.OneMinusSrcAlphaFactor,this.blendEquation=Be.AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Be.LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0},Be.Material.prototype={constructor:Be.Material,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n){var r=this[e];void 0!==r&&(r instanceof Be.Color?r.set(n):r instanceof Be.Vector3&&n instanceof Be.Vector3?r.copy(n):this[e]="overdraw"===e?Number(n):n)}}},toJSON:function(t){var e=void 0===t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color instanceof Be.Color&&(n.color=this.color.getHex()),.5!==this.roughness&&(n.roughness=this.roughness),.5!==this.metalness&&(n.metalness=this.metalness),this.emissive instanceof Be.Color&&(n.emissive=this.emissive.getHex()),this.specular instanceof Be.Color&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),this.map instanceof Be.Texture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap instanceof Be.Texture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap instanceof Be.Texture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap instanceof Be.Texture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap instanceof Be.Texture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap instanceof Be.Texture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap instanceof Be.Texture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap instanceof Be.Texture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap instanceof Be.Texture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap instanceof Be.Texture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap instanceof Be.Texture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),void 0!==this.vertexColors&&this.vertexColors!==Be.NoColors&&(n.vertexColors=this.vertexColors),void 0!==this.shading&&this.shading!==Be.SmoothShading&&(n.shading=this.shading),void 0!==this.blending&&this.blending!==Be.NormalBlending&&(n.blending=this.blending),void 0!==this.side&&this.side!==Be.FrontSide&&(n.side=this.side),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),e){var i=r(t.textures),a=r(t.images);0<i.length&&(n.textures=i),0<a.length&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.side=t.side,this.opacity=t.opacity,this.transparent=t.transparent,this.blending=t.blending,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Be.EventDispatcher.prototype.apply(Be.Material.prototype),Be.MaterialIdCount=0,Be.LineBasicMaterial=function(t){Be.Material.call(this),this.type="LineBasicMaterial",this.color=new Be.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.blending=Be.NormalBlending,this.vertexColors=Be.NoColors,this.fog=!0,this.setValues(t)},Be.LineBasicMaterial.prototype=Object.create(Be.Material.prototype),Be.LineBasicMaterial.prototype.constructor=Be.LineBasicMaterial,Be.LineBasicMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.vertexColors=t.vertexColors,this.fog=t.fog,this},Be.LineDashedMaterial=function(t){Be.Material.call(this),this.type="LineDashedMaterial",this.color=new Be.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.blending=Be.NormalBlending,this.vertexColors=Be.NoColors,this.fog=!0,this.setValues(t)},Be.LineDashedMaterial.prototype=Object.create(Be.Material.prototype),Be.LineDashedMaterial.prototype.constructor=Be.LineDashedMaterial,Be.LineDashedMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this.vertexColors=t.vertexColors,this.fog=t.fog,this},Be.PointsMaterial=function(t){Be.Material.call(this),this.type="PointsMaterial",this.color=new Be.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.blending=Be.NormalBlending,this.vertexColors=Be.NoColors,this.fog=!0,this.setValues(t)},Be.PointsMaterial.prototype=Object.create(Be.Material.prototype),Be.PointsMaterial.prototype.constructor=Be.PointsMaterial,Be.PointsMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.vertexColors=t.vertexColors,this.fog=t.fog,this},Be.MeshDepthMaterial=function(t){Be.Material.call(this),this.type="MeshDepthMaterial",this.morphTargets=!1,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)},Be.MeshDepthMaterial.prototype=Object.create(Be.Material.prototype),Be.MeshDepthMaterial.prototype.constructor=Be.MeshDepthMaterial,Be.MeshDepthMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Be.MeshNormalMaterial=function(t){Be.Material.call(this,t),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(t)},Be.MeshNormalMaterial.prototype=Object.create(Be.Material.prototype),Be.MeshNormalMaterial.prototype.constructor=Be.MeshNormalMaterial,Be.MeshNormalMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Be.ShaderMaterial=function(t){Be.Material.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.shading=Be.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=Be.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},(this.index0AttributeName=void 0)!==t&&(t.attributes,this.setValues(t))},Be.ShaderMaterial.prototype=Object.create(Be.Material.prototype),Be.ShaderMaterial.prototype.constructor=Be.ShaderMaterial,Be.ShaderMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Be.UniformsUtils.clone(t.uniforms),this.defines=t.defines,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Be.ShaderMaterial.prototype.toJSON=function(t){var e=Be.Material.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Be.MeshBasicMaterial=function(t){Be.Material.call(this),this.type="MeshBasicMaterial",this.color=new Be.Color(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Be.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=Be.SmoothShading,this.blending=Be.NormalBlending,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=Be.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(t)},Be.MeshBasicMaterial.prototype=Object.create(Be.Material.prototype),Be.MeshBasicMaterial.prototype.constructor=Be.MeshBasicMaterial,Be.MeshBasicMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Be.MeshLambertMaterial=function(t){Be.Material.call(this),this.type="MeshLambertMaterial",this.color=new Be.Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Be.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.blending=Be.NormalBlending,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=Be.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},Be.MeshLambertMaterial.prototype=Object.create(Be.Material.prototype),Be.MeshLambertMaterial.prototype.constructor=Be.MeshLambertMaterial,Be.MeshLambertMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Be.MeshStandardMaterial=function(t){Be.Material.call(this),this.type="MeshStandardMaterial",this.color=new Be.Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Be.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.fog=!0,this.shading=Be.SmoothShading,this.blending=Be.NormalBlending,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=Be.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},Be.MeshStandardMaterial.prototype=Object.create(Be.Material.prototype),Be.MeshStandardMaterial.prototype.constructor=Be.MeshStandardMaterial,Be.MeshStandardMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Be.MeshPhongMaterial=function(t){Be.Material.call(this),this.type="MeshPhongMaterial",this.color=new Be.Color(16777215),this.specular=new Be.Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Be.Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Be.Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Be.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=Be.SmoothShading,this.blending=Be.NormalBlending,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=Be.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)},Be.MeshPhongMaterial.prototype=Object.create(Be.Material.prototype),Be.MeshPhongMaterial.prototype.constructor=Be.MeshPhongMaterial,Be.MeshPhongMaterial.prototype.copy=function(t){return Be.Material.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.fog=t.fog,this.shading=t.shading,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.vertexColors=t.vertexColors,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Be.MultiMaterial=function(t){this.uuid=Be.Math.generateUUID(),this.type="MultiMaterial",this.materials=t instanceof Array?t:[],this.visible=!0},Be.MultiMaterial.prototype={constructor:Be.MultiMaterial,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,r=0,i=n.length;r<i;r++){var a=n[r].toJSON(t);delete a.metadata,e.materials.push(a)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},Be.RawShaderMaterial=function(t){Be.ShaderMaterial.call(this,t),this.type="RawShaderMaterial"},Be.RawShaderMaterial.prototype=Object.create(Be.ShaderMaterial.prototype),Be.RawShaderMaterial.prototype.constructor=Be.RawShaderMaterial,Be.Texture=function(t,e,n,r,i,a,o,s,l){Object.defineProperty(this,"id",{value:Be.TextureIdCount++}),this.uuid=Be.Math.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==t?t:Be.Texture.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:Be.Texture.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Be.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:Be.ClampToEdgeWrapping,this.magFilter=void 0!==i?i:Be.LinearFilter,this.minFilter=void 0!==a?a:Be.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==o?o:Be.RGBAFormat,this.type=void 0!==s?s:Be.UnsignedByteType,this.offset=new Be.Vector2(0,0),this.repeat=new Be.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Be.LinearEncoding,this.version=0,this.onUpdate=null},Be.Texture.DEFAULT_IMAGE=void 0,Be.Texture.DEFAULT_MAPPING=Be.UVMapping,Be.Texture.prototype={constructor:Be.Texture,set needsUpdate(t){!0===t&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e,n,r={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=Be.Math.generateUUID()),void 0===t.images[i.uuid]&&(t.images[i.uuid]={uuid:i.uuid,url:(void 0!==(e=i).toDataURL?n=e:((n=document.createElement("canvas")).width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height)),2048<n.width||2048<n.height?n.toDataURL("image/jpeg",.6):n.toDataURL("image/png"))}),r.image=i.uuid}return t.textures[this.uuid]=r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping===Be.UVMapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||1<t.x)switch(this.wrapS){case Be.RepeatWrapping:t.x=t.x-Math.floor(t.x);break;case Be.ClampToEdgeWrapping:t.x=t.x<0?0:1;break;case Be.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||1<t.y)switch(this.wrapT){case Be.RepeatWrapping:t.y=t.y-Math.floor(t.y);break;case Be.ClampToEdgeWrapping:t.y=t.y<0?0:1;break;case Be.MirroredRepeatWrapping:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Be.EventDispatcher.prototype.apply(Be.Texture.prototype),Be.TextureIdCount=0,Be.DataTexture=function(t,e,n,r,i,a,o,s,l,u,c){Be.Texture.call(this,null,a,o,s,l,u,r,i,c),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:Be.NearestFilter,this.minFilter=void 0!==u?u:Be.NearestFilter,this.flipY=!1,this.generateMipmaps=!1},Be.DataTexture.prototype=Object.create(Be.Texture.prototype),Be.DataTexture.prototype.constructor=Be.DataTexture,Be.CompressedTexture=function(t,e,n,r,i,a,o,s,l,u,c){Be.Texture.call(this,null,a,o,s,l,u,r,i,c),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1},Be.CompressedTexture.prototype=Object.create(Be.Texture.prototype),Be.CompressedTexture.prototype.constructor=Be.CompressedTexture,Be.CubeTexture=function(t,e,n,r,i,a,o,s,l){t=void 0!==t?t:[],e=void 0!==e?e:Be.CubeReflectionMapping,Be.Texture.call(this,t,e,n,r,i,a,o,s,l),this.flipY=!1},Be.CubeTexture.prototype=Object.create(Be.Texture.prototype),Be.CubeTexture.prototype.constructor=Be.CubeTexture,Object.defineProperty(Be.CubeTexture.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Be.VideoTexture=function(t,e,n,r,i,a,o,s,l){Be.Texture.call(this,t,e,n,r,i,a,o,s,l),this.generateMipmaps=!1;var u=this;!function e(){requestAnimationFrame(e),t.readyState>=t.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}()},Be.VideoTexture.prototype=Object.create(Be.Texture.prototype),Be.VideoTexture.prototype.constructor=Be.VideoTexture,Be.Sprite=(le=new Uint16Array([0,1,2,0,2,3]),ue=new Float32Array([-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0]),ce=new Float32Array([0,0,1,0,1,1,0,1]),(he=new Be.BufferGeometry).setIndex(new Be.BufferAttribute(le,1)),he.addAttribute("position",new Be.BufferAttribute(ue,3)),he.addAttribute("uv",new Be.BufferAttribute(ce,2)),function(t){Be.Object3D.call(this),this.type="Sprite",this.geometry=he,this.material=void 0!==t?t:new Be.SpriteMaterial}),Be.Sprite.prototype=Object.create(Be.Object3D.prototype),Be.Sprite.prototype.constructor=Be.Sprite,Be.Sprite.prototype.raycast=(de=new Be.Vector3,function(t,e){de.setFromMatrixPosition(this.matrixWorld);var n=t.ray.distanceSqToPoint(de);this.scale.x*this.scale.y<n||e.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}),Be.Sprite.prototype.clone=function(){return new this.constructor(this.material).copy(this)},Be.Particle=Be.Sprite,Be.LensFlare=function(t,e,n,r,i){Be.Object3D.call(this),this.lensFlares=[],this.positionScreen=new Be.Vector3,(this.customUpdateCallback=void 0)!==t&&this.add(t,e,n,r,i)},Be.LensFlare.prototype=Object.create(Be.Object3D.prototype),Be.LensFlare.prototype.constructor=Be.LensFlare,Be.LensFlare.prototype.add=function(t,e,n,r,i,a){void 0===e&&(e=-1),void 0===n&&(n=0),void 0===a&&(a=1),void 0===i&&(i=new Be.Color(16777215)),void 0===r&&(r=Be.NormalBlending),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:t,size:e,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:r})},Be.LensFlare.prototype.updateLensFlares=function(){var t,e,n=this.lensFlares.length,r=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(t=0;t<n;t++)(e=this.lensFlares[t]).x=this.positionScreen.x+r*e.distance,e.y=this.positionScreen.y+i*e.distance,e.wantedRotation=e.x*Math.PI*.25,e.rotation+=.25*(e.wantedRotation-e.rotation)},Be.LensFlare.prototype.copy=function(t){Be.Object3D.prototype.copy.call(this,t),this.positionScreen.copy(t.positionScreen),this.customUpdateCallback=t.customUpdateCallback;for(var e=0,n=t.lensFlares.length;e<n;e++)this.lensFlares.push(t.lensFlares[e]);return this},Be.Line=function(t,e,n){if(1===n)return new Be.LineSegments(t,e);Be.Object3D.call(this),this.type="Line",this.geometry=void 0!==t?t:new Be.Geometry,this.material=void 0!==e?e:new Be.LineBasicMaterial({color:16777215*Math.random()})},Be.Line.prototype=Object.create(Be.Object3D.prototype),Be.Line.prototype.constructor=Be.Line,Be.Line.prototype.raycast=(fe=new Be.Matrix4,pe=new Be.Ray,ge=new Be.Sphere,function(t,e){var n=t.linePrecision,r=n*n,i=this.geometry,a=this.matrixWorld;if(null===i.boundingSphere&&i.computeBoundingSphere(),ge.copy(i.boundingSphere),ge.applyMatrix4(a),!1!==t.ray.intersectsSphere(ge)){fe.getInverse(a),pe.copy(t.ray).applyMatrix4(fe);var o=new Be.Vector3,s=new Be.Vector3,l=new Be.Vector3,u=new Be.Vector3,c=this instanceof Be.LineSegments?2:1;if(i instanceof Be.BufferGeometry){var h=i.index,d=i.attributes.position.array;if(null!==h)for(var f=h.array,p=0,g=f.length-1;p<g;p+=c){var m=f[p],v=f[p+1];o.fromArray(d,3*m),s.fromArray(d,3*v),r<pe.distanceSqToSegment(o,s,u,l)||(u.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(u))<t.near||_>t.far||e.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}))}else for(p=0,g=d.length/3-1;p<g;p+=c)o.fromArray(d,3*p),s.fromArray(d,3*p+3),r<pe.distanceSqToSegment(o,s,u,l)||(u.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(u))<t.near||_>t.far||e.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}))}else if(i instanceof Be.Geometry){var y=i.vertices,b=y.length;for(p=0;p<b-1;p+=c){var _;r<pe.distanceSqToSegment(y[p],y[p+1],u,l)||(u.applyMatrix4(this.matrixWorld),(_=t.ray.origin.distanceTo(u))<t.near||_>t.far||e.push({distance:_,point:l.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this}))}}}}),Be.Line.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},Be.LineStrip=0,Be.LinePieces=1,Be.LineSegments=function(t,e){Be.Line.call(this,t,e),this.type="LineSegments"},Be.LineSegments.prototype=Object.create(Be.Line.prototype),Be.LineSegments.prototype.constructor=Be.LineSegments,Be.Mesh=function(t,e){Be.Object3D.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Be.Geometry,this.material=void 0!==e?e:new Be.MeshBasicMaterial({color:16777215*Math.random()}),this.drawMode=Be.TrianglesDrawMode,this.updateMorphTargets()},Be.Mesh.prototype=Object.create(Be.Object3D.prototype),Be.Mesh.prototype.constructor=Be.Mesh,Be.Mesh.prototype.setDrawMode=function(t){this.drawMode=t},Be.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&0<this.geometry.morphTargets.length){this.morphTargetBase=-1,this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,e=this.geometry.morphTargets.length;t<e;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[t].name]=t}},Be.Mesh.prototype.getMorphTargetIndexByName=function(t){return void 0!==this.morphTargetDictionary[t]?this.morphTargetDictionary[t]:0},Be.Mesh.prototype.raycast=(me=new Be.Matrix4,ve=new Be.Ray,ye=new Be.Sphere,be=new Be.Vector3,_e=new Be.Vector3,Ee=new Be.Vector3,Ae=new Be.Vector3,Te=new Be.Vector3,we=new Be.Vector3,Se=new Be.Vector2,xe=new Be.Vector2,Le=new Be.Vector2,Me=new Be.Vector3,ke=new Be.Vector3,Ce=new Be.Vector3,function(t,e){var n,r,i=this.geometry,a=this.material,o=this.matrixWorld;if(void 0!==a&&(null===i.boundingSphere&&i.computeBoundingSphere(),ye.copy(i.boundingSphere),ye.applyMatrix4(o),!1!==t.ray.intersectsSphere(ye)&&(me.getInverse(o),ve.copy(t.ray).applyMatrix4(me),null===i.boundingBox||!1!==ve.intersectsBox(i.boundingBox))))if(i instanceof Be.BufferGeometry){var s,l,u,c=i.index,h=i.attributes,d=h.position.array;if(void 0!==h.uv&&(n=h.uv.array),null!==c)for(var f=c.array,p=0,g=f.length;p<g;p+=3)s=f[p],l=f[p+1],u=f[p+2],(r=ze(this,t,ve,d,n,s,l,u))&&(r.faceIndex=Math.floor(p/3),e.push(r));else for(p=0,g=d.length;p<g;p+=9)(r=ze(this,t,ve,d,n,s=p/3,l=s+1,u=s+2))&&(r.index=s,e.push(r))}else if(i instanceof Be.Geometry){var m,v,y,b=a instanceof Be.MultiMaterial,_=1==b?a.materials:null,E=i.vertices,A=i.faces,T=i.faceVertexUvs[0];0<T.length&&(n=T);for(var w=0,S=A.length;w<S;w++){var x=A[w],L=1==b?_[x.materialIndex]:a;if(void 0!==L){if(m=E[x.a],v=E[x.b],y=E[x.c],!0===L.morphTargets){var M=i.morphTargets,k=this.morphTargetInfluences;be.set(0,0,0),_e.set(0,0,0),Ee.set(0,0,0);for(var C=0,R=M.length;C<R;C++){var P=k[C];if(0!==P){var O=M[C].vertices;be.addScaledVector(Ae.subVectors(O[x.a],m),P),_e.addScaledVector(Te.subVectors(O[x.b],v),P),Ee.addScaledVector(we.subVectors(O[x.c],y),P)}}be.add(m),_e.add(v),Ee.add(y),m=be,v=_e,y=Ee}if(r=Ge(this,t,ve,m,v,y,ke)){if(n){var D=n[w];Se.copy(D[0]),xe.copy(D[1]),Le.copy(D[2]),r.uv=Ve(ke,m,v,y,Se,xe,Le)}r.face=x,r.faceIndex=w,e.push(r)}}}}}),Be.Mesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},Be.SkinnedMesh=function(t,e,n){Be.Mesh.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Be.Matrix4,this.bindMatrixInverse=new Be.Matrix4;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,a,o=0,s=this.geometry.bones.length;o<s;++o)a=this.geometry.bones[o],i=new Be.Bone(this),r.push(i),i.name=a.name,i.position.fromArray(a.pos),i.quaternion.fromArray(a.rotq),void 0!==a.scl&&i.scale.fromArray(a.scl);for(o=0,s=this.geometry.bones.length;o<s;++o)-1!==(a=this.geometry.bones[o]).parent&&null!==a.parent?r[a.parent].add(r[o]):this.add(r[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new Be.Skeleton(r,void 0,n),this.matrixWorld)},Be.SkinnedMesh.prototype=Object.create(Be.Mesh.prototype),Be.SkinnedMesh.prototype.constructor=Be.SkinnedMesh,Be.SkinnedMesh.prototype.bind=function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},Be.SkinnedMesh.prototype.pose=function(){this.skeleton.pose()},Be.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof Be.Geometry)for(var t=0;t<this.geometry.skinWeights.length;t++){var e=this.geometry.skinWeights[t];(i=1/e.lengthManhattan())!==1/0?e.multiplyScalar(i):e.set(1,0,0,0)}else if(this.geometry instanceof Be.BufferGeometry){var n=new Be.Vector4,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++){var i;n.x=r.getX(t),n.y=r.getY(t),n.z=r.getZ(t),n.w=r.getW(t),(i=1/n.lengthManhattan())!==1/0?n.multiplyScalar(i):n.set(1,0,0,0),r.setXYZW(t,n.x,n.y,n.z,n.w)}}},Be.SkinnedMesh.prototype.updateMatrixWorld=function(t){Be.Mesh.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},Be.SkinnedMesh.prototype.clone=function(){return new this.constructor(this.geometry,this.material,this.useVertexTexture).copy(this)},Be.Points=function(t,e){Be.Object3D.call(this),this.type="Points",this.geometry=void 0!==t?t:new Be.Geometry,this.material=void 0!==e?e:new Be.PointsMaterial({color:16777215*Math.random()})},Be.Points.prototype=Object.create(Be.Object3D.prototype),Be.Points.prototype.constructor=Be.Points,Be.Points.prototype.raycast=(Re=new Be.Matrix4,Pe=new Be.Ray,Oe=new Be.Sphere,function(t,e){var n=this,r=this.geometry,i=this.matrixWorld,a=t.params.Points.threshold;if(null===r.boundingSphere&&r.computeBoundingSphere(),Oe.copy(r.boundingSphere),Oe.applyMatrix4(i),!1!==t.ray.intersectsSphere(Oe)){Re.getInverse(i),Pe.copy(t.ray).applyMatrix4(Re);var o=a/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=new Be.Vector3;if(r instanceof Be.BufferGeometry){var u=r.index,c=r.attributes.position.array;if(null!==u)for(var h=u.array,d=0,f=h.length;d<f;d++){var p=h[d];l.fromArray(c,3*p),v(l,p)}else{d=0;for(var g=c.length/3;d<g;d++)l.fromArray(c,3*d),v(l,d)}}else{var m=r.vertices;for(d=0,g=m.length;d<g;d++)v(m[d],d)}}function v(r,a){var o=Pe.distanceSqToPoint(r);if(o<s){var l=Pe.closestPointToPoint(r);l.applyMatrix4(i);var u=t.ray.origin.distanceTo(l);if(u<t.near||u>t.far)return;e.push({distance:u,distanceToRay:Math.sqrt(o),point:l.clone(),index:a,face:null,object:n})}}}),Be.Points.prototype.clone=function(){return new this.constructor(this.geometry,this.material).copy(this)},Be.Light=function(t,e){Be.Object3D.call(this),this.type="Light",this.color=new Be.Color(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0},Be.Light.prototype=Object.create(Be.Object3D.prototype),Be.Light.prototype.constructor=Be.Light,Be.Light.prototype.copy=function(t){return Be.Object3D.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},Be.Light.prototype.toJSON=function(t){var e=Be.Object3D.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),e},Be.ShaderChunk={},Be.ShaderChunk.alphamap_fragment="#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",Be.ShaderChunk.alphamap_pars_fragment="#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",Be.ShaderChunk.alphatest_fragment="#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n",Be.ShaderChunk.aomap_fragment="#ifdef USE_AOMAP\n\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.aomap_pars_fragment="#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif",Be.ShaderChunk.begin_vertex="\nvec3 transformed = vec3( position );\n",Be.ShaderChunk.beginnormal_vertex="\nvec3 objectNormal = vec3( normal );\n",Be.ShaderChunk.color_fragment="#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif",Be.ShaderChunk.color_pars_fragment="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n",Be.ShaderChunk.color_pars_vertex="#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif",Be.ShaderChunk.color_vertex="#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif",Be.ShaderChunk.common="#define PI 3.14159\n#define PI2 6.28318\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\n\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n",Be.ShaderChunk.defaultnormal_vertex="#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n",Be.ShaderChunk.encodings_fragment="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",Be.ShaderChunk.encodings_pars_fragment="// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",Be.ShaderChunk.envmap_fragment="#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#else\n\t\tfloat flipNormal = 1.0;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#endif\n\n\tenvColor = envMapTexelToLinear( envColor );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.envmap_pars_fragment="#if defined( USE_ENVMAP ) || defined( STANDARD )\n\tuniform float reflectivity;\n\tuniform float envMapIntenstiy;\n#endif\n\n#ifdef USE_ENVMAP\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( STANDARD )\n\n\t\tuniform float refractionRatio;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.envmap_pars_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n\n\tvarying vec3 vReflect;\n\n\tuniform float refractionRatio;\n\n#endif\n",Be.ShaderChunk.envmap_vertex="#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG ) && ! defined( STANDARD )\n\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t#else\n\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.fog_fragment="#ifdef USE_FOG\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n\t#else\n\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\n\t#endif\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",Be.ShaderChunk.fog_pars_fragment="#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n\n#endif",Be.ShaderChunk.logdepthbuf_fragment="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif",Be.ShaderChunk.logdepthbuf_pars_fragment="#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.logdepthbuf_pars_vertex="#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif",Be.ShaderChunk.logdepthbuf_vertex="#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n\t#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.map_fragment="#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n",Be.ShaderChunk.map_pars_fragment="#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",Be.ShaderChunk.morphnormal_vertex="#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n",Be.ShaderChunk.morphtarget_pars_vertex="#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif",Be.ShaderChunk.morphtarget_vertex="#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.premultiplied_alpha_fragment="#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",Be.ShaderChunk.project_vertex="#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n",Be.ShaderChunk.skinbase_vertex="#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif",Be.ShaderChunk.skinning_pars_vertex="#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.skinning_vertex="#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n",Be.ShaderChunk.skinnormal_vertex="#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n",Be.ShaderChunk.specularmap_fragment="float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif",Be.ShaderChunk.specularmap_pars_fragment="#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif",Be.ShaderChunk.tonemapping_fragment="#if defined( TONE_MAPPING )\n\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",Be.ShaderChunk.tonemapping_pars_fragment="#define saturate(a) clamp( a, 0.0, 1.0 )\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n  return toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n  // John Hable's filmic operator from Uncharted 2 video game\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n  // optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n",Be.ShaderChunk.uv2_pars_fragment="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif",Be.ShaderChunk.uv2_pars_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif",Be.ShaderChunk.uv2_vertex="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif",Be.ShaderChunk.uv_pars_fragment="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvarying vec2 vUv;\n\n#endif",Be.ShaderChunk.uv_pars_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n",Be.ShaderChunk.uv_vertex="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif",Be.ShaderChunk.worldpos_vertex="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( STANDARD ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n\t#endif\n\n#endif\n",Be.ShaderChunk.meshbasic_frag="uniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n\nvoid main() {\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight;\n\treflectedLight.directDiffuse = vec3( 0.0 );\n\treflectedLight.directSpecular = vec3( 0.0 );\n\treflectedLight.indirectDiffuse = diffuseColor.rgb;\n\treflectedLight.indirectSpecular = vec3( 0.0 );\n\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",Be.ShaderChunk.meshbasic_vert="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\n}\n",Be.UniformsUtils={merge:function(t){for(var e={},n=0;n<t.length;n++){var r=this.clone(t[n]);for(var i in r)e[i]=r[i]}return e},clone:function(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i instanceof Be.Color||i instanceof Be.Vector2||i instanceof Be.Vector3||i instanceof Be.Vector4||i instanceof Be.Matrix3||i instanceof Be.Matrix4||i instanceof Be.Texture?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}},Be.UniformsLib={common:{diffuse:{type:"c",value:new Be.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new Be.Vector4(0,0,1,1)},specularMap:{type:"t",value:null},alphaMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98}},aomap:{aoMap:{type:"t",value:null},aoMapIntensity:{type:"f",value:1}},lightmap:{lightMap:{type:"t",value:null},lightMapIntensity:{type:"f",value:1}},emissivemap:{emissiveMap:{type:"t",value:null}},bumpmap:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new Be.Vector2(1,1)}},displacementmap:{displacementMap:{type:"t",value:null},displacementScale:{type:"f",value:1},displacementBias:{type:"f",value:0}},roughnessmap:{roughnessMap:{type:"t",value:null}},metalnessmap:{metalnessMap:{type:"t",value:null}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new Be.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLights:{type:"sa",value:[],properties:{direction:{type:"v3"},color:{type:"c"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},directionalShadowMap:{type:"tv",value:[]},directionalShadowMatrix:{type:"m4v",value:[]},spotLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},direction:{type:"v3"},distance:{type:"f"},coneCos:{type:"f"},penumbraCos:{type:"f"},decay:{type:"f"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},spotShadowMap:{type:"tv",value:[]},spotShadowMatrix:{type:"m4v",value:[]},pointLights:{type:"sa",value:[],properties:{color:{type:"c"},position:{type:"v3"},decay:{type:"f"},distance:{type:"f"},shadow:{type:"i"},shadowBias:{type:"f"},shadowRadius:{type:"f"},shadowMapSize:{type:"v2"}}},pointShadowMap:{type:"tv",value:[]},pointShadowMatrix:{type:"m4v",value:[]},hemisphereLights:{type:"sa",value:[],properties:{direction:{type:"v3"},skyColor:{type:"c"},groundColor:{type:"c"}}}},points:{diffuse:{type:"c",value:new Be.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new Be.Vector4(0,0,1,1)}}},Be.ShaderLib={basic:{uniforms:Be.UniformsUtils.merge([Be.UniformsLib.common,Be.UniformsLib.aomap,Be.UniformsLib.fog]),vertexShader:Be.ShaderChunk.meshbasic_vert,fragmentShader:Be.ShaderChunk.meshbasic_frag},lambert:{uniforms:Be.UniformsUtils.merge([Be.UniformsLib.common,Be.UniformsLib.aomap,Be.UniformsLib.lightmap,Be.UniformsLib.emissivemap,Be.UniformsLib.fog,Be.UniformsLib.lights,{emissive:{type:"c",value:new Be.Color(0)}}]),vertexShader:Be.ShaderChunk.meshlambert_vert,fragmentShader:Be.ShaderChunk.meshlambert_frag},phong:{uniforms:Be.UniformsUtils.merge([Be.UniformsLib.common,Be.UniformsLib.aomap,Be.UniformsLib.lightmap,Be.UniformsLib.emissivemap,Be.UniformsLib.bumpmap,Be.UniformsLib.normalmap,Be.UniformsLib.displacementmap,Be.UniformsLib.fog,Be.UniformsLib.lights,{emissive:{type:"c",value:new Be.Color(0)},specular:{type:"c",value:new Be.Color(1118481)},shininess:{type:"f",value:30}}]),vertexShader:Be.ShaderChunk.meshphong_vert,fragmentShader:Be.ShaderChunk.meshphong_frag},standard:{uniforms:Be.UniformsUtils.merge([Be.UniformsLib.common,Be.UniformsLib.aomap,Be.UniformsLib.lightmap,Be.UniformsLib.emissivemap,Be.UniformsLib.bumpmap,Be.UniformsLib.normalmap,Be.UniformsLib.displacementmap,Be.UniformsLib.roughnessmap,Be.UniformsLib.metalnessmap,Be.UniformsLib.fog,Be.UniformsLib.lights,{emissive:{type:"c",value:new Be.Color(0)},roughness:{type:"f",value:.5},metalness:{type:"f",value:0},envMapIntensity:{type:"f",value:1}}]),vertexShader:Be.ShaderChunk.meshstandard_vert,fragmentShader:Be.ShaderChunk.meshstandard_frag},points:{uniforms:Be.UniformsUtils.merge([Be.UniformsLib.points,Be.UniformsLib.fog]),vertexShader:Be.ShaderChunk.points_vert,fragmentShader:Be.ShaderChunk.points_frag},dashed:{uniforms:Be.UniformsUtils.merge([Be.UniformsLib.common,Be.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:Be.ShaderChunk.linedashed_vert,fragmentShader:Be.ShaderChunk.linedashed_frag},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:Be.ShaderChunk.depth_vert,fragmentShader:Be.ShaderChunk.depth_frag},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:Be.ShaderChunk.normal_vert,fragmentShader:Be.ShaderChunk.normal_frag},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:Be.ShaderChunk.cube_vert,fragmentShader:Be.ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:Be.ShaderChunk.equirect_vert,fragmentShader:Be.ShaderChunk.equirect_frag},depthRGBA:{uniforms:{},vertexShader:Be.ShaderChunk.depthRGBA_vert,fragmentShader:Be.ShaderChunk.depthRGBA_frag},distanceRGBA:{uniforms:{lightPos:{type:"v3",value:new Be.Vector3(0,0,0)}},vertexShader:Be.ShaderChunk.distanceRGBA_vert,fragmentShader:Be.ShaderChunk.distanceRGBA_frag}},Be.WebGLRenderer=function(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElement("canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,o=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=[],c=[],h=-1,d=[],f=-1,p=new Float32Array(8),g=[],m=[];this.domElement=e,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Be.LinearToneMapping,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0;var v,y=this,b=null,_=null,E=null,A=-1,T="",w=null,S=new Be.Vector4,x=null,L=new Be.Vector4,M=0,k=new Be.Color(0),C=0,R=e.width,P=e.height,O=1,D=new Be.Vector4(0,0,R,P),I=!1,N=new Be.Vector4(0,0,R,P),F=new Be.Frustum,B=new Be.Matrix4,U=new Be.Vector3,j={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[],shadowsPointLight:0},V={geometries:0,textures:0},G={calls:0,vertices:0,faces:0,points:0};this.info={render:G,memory:V,programs:null};try{var z={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l};if(null===(v=n||e.getContext("webgl",z)||e.getContext("experimental-webgl",z)))throw null!==e.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===v.getShaderPrecisionFormat&&(v.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),e.addEventListener("webglcontextlost",st,!1)}catch(t){}var Y=new Be.WebGLExtensions(v);Y.get("OES_texture_float"),Y.get("OES_texture_float_linear"),Y.get("OES_texture_half_float"),Y.get("OES_texture_half_float_linear"),Y.get("OES_standard_derivatives"),Y.get("ANGLE_instanced_arrays"),Y.get("OES_element_index_uint")&&(Be.BufferGeometry.MaxIndex=4294967296);var H=new Be.WebGLCapabilities(v,Y,t),$=new Be.WebGLState(v,Y,Ot),W=new Be.WebGLProperties,K=new Be.WebGLObjects(v,W,this.info),X=new Be.WebGLPrograms(this,H),q=new Be.WebGLLights;this.info.programs=X.programs;var Z=new Be.WebGLBufferRenderer(v,Y,G),J=new Be.WebGLIndexedBufferRenderer(v,Y,G);function Q(){return null===_?O:1}function tt(t,e,n,r){!0===s&&(t*=r,e*=r,n*=r),$.clearColor(t,e,n,r)}function et(){$.init(),$.scissor(S.copy(D).multiplyScalar(O)),$.viewport(L.copy(N).multiplyScalar(O)),tt(k.r,k.g,k.b,C)}function nt(){w=b=null,T="",A=-1,$.reset()}et(),this.context=v,this.capabilities=H,this.extensions=Y,this.properties=W,this.state=$;var rt=new Be.WebGLShadowMap(this,j,K);this.shadowMap=rt;var it,at=new Be.SpritePlugin(this,g),ot=new Be.LensFlarePlugin(this,m);function st(t){t.preventDefault(),nt(),et(),W.clear()}function lt(t){var e=t.target;e.removeEventListener("dispose",lt),function(t){var e=W.get(t);if(t.image&&e.__image__webglTextureCube)v.deleteTexture(e.__image__webglTextureCube);else{if(void 0===e.__webglInit)return;v.deleteTexture(e.__webglTexture)}W.delete(t)}(e),V.textures--}function ut(t){var e=t.target;e.removeEventListener("dispose",ut),function(t){var e=W.get(t),n=W.get(t.texture);if(t&&void 0!==n.__webglTexture){if(v.deleteTexture(n.__webglTexture),t instanceof Be.WebGLRenderTargetCube)for(var r=0;r<6;r++)v.deleteFramebuffer(e.__webglFramebuffer[r]),v.deleteRenderbuffer(e.__webglDepthbuffer[r]);else v.deleteFramebuffer(e.__webglFramebuffer),v.deleteRenderbuffer(e.__webglDepthbuffer);W.delete(t.texture),W.delete(t)}}(e),V.textures--}function ct(t){var e,n=t.target;n.removeEventListener("dispose",ct),ht(e=n),W.delete(e)}function ht(t){var e=W.get(t).program;(t.program=void 0)!==e&&X.releaseProgram(e)}function dt(t,e){return Math.abs(e[0])-Math.abs(t[0])}function ft(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function pt(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function gt(t,e,n,r,i){var a,o;o=n.transparent?(a=d,++f):(a=c,++h);var s=a[o];void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=n,s.z=U.z,s.group=i):(s={id:t.id,object:t,geometry:e,material:n,z:U.z,group:i},a.push(s))}function mt(t,e,n,r){for(var i=0,a=t.length;i<a;i++){var o=t[i],s=o.object,l=o.geometry,u=void 0===r?o.material:r,c=o.group;if(s.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s instanceof Be.ImmediateRenderObject){vt(u);var h=yt(e,n,u,s);T="",s.render((function(t){y.renderBufferImmediate(t,h,u)}))}else y.renderBufferDirect(e,n,l,u,s,c)}}function vt(t){var e;(e=t).side!==Be.DoubleSide?$.enable(v.CULL_FACE):$.disable(v.CULL_FACE),$.setFlipSided(e.side===Be.BackSide),!0===t.transparent?$.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):$.setBlending(Be.NoBlending),$.setDepthFunc(t.depthFunc),$.setDepthTest(t.depthTest),$.setDepthWrite(t.depthWrite),$.setColorWrite(t.colorWrite),$.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function yt(t,n,r,i){M=0;var a=W.get(r);void 0===a.program&&(r.needsUpdate=!0),void 0!==a.lightsHash&&a.lightsHash!==j.hash&&(r.needsUpdate=!0),r.needsUpdate&&(function(t,e,n){var r=W.get(t),i=X.getParameters(t,j,e,n),a=X.getProgramCode(t,i),o=r.program,s=!0;if(void 0===o)t.addEventListener("dispose",ct);else if(o.code!==a)ht(t);else{if(void 0!==i.shaderID)return;s=!1}if(s){if(i.shaderID){var l=Be.ShaderLib[i.shaderID];r.__webglShader={name:t.type,uniforms:Be.UniformsUtils.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else r.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=r.__webglShader,o=X.acquireProgram(t,i,a),r.program=o,t.program=o}var u=o.getAttributes();if(t.morphTargets)for(var c=t.numSupportedMorphTargets=0;c<y.maxMorphTargets;c++)0<=u["morphTarget"+c]&&t.numSupportedMorphTargets++;if(t.morphNormals)for(c=t.numSupportedMorphNormals=0;c<y.maxMorphNormals;c++)0<=u["morphNormal"+c]&&t.numSupportedMorphNormals++;r.uniformsList=[];var h=r.__webglShader.uniforms,d=r.program.getUniforms();for(var f in h){var p=d[f];p&&r.uniformsList.push([r.__webglShader.uniforms[f],p])}(t instanceof Be.MeshPhongMaterial||t instanceof Be.MeshLambertMaterial||t instanceof Be.MeshStandardMaterial||t.lights)&&(r.lightsHash=j.hash,h.ambientLightColor.value=j.ambient,h.directionalLights.value=j.directional,h.spotLights.value=j.spot,h.pointLights.value=j.point,h.hemisphereLights.value=j.hemi,h.directionalShadowMap.value=j.directionalShadowMap,h.directionalShadowMatrix.value=j.directionalShadowMatrix,h.spotShadowMap.value=j.spotShadowMap,h.spotShadowMatrix.value=j.spotShadowMatrix,h.pointShadowMap.value=j.pointShadowMap,h.pointShadowMatrix.value=j.pointShadowMatrix),r.hasDynamicUniforms=!1;for(var g=0,m=r.uniformsList.length;g<m;g++)if(!0===r.uniformsList[g][0].dynamic){r.hasDynamicUniforms=!0;break}}(r,n,i),r.needsUpdate=!1);var o,s,l,u,c,h,d,f,p=!1,g=!1,m=!1,_=a.program,E=_.getUniforms(),T=a.__webglShader.uniforms;if(_.id!==b&&(v.useProgram(_.program),b=_.id,m=g=p=!0),r.id!==A&&(A=r.id,g=!0),!p&&t===w||(v.uniformMatrix4fv(E.projectionMatrix,!1,t.projectionMatrix.elements),H.logarithmicDepthBuffer&&v.uniform1f(E.logDepthBufFC,2/(Math.log(t.far+1)/Math.LN2)),t!==w&&(w=t,m=g=!0),(r instanceof Be.ShaderMaterial||r instanceof Be.MeshPhongMaterial||r instanceof Be.MeshStandardMaterial||r.envMap)&&void 0!==E.cameraPosition&&(U.setFromMatrixPosition(t.matrixWorld),v.uniform3f(E.cameraPosition,U.x,U.y,U.z)),(r instanceof Be.MeshPhongMaterial||r instanceof Be.MeshLambertMaterial||r instanceof Be.MeshBasicMaterial||r instanceof Be.MeshStandardMaterial||r instanceof Be.ShaderMaterial||r.skinning)&&void 0!==E.viewMatrix&&v.uniformMatrix4fv(E.viewMatrix,!1,t.matrixWorldInverse.elements),void 0!==E.toneMappingExposure&&v.uniform1f(E.toneMappingExposure,y.toneMappingExposure),void 0!==E.toneMappingWhitePoint&&v.uniform1f(E.toneMappingWhitePoint,y.toneMappingWhitePoint)),r.skinning)if(i.bindMatrix&&void 0!==E.bindMatrix&&v.uniformMatrix4fv(E.bindMatrix,!1,i.bindMatrix.elements),i.bindMatrixInverse&&void 0!==E.bindMatrixInverse&&v.uniformMatrix4fv(E.bindMatrixInverse,!1,i.bindMatrixInverse.elements),H.floatVertexTextures&&i.skeleton&&i.skeleton.useVertexTexture){if(void 0!==E.boneTexture){var S=_t();v.uniform1i(E.boneTexture,S),y.setTexture(i.skeleton.boneTexture,S)}void 0!==E.boneTextureWidth&&v.uniform1i(E.boneTextureWidth,i.skeleton.boneTextureWidth),void 0!==E.boneTextureHeight&&v.uniform1i(E.boneTextureHeight,i.skeleton.boneTextureHeight)}else i.skeleton&&i.skeleton.boneMatrices&&void 0!==E.boneGlobalMatrices&&v.uniformMatrix4fv(E.boneGlobalMatrices,!1,i.skeleton.boneMatrices);return g&&((r instanceof Be.MeshPhongMaterial||r instanceof Be.MeshLambertMaterial||r instanceof Be.MeshStandardMaterial||r.lights)&&(h=m,(c=T).ambientLightColor.needsUpdate=h,c.directionalLights.needsUpdate=h,c.pointLights.needsUpdate=h,c.spotLights.needsUpdate=h,c.hemisphereLights.needsUpdate=h),n&&r.fog&&(u=n,(l=T).fogColor.value=u.color,u instanceof Be.Fog?(l.fogNear.value=u.near,l.fogFar.value=u.far):u instanceof Be.FogExp2&&(l.fogDensity.value=u.density)),(r instanceof Be.MeshBasicMaterial||r instanceof Be.MeshLambertMaterial||r instanceof Be.MeshPhongMaterial||r instanceof Be.MeshStandardMaterial)&&function(t,e){var n;if(t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n){n instanceof Be.WebGLRenderTarget&&(n=n.texture);var r=n.offset,i=n.repeat;t.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap instanceof Be.WebGLRenderTargetCube?1:-1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}(T,r),r instanceof Be.LineBasicMaterial?bt(T,r):r instanceof Be.LineDashedMaterial?(bt(T,r),s=r,(o=T).dashSize.value=s.dashSize,o.totalSize.value=s.dashSize+s.gapSize,o.scale.value=s.scale):r instanceof Be.PointsMaterial?function(t,n){if(t.diffuse.value=n.color,t.opacity.value=n.opacity,t.size.value=n.size*O,t.scale.value=e.clientHeight/2,t.map.value=n.map,null!==n.map){var r=n.map.offset,i=n.map.repeat;t.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}}(T,r):r instanceof Be.MeshLambertMaterial?function(t,e){e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(T,r):r instanceof Be.MeshPhongMaterial?function(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(T,r):r instanceof Be.MeshStandardMaterial?function(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}(T,r):r instanceof Be.MeshDepthMaterial?(T.mNear.value=t.near,T.mFar.value=t.far,T.opacity.value=r.opacity):r instanceof Be.MeshNormalMaterial&&(T.opacity.value=r.opacity),At(a.uniformsList)),d=E,f=i,v.uniformMatrix4fv(d.modelViewMatrix,!1,f.modelViewMatrix.elements),d.normalMatrix&&v.uniformMatrix3fv(d.normalMatrix,!1,f.normalMatrix.elements),void 0!==E.modelMatrix&&v.uniformMatrix4fv(E.modelMatrix,!1,i.matrixWorld.elements),!0===a.hasDynamicUniforms&&function(t,e,n){for(var r=[],i=0,a=t.length;i<a;i++){var o=t[i][0],s=o.onUpdateCallback;void 0!==s&&(s.bind(o)(e,n),r.push(t[i]))}At(r)}(a.uniformsList,i,t),_}function bt(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function _t(){var t=M;return M+=1,t}function Et(t,e,n,r){var i,a;if("1i"===e)v.uniform1i(n,r);else if("1f"===e)v.uniform1f(n,r);else if("2f"===e)v.uniform2f(n,r[0],r[1]);else if("3f"===e)v.uniform3f(n,r[0],r[1],r[2]);else if("4f"===e)v.uniform4f(n,r[0],r[1],r[2],r[3]);else if("1iv"===e)v.uniform1iv(n,r);else if("3iv"===e)v.uniform3iv(n,r);else if("1fv"===e)v.uniform1fv(n,r);else if("2fv"===e)v.uniform2fv(n,r);else if("3fv"===e)v.uniform3fv(n,r);else if("4fv"===e)v.uniform4fv(n,r);else if("Matrix2fv"===e)v.uniformMatrix2fv(n,!1,r);else if("Matrix3fv"===e)v.uniformMatrix3fv(n,!1,r);else if("Matrix4fv"===e)v.uniformMatrix4fv(n,!1,r);else if("i"===e)v.uniform1i(n,r);else if("f"===e)v.uniform1f(n,r);else if("v2"===e)v.uniform2f(n,r.x,r.y);else if("v3"===e)v.uniform3f(n,r.x,r.y,r.z);else if("v4"===e)v.uniform4f(n,r.x,r.y,r.z,r.w);else if("c"===e)v.uniform3f(n,r.r,r.g,r.b);else if("s"===e){var o=t.properties;for(var s in o){var l=o[s],u=n[s],c=r[s];Et(l,l.type,u,c)}}else if("sa"===e){o=t.properties;for(var h=0,d=r.length;h<d;h++)for(var s in o)l=o[s],u=n[h][s],c=r[h][s],Et(l,l.type,u,c)}else if("iv1"===e)v.uniform1iv(n,r);else if("iv"===e)v.uniform3iv(n,r);else if("fv1"===e)v.uniform1fv(n,r);else if("fv"===e)v.uniform3fv(n,r);else if("v2v"===e){void 0===t._array&&(t._array=new Float32Array(2*r.length)),h=0;for(var f=0,p=r.length;h<p;h++,f+=2)t._array[f+0]=r[h].x,t._array[f+1]=r[h].y;v.uniform2fv(n,t._array)}else if("v3v"===e){void 0===t._array&&(t._array=new Float32Array(3*r.length)),h=0;var g=0;for(p=r.length;h<p;h++,g+=3)t._array[g+0]=r[h].x,t._array[g+1]=r[h].y,t._array[g+2]=r[h].z;v.uniform3fv(n,t._array)}else if("v4v"===e){void 0===t._array&&(t._array=new Float32Array(4*r.length)),h=0;var m=0;for(p=r.length;h<p;h++,m+=4)t._array[m+0]=r[h].x,t._array[m+1]=r[h].y,t._array[m+2]=r[h].z,t._array[m+3]=r[h].w;v.uniform4fv(n,t._array)}else if("m2"===e)v.uniformMatrix2fv(n,!1,r.elements);else if("m3"===e)v.uniformMatrix3fv(n,!1,r.elements);else if("m3v"===e){for(void 0===t._array&&(t._array=new Float32Array(9*r.length)),h=0,p=r.length;h<p;h++)r[h].flattenToArrayOffset(t._array,9*h);v.uniformMatrix3fv(n,!1,t._array)}else if("m4"===e)v.uniformMatrix4fv(n,!1,r.elements);else if("m4v"===e){for(void 0===t._array&&(t._array=new Float32Array(16*r.length)),h=0,p=r.length;h<p;h++)r[h].flattenToArrayOffset(t._array,16*h);v.uniformMatrix4fv(n,!1,t._array)}else if("t"===e){if(i=r,a=_t(),v.uniform1i(n,a),!i)return;i instanceof Be.CubeTexture||Array.isArray(i.image)&&6===i.image.length?Lt(i,a):i instanceof Be.WebGLRenderTargetCube?Mt(i.texture,a):i instanceof Be.WebGLRenderTarget?y.setTexture(i.texture,a):y.setTexture(i,a)}else if("tv"===e){for(void 0===t._array&&(t._array=[]),h=0,p=t.value.length;h<p;h++)t._array[h]=_t();for(v.uniform1iv(n,t._array),h=0,p=t.value.length;h<p;h++)i=t.value[h],a=t._array[h],i&&(i instanceof Be.CubeTexture||i.image instanceof Array&&6===i.image.length?Lt(i,a):i instanceof Be.WebGLRenderTarget?y.setTexture(i.texture,a):i instanceof Be.WebGLRenderTargetCube?Mt(i.texture,a):y.setTexture(i,a))}}function At(t){for(var e=0,n=t.length;e<n;e++){var r=t[e][0];!1!==r.needsUpdate&&Et(r,r.type,t[e][1],r.value)}}function Tt(t,e,n){var r;if(n?(v.texParameteri(t,v.TEXTURE_WRAP_S,Ot(e.wrapS)),v.texParameteri(t,v.TEXTURE_WRAP_T,Ot(e.wrapT)),v.texParameteri(t,v.TEXTURE_MAG_FILTER,Ot(e.magFilter)),v.texParameteri(t,v.TEXTURE_MIN_FILTER,Ot(e.minFilter))):(v.texParameteri(t,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(t,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),e.wrapS!==Be.ClampToEdgeWrapping||(e.wrapT,Be.ClampToEdgeWrapping),v.texParameteri(t,v.TEXTURE_MAG_FILTER,Pt(e.magFilter)),v.texParameteri(t,v.TEXTURE_MIN_FILTER,Pt(e.minFilter)),e.minFilter!==Be.NearestFilter&&(e.minFilter,Be.LinearFilter)),r=Y.get("EXT_texture_filter_anisotropic")){if(e.type===Be.FloatType&&null===Y.get("OES_texture_float_linear"))return;if(e.type===Be.HalfFloatType&&null===Y.get("OES_texture_half_float_linear"))return;(1<e.anisotropy||W.get(e).__currentAnisotropy)&&(v.texParameterf(t,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e.anisotropy,y.getMaxAnisotropy())),W.get(e).__currentAnisotropy=e.anisotropy)}}function wt(t,e,n){void 0===t.__webglInit&&(t.__webglInit=!0,e.addEventListener("dispose",lt),t.__webglTexture=v.createTexture(),V.textures++),$.activeTexture(v.TEXTURE0+n),$.bindTexture(v.TEXTURE_2D,t.__webglTexture),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,e.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,e.unpackAlignment);var r,i=St(e.image,H.maxTextureSize);((r=e).wrapS!==Be.ClampToEdgeWrapping||r.wrapT!==Be.ClampToEdgeWrapping||r.minFilter!==Be.NearestFilter&&r.minFilter!==Be.LinearFilter)&&!1===xt(i)&&(i=function(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElement("canvas");return e.width=Be.Math.nearestPowerOfTwo(t.width),e.height=Be.Math.nearestPowerOfTwo(t.height),e.getContext("2d").drawImage(t,0,0,e.width,e.height),e}return t}(i));var a=xt(i),o=Ot(e.format),s=Ot(e.type);Tt(v.TEXTURE_2D,e,a);var l,u=e.mipmaps;if(e instanceof Be.DataTexture)if(0<u.length&&a){for(var c=0,h=u.length;c<h;c++)l=u[c],$.texImage2D(v.TEXTURE_2D,c,o,l.width,l.height,0,o,s,l.data);e.generateMipmaps=!1}else $.texImage2D(v.TEXTURE_2D,0,o,i.width,i.height,0,o,s,i.data);else if(e instanceof Be.CompressedTexture)for(c=0,h=u.length;c<h;c++)l=u[c],e.format!==Be.RGBAFormat&&e.format!==Be.RGBFormat?-1<$.getCompressedTextureFormats().indexOf(o)&&$.compressedTexImage2D(v.TEXTURE_2D,c,o,l.width,l.height,0,l.data):$.texImage2D(v.TEXTURE_2D,c,o,l.width,l.height,0,o,s,l.data);else if(0<u.length&&a){for(c=0,h=u.length;c<h;c++)l=u[c],$.texImage2D(v.TEXTURE_2D,c,o,o,s,l);e.generateMipmaps=!1}else $.texImage2D(v.TEXTURE_2D,0,o,o,s,i);e.generateMipmaps&&a&&v.generateMipmap(v.TEXTURE_2D),t.__version=e.version,e.onUpdate&&e.onUpdate(e)}function St(t,e){if(t.width>e||t.height>e){var n=e/Math.max(t.width,t.height),r=document.createElement("canvas");return r.width=Math.floor(t.width*n),r.height=Math.floor(t.height*n),r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height),r}return t}function xt(t){return Be.Math.isPowerOfTwo(t.width)&&Be.Math.isPowerOfTwo(t.height)}function Lt(t,e){var n=W.get(t);if(6===t.image.length)if(0<t.version&&n.__version!==t.version){n.__image__webglTextureCube||(t.addEventListener("dispose",lt),n.__image__webglTextureCube=v.createTexture(),V.textures++),$.activeTexture(v.TEXTURE0+e),$.bindTexture(v.TEXTURE_CUBE_MAP,n.__image__webglTextureCube),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var r=t instanceof Be.CompressedTexture,i=t.image[0]instanceof Be.DataTexture,a=[],o=0;o<6;o++)!y.autoScaleCubemaps||r||i?a[o]=i?t.image[o].image:t.image[o]:a[o]=St(t.image[o],H.maxCubemapSize);var s=xt(a[0]),l=Ot(t.format),u=Ot(t.type);for(Tt(v.TEXTURE_CUBE_MAP,t,s),o=0;o<6;o++)if(r)for(var c,h=a[o].mipmaps,d=0,f=h.length;d<f;d++)c=h[d],t.format!==Be.RGBAFormat&&t.format!==Be.RGBFormat?-1<$.getCompressedTextureFormats().indexOf(l)&&$.compressedTexImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+o,d,l,c.width,c.height,0,c.data):$.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+o,d,l,c.width,c.height,0,l,u,c.data);else i?$.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,a[o].width,a[o].height,0,l,u,a[o].data):$.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,l,l,u,a[o]);t.generateMipmaps&&s&&v.generateMipmap(v.TEXTURE_CUBE_MAP),n.__version=t.version,t.onUpdate&&t.onUpdate(t)}else $.activeTexture(v.TEXTURE0+e),$.bindTexture(v.TEXTURE_CUBE_MAP,n.__image__webglTextureCube)}function Mt(t,e){$.activeTexture(v.TEXTURE0+e),$.bindTexture(v.TEXTURE_CUBE_MAP,W.get(t).__webglTexture)}function kt(t,e,n,r){var i=Ot(e.texture.format),a=Ot(e.texture.type);$.texImage2D(r,0,i,e.width,e.height,0,i,a,null),v.bindFramebuffer(v.FRAMEBUFFER,t),v.framebufferTexture2D(v.FRAMEBUFFER,n,r,W.get(e.texture).__webglTexture,0),v.bindFramebuffer(v.FRAMEBUFFER,null)}function Ct(t,e){v.bindRenderbuffer(v.RENDERBUFFER,t),e.depthBuffer&&!e.stencilBuffer?(v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_COMPONENT16,e.width,e.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,t)):e.depthBuffer&&e.stencilBuffer?(v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,e.width,e.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,t)):v.renderbufferStorage(v.RENDERBUFFER,v.RGBA4,e.width,e.height),v.bindRenderbuffer(v.RENDERBUFFER,null)}function Rt(t){var e=W.get(t),n=W.get(t.texture);t.addEventListener("dispose",ut),n.__webglTexture=v.createTexture(),V.textures++;var r=t instanceof Be.WebGLRenderTargetCube,i=Be.Math.isPowerOfTwo(t.width)&&Be.Math.isPowerOfTwo(t.height);if(r){e.__webglFramebuffer=[];for(var a=0;a<6;a++)e.__webglFramebuffer[a]=v.createFramebuffer()}else e.__webglFramebuffer=v.createFramebuffer();if(r){for($.bindTexture(v.TEXTURE_CUBE_MAP,n.__webglTexture),Tt(v.TEXTURE_CUBE_MAP,t.texture,i),a=0;a<6;a++)kt(e.__webglFramebuffer[a],t,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+a);t.texture.generateMipmaps&&i&&v.generateMipmap(v.TEXTURE_CUBE_MAP),$.bindTexture(v.TEXTURE_CUBE_MAP,null)}else $.bindTexture(v.TEXTURE_2D,n.__webglTexture),Tt(v.TEXTURE_2D,t.texture,i),kt(e.__webglFramebuffer,t,v.COLOR_ATTACHMENT0,v.TEXTURE_2D),t.texture.generateMipmaps&&i&&v.generateMipmap(v.TEXTURE_2D),$.bindTexture(v.TEXTURE_2D,null);t.depthBuffer&&function(t){var e=W.get(t);if(t instanceof Be.WebGLRenderTargetCube){e.__webglDepthbuffer=[];for(var n=0;n<6;n++)v.bindFramebuffer(v.FRAMEBUFFER,e.__webglFramebuffer[n]),e.__webglDepthbuffer[n]=v.createRenderbuffer(),Ct(e.__webglDepthbuffer[n],t)}else v.bindFramebuffer(v.FRAMEBUFFER,e.__webglFramebuffer),e.__webglDepthbuffer=v.createRenderbuffer(),Ct(e.__webglDepthbuffer,t);v.bindFramebuffer(v.FRAMEBUFFER,null)}(t)}function Pt(t){return t===Be.NearestFilter||t===Be.NearestMipMapNearestFilter||t===Be.NearestMipMapLinearFilter?v.NEAREST:v.LINEAR}function Ot(t){var e;if(t===Be.RepeatWrapping)return v.REPEAT;if(t===Be.ClampToEdgeWrapping)return v.CLAMP_TO_EDGE;if(t===Be.MirroredRepeatWrapping)return v.MIRRORED_REPEAT;if(t===Be.NearestFilter)return v.NEAREST;if(t===Be.NearestMipMapNearestFilter)return v.NEAREST_MIPMAP_NEAREST;if(t===Be.NearestMipMapLinearFilter)return v.NEAREST_MIPMAP_LINEAR;if(t===Be.LinearFilter)return v.LINEAR;if(t===Be.LinearMipMapNearestFilter)return v.LINEAR_MIPMAP_NEAREST;if(t===Be.LinearMipMapLinearFilter)return v.LINEAR_MIPMAP_LINEAR;if(t===Be.UnsignedByteType)return v.UNSIGNED_BYTE;if(t===Be.UnsignedShort4444Type)return v.UNSIGNED_SHORT_4_4_4_4;if(t===Be.UnsignedShort5551Type)return v.UNSIGNED_SHORT_5_5_5_1;if(t===Be.UnsignedShort565Type)return v.UNSIGNED_SHORT_5_6_5;if(t===Be.ByteType)return v.BYTE;if(t===Be.ShortType)return v.SHORT;if(t===Be.UnsignedShortType)return v.UNSIGNED_SHORT;if(t===Be.IntType)return v.INT;if(t===Be.UnsignedIntType)return v.UNSIGNED_INT;if(t===Be.FloatType)return v.FLOAT;if(null!==(e=Y.get("OES_texture_half_float"))&&t===Be.HalfFloatType)return e.HALF_FLOAT_OES;if(t===Be.AlphaFormat)return v.ALPHA;if(t===Be.RGBFormat)return v.RGB;if(t===Be.RGBAFormat)return v.RGBA;if(t===Be.LuminanceFormat)return v.LUMINANCE;if(t===Be.LuminanceAlphaFormat)return v.LUMINANCE_ALPHA;if(t===Be.AddEquation)return v.FUNC_ADD;if(t===Be.SubtractEquation)return v.FUNC_SUBTRACT;if(t===Be.ReverseSubtractEquation)return v.FUNC_REVERSE_SUBTRACT;if(t===Be.ZeroFactor)return v.ZERO;if(t===Be.OneFactor)return v.ONE;if(t===Be.SrcColorFactor)return v.SRC_COLOR;if(t===Be.OneMinusSrcColorFactor)return v.ONE_MINUS_SRC_COLOR;if(t===Be.SrcAlphaFactor)return v.SRC_ALPHA;if(t===Be.OneMinusSrcAlphaFactor)return v.ONE_MINUS_SRC_ALPHA;if(t===Be.DstAlphaFactor)return v.DST_ALPHA;if(t===Be.OneMinusDstAlphaFactor)return v.ONE_MINUS_DST_ALPHA;if(t===Be.DstColorFactor)return v.DST_COLOR;if(t===Be.OneMinusDstColorFactor)return v.ONE_MINUS_DST_COLOR;if(t===Be.SrcAlphaSaturateFactor)return v.SRC_ALPHA_SATURATE;if(null!==(e=Y.get("WEBGL_compressed_texture_s3tc"))){if(t===Be.RGB_S3TC_DXT1_Format)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Be.RGBA_S3TC_DXT1_Format)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Be.RGBA_S3TC_DXT3_Format)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Be.RGBA_S3TC_DXT5_Format)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(null!==(e=Y.get("WEBGL_compressed_texture_pvrtc"))){if(t===Be.RGB_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Be.RGB_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Be.RGBA_PVRTC_4BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Be.RGBA_PVRTC_2BPPV1_Format)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(null!==(e=Y.get("WEBGL_compressed_texture_etc1"))&&t===Be.RGB_ETC1_Format)return e.COMPRESSED_RGB_ETC1_WEBGL;if(null!==(e=Y.get("EXT_blend_minmax"))){if(t===Be.MinEquation)return e.MIN_EXT;if(t===Be.MaxEquation)return e.MAX_EXT}return 0}this.getContext=function(){return v},this.getContextAttributes=function(){return v.getContextAttributes()},this.forceContextLoss=function(){Y.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){if(void 0!==it)return it;var t=Y.get("EXT_texture_filter_anisotropic");return it=null!==t?v.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},this.getPrecision=function(){return H.precision},this.getPixelRatio=function(){return O},this.setPixelRatio=function(t){void 0!==t&&(O=t,this.setSize(N.z,N.w,!1))},this.getSize=function(){return{width:R,height:P}},this.setSize=function(t,n,r){R=t,P=n,e.width=t*O,e.height=n*O,!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n)},this.setViewport=function(t,e,n,r){$.viewport(N.set(t,e,n,r))},this.setScissor=function(t,e,n,r){$.scissor(D.set(t,e,n,r))},this.setScissorTest=function(t){$.setScissorTest(I=t)},this.getClearColor=function(){return k},this.setClearColor=function(t,e){k.set(t),C=void 0!==e?e:1,tt(k.r,k.g,k.b,C)},this.getClearAlpha=function(){return C},this.setClearAlpha=function(t){C=t,tt(k.r,k.g,k.b,C)},this.clear=function(t,e,n){var r=0;void 0!==t&&!t||(r|=v.COLOR_BUFFER_BIT),void 0!==e&&!e||(r|=v.DEPTH_BUFFER_BIT),void 0!==n&&!n||(r|=v.STENCIL_BUFFER_BIT),v.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,n,r){this.setRenderTarget(t),this.clear(e,n,r)},this.resetGLState=nt,this.dispose=function(){e.removeEventListener("webglcontextlost",st,!1)},this.renderBufferImmediate=function(t,e,n){$.initAttributes();var r=W.get(t);t.hasPositions&&!r.position&&(r.position=v.createBuffer()),t.hasNormals&&!r.normal&&(r.normal=v.createBuffer()),t.hasUvs&&!r.uv&&(r.uv=v.createBuffer()),t.hasColors&&!r.color&&(r.color=v.createBuffer());var i=e.getAttributes();if(t.hasPositions&&(v.bindBuffer(v.ARRAY_BUFFER,r.position),v.bufferData(v.ARRAY_BUFFER,t.positionArray,v.DYNAMIC_DRAW),$.enableAttribute(i.position),v.vertexAttribPointer(i.position,3,v.FLOAT,!1,0,0)),t.hasNormals){if(v.bindBuffer(v.ARRAY_BUFFER,r.normal),"MeshPhongMaterial"!==n.type&&"MeshStandardMaterial"!==n.type&&n.shading===Be.FlatShading)for(var a=0,o=3*t.count;a<o;a+=9){var s=t.normalArray,l=(s[a+0]+s[a+3]+s[a+6])/3,u=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l,s[a+1]=u,s[a+2]=c,s[a+3]=l,s[a+4]=u,s[a+5]=c,s[a+6]=l,s[a+7]=u,s[a+8]=c}v.bufferData(v.ARRAY_BUFFER,t.normalArray,v.DYNAMIC_DRAW),$.enableAttribute(i.normal),v.vertexAttribPointer(i.normal,3,v.FLOAT,!1,0,0)}t.hasUvs&&n.map&&(v.bindBuffer(v.ARRAY_BUFFER,r.uv),v.bufferData(v.ARRAY_BUFFER,t.uvArray,v.DYNAMIC_DRAW),$.enableAttribute(i.uv),v.vertexAttribPointer(i.uv,2,v.FLOAT,!1,0,0)),t.hasColors&&n.vertexColors!==Be.NoColors&&(v.bindBuffer(v.ARRAY_BUFFER,r.color),v.bufferData(v.ARRAY_BUFFER,t.colorArray,v.DYNAMIC_DRAW),$.enableAttribute(i.color),v.vertexAttribPointer(i.color,3,v.FLOAT,!1,0,0)),$.disableUnusedAttributes(),v.drawArrays(v.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,r,i,a){vt(r);var o=yt(t,e,r,i),s=!1,l=n.id+"_"+o.id+"_"+r.wireframe;l!==T&&(T=l,s=!0);var u=i.morphTargetInfluences;if(void 0!==u){for(var c=[],h=0,d=u.length;h<d;h++){var f=u[h];c.push([f,h])}c.sort(dt),8<c.length&&(c.length=8);var g=n.morphAttributes;for(h=0,d=c.length;h<d;h++)if(f=c[h],p[h]=f[0],0!==f[0]){var m=f[1];!0===r.morphTargets&&g.position&&n.addAttribute("morphTarget"+h,g.position[m]),!0===r.morphNormals&&g.normal&&n.addAttribute("morphNormal"+h,g.normal[m])}else!0===r.morphTargets&&n.removeAttribute("morphTarget"+h),!0===r.morphNormals&&n.removeAttribute("morphNormal"+h);var y=o.getUniforms();null!==y.morphTargetInfluences&&v.uniform1fv(y.morphTargetInfluences,p),s=!0}m=n.index;var b,_=n.attributes.position;!0===r.wireframe&&(m=K.getWireframeAttribute(n)),null!==m?(b=J).setIndex(m):b=Z,s&&(function(t,e,n,r){var i;if(!(n instanceof Be.InstancedBufferGeometry&&null===(i=Y.get("ANGLE_instanced_arrays")))){void 0===r&&(r=0),$.initAttributes();var a=n.attributes,o=e.getAttributes(),s=t.defaultAttributeValues;for(var l in o){var u=o[l];if(0<=u){var c=a[l];if(void 0!==c){var h=c.itemSize,d=K.getAttributeBuffer(c);if(c instanceof Be.InterleavedBufferAttribute){var f=c.data,p=f.stride,g=c.offset;f instanceof Be.InstancedInterleavedBuffer?($.enableAttributeAndDivisor(u,f.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=f.meshPerAttribute*f.count)):$.enableAttribute(u),v.bindBuffer(v.ARRAY_BUFFER,d),v.vertexAttribPointer(u,h,v.FLOAT,!1,p*f.array.BYTES_PER_ELEMENT,(r*p+g)*f.array.BYTES_PER_ELEMENT)}else c instanceof Be.InstancedBufferAttribute?($.enableAttributeAndDivisor(u,c.meshPerAttribute,i),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):$.enableAttribute(u),v.bindBuffer(v.ARRAY_BUFFER,d),v.vertexAttribPointer(u,h,v.FLOAT,!1,0,r*h*4)}else if(void 0!==s){var m=s[l];if(void 0!==m)switch(m.length){case 2:v.vertexAttrib2fv(u,m);break;case 3:v.vertexAttrib3fv(u,m);break;case 4:v.vertexAttrib4fv(u,m);break;default:v.vertexAttrib1fv(u,m)}}}}$.disableUnusedAttributes()}}(r,o,n),null!==m&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,K.getAttributeBuffer(m)));var E=1/0;null!==m?E=m.count:void 0!==_&&(E=_.count);var A=n.drawRange.start,w=n.drawRange.count,S=null!==a?a.start:0,x=null!==a?a.count:1/0,L=Math.max(0,A,S),M=Math.min(0+E,A+w,S+x)-1,k=Math.max(0,M-L+1);if(i instanceof Be.Mesh)if(!0===r.wireframe)$.setLineWidth(r.wireframeLinewidth*Q()),b.setMode(v.LINES);else switch(i.drawMode){case Be.TrianglesDrawMode:b.setMode(v.TRIANGLES);break;case Be.TriangleStripDrawMode:b.setMode(v.TRIANGLE_STRIP);break;case Be.TriangleFanDrawMode:b.setMode(v.TRIANGLE_FAN)}else if(i instanceof Be.Line){var C=r.linewidth;void 0===C&&(C=1),$.setLineWidth(C*Q()),i instanceof Be.LineSegments?b.setMode(v.LINES):b.setMode(v.LINE_STRIP)}else i instanceof Be.Points&&b.setMode(v.POINTS);n instanceof Be.InstancedBufferGeometry?0<n.maxInstancedCount&&b.renderInstances(n,L,k):b.render(L,k)},this.render=function(t,e,n,r){if(e instanceof Be.Camera!=0){var i,a,o,s=t.fog;if(T="",A=-1,!(w=null)===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),B.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),F.setFromMatrix(B),u.length=0,f=h=-1,g.length=0,m.length=0,function t(e,n){if(!1!==e.visible){if(e.layers.test(n.layers))if(e instanceof Be.Light)u.push(e);else if(e instanceof Be.Sprite)!1!==e.frustumCulled&&!0!==F.intersectsObject(e)||g.push(e);else if(e instanceof Be.LensFlare)m.push(e);else if(e instanceof Be.ImmediateRenderObject)!0===y.sortObjects&&(U.setFromMatrixPosition(e.matrixWorld),U.applyProjection(B)),gt(e,null,e.material,U.z,null);else if((e instanceof Be.Mesh||e instanceof Be.Line||e instanceof Be.Points)&&(e instanceof Be.SkinnedMesh&&e.skeleton.update(),!1===e.frustumCulled||!0===F.intersectsObject(e))){var r=e.material;if(!0===r.visible){!0===y.sortObjects&&(U.setFromMatrixPosition(e.matrixWorld),U.applyProjection(B));var i=K.update(e);if(r instanceof Be.MultiMaterial)for(var a=i.groups,o=r.materials,s=0,l=a.length;s<l;s++){var c=a[s],h=o[c.materialIndex];!0===h.visible&&gt(e,i,h,U.z,c)}else gt(e,i,r,U.z,null)}}var d=e.children;for(s=0,l=d.length;s<l;s++)t(d[s],n)}}(t,e),c.length=h+1,d.length=f+1,!0===y.sortObjects&&(c.sort(ft),d.sort(pt)),function(t,e){var n,r,i,a,o,s,l=0,u=0,c=0,h=e.matrixWorldInverse,d=0,f=0,p=0,g=0,m=0;for(j.shadowsPointLight=0,n=0,r=t.length;n<r;n++)if(i=t[n],a=i.color,o=i.intensity,s=i.distance,i instanceof Be.AmbientLight)l+=a.r*o,u+=a.g*o,c+=a.b*o;else if(i instanceof Be.DirectionalLight)(v=q.get(i)).color.copy(i.color).multiplyScalar(i.intensity),v.direction.setFromMatrixPosition(i.matrixWorld),U.setFromMatrixPosition(i.target.matrixWorld),v.direction.sub(U),v.direction.transformDirection(h),v.shadow=i.castShadow,i.castShadow&&(v.shadowBias=i.shadow.bias,v.shadowRadius=i.shadow.radius,v.shadowMapSize=i.shadow.mapSize,j.shadows[m++]=i),j.directionalShadowMap[d]=i.shadow.map,j.directionalShadowMatrix[d]=i.shadow.matrix,j.directional[d++]=v;else if(i instanceof Be.SpotLight)(v=q.get(i)).position.setFromMatrixPosition(i.matrixWorld),v.position.applyMatrix4(h),v.color.copy(a).multiplyScalar(o),v.distance=s,v.direction.setFromMatrixPosition(i.matrixWorld),U.setFromMatrixPosition(i.target.matrixWorld),v.direction.sub(U),v.direction.transformDirection(h),v.coneCos=Math.cos(i.angle),v.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),v.decay=0===i.distance?0:i.decay,v.shadow=i.castShadow,i.castShadow&&(v.shadowBias=i.shadow.bias,v.shadowRadius=i.shadow.radius,v.shadowMapSize=i.shadow.mapSize,j.shadows[m++]=i),j.spotShadowMap[p]=i.shadow.map,j.spotShadowMatrix[p]=i.shadow.matrix,j.spot[p++]=v;else if(i instanceof Be.PointLight)(v=q.get(i)).position.setFromMatrixPosition(i.matrixWorld),v.position.applyMatrix4(h),v.color.copy(i.color).multiplyScalar(i.intensity),v.distance=i.distance,v.decay=0===i.distance?0:i.decay,v.shadow=i.castShadow,i.castShadow&&(v.shadowBias=i.shadow.bias,v.shadowRadius=i.shadow.radius,v.shadowMapSize=i.shadow.mapSize,j.shadows[m++]=i),j.pointShadowMap[f]=i.shadow.map,void 0===j.pointShadowMatrix[f]&&(j.pointShadowMatrix[f]=new Be.Matrix4),U.setFromMatrixPosition(i.matrixWorld).negate(),j.pointShadowMatrix[f].identity().setPosition(U),j.point[f++]=v;else if(i instanceof Be.HemisphereLight){var v;(v=q.get(i)).direction.setFromMatrixPosition(i.matrixWorld),v.direction.transformDirection(h),v.direction.normalize(),v.skyColor.copy(i.color).multiplyScalar(o),v.groundColor.copy(i.groundColor).multiplyScalar(o),j.hemi[g++]=v}j.ambient[0]=l,j.ambient[1]=u,j.ambient[2]=c,j.directional.length=d,j.spot.length=p,j.point.length=f,j.hemi.length=g,j.shadows.length=m,j.hash=d+","+f+","+p+","+g+","+m}(u,e),rt.render(t,e),G.calls=0,G.vertices=0,G.faces=0,void(G.points=0)===n&&(n=null),this.setRenderTarget(n),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),t.overrideMaterial){var l=t.overrideMaterial;mt(c,e,s,l),mt(d,e,s,l)}else $.setBlending(Be.NoBlending),mt(c,e,s),mt(d,e,s);if(at.render(t,e),ot.render(t,e,L),n){var p=n.texture;p.generateMipmaps&&xt(n)&&p.minFilter!==Be.NearestFilter&&p.minFilter!==Be.LinearFilter&&(a=(i=n)instanceof Be.WebGLRenderTargetCube?v.TEXTURE_CUBE_MAP:v.TEXTURE_2D,o=W.get(i.texture).__webglTexture,$.bindTexture(a,o),v.generateMipmap(a),$.bindTexture(a,null))}$.setDepthTest(!0),$.setDepthWrite(!0),$.setColorWrite(!0)}},this.setFaceCulling=function(t,e){t===Be.CullFaceNone?$.disable(v.CULL_FACE):(e===Be.FrontFaceDirectionCW?v.frontFace(v.CW):v.frontFace(v.CCW),t===Be.CullFaceBack?v.cullFace(v.BACK):t===Be.CullFaceFront?v.cullFace(v.FRONT):v.cullFace(v.FRONT_AND_BACK),$.enable(v.CULL_FACE))},this.setTexture=function(t,e){var n=W.get(t);if(0<t.version&&n.__version!==t.version){var r=t.image;if(void 0===r)return;if(!1===r.complete)return;wt(n,t,e)}else $.activeTexture(v.TEXTURE0+e),$.bindTexture(v.TEXTURE_2D,n.__webglTexture)},this.getCurrentRenderTarget=function(){return _},this.setRenderTarget=function(t){(_=t)&&void 0===W.get(t).__webglFramebuffer&&Rt(t);var e,n=t instanceof Be.WebGLRenderTargetCube;if(t){var r=W.get(t);e=n?r.__webglFramebuffer[t.activeCubeFace]:r.__webglFramebuffer,S.copy(t.scissor),x=t.scissorTest,L.copy(t.viewport)}else e=null,S.copy(D).multiplyScalar(O),x=I,L.copy(N).multiplyScalar(O);if(E!==e&&(v.bindFramebuffer(v.FRAMEBUFFER,e),E=e),$.scissor(S),$.setScissorTest(x),$.viewport(L),n){var i=W.get(t.texture);v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,i.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,n,r,i,a){if(t instanceof Be.WebGLRenderTarget!=0){var o=W.get(t).__webglFramebuffer;if(o){var s=!1;o!==E&&(v.bindFramebuffer(v.FRAMEBUFFER,o),s=!0);try{var l=t.texture;if(l.format!==Be.RGBAFormat&&Ot(l.format)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT))return;if(!(l.type===Be.UnsignedByteType||Ot(l.type)===v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)||l.type===Be.FloatType&&Y.get("WEBGL_color_buffer_float")||l.type===Be.HalfFloatType&&Y.get("EXT_color_buffer_half_float")))return;v.checkFramebufferStatus(v.FRAMEBUFFER)===v.FRAMEBUFFER_COMPLETE&&v.readPixels(e,n,r,i,Ot(l.format),Ot(l.type),a)}finally{s&&v.bindFramebuffer(v.FRAMEBUFFER,E)}}}}},Be.WebGLExtensions=function(t){var e={};this.get=function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=t.getExtension("WEBGL_compressed_texture_etc1");break;default:r=t.getExtension(n)}return e[n]=r}},Be.WebGLCapabilities=function(t,e,n){function r(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}this.getMaxPrecision=r,this.precision=void 0!==n.precision?n.precision:"highp",this.logarithmicDepthBuffer=void 0!==n.logarithmicDepthBuffer&&n.logarithmicDepthBuffer,this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxVertexTextures=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxCubemapSize=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),this.maxAttributes=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.maxVertexUniforms=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),this.maxVaryings=t.getParameter(t.MAX_VARYING_VECTORS),this.maxFragmentUniforms=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),this.vertexTextures=0<this.maxVertexTextures,this.floatFragmentTextures=!!e.get("OES_texture_float"),this.floatVertexTextures=this.vertexTextures&&this.floatFragmentTextures;var i=r(this.precision);i!==this.precision&&(this.precision=i),this.logarithmicDepthBuffer&&(this.logarithmicDepthBuffer=!!e.get("EXT_frag_depth"))},Be.WebGLProperties=function(){var t={};this.get=function(e){var n=e.uuid,r=t[n];return void 0===r&&(r={},t[n]=r),r},this.delete=function(e){delete t[e.uuid]},this.clear=function(){t={}}},Be.WebGLLights=function(){var t={};this.get=function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new Be.Vector3,color:new Be.Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Be.Vector2};break;case"SpotLight":n={position:new Be.Vector3,direction:new Be.Vector3,color:new Be.Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Be.Vector2};break;case"PointLight":n={position:new Be.Vector3,color:new Be.Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Be.Vector2};break;case"HemisphereLight":n={direction:new Be.Vector3,skyColor:new Be.Color,groundColor:new Be.Color}}return t[e.id]=n}},Be.WebGLState=function(t,e,n){var r=this,i=new Be.Vector4,a=new Uint8Array(16),o=new Uint8Array(16),s=new Uint8Array(16),l={},c=null,h=null,d=null,f=null,p=null,g=null,m=null,v=null,y=!1,b=null,_=null,E=null,A=null,T=null,w=null,S=null,x=null,L=null,M=null,k=null,C=null,R=null,P=null,O=null,D=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),I=void 0,N={},F=new Be.Vector4,B=null,U=null,j=new Be.Vector4,V=new Be.Vector4,G=t.createTexture();t.bindTexture(t.TEXTURE_2D,G),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,new Uint8Array(3)),this.init=function(){this.clearColor(0,0,0,1),this.clearDepth(1),this.clearStencil(0),this.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.frontFace(t.CCW),t.cullFace(t.BACK),this.enable(t.CULL_FACE),this.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)},this.initAttributes=function(){for(var t=0,e=a.length;t<e;t++)a[t]=0},this.enableAttribute=function(n){a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),0!==s[n]&&(e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),s[n]=0)},this.enableAttributeAndDivisor=function(e,n,r){a[e]=1,0===o[e]&&(t.enableVertexAttribArray(e),o[e]=1),s[e]!==n&&(r.vertexAttribDivisorANGLE(e,n),s[e]=n)},this.disableUnusedAttributes=function(){for(var e=0,n=o.length;e<n;e++)o[e]!==a[e]&&(t.disableVertexAttribArray(e),o[e]=0)},this.enable=function(e){!0!==l[e]&&(t.enable(e),l[e]=!0)},this.disable=function(e){!1!==l[e]&&(t.disable(e),l[e]=!1)},this.getCompressedTextureFormats=function(){if(null===c&&(c=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var n=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)c.push(n[r]);return c},this.setBlending=function(e,r,i,a,o,s,l,u){e===Be.NoBlending?this.disable(t.BLEND):this.enable(t.BLEND),e===h&&u===y||(e===Be.AdditiveBlending?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===Be.SubtractiveBlending?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===Be.MultiplyBlending?u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.SRC_COLOR,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):u?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),h=e,y=u),e===Be.CustomBlending?(o=o||r,s=s||i,l=l||a,r===d&&o===g||(t.blendEquationSeparate(n(r),n(o)),d=r,g=o),i===f&&a===p&&s===m&&l===v||(t.blendFuncSeparate(n(i),n(a),n(s),n(l)),f=i,p=a,m=s,v=l)):v=m=g=p=f=d=null},this.setDepthFunc=function(e){if(b!==e){if(e)switch(e){case Be.NeverDepth:t.depthFunc(t.NEVER);break;case Be.AlwaysDepth:t.depthFunc(t.ALWAYS);break;case Be.LessDepth:t.depthFunc(t.LESS);break;case Be.LessEqualDepth:t.depthFunc(t.LEQUAL);break;case Be.EqualDepth:t.depthFunc(t.EQUAL);break;case Be.GreaterEqualDepth:t.depthFunc(t.GEQUAL);break;case Be.GreaterDepth:t.depthFunc(t.GREATER);break;case Be.NotEqualDepth:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);b=e}},this.setDepthTest=function(e){e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)},this.setDepthWrite=function(e){_!==e&&(t.depthMask(e),_=e)},this.setColorWrite=function(e){E!==e&&(t.colorMask(e,e,e,e),E=e)},this.setStencilFunc=function(e,n,r){T===e&&w===n&&S===r||(t.stencilFunc(e,n,r),T=e,w=n,S=r)},this.setStencilOp=function(e,n,r){x===e&&L===n&&M===r||(t.stencilOp(e,n,r),x=e,L=n,M=r)},this.setStencilTest=function(e){e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)},this.setStencilWrite=function(e){A!==e&&(t.stencilMask(e),A=e)},this.setFlipSided=function(e){k!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),k=e)},this.setLineWidth=function(e){e!==C&&(t.lineWidth(e),C=e)},this.setPolygonOffset=function(e,n,r){e?this.enable(t.POLYGON_OFFSET_FILL):this.disable(t.POLYGON_OFFSET_FILL),!e||R===n&&P===r||(t.polygonOffset(n,r),R=n,P=r)},this.getScissorTest=function(){return O},this.setScissorTest=function(e){(O=e)?this.enable(t.SCISSOR_TEST):this.disable(t.SCISSOR_TEST)},this.activeTexture=function(e){void 0===e&&(e=t.TEXTURE0+D-1),I!==e&&(t.activeTexture(e),I=e)},this.bindTexture=function(e,n){void 0===I&&r.activeTexture();var i=N[I];void 0===i&&(i={type:void 0,texture:void 0},N[I]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||G),i.type=e,i.texture=n)},this.compressedTexImage2D=function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(u){}},this.texImage2D=function(){try{t.texImage2D.apply(t,arguments)}catch(u){}},this.clearColor=function(e,n,r,a){i.set(e,n,r,a),!1===F.equals(i)&&(t.clearColor(e,n,r,a),F.copy(i))},this.clearDepth=function(e){B!==e&&(t.clearDepth(e),B=e)},this.clearStencil=function(e){U!==e&&(t.clearStencil(e),U=e)},this.scissor=function(e){!1===j.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),j.copy(e))},this.viewport=function(e){!1===V.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),V.copy(e))},this.reset=function(){for(var e=0;e<o.length;e++)1===o[e]&&(t.disableVertexAttribArray(e),o[e]=0);l={},I=void 0,N={},k=A=_=E=h=c=null}},Be.WebGLGeometries=function(t,e,n){var r={};function i(t){var o=t.target,s=r[o.id];null!==s.index&&a(s.index),function(t){for(var e in t)a(t[e])}(s.attributes),o.removeEventListener("dispose",i),delete r[o.id];var l=e.get(o);l.wireframe&&a(l.wireframe),e.delete(o);var u=e.get(s);u.wireframe&&a(u.wireframe),e.delete(s),n.memory.geometries--}function a(n){var r,i,a=(r=n)instanceof Be.InterleavedBufferAttribute?e.get(r.data).__webglBuffer:e.get(r).__webglBuffer;void 0!==a&&(t.deleteBuffer(a),(i=n)instanceof Be.InterleavedBufferAttribute?e.delete(i.data):e.delete(i))}this.get=function(t){var e,a=t.geometry;return void 0!==r[a.id]?r[a.id]:(a.addEventListener("dispose",i),a instanceof Be.BufferGeometry?e=a:a instanceof Be.Geometry&&(void 0===a._bufferGeometry&&(a._bufferGeometry=(new Be.BufferGeometry).setFromObject(t)),e=a._bufferGeometry),r[a.id]=e,n.memory.geometries++,e)}},Be.WebGLBufferRenderer=function(t,e,n){var r;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.calls++,n.vertices+=i,r===t.TRIANGLES&&(n.faces+=i/3)},this.renderInstances=function(i){var a=e.get("ANGLE_instanced_arrays");if(null!==a){var o=i.attributes.position,s=0;s=o instanceof Be.InterleavedBufferAttribute?o.data.count:o.count,a.drawArraysInstancedANGLE(r,0,s,i.maxInstancedCount),n.calls++,n.vertices+=s*i.maxInstancedCount,r===t.TRIANGLES&&(n.faces+=i.maxInstancedCount*s/3)}}},Be.WebGLIndexedBufferRenderer=function(t,e,n){var r,i,a;this.setMode=function(t){r=t},this.setIndex=function(n){a=n.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(i=t.UNSIGNED_INT,4):(i=t.UNSIGNED_SHORT,2)},this.render=function(e,o){t.drawElements(r,o,i,e*a),n.calls++,n.vertices+=o,r===t.TRIANGLES&&(n.faces+=o/3)},this.renderInstances=function(o,s,l){var u=e.get("ANGLE_instanced_arrays");null!==u&&(u.drawElementsInstancedANGLE(r,l,i,s*a,o.maxInstancedCount),n.calls++,n.vertices+=l*o.maxInstancedCount,r===t.TRIANGLES&&(n.faces+=o.maxInstancedCount*l/3))}},Be.WebGLShader=function(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS),t.getShaderInfoLog(r),r},Be.WebGLShadowMap=function(t,e,n){for(var r=t.context,i=t.state,a=new Be.Frustum,o=new Be.Matrix4,s=new Be.Vector2,l=new Be.Vector3,u=new Be.Vector3,c=[],h=1,d=2,f=1+(h|d),p=new Array(f),g=new Array(f),m=[new Be.Vector3(1,0,0),new Be.Vector3(-1,0,0),new Be.Vector3(0,0,1),new Be.Vector3(0,0,-1),new Be.Vector3(0,1,0),new Be.Vector3(0,-1,0)],v=[new Be.Vector3(0,1,0),new Be.Vector3(0,1,0),new Be.Vector3(0,1,0),new Be.Vector3(0,1,0),new Be.Vector3(0,0,1),new Be.Vector3(0,0,-1)],y=[new Be.Vector4,new Be.Vector4,new Be.Vector4,new Be.Vector4,new Be.Vector4,new Be.Vector4],b=Be.ShaderLib.depthRGBA,_=Be.UniformsUtils.clone(b.uniforms),E=Be.ShaderLib.distanceRGBA,A=Be.UniformsUtils.clone(E.uniforms),T=0;T!==f;++T){var w=0!=(T&h),S=0!=(T&d),x=new Be.ShaderMaterial({uniforms:_,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,morphTargets:w,skinning:S});p[T]=x;var L=new Be.ShaderMaterial({defines:{USE_SHADOWMAP:""},uniforms:A,vertexShader:E.vertexShader,fragmentShader:E.fragmentShader,morphTargets:w,skinning:S});g[T]=L}var M=this;function k(t,e,n,r){var i=t.geometry,a=null,o=p,s=t.customDepthMaterial;if(n&&(o=g,s=t.customDistanceMaterial),s)a=s;else{var l=void 0!==i.morphTargets&&0<i.morphTargets.length&&e.morphTargets,u=t instanceof Be.SkinnedMesh&&e.skinning,c=0;l&&(c|=h),u&&(c|=d),a=o[c]}return a.visible=e.visible,a.wireframe=e.wireframe,a.wireframeLinewidth=e.wireframeLinewidth,n&&void 0!==a.uniforms.lightPos&&a.uniforms.lightPos.value.copy(r),a}function C(t,e,n){if(!1!==t.visible){t.layers.test(e.layers)&&(t instanceof Be.Mesh||t instanceof Be.Line||t instanceof Be.Points)&&(!t.castShadow||!1!==t.frustumCulled&&!0!==a.intersectsObject(t)||!0===t.material.visible&&(t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),c.push(t)));for(var r=t.children,i=0,o=r.length;i<o;i++)C(r[i],e,n)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Be.PCFShadowMap,this.cullFace=Be.CullFaceFront,this.render=function(h,d){var f,p,g=e.shadows;if(0!==g.length&&!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)){i.clearColor(1,1,1,1),i.disable(r.BLEND),i.enable(r.CULL_FACE),r.frontFace(r.CCW),r.cullFace(M.cullFace===Be.CullFaceFront?r.FRONT:r.BACK),i.setDepthTest(!0),i.setScissorTest(!1);for(var b=0,_=g.length;b<_;b++){var E=g[b],A=E.shadow,T=A.camera;if(s.copy(A.mapSize),E instanceof Be.PointLight){f=6,p=!0;var w=s.x,S=s.y;y[0].set(2*w,S,w,S),y[1].set(0,S,w,S),y[2].set(3*w,S,w,S),y[3].set(w,S,w,S),y[4].set(3*w,0,w,S),y[5].set(w,0,w,S),s.x*=4,s.y*=2}else p=!(f=1);if(null===A.map){var x={minFilter:Be.NearestFilter,magFilter:Be.NearestFilter,format:Be.RGBAFormat};A.map=new Be.WebGLRenderTarget(s.x,s.y,x),E instanceof Be.SpotLight&&(T.aspect=s.x/s.y),T.updateProjectionMatrix()}var L=A.map,R=A.matrix;u.setFromMatrixPosition(E.matrixWorld),T.position.copy(u),t.setRenderTarget(L),t.clear();for(var P=0;P<f;P++){if(p){l.copy(T.position),l.add(m[P]),T.up.copy(v[P]),T.lookAt(l);var O=y[P];i.viewport(O)}else l.setFromMatrixPosition(E.target.matrixWorld),T.lookAt(l);T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(T.projectionMatrix),R.multiply(T.matrixWorldInverse),o.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),a.setFromMatrix(o),c.length=0,C(h,d,T);for(var D=0,I=c.length;D<I;D++){var N=c[D],F=n.update(N),B=N.material;if(B instanceof Be.MultiMaterial)for(var U=F.groups,j=B.materials,V=0,G=U.length;V<G;V++){var z=U[V],Y=j[z.materialIndex];if(!0===Y.visible){var H=k(N,Y,p,u);t.renderBufferDirect(T,null,F,H,N,z)}}else H=k(N,B,p,u),t.renderBufferDirect(T,null,F,H,N,null)}}}var $=t.getClearColor(),W=t.getClearAlpha();t.setClearColor($,W),i.enable(r.BLEND),M.cullFace===Be.CullFaceFront&&r.cullFace(r.BACK),M.needsUpdate=!1}}},Be.SpritePlugin=function(t,e){var n,r,i,a,o,s,l=t.context,u=t.state,c=new Be.Vector3,h=new Be.Quaternion,d=new Be.Vector3;function f(){var e,u,c,h=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),d=new Uint16Array([0,1,2,0,2,3]);n=l.createBuffer(),r=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,n),l.bufferData(l.ARRAY_BUFFER,h,l.STATIC_DRAW),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),l.bufferData(l.ELEMENT_ARRAY_BUFFER,d,l.STATIC_DRAW),e=l.createProgram(),u=l.createShader(l.VERTEX_SHADER),c=l.createShader(l.FRAGMENT_SHADER),l.shaderSource(u,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),l.shaderSource(c,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),l.compileShader(u),l.compileShader(c),l.attachShader(e,u),l.attachShader(e,c),l.linkProgram(e),i=e,a={position:l.getAttribLocation(i,"position"),uv:l.getAttribLocation(i,"uv")},o={uvOffset:l.getUniformLocation(i,"uvOffset"),uvScale:l.getUniformLocation(i,"uvScale"),rotation:l.getUniformLocation(i,"rotation"),scale:l.getUniformLocation(i,"scale"),color:l.getUniformLocation(i,"color"),map:l.getUniformLocation(i,"map"),opacity:l.getUniformLocation(i,"opacity"),modelViewMatrix:l.getUniformLocation(i,"modelViewMatrix"),projectionMatrix:l.getUniformLocation(i,"projectionMatrix"),fogType:l.getUniformLocation(i,"fogType"),fogDensity:l.getUniformLocation(i,"fogDensity"),fogNear:l.getUniformLocation(i,"fogNear"),fogFar:l.getUniformLocation(i,"fogFar"),fogColor:l.getUniformLocation(i,"fogColor"),alphaTest:l.getUniformLocation(i,"alphaTest")};var f=document.createElement("canvas");f.width=8,f.height=8;var p=f.getContext("2d");p.fillStyle="white",p.fillRect(0,0,8,8),(s=new Be.Texture(f)).needsUpdate=!0}function p(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}this.render=function(g,m){if(0!==e.length){void 0===i&&f(),l.useProgram(i),u.initAttributes(),u.enableAttribute(a.position),u.enableAttribute(a.uv),u.disableUnusedAttributes(),u.disable(l.CULL_FACE),u.enable(l.BLEND),l.bindBuffer(l.ARRAY_BUFFER,n),l.vertexAttribPointer(a.position,2,l.FLOAT,!1,16,0),l.vertexAttribPointer(a.uv,2,l.FLOAT,!1,16,8),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),l.uniformMatrix4fv(o.projectionMatrix,!1,m.projectionMatrix.elements),u.activeTexture(l.TEXTURE0),l.uniform1i(o.map,0);var v=0,y=0,b=g.fog;b?(l.uniform3f(o.fogColor,b.color.r,b.color.g,b.color.b),b instanceof Be.Fog?(l.uniform1f(o.fogNear,b.near),l.uniform1f(o.fogFar,b.far),l.uniform1i(o.fogType,1),y=v=1):b instanceof Be.FogExp2&&(l.uniform1f(o.fogDensity,b.density),l.uniform1i(o.fogType,2),y=v=2)):(l.uniform1i(o.fogType,0),y=v=0);for(var _=0,E=e.length;_<E;_++)(T=e[_]).modelViewMatrix.multiplyMatrices(m.matrixWorldInverse,T.matrixWorld),T.z=-T.modelViewMatrix.elements[14];e.sort(p);var A=[];for(_=0,E=e.length;_<E;_++){var T,w=(T=e[_]).material;l.uniform1f(o.alphaTest,w.alphaTest),l.uniformMatrix4fv(o.modelViewMatrix,!1,T.modelViewMatrix.elements),T.matrixWorld.decompose(c,h,d),A[0]=d.x,A[1]=d.y;var S=0;g.fog&&w.fog&&(S=y),v!==S&&(l.uniform1i(o.fogType,S),v=S),null!==w.map?(l.uniform2f(o.uvOffset,w.map.offset.x,w.map.offset.y),l.uniform2f(o.uvScale,w.map.repeat.x,w.map.repeat.y)):(l.uniform2f(o.uvOffset,0,0),l.uniform2f(o.uvScale,1,1)),l.uniform1f(o.opacity,w.opacity),l.uniform3f(o.color,w.color.r,w.color.g,w.color.b),l.uniform1f(o.rotation,w.rotation),l.uniform2fv(o.scale,A),u.setBlending(w.blending,w.blendEquation,w.blendSrc,w.blendDst),u.setDepthTest(w.depthTest),u.setDepthWrite(w.depthWrite),w.map&&w.map.image&&w.map.image.width?t.setTexture(w.map,0):t.setTexture(s,0),l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0)}u.enable(l.CULL_FACE),t.resetGLState()}}},Be.LensFlarePlugin=function(t,e){var n,r,i,a,o,s,l,u,c=t.context,h=t.state;function d(){var e,d,f,p,g,m,v=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),y=new Uint16Array([0,1,2,0,2,3]);n=c.createBuffer(),r=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,n),c.bufferData(c.ARRAY_BUFFER,v,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),c.bufferData(c.ELEMENT_ARRAY_BUFFER,y,c.STATIC_DRAW),l=c.createTexture(),u=c.createTexture(),h.bindTexture(c.TEXTURE_2D,l),c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,16,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),h.bindTexture(c.TEXTURE_2D,u),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),e=(s=0<c.getParameter(c.MAX_VERTEX_TEXTURE_IMAGE_UNITS))?{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},d=e,f=c.createProgram(),p=c.createShader(c.FRAGMENT_SHADER),g=c.createShader(c.VERTEX_SHADER),m="precision "+t.getPrecision()+" float;\n",c.shaderSource(p,m+d.fragmentShader),c.shaderSource(g,m+d.vertexShader),c.compileShader(p),c.compileShader(g),c.attachShader(f,p),c.attachShader(f,g),c.linkProgram(f),i=f,a={vertex:c.getAttribLocation(i,"position"),uv:c.getAttribLocation(i,"uv")},o={renderType:c.getUniformLocation(i,"renderType"),map:c.getUniformLocation(i,"map"),occlusionMap:c.getUniformLocation(i,"occlusionMap"),opacity:c.getUniformLocation(i,"opacity"),color:c.getUniformLocation(i,"color"),scale:c.getUniformLocation(i,"scale"),rotation:c.getUniformLocation(i,"rotation"),screenPosition:c.getUniformLocation(i,"screenPosition")}}this.render=function(f,p,g){if(0!==e.length){var m=new Be.Vector3,v=g.w/g.z,y=.5*g.z,b=.5*g.w,_=16/g.w,E=new Be.Vector2(_*v,_),A=new Be.Vector3(1,1,0),T=new Be.Vector2(1,1);void 0===i&&d(),c.useProgram(i),h.initAttributes(),h.enableAttribute(a.vertex),h.enableAttribute(a.uv),h.disableUnusedAttributes(),c.uniform1i(o.occlusionMap,0),c.uniform1i(o.map,1),c.bindBuffer(c.ARRAY_BUFFER,n),c.vertexAttribPointer(a.vertex,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(a.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),h.disable(c.CULL_FACE),h.setDepthWrite(!1);for(var w=0,S=e.length;w<S;w++){_=16/g.w,E.set(_*v,_);var x=e[w];if(m.set(x.matrixWorld.elements[12],x.matrixWorld.elements[13],x.matrixWorld.elements[14]),m.applyMatrix4(p.matrixWorldInverse),m.applyProjection(p.projectionMatrix),A.copy(m),T.x=A.x*y+y,T.y=A.y*b+b,s||0<T.x&&T.x<g.z&&0<T.y&&T.y<g.w){h.activeTexture(c.TEXTURE0),h.bindTexture(c.TEXTURE_2D,null),h.activeTexture(c.TEXTURE1),h.bindTexture(c.TEXTURE_2D,l),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,g.x+T.x-8,g.y+T.y-8,16,16,0),c.uniform1i(o.renderType,0),c.uniform2f(o.scale,E.x,E.y),c.uniform3f(o.screenPosition,A.x,A.y,A.z),h.disable(c.BLEND),h.enable(c.DEPTH_TEST),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),h.activeTexture(c.TEXTURE0),h.bindTexture(c.TEXTURE_2D,u),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,g.x+T.x-8,g.y+T.y-8,16,16,0),c.uniform1i(o.renderType,1),h.disable(c.DEPTH_TEST),h.activeTexture(c.TEXTURE1),h.bindTexture(c.TEXTURE_2D,l),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),x.positionScreen.copy(A),x.customUpdateCallback?x.customUpdateCallback(x):x.updateLensFlares(),c.uniform1i(o.renderType,2),h.enable(c.BLEND);for(var L=0,M=x.lensFlares.length;L<M;L++){var k=x.lensFlares[L];.001<k.opacity&&.001<k.scale&&(A.x=k.x,A.y=k.y,A.z=k.z,_=k.size*k.scale/g.w,E.x=_*v,E.y=_,c.uniform3f(o.screenPosition,A.x,A.y,A.z),c.uniform2f(o.scale,E.x,E.y),c.uniform1f(o.rotation,k.rotation),c.uniform1f(o.opacity,k.opacity),c.uniform3f(o.color,k.color.r,k.color.g,k.color.b),h.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst),t.setTexture(k.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}}h.enable(c.CULL_FACE),h.enable(c.DEPTH_TEST),h.setDepthWrite(!0),t.resetGLState()}}},Be.WebGLObjects=function(t,e,n){var r=new Be.WebGLGeometries(t,e,n);function i(n,r){var i=n instanceof Be.InterleavedBufferAttribute?n.data:n,a=e.get(i);void 0===a.__webglBuffer?function(e,n,r){e.__webglBuffer=t.createBuffer(),t.bindBuffer(r,e.__webglBuffer);var i=n.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(r,n.array,i),e.version=n.version}(a,i,r):a.version!==i.version&&function(e,n,r){t.bindBuffer(r,e.__webglBuffer),!1===n.dynamic||-1===n.updateRange.count?t.bufferSubData(r,0,n.array):0===n.updateRange.count||(t.bufferSubData(r,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0),e.version=n.version}(a,i,r)}function a(t,e,n){if(n<e){var r=e;e=n,n=r}var i=t[e];return void 0===i?(t[e]=[n],!0):-1===i.indexOf(n)&&(i.push(n),!0)}this.getAttributeBuffer=function(t){return t instanceof Be.InterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer},this.getWireframeAttribute=function(n){var r=e.get(n);if(void 0!==r.wireframe)return r.wireframe;var o,s=[],l=n.index,u=n.attributes,c=u.position;if(null!==l)for(var h={},d=0,f=(o=l.array).length;d<f;d+=3){var p=o[d+0],g=o[d+1],m=o[d+2];a(h,p,g)&&s.push(p,g),a(h,g,m)&&s.push(g,m),a(h,m,p)&&s.push(m,p)}else for(d=0,f=(o=u.position.array).length/3-1;d<f;d+=3)p=d+0,g=d+1,m=d+2,s.push(p,g,g,m,m,p);var v=65535<c.count?Uint32Array:Uint16Array,y=new Be.BufferAttribute(new v(s),1);return i(y,t.ELEMENT_ARRAY_BUFFER),r.wireframe=y},this.update=function(e){var n=r.get(e);e.geometry instanceof Be.Geometry&&n.updateFromObject(e);var a=n.index,o=n.attributes;for(var s in null!==a&&i(a,t.ELEMENT_ARRAY_BUFFER),o)i(o[s],t.ARRAY_BUFFER);var l=n.morphAttributes;for(var s in l)for(var u=l[s],c=0,h=u.length;c<h;c++)i(u[c],t.ARRAY_BUFFER);return n}},Be.WebGLProgram=(De=0,Ie=/^([\w\d_]+)\.([\w\d_]+)$/,Ne=/^([\w\d_]+)\[(\d+)\]\.([\w\d_]+)$/,Fe=/^([\w\d_]+)\[0\]$/,function(t,e,n,r){var i=t.context,a=n.extensions,o=n.defines,s=n.__webglShader.vertexShader,l=n.__webglShader.fragmentShader,u="SHADOWMAP_TYPE_BASIC";r.shadowMapType===Be.PCFShadowMap?u="SHADOWMAP_TYPE_PCF":r.shadowMapType===Be.PCFSoftShadowMap&&(u="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(n.envMap.mapping){case Be.CubeReflectionMapping:case Be.CubeRefractionMapping:c="ENVMAP_TYPE_CUBE";break;case Be.CubeUVReflectionMapping:case Be.CubeUVRefractionMapping:c="ENVMAP_TYPE_CUBE_UV";break;case Be.EquirectangularReflectionMapping:case Be.EquirectangularRefractionMapping:c="ENVMAP_TYPE_EQUIREC";break;case Be.SphericalReflectionMapping:c="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case Be.CubeRefractionMapping:case Be.EquirectangularRefractionMapping:h="ENVMAP_MODE_REFRACTION"}switch(n.combine){case Be.MultiplyOperation:d="ENVMAP_BLENDING_MULTIPLY";break;case Be.MixOperation:d="ENVMAP_BLENDING_MIX";break;case Be.AddOperation:d="ENVMAP_BLENDING_ADD"}}var f,p,g,m,v,y,b,_,E=0<t.gammaFactor?t.gammaFactor:1,A=(f=a,p=r,g=t.extensions,[(f=f||{}).derivatives||p.envMapCubeUV||p.bumpMap||p.normalMap||p.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(f.fragDepth||p.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",f.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(f.shaderTextureLOD||p.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter($e).join("\n")),T=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(o),w=i.createProgram();v=n instanceof Be.RawShaderMaterial?m="":(m=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,T,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+E,"#define MAX_BONES "+r.maxBones,r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",0<r.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($e).join("\n"),[A,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+n.__webglShader.name,T,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+E,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.envMap?"#define "+h:"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+u:"",0<r.pointLightShadows?"#define POINT_LIGHT_SHADOWS":"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping!==Be.NoToneMapping?"#define TONE_MAPPING":"",r.toneMapping!==Be.NoToneMapping?Be.ShaderChunk.tonemapping_pars_fragment:"",r.toneMapping!==Be.NoToneMapping?function(t,e){var n;switch(e){case Be.LinearToneMapping:n="Linear";break;case Be.ReinhardToneMapping:n="Reinhard";break;case Be.Uncharted2ToneMapping:n="Uncharted2";break;case Be.CineonToneMapping:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",r.toneMapping):"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?Be.ShaderChunk.encodings_pars_fragment:"",r.mapEncoding?He("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?He("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?He("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?(y="linearToOutputTexel",b=r.outputEncoding,_=Ye(b),"vec4 "+y+"( vec4 value ) { return LinearTo"+_[0]+_[1]+"; }"):"","\n"].filter($e).join("\n")),s=We(s=Ke(s),r),l=We(l=Ke(l),r),n instanceof Be.ShaderMaterial==0&&(s=Xe(s),l=Xe(l));var S=m+s,x=v+l,L=Be.WebGLShader(i,i.VERTEX_SHADER,S),M=Be.WebGLShader(i,i.FRAGMENT_SHADER,x);i.attachShader(w,L),i.attachShader(w,M),void 0!==n.index0AttributeName?i.bindAttribLocation(w,0,n.index0AttributeName):!0===r.morphTargets&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);var k,C,R=i.getProgramInfoLog(w),P=i.getShaderInfoLog(L),O=i.getShaderInfoLog(M),D=!0,I=!0;return!1===i.getProgramParameter(w,i.LINK_STATUS)?D=!1:""!==R||""!==P&&""!==O||(I=!1),I&&(this.diagnostics={runnable:D,material:n,programLog:R,vertexShader:{log:P,prefix:m},fragmentShader:{log:O,prefix:v}}),i.deleteShader(L),i.deleteShader(M),this.getUniforms=function(){return void 0===k&&(k=function(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var a=t.getActiveUniform(e,i).name,o=t.getUniformLocation(e,a),s=Ie.exec(a);if(s){var l=s[1],u=s[2],c=n[l];(c=c||(n[l]={}))[u]=o}else if(s=Ne.exec(a)){var h=s[1],d=s[2],f=s[3],p=n[h],g=(p=p||(n[h]=[]))[d];(g=g||(p[d]={}))[f]=o}else(s=Fe.exec(a))?n[h=s[1]]=o:n[a]=o}return n}(i,w)),k},this.getAttributes=function(){return void 0===C&&(C=function(t,e){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=t.getActiveAttrib(e,i).name;n[a]=t.getAttribLocation(e,a)}return n}(i,w)),C},this.destroy=function(){i.deleteProgram(w),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return this.getUniforms()}},attributes:{get:function(){return this.getAttributes()}}}),this.id=De++,this.code=e,this.usedTimes=1,this.program=w,this.vertexShader=L,this.fragmentShader=M,this}),Be.WebGLRenderTarget=function(t,e,n){this.uuid=Be.Math.generateUUID(),this.width=t,this.height=e,this.scissor=new Be.Vector4(0,0,t,e),this.scissorTest=!1,this.viewport=new Be.Vector4(0,0,t,e),void 0===(n=n||{}).minFilter&&(n.minFilter=Be.LinearFilter),this.texture=new Be.Texture(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer},Be.WebGLRenderTarget.prototype={constructor:Be.WebGLRenderTarget,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Be.EventDispatcher.prototype.apply(Be.WebGLRenderTarget.prototype),Be.WebGLRenderTargetCube=function(t,e,n){Be.WebGLRenderTarget.call(this,t,e,n),this.activeCubeFace=0,this.activeMipMapLevel=0},Be.WebGLRenderTargetCube.prototype=Object.create(Be.WebGLRenderTarget.prototype),Be.WebGLRenderTargetCube.prototype.constructor=Be.WebGLRenderTargetCube,Be.WebGLPrograms=function(t,e){var n=[],r={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"standard",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},i=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","pointLightShadows","toneMapping","physicallyCorrectLights","shadowMapType","alphaTest","doubleSided","flipSided"];function a(t,e){var n;return t?t instanceof Be.Texture?n=t.encoding:t instanceof Be.WebGLRenderTarget&&(n=t.texture.encoding):n=Be.LinearEncoding,n===Be.LinearEncoding&&e&&(n=Be.GammaEncoding),n}this.getParameters=function(n,i,o,s){var l=r[n.type],u=function(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var n=e.maxVertexUniforms,r=Math.floor((n-20)/4);return void 0!==t&&t instanceof Be.SkinnedMesh&&(r=Math.min(t.skeleton.bones.length,r),t.skeleton.bones.length),r}(s),c=t.getPrecision();return null!==n.precision&&(c=e.getMaxPrecision(n.precision),n.precision),{shaderID:l,precision:c,supportsVertexTextures:e.vertexTextures,outputEncoding:a(t.getCurrentRenderTarget(),t.gammaOutput),map:!!n.map,mapEncoding:a(n.map,t.gammaInput),envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,envMapEncoding:a(n.envMap,t.gammaInput),envMapCubeUV:!!n.envMap&&(n.envMap.mapping===Be.CubeUVReflectionMapping||n.envMap.mapping===Be.CubeUVRefractionMapping),lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:a(n.emissiveMap,t.gammaInput),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,combine:n.combine,vertexColors:n.vertexColors,fog:o,useFog:n.fog,fogExp:o instanceof Be.FogExp2,flatShading:n.shading===Be.FlatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:n.skinning,maxBones:u,useVertexTexture:e.floatVertexTextures&&s&&s.skeleton&&s.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numHemiLights:i.hemi.length,pointLightShadows:i.shadowsPointLight,shadowMapEnabled:t.shadowMap.enabled&&s.receiveShadow&&0<i.shadows.length,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===Be.DoubleSide,flipSided:n.side===Be.BackSide}},this.getProgramCode=function(t,e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(var a=0;a<i.length;a++){var o=i[a];n.push(o),n.push(e[o])}return n.join()},this.acquireProgram=function(e,r,i){for(var a,o=0,s=n.length;o<s;o++){var l=n[o];if(l.code===i){++(a=l).usedTimes;break}}return void 0===a&&(a=new Be.WebGLProgram(t,i,e,r),n.push(a)),a},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=n.indexOf(t);n[e]=n[n.length-1],n.pop(),t.destroy()}},this.programs=n};var Je=function(){function t(e){s(this,t),Object.assign(this,e),this.renderer=new Ue.WebGLRenderer,this.renderer.setClearColor(0,0),this.renderer.setSize(this.width,this.height),this.renderer.setPixelRatio(window.devicePixelRatio),this.el=this.renderer.domElement}return u(t,[{key:"setTexture",value:function(t){this.texture=t,this.mesh=this.createMesh()}},{key:"setSize",value:function(t){var e=t.height,n=t.width;this.height=e,this.width=n,this.renderer.setSize(n,e)}},{key:"createMesh",value:function(){return this.material=new Ue.MeshBasicMaterial({map:this.texture}),this.geometry=new Ue.SphereGeometry(1,50,50),this.geometry.scale(-1,1,1),new Ue.Mesh(this.geometry,this.material)}},{key:"destroy",value:function(){this.geometry.dispose(),this.material.dispose(),this.renderer.dispose()}},{key:"render",value:function(t,e,n){n&&this.renderer.render(t,e)}}]),t}(),Qe=function(){function t(e){var n=this;s(this,t),Object.assign(this,e),this.el=this.renderer.el,this.theta=this.initialYaw*Math.PI/180,this.phi=0,this.velo=.02,this.rotateStart=new Ue.Vector2,this.rotateEnd=new Ue.Vector2,this.rotateDelta=new Ue.Vector2,this.orientation=new Ue.Quaternion,this.euler=new Ue.Euler,this.momentum=!1,this.isUserInteracting=!1,this.addDraggableStyle(),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=function(t){return n.onMouseDown({clientX:t.touches[0].pageX,clientY:t.touches[0].pageY})},this.onTouchMove=function(t){return n.onMouseMove({clientX:t.touches[0].pageX,clientY:t.touches[0].pageY})},this.onTouchEnd=function(t){return n.onMouseUp()},this.onDeviceMotion=this.onDeviceMotion.bind(this),this.onMessage=this.onMessage.bind(this),this.bindEvents()}return u(t,[{key:"bindEvents",value:function(){this.el.addEventListener("mouseleave",this.onMouseUp),this.el.addEventListener("mousemove",this.onMouseMove),this.el.addEventListener("mousedown",this.onMouseDown),this.el.addEventListener("mouseup",this.onMouseUp),this.el.addEventListener("touchstart",this.onTouchStart),this.el.addEventListener("touchmove",this.onTouchMove),this.el.addEventListener("touchend",this.onTouchEnd),this.isInIframe()||window.addEventListener("devicemotion",this.onDeviceMotion),window.addEventListener("message",this.onMessage)}},{key:"centralize",value:function(){var t=this,e=this.initialYaw*Math.PI/180,n=this.theta,r=this.phi,i=Date.now(),a=function o(){var s=Date.now()-i,l=s/750;return l=1<l?1:l,750<=s?cancelAnimationFrame(a):(t.theta=n+(e-n)*qe(l),t.phi=r+(0-r)*qe(l),requestAnimationFrame(o))}()}},{key:"isInIframe",value:function(){try{return window.self!==window.top}catch(u){return!0}}},{key:"destroy",value:function(){this.el.removeEventListener("mouseleave",this.onMouseUp),this.el.removeEventListener("mousemove",this.onMouseMove),this.el.removeEventListener("mousedown",this.onMouseDown),this.el.removeEventListener("mouseup",this.onMouseUp),this.el.removeEventListener("touchstart",this.onTouchStart),this.el.removeEventListener("touchmove",this.onTouchMove),this.el.removeEventListener("touchend",this.onTouchEnd),window.removeEventListener("devicemotion",this.onDeviceMotion),window.removeEventListener("message",this.onMessage)}},{key:"getCurrentStyle",value:function(){return"height: ".concat(parseInt(this.el.style.height,10),"px; width: ").concat(parseInt(this.el.style.width,10),"px; user-select: none; -webkit-user-select: none; -webkit-touch-callout: none; -webkit-tap-highlight-color: rgba(0,0,0,0);")}},{key:"addDraggingStyle",value:function(){this.el.setAttribute("style","".concat(this.getCurrentStyle()," cursor: -webkit-grabbing; cursor: -moz-grabbing; cursor: grabbing;"))}},{key:"addDraggableStyle",value:function(){this.el.setAttribute("style","".concat(this.getCurrentStyle()," cursor: -webkit-grab; cursor: -moz-grab; cursor: grab;"))}},{key:"onMessage",value:function(t){var e=t.data,n=e.orientation,r=e.portrait,i=e.rotationRate;i&&this.onDeviceMotion({orientation:n,portrait:r,rotationRate:i})}},{key:"onDeviceMotion",value:function(t){var e,n=void 0!==t.portrait?t.portrait:window.matchMedia("(orientation: portrait)").matches;e=void 0!==t.orientation?t.orientation:void 0!==window.orientation?window.orientation:-90;var r=Ue.Math.degToRad(t.rotationRate.alpha),i=Ue.Math.degToRad(t.rotationRate.beta);n?(this.phi=this.verticalPanning?this.phi+r*this.velo:this.phi,this.theta=this.theta-i*this.velo*-1):(this.verticalPanning&&(this.phi=-90===e?this.phi+i*this.velo:this.phi-i*this.velo),this.theta=-90===e?this.theta-r*this.velo:this.theta+r*this.velo),this.adjustPhi()}},{key:"onMouseMove",value:function(t){this.isUserInteracting&&(this.rotateEnd.set(t.clientX,t.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),this.phi=this.verticalPanning?this.phi+2*Math.PI*this.rotateDelta.y/this.renderer.height*.3:this.phi,this.theta+=2*Math.PI*this.rotateDelta.x/this.renderer.width*.5,this.adjustPhi())}},{key:"adjustPhi",value:function(){this.phi=Ue.Math.clamp(this.phi,-Math.PI/1.95,Math.PI/1.95)}},{key:"onMouseDown",value:function(t){this.addDraggingStyle(),this.rotateStart.set(t.clientX,t.clientY),this.isUserInteracting=!0,this.momentum=!1,this.onDragStart&&this.onDragStart()}},{key:"inertia",value:function(){this.momentum&&(this.rotateDelta.y*=.9,this.rotateDelta.x*=.9,this.theta+=.005*this.rotateDelta.x,this.phi=this.verticalPanning?this.phi+.005*this.rotateDelta.y:this.phi,this.adjustPhi())}},{key:"onMouseUp",value:function(){this.isUserInteracting&&this.onDragStop&&this.onDragStop(),this.addDraggableStyle(),this.isUserInteracting=!1,this.momentum=!0,this.inertia()}},{key:"update",value:function(){return(this.phi!==this.previousPhi||this.theta!==this.previousTheta)&&(this.previousPhi=this.phi,this.previousTheta=this.theta,this.euler.set(this.phi,this.theta,0,"YXZ"),this.orientation.setFromEuler(this.euler),this.camera.quaternion.copy(this.orientation),this.inertia(),!0)}}]),t}(),tn=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};s(this,t),Object.assign(this,{height:360,width:640,initialYaw:90,verticalPanning:!0},e);var n=this.height,r=this.width,i=(this.container,this.containerId,this.initialYaw),a=this.verticalPanning,o=this.onDragStart,l=this.onDragStop;this.renderer=new Je({height:n,width:r}),this.camera=new Ue.PerspectiveCamera(80,this.width/this.height,.1,100),this.controls=new Qe({camera:this.camera,renderer:this.renderer,initialYaw:i,verticalPanning:a,onDragStart:o,onDragStop:l}),this.stopVideoLoop=this.stopVideoLoop.bind(this),this.onError=this.onError.bind(this),this.startVideoLoop=this.startVideoLoop.bind(this),this.needsUpdate=!1,this.scene=this.createScene(),this.scene.add(this.camera),this.element=this.getElement(),this.elementReady=!1,this.element.addEventListener("playing",this.startVideoLoop),this.element.addEventListener("pause",this.stopVideoLoop),this.element.addEventListener("ended",this.stopVideoLoop),this.element.addEventListener("loadedmetadata",this.initAfterLoadedMetadata.bind(this)),this.target=this.container?this.container:document.querySelector(this.containerId)}return u(t,[{key:"initAfterLoadedMetadata",value:function(){1<=this.element.readyState&&!this.elementReady&&(this.texture=this.createTexture(),this.renderer.setTexture(this.texture),this.scene.getObjectByName("photo").children=[this.renderer.mesh],this.elementReady=!0)}},{key:"play",value:function(){this.element.play&&this.element.play()}},{key:"pause",value:function(){this.element.pause&&this.element.pause()}},{key:"centralize",value:function(){this.controls.centralize()}},{key:"stopVideoLoop",value:function(){clearTimeout(this.videoLoopId),this.videoLoopId=null,this.needsUpdate=!1}},{key:"destroy",value:function(){this.element.style.display="",clearTimeout(this.videoLoopId),cancelAnimationFrame(this.animationFrameId),this.element.pause&&this.element.pause(),this.target.removeChild(this.renderer.el),this.controls.destroy(),this.renderer.destroy()}},{key:"setSize",value:function(t){var e=t.height,n=t.width;this.camera.aspect=n/e,this.camera.updateProjectionMatrix(),this.renderer.setSize({height:e,width:n})}},{key:"getElement",value:function(){if(this.source&&this.source.tagName)return this.source;var t=document.createElement("video");return t.loop=this.loop||!1,t.muted=this.muted||!1,t.setAttribute("crossorigin","anonymous"),t.setAttribute("webkit-playsinline","true"),t.setAttribute("playsinline","true"),t.setAttribute("src",this.source),t.autoplay=void 0===this.autoplay||this.autoplay,t.addEventListener("error",this.onError),t}},{key:"createTexture",value:function(){var t=new Ue.Texture(this.element);return t.minFilter=Ue.LinearFilter,t.magFilter=Ue.LinearFilter,t.format=Ue.RGBFormat,t.generateMipmaps=!1,t.needsUpdate=!0,t}},{key:"createScene",value:function(){var t=new Ue.Scene,e=new Ue.Object3D;return e.name="photo",t.add(e),t}},{key:"onError",value:function(){}},{key:"startVideoLoop",value:function(){var t=this;this.videoLoopId&&(clearTimeout(this.videoLoopId),this.videoLoopId=null),function e(){t.needsUpdate=!0,t.videoLoopId=setTimeout(e,40)}()}},{key:"render",value:function(){var t=this;this.target.appendChild(this.renderer.el),this.element.style.display="none",this.startVideoLoop(),function e(){t.animationFrameId=requestAnimationFrame(e);var n=t.controls.update();t.renderer.render(t.scene,t.camera,t.needsUpdate||n),t.needsUpdate=!1}()}}]),t}(),en=function(){function t(e){return s(this,t),f(this,h(t).call(this,e))}return c(t,tn),u(t,[{key:"createTexture",value:function(){var t=new Ue.VideoTexture(this.element);return t.minFilter=Ue.LinearFilter,t.magFilter=Ue.LinearFilter,t.format=Ue.RGBFormat,t.generateMipmaps=!1,t.needsUpdate=!0,t}}]),t}(),nn=function(){function t(e){var n;return s(this,t),(n=f(this,h(t).call(this,e))).context=n.element.getContext("2d"),n}return c(t,tn),u(t,[{key:"play",value:function(){this.video.play&&this.video.play()}},{key:"pause",value:function(){this.video.pause&&this.video.pause()}},{key:"destroy",value:function(){this.video.style.display="",p(h(t.prototype),"destroy",this).call(this)}},{key:"getElement",value:function(){this.video=p(h(t.prototype),"getElement",this).call(this),this.video.addEventListener("playing",this.startVideoLoop),this.video.addEventListener("pause",this.stopVideoLoop),this.video.addEventListener("ended",this.stopVideoLoop);var e=document.createElement("canvas");return e.height=this.video.videoHeight,e.width=this.video.videoWidth,e}},{key:"render",value:function(){var t=this;this.target.appendChild(this.renderer.el),this.video.style.display="none",this.startVideoLoop(),function e(){t.animationFrameId=requestAnimationFrame(e);var n=t.video.videoHeight,r=t.video.videoWidth;t.element.height!=n&&(t.element.height=n),t.element.width!=r&&(t.element.width=r),t.context.clearRect(0,0,r,n),t.context.drawImage(t.video,0,0,r,n);var i=t.controls.update();t.renderer.render(t.scene,t.camera,t.needsUpdate||i),t.renderer.mesh.material.map.needsUpdate=!0,t.needsUpdate=!1}()}}]),t}(),rn=function(){function t(e){var n;return s(this,t),(n=f(this,h(t).call(this,e))).driver.addEventListener("playing",n.startVideoLoop),n.driver.addEventListener("pause",n.stopVideoLoop),n.driver.addEventListener("ended",n.stopVideoLoop),n.driver.addEventListener("stalled",n.stopVideoLoop),n.driverInitialized=!1,n}return c(t,tn),u(t,[{key:"play",value:function(){this.driver.play()}},{key:"pause",value:function(){this.driver.pause()}},{key:"getElement",value:function(){this.source&&this.source.tagName?this.driver=this.source:(this.driver=document.createElement("audio"),this.driver.src=this.source,this.driver.loop=this.loop||!1,this.driver.muted=this.muted||!1,this.driver.setAttribute("crossorigin","anonymous"),this.driver.autoplay=this.autoplay||!0),this.source=this.driver.src,this.driver.src="",this.driver.load();var t=document.createElement("video");return t.setAttribute("crossorigin","anonymous"),t.src=this.source,t.load(),t.addEventListener("error",this.onError),t}},{key:"createTexture",value:function(){var t=new Ue.VideoTexture(this.element);return t.minFilter=Ue.LinearFilter,t.magFilter=Ue.LinearFilter,t.format=Ue.RGBFormat,t.generateMipmaps=!1,t.needsUpdate=!0,t}},{key:"startVideoLoop",value:function(){var t=this;this.videoLoopId&&(clearTimeout(this.videoLoopId),this.videoLoopId=null),function e(){t.element.currentTime=t.driver.currentTime,t.needsUpdate=!0,t.videoLoopId=setTimeout(e,40)}()}},{key:"destroy",value:function(){this.driver.style.display="",p(h(t.prototype),"destroy",this).call(this)}},{key:"render",value:function(){var t=this;this.target.appendChild(this.renderer.el),this.element.style.display="none",this.driver.style.display="none",function e(){var n=t.controls.update();t.renderer.render(t.scene,t.camera,t.needsUpdate||n),t.needsUpdate=!1,t.animationFrameId=requestAnimationFrame(e),t.element.readyState>=t.element.HAVE_FUTURE_DATA&&!t.driverInitialized&&(t.driver.src=t.source,t.driver.load(),t.onDriverReady&&t.onDriverReady(),t.driverInitialized=!0)}()}}]),t}();return function(){function a(e){var r,o,s;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),o=this,r=!(s=n(a).call(this,e))||"object"!=typeof s&&"function"!=typeof s?i(o):s,t.Mediator.on("".concat(r.options.playerId,":").concat(t.Events.PLAYER_RESIZE),r.updateSize,i(r));var l=e.options,u=l.height,c=l.width;return l.autoplay,e.playback.el.setAttribute("crossorigin","anonymous"),e.playback.el.setAttribute("preload","metadata"),e.playback.el.setAttribute("playsinline","true"),e.el.style.touchAction="none",e.el.addEventListener("touchmove",(function(t){t.preventDefault()}),!1),r.viewer=new Ze({height:isNaN(u)?300:u,width:isNaN(c)?400:c,container:r.container.el,source:r.container.playback.el}),r.viewer.render(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(a,t.ContainerPlugin),o=a,(s=[{key:"updateSize",value:function(){var t=this;setTimeout((function(){return t.viewer.setSize({height:t.container.$el.height(),width:t.container.$el.width()})}),250)}},{key:"name",get:function(){return"Video360"}}])&&e(o.prototype,s),l&&e(o,l),a;var o,s,l}()}))},"37e8":function(t,e,n){var r=n("83ab"),i=n("9bf2"),a=n("825a"),o=n("df75");t.exports=r?Object.defineProperties:function(t,e){a(t);var n,r=o(e),s=r.length,l=0;while(s>l)i.f(t,n=r[l++],e[n]);return t}},"3bbe":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3f8c":function(t,e){t.exports={}},4160:function(t,e,n){"use strict";var r=n("23e7"),i=n("17c2");r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"428f":function(t,e,n){var r=n("da84");t.exports=r},"44ad":function(t,e,n){var r=n("d039"),i=n("c6b6"),a="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?a.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var r=n("b622"),i=n("7c73"),a=n("9bf2"),o=r("unscopables"),s=Array.prototype;void 0==s[o]&&a.f(s,o,{configurable:!0,value:i(null)}),t.exports=function(t){s[o][t]=!0}},"44de":function(t,e,n){var r=n("da84");t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},"466d":function(t,e,n){"use strict";var r=n("d784"),i=n("825a"),a=n("50c4"),o=n("1d80"),s=n("8aa5"),l=n("14c3");r("match",1,(function(t,e,n){return[function(e){var n=o(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=i(t),u=String(this);if(!o.global)return l(o,u);var c=o.unicode;o.lastIndex=0;var h,d=[],f=0;while(null!==(h=l(o,u))){var p=String(h[0]);d[f]=p,""===p&&(o.lastIndex=s(u,a(o.lastIndex),c)),f++}return 0===f?null:d}]}))},4795:function(t,e,n){var r=n("23e7"),i=n("da84"),a=n("342f"),o=[].slice,s=/MSIE .\./.test(a),l=function(t){return function(e,n){var r=arguments.length>2,i=r?o.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};r({global:!0,bind:!0,forced:s},{setTimeout:l(i.setTimeout),setInterval:l(i.setInterval)})},4840:function(t,e,n){var r=n("825a"),i=n("1c0b"),a=n("b622"),o=a("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},4930:function(t,e,n){var r=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},"4bad":function(module,exports,__webpack_require__){!function(t,e){module.exports=e()}(window,(function(){return e={},f.m=d=[function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(39),a=(r=i)&&r.__esModule?r:{default:r};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,a.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(133)),i=o(n(76)),a=o(n(39));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,a.default)(e)));t.prototype=(0,i.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(75),a=(r=i)&&r.__esModule?r:{default:r};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(t,r.key,r)}}e.default=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(n(53)),i=l(n(0)),a=l(n(39)),o=l(n(29)),s=n(5);function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,r){if(!n)return!0;if("object"===(void 0===n?"undefined":(0,a.default)(n))){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(d.test(n)){for(var o=n.split(d),s=0,l=o.length;s<l;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0}function c(t,e,n,r){var i=void 0,a=-1,s=t.length,l=e[0],u=e[1],c=e[2];!function h(){try{switch(e.length){case 0:for(;++a<s;)(i=t[a]).callback.call(i.ctx);return;case 1:for(;++a<s;)(i=t[a]).callback.call(i.ctx,l);return;case 2:for(;++a<s;)(i=t[a]).callback.call(i.ctx,l,u);return;case 3:for(;++a<s;)(i=t[a]).callback.call(i.ctx,l,u,c);return;default:for(;++a<s;)(i=t[a]).callback.apply(i.ctx,e);return}}catch(t){o.default.error.apply(o.default,[n,"error on event",r,"trigger","-",t]),h()}}()}var h=Array.prototype.slice,d=/\s+/,f=(p.prototype.on=function(t,e,n){return u(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},p.prototype.once=function(t,e,n){var r=this,i=void 0;return u(this,"once",t,[e,n])&&e?(i=function(){r.off(t,i),e.apply(this,arguments)},this.on(t,i,n)):this},p.prototype.off=function(t,e,n){var i,a,o=void 0,s=void 0,l=void 0,c=void 0,h=void 0,d=void 0;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(c=0,a=(i=t?[t]:(0,r.default)(this._events)).length;c<a;c++)if(t=i[c],l=this._events[t]){if(this._events[t]=o=[],e||n)for(h=0,d=l.length;h<d;h++)s=l[h],(e&&e!==s.callback&&e!==s.callback._callback||n&&n!==s.context)&&o.push(s);o.length||delete this._events[t]}return this},p.prototype.trigger=function(t){var e=this.name||this.constructor.name;if(o.default.debug.apply(o.default,[e].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=h.call(arguments,1);if(!u(this,"trigger",t,n))return this;var r=this._events[t],i=this._events.all;return r&&c(r,n,e,t),i&&c(i,arguments,e,t),this},p.prototype.stopListening=function(t,e,n){var i=this._listeningTo;if(!i)return this;var o=!e&&!n;for(var s in n||"object"!==(void 0===e?"undefined":(0,a.default)(e))||(n=this),t&&((i={})[t._listenId]=t),i)(t=i[s]).off(e,n,this),!o&&0!==(0,r.default)(t._events).length||delete this._listeningTo[s];return this},p.register=function(t){p.Custom||(p.Custom={});var e="string"==typeof t&&t.toUpperCase().trim();e&&!p.Custom[e]?p.Custom[e]=e.toLowerCase().split("_").map((function(t,e){return 0===e?t:t=t[0].toUpperCase()+t.slice(1)})).join(""):o.default.error("Events","Error when register event: "+t)},p.listAvailableCustomEvents=function(){return p.Custom||(p.Custom={}),(0,r.default)(p.Custom).filter((function(t){return"string"==typeof p.Custom[t]}))},p);function p(){(0,i.default)(this,p)}e.default=f;var g={listenTo:"on",listenToOnce:"once"};(0,r.default)(g).forEach((function(t){f.prototype[t]=function(e,n,r){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=(0,s.uniqueId)("l"))]=e,r||"object"!==(void 0===n?"undefined":(0,a.default)(n))||(r=this),e[g[t]](n,r,this),this}})),f.PLAYER_READY="ready",f.PLAYER_RESIZE="resize",f.PLAYER_FULLSCREEN="fullscreen",f.PLAYER_PLAY="play",f.PLAYER_PAUSE="pause",f.PLAYER_STOP="stop",f.PLAYER_ENDED="ended",f.PLAYER_SEEK="seek",f.PLAYER_ERROR="playererror",f.ERROR="error",f.PLAYER_TIMEUPDATE="timeupdate",f.PLAYER_VOLUMEUPDATE="volumeupdate",f.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",f.PLAYBACK_PROGRESS="playback:progress",f.PLAYBACK_TIMEUPDATE="playback:timeupdate",f.PLAYBACK_READY="playback:ready",f.PLAYBACK_BUFFERING="playback:buffering",f.PLAYBACK_BUFFERFULL="playback:bufferfull",f.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",f.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",f.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",f.PLAYBACK_BITRATE="playback:bitrate",f.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",f.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",f.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",f.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",f.PLAYBACK_DVR="playback:dvr",f.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",f.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",f.PLAYBACK_ENDED="playback:ended",f.PLAYBACK_PLAY_INTENT="playback:play:intent",f.PLAYBACK_PLAY="playback:play",f.PLAYBACK_PAUSE="playback:pause",f.PLAYBACK_SEEK="playback:seek",f.PLAYBACK_SEEKED="playback:seeked",f.PLAYBACK_STOP="playback:stop",f.PLAYBACK_ERROR="playback:error",f.PLAYBACK_STATS_ADD="playback:stats:add",f.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",f.PLAYBACK_LEVEL_SWITCH="playback:level:switch",f.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",f.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",f.CORE_CONTAINERS_CREATED="core:containers:created",f.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",f.CORE_OPTIONS_CHANGE="core:options:change",f.CORE_READY="core:ready",f.CORE_FULLSCREEN="core:fullscreen",f.CORE_RESIZE="core:resize",f.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",f.CORE_MOUSE_MOVE="core:mousemove",f.CORE_MOUSE_LEAVE="core:mouseleave",f.CONTAINER_PLAYBACKSTATE="container:playbackstate",f.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",f.CONTAINER_BITRATE="container:bitrate",f.CONTAINER_STATS_REPORT="container:stats:report",f.CONTAINER_DESTROYED="container:destroyed",f.CONTAINER_READY="container:ready",f.CONTAINER_ERROR="container:error",f.CONTAINER_LOADEDMETADATA="container:loadedmetadata",f.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",f.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",f.CONTAINER_TIMEUPDATE="container:timeupdate",f.CONTAINER_PROGRESS="container:progress",f.CONTAINER_PLAY="container:play",f.CONTAINER_STOP="container:stop",f.CONTAINER_PAUSE="container:pause",f.CONTAINER_ENDED="container:ended",f.CONTAINER_CLICK="container:click",f.CONTAINER_DBLCLICK="container:dblclick",f.CONTAINER_CONTEXTMENU="container:contextmenu",f.CONTAINER_MOUSE_ENTER="container:mouseenter",f.CONTAINER_MOUSE_LEAVE="container:mouseleave",f.CONTAINER_SEEK="container:seek",f.CONTAINER_SEEKED="container:seeked",f.CONTAINER_VOLUME="container:volume",f.CONTAINER_FULLSCREEN="container:fullscreen",f.CONTAINER_STATE_BUFFERING="container:state:buffering",f.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",f.CONTAINER_SETTINGSUPDATE="container:settingsupdate",f.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",f.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",f.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",f.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",f.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",f.CONTAINER_STATS_ADD="container:stats:add",f.CONTAINER_OPTIONS_CHANGE="container:options:change",f.MEDIACONTROL_RENDERED="mediacontrol:rendered",f.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",f.MEDIACONTROL_SHOW="mediacontrol:show",f.MEDIACONTROL_HIDE="mediacontrol:hide",f.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",f.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",f.MEDIACONTROL_PLAYING="mediacontrol:playing",f.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",f.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",f.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change",t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SvgIcons=e.DoubleEventHandler=e.DomRecycler=e.cancelAnimationFrame=e.requestAnimationFrame=e.QueryString=e.Config=e.Fullscreen=void 0;var r=p(n(12)),i=p(n(3)),a=p(n(0)),o=p(n(1)),s=p(n(2)),l=p(n(75)),u=p(n(139));e.assign=g,e.extend=m,e.formatTime=v,e.seekStringToSeconds=T,e.uniqueId=S,e.isNumber=x,e.currentScriptUrl=L,e.getBrowserLanguage=C,e.now=R,e.removeArrayItem=P,e.listContainsIgnoreCase=function(t,e){return void 0!==t&&void 0!==e&&void 0!==e.find((function(e){return t.toLowerCase()===e.toLowerCase()}))},e.canAutoPlayMedia=O,n(142);var c=p(n(14)),h=p(n(6)),d=p(n(150)),f=p(n(151));function p(t){return t&&t.__esModule?t:{default:t}}function g(t,e){if(e)for(var n in e){var r=(0,u.default)(e,n);r?(0,l.default)(t,n,r):t[n]=e[n]}return t}function m(t,e){var n,r=(n=t,(0,s.default)(i,n),i);function i(){(0,a.default)(this,i);for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];var l=(0,o.default)(this,n.call.apply(n,[this].concat(r)));return e.initialize&&e.initialize.apply(l,r),l}return g(r.prototype,e),r}function v(t,e){if(!isFinite(t))return"--:--";t*=1e3;var n=(t=parseInt(t/1e3))%60,r=(t=parseInt(t/60))%60,i=(t=parseInt(t/60))%24,a=parseInt(t/24),o="";return a&&0<a&&(o+=a+":",i<1&&(o+="00:")),(i&&0<i||e)&&(o+=("0"+i).slice(-2)+":"),o+=("0"+r).slice(-2)+":",(o+=("0"+n).slice(-2)).trim()}var y=e.Fullscreen={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.querySelector&&t.querySelector("video")&&t.querySelector("video").webkitEnterFullScreen?t.querySelector("video").webkitEnterFullScreen():t.webkitEnterFullScreen&&t.webkitEnterFullScreen()},cancelFullscreen:function(t){var e=0<arguments.length&&void 0!==t?t:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},b=e.Config=(_._defaultConfig=function(){return{volume:{value:100,parse:parseInt}}},_._defaultValueFor=function(t){try{return this._defaultConfig()[t].parse(this._defaultConfig()[t].value)}catch(t){return}},_._createKeyspace=function(t){return"clappr."+document.domain+"."+t},_.restore=function(t){return c.default.hasLocalstorage&&localStorage[this._createKeyspace(t)]?this._defaultConfig()[t].parse(localStorage[this._createKeyspace(t)]):this._defaultValueFor(t)},_.persist=function(t,e){if(c.default.hasLocalstorage)try{return localStorage[this._createKeyspace(t)]=e,!0}catch(t){return!1}},_);function _(){(0,a.default)(this,_)}var E=e.QueryString=(A.parse=function(t){for(var e=void 0,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(t){return decodeURIComponent(t.replace(n," "))},a={};e=r.exec(t);)a[i(e[1]).toLowerCase()]=i(e[2]);return a},(0,i.default)(A,null,[{key:"params",get:function(){var t=window.location.search.substring(1);return t!==this.query&&(this._urlParams=this.parse(t),this.query=t),this._urlParams}},{key:"hashParams",get:function(){var t=window.location.hash.substring(1);return t!==this.hash&&(this._hashParams=this.parse(t),this.hash=t),this._hashParams}}]),A);function A(){(0,a.default)(this,A)}function T(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"t",e=0,n=E.params[t]||E.hashParams[t]||"",r=n.match(/[0-9]+[hms]+/g)||[];if(0<r.length){var i={h:3600,m:60,s:1};r.forEach((function(t){if(t){var n=t[t.length-1],r=parseInt(t.slice(0,t.length-1),10);e+=r*i[n]}}))}else n&&(e=parseInt(n,10));return e}var w={};function S(t){return w[t]||(w[t]=0),t+ ++w[t]}function x(t){return 0<=t-parseFloat(t)+1}function L(){var t=document.getElementsByTagName("script");return t.length?t[t.length-1].src:""}var M=e.requestAnimationFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window),k=e.cancelAnimationFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function C(){return window.navigator&&window.navigator.language}function R(){return window.performance&&window.performance.now?performance.now():Date.now()}function P(t,e){var n=t.indexOf(e);0<=n&&t.splice(n,1)}function O(t,e){var n=(e=(0,r.default)({inline:!1,muted:!1,timeout:250,type:"video",source:d.default.mp4,element:null},e)).element?e.element:document.createElement(e.type);n.muted=e.muted,!0===e.muted&&n.setAttribute("muted","muted"),!0===e.inline&&n.setAttribute("playsinline","playsinline"),n.src=e.source;var i=n.play(),a=setTimeout((function(){o(!1,new Error("Timeout "+e.timeout+" ms has been reached"))}),e.timeout),o=function(e,n){var r=1<arguments.length&&void 0!==n?n:null;clearTimeout(a),t(e,r)};void 0!==i?i.then((function(){return o(!0)})).catch((function(t){return o(!1,t)})):o(!0)}var D=[],I=e.DomRecycler=(N.configure=function(t){this.options=h.default.extend(this.options,t)},N.create=function(t){return this.options.recycleVideo&&"video"===t&&0<D.length?D.shift():(0,h.default)("<"+t+">")},N.garbage=function(t){this.options.recycleVideo&&"VIDEO"===t[0].tagName.toUpperCase()&&(t.children().remove(),D.push(t))},N);function N(){(0,a.default)(this,N)}I.options={recycleVideo:!1};var F=e.DoubleEventHandler=(B.prototype.handle=function(t,e,n){var r=!(2<arguments.length&&void 0!==n)||n,i=(new Date).getTime(),a=i-this.lastTime;a<this.delay&&0<a&&(e(),r&&t.preventDefault()),this.lastTime=i},B);function B(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;(0,a.default)(this,B),this.delay=t,this.lastTime=0}e.SvgIcons=f.default,e.default={Config:b,Fullscreen:y,QueryString:E,DomRecycler:I,extend:m,formatTime:v,seekStringToSeconds:T,uniqueId:S,currentScriptUrl:L,isNumber:x,requestAnimationFrame:M,cancelAnimationFrame:k,getBrowserLanguage:C,now:R,removeArrayItem:P,canAutoPlayMedia:O,Media:d.default,DoubleEventHandler:F,SvgIcons:f.default}},function(Ke,Le){var Ne,Oe,Pe,Qe,nf,of,Re,Se,Te,Ue,Ve,We,Xe,Ye,Ze,$e,_e,af,bf,cf,ef,ff,gf,hf,jf,kf,lf,mf,pf,qf,rf,cn,Bn,Cn,Nq,Oq,Pq,Qq,Sq,Tq,Uq,Vq,Me=(Se=(Re=[]).concat,Te=Re.filter,Ue=Re.slice,Ve=window.document,We={},Xe={},Ye={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Ze=/^\s*<(\w+|!)[^>]*>/,$e=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,af=/^(?:body|html)$/i,bf=/([A-Z])/g,cf=["val","css","html","text","data","width","height","offset"],ef=Ve.createElement("table"),ff=Ve.createElement("tr"),gf={tr:Ve.createElement("tbody"),tbody:ef,thead:ef,tfoot:ef,td:ff,th:ff,"*":Ve.createElement("div")},hf=/complete|loaded|interactive/,jf=/^[\w-]*$/,lf=(kf={}).toString,mf={},pf=Ve.createElement("div"),qf={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},rf=Array.isArray||function(t){return t instanceof Array},mf.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,a=!i;return a&&(i=pf).appendChild(t),r=~mf.qsa(i,e).indexOf(t),a&&pf.removeChild(t),r},nf=function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},of=function(t){return Te.call(t,(function(e,n){return t.indexOf(e)==n}))},mf.fragment=function(t,e,n){var r,i,a;return $e.test(t)&&(r=Pe(Ve.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(_e,"<$1></$2>")),e===Ne&&(e=Ze.test(t)&&RegExp.$1),e in gf||(e="*"),(a=gf[e]).innerHTML=""+t,r=Pe.each(Ue.call(a.childNodes),(function(){a.removeChild(this)}))),xf(n)&&(i=Pe(r),Pe.each(n,(function(t,e){-1<cf.indexOf(t)?i[t](e):i.attr(t,e)}))),r},mf.Z=function(t,e){return new Gf(t,e)},mf.isZ=function(t){return t instanceof mf.Z},mf.init=function(t,e){var n;if(!t)return mf.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&Ze.test(t))n=mf.fragment(t,RegExp.$1,e),t=null;else{if(e!==Ne)return Pe(e).find(t);n=mf.qsa(Ve,t)}else{if(tf(t))return Pe(Ve).ready(t);if(mf.isZ(t))return t;if(rf(t))n=function(t){return Te.call(t,(function(t){return null!=t}))}(t);else if(wf(t))n=[t],t=null;else if(Ze.test(t))n=mf.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==Ne)return Pe(e).find(t);n=mf.qsa(Ve,t)}}return mf.Z(n,t)},(Pe=function(t,e){return mf.init(t,e)}).extend=function(t){var e,n=Ue.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach((function(n){!function t(e,n,r){for(Oe in n)r&&(xf(n[Oe])||rf(n[Oe]))?(xf(n[Oe])&&!xf(e[Oe])&&(e[Oe]={}),rf(n[Oe])&&!rf(e[Oe])&&(e[Oe]=[]),t(e[Oe],n[Oe],r)):n[Oe]!==Ne&&(e[Oe]=n[Oe])}(t,n,e)})),t},mf.qsa=function(t,e){var n,r="#"==e[0],i=!r&&"."==e[0],a=r||i?e.slice(1):e,o=jf.test(a);return t.getElementById&&o&&r?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:Ue.call(o&&!r&&t.getElementsByClassName?i?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},Pe.contains=Ve.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},Pe.type=sf,Pe.isFunction=tf,Pe.isWindow=uf,Pe.isArray=rf,Pe.isPlainObject=xf,Pe.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},Pe.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},Pe.inArray=function(t,e,n){return Re.indexOf.call(e,t,n)},Pe.camelCase=nf,Pe.trim=function(t){return null==t?"":String.prototype.trim.call(t)},Pe.uuid=0,Pe.support={},Pe.expr={},Pe.noop=function(){},Pe.map=function(t,e){var n,r,i,a=[];if(yf(t))for(r=0;r<t.length;r++)null!=(n=e(t[r],r))&&a.push(n);else for(i in t)null!=(n=e(t[i],i))&&a.push(n);return function(t){return 0<t.length?Pe.fn.concat.apply([],t):t}(a)},Pe.each=function(t,e){var n,r;if(yf(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(r in t)if(!1===e.call(t[r],r,t[r]))return t;return t},Pe.grep=function(t,e){return Te.call(t,e)},window.JSON&&(Pe.parseJSON=JSON.parse),Pe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){kf["[object "+e+"]"]=e.toLowerCase()})),Pe.fn={constructor:mf.Z,length:0,forEach:Re.forEach,reduce:Re.reduce,push:Re.push,sort:Re.sort,splice:Re.splice,indexOf:Re.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=mf.isZ(e)?e.toArray():e;return Se.apply(mf.isZ(this)?this.toArray():this,n)},map:function(t){return Pe(Pe.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return Pe(Ue.apply(this,arguments))},ready:function(t){return hf.test(Ve.readyState)&&Ve.body?t(Pe):Ve.addEventListener("DOMContentLoaded",(function(){t(Pe)}),!1),this},get:function(t){return t===Ne?Ue.call(this):this[0<=t?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(t){return Re.every.call(this,(function(e,n){return!1!==t.call(e,n,e)})),this},filter:function(t){return tf(t)?this.not(this.not(t)):Pe(Te.call(this,(function(e){return mf.matches(e,t)})))},add:function(t,e){return Pe(of(this.concat(Pe(t,e))))},is:function(t){return 0<this.length&&mf.matches(this[0],t)},not:function(t){var e=[];if(tf(t)&&t.call!==Ne)this.each((function(n){t.call(this,n)||e.push(this)}));else{var n="string"==typeof t?this.filter(t):yf(t)&&tf(t.item)?Ue.call(t):Pe(t);this.forEach((function(t){n.indexOf(t)<0&&e.push(t)}))}return Pe(e)},has:function(t){return this.filter((function(){return wf(t)?Pe.contains(this,t):Pe(this).find(t).size()}))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!wf(t)?t:Pe(t)},last:function(){var t=this[this.length-1];return t&&!wf(t)?t:Pe(t)},find:function(t){var e=this;return t?"object"==typeof t?Pe(t).filter((function(){var t=this;return Re.some.call(e,(function(e){return Pe.contains(e,t)}))})):1==this.length?Pe(mf.qsa(this[0],t)):this.map((function(){return mf.qsa(this,t)})):Pe()},closest:function(t,e){var n=[],r="object"==typeof t&&Pe(t);return this.each((function(i,a){for(;a&&!(r?0<=r.indexOf(a):mf.matches(a,t));)a=a!==e&&!vf(a)&&a.parentNode;a&&n.indexOf(a)<0&&n.push(a)})),Pe(n)},parents:function(t){for(var e=[],n=this;0<n.length;)n=Pe.map(n,(function(t){if((t=t.parentNode)&&!vf(t)&&e.indexOf(t)<0)return e.push(t),t}));return If(e,t)},parent:function(t){return If(of(this.pluck("parentNode")),t)},children:function(t){return If(this.map((function(){return Ff(this)})),t)},contents:function(){return this.map((function(){return this.contentDocument||Ue.call(this.childNodes)}))},siblings:function(t){return If(this.map((function(t,e){return Te.call(Ff(e.parentNode),(function(t){return t!==e}))})),t)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return Pe.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=function(t){var e,n;return We[t]||(e=Ve.createElement(t),Ve.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),We[t]=n),We[t]}(this.nodeName))}))},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=tf(t);if(this[0]&&!e)var n=Pe(t).get(0),r=n.parentNode||1<this.length;return this.each((function(i){Pe(this).wrapAll(e?t.call(this,i):r?n.cloneNode(!0):n)}))},wrapAll:function(t){if(this[0]){var e;for(Pe(this[0]).before(t=Pe(t));(e=t.children()).length;)t=e.first();Pe(t).append(this)}return this},wrapInner:function(t){var e=tf(t);return this.each((function(n){var r=Pe(this),i=r.contents(),a=e?t.call(this,n):t;i.length?i.wrapAll(a):r.append(a)}))},unwrap:function(){return this.parent().each((function(){Pe(this).replaceWith(Pe(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var e=Pe(this);(t===Ne?"none"==e.css("display"):t)?e.show():e.hide()}))},prev:function(t){return Pe(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return Pe(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each((function(e){var n=this.innerHTML;Pe(this).empty().append(Jf(this,t,e,n))})):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each((function(e){var n=Jf(this,t,e,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each((function(n){if(1===this.nodeType)if(wf(t))for(Oe in t)Kf(this,Oe,t[Oe]);else Kf(this,t,Jf(this,e,n,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(t))?n:Ne},removeAttr:function(t){return this.each((function(){1===this.nodeType&&t.split(" ").forEach((function(t){Kf(this,t)}),this)}))},prop:function(t,e){return t=qf[t]||t,1 in arguments?this.each((function(n){this[t]=Jf(this,e,n,this[t])})):this[0]&&this[0][t]},removeProp:function(t){return t=qf[t]||t,this.each((function(){delete this[t]}))},data:function(t,e){var n="data-"+t.replace(bf,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,e):this.attr(n);return null!==r?Mf(r):Ne},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each((function(e){this.value=Jf(this,t,e,this.value)}))):this[0]&&(this[0].multiple?Pe(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each((function(e){var n=Pe(this),r=Jf(this,t,e,n.offset()),i=n.offsetParent().offset(),a={top:r.top-i.top,left:r.left-i.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)}));if(!this.length)return null;if(Ve.documentElement!==this[0]&&!Pe.contains(Ve.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,e){if(arguments.length<2){var n=this[0];if("string"==typeof t){if(!n)return;return n.style[nf(t)]||getComputedStyle(n,"").getPropertyValue(t)}if(rf(t)){if(!n)return;var r={},i=getComputedStyle(n,"");return Pe.each(t,(function(t,e){r[e]=n.style[nf(e)]||i.getPropertyValue(e)})),r}}var a="";if("string"==sf(t))e||0===e?a=Bf(t)+":"+Df(t,e):this.each((function(){this.style.removeProperty(Bf(t))}));else for(Oe in t)t[Oe]||0===t[Oe]?a+=Bf(Oe)+":"+Df(Oe,t[Oe])+";":this.each((function(){this.style.removeProperty(Bf(Oe))}));return this.each((function(){this.style.cssText+=";"+a}))},index:function(t){return t?this.indexOf(Pe(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&Re.some.call(this,(function(t){return this.test(Lf(t))}),Cf(t))},addClass:function(t){return t?this.each((function(e){if("className"in this){Qe=[];var n=Lf(this);Jf(this,t,e,n).split(/\s+/g).forEach((function(t){Pe(this).hasClass(t)||Qe.push(t)}),this),Qe.length&&Lf(this,n+(n?" ":"")+Qe.join(" "))}})):this},removeClass:function(t){return this.each((function(e){if("className"in this){if(t===Ne)return Lf(this,"");Qe=Lf(this),Jf(this,t,e,Qe).split(/\s+/g).forEach((function(t){Qe=Qe.replace(Cf(t)," ")})),Lf(this,Qe.trim())}}))},toggleClass:function(t,e){return t?this.each((function(n){var r=Pe(this);Jf(this,t,n,Lf(this)).split(/\s+/g).forEach((function(t){(e===Ne?!r.hasClass(t):e)?r.addClass(t):r.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===Ne?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===Ne?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),r=af.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(Pe(t).css("margin-top"))||0,n.left-=parseFloat(Pe(t).css("margin-left"))||0,r.top+=parseFloat(Pe(e[0]).css("border-top-width"))||0,r.left+=parseFloat(Pe(e[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||Ve.body;t&&!af.test(t.nodeName)&&"static"==Pe(t).css("position");)t=t.offsetParent;return t}))}},Pe.fn.detach=Pe.fn.remove,["width","height"].forEach((function(t){var e=t.replace(/./,(function(t){return t[0].toUpperCase()}));Pe.fn[t]=function(n){var r,i=this[0];return n===Ne?uf(i)?i["inner"+e]:vf(i)?i.documentElement["scroll"+e]:(r=this.offset())&&r[t]:this.each((function(e){(i=Pe(this)).css(t,Jf(this,n,e,i[t]()))}))}})),["after","prepend","before","append"].forEach((function(t,e){var n=e%2;Pe.fn[t]=function(){var t,r,i=Pe.map(arguments,(function(e){var n=[];return"array"==(t=sf(e))?(e.forEach((function(t){return t.nodeType!==Ne?n.push(t):Pe.zepto.isZ(t)?n=n.concat(t.get()):void(n=n.concat(mf.fragment(t)))})),n):"object"==t||null==e?e:mf.fragment(e)})),a=1<this.length;return i.length<1?this:this.each((function(t,o){r=n?o:o.parentNode,o=0==e?o.nextSibling:1==e?o.firstChild:2==e?o:null;var s=Pe.contains(Ve.documentElement,r);i.forEach((function(t){if(a)t=t.cloneNode(!0);else if(!r)return Pe(t).remove();r.insertBefore(t,o),s&&function t(e,n){n(e);for(var r=0,i=e.childNodes.length;r<i;r++)t(e.childNodes[r],n)}(t,(function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var e=t.ownerDocument?t.ownerDocument.defaultView:window;e.eval.call(e,t.innerHTML)}}))}))}))},Pe.fn[n?t+"To":"insert"+(e?"Before":"After")]=function(e){return Pe(e)[t](this),this}})),mf.Z.prototype=Gf.prototype=Pe.fn,mf.uniq=of,mf.deserializeValue=Mf,Pe.zepto=mf,Pe);function sf(t){return null==t?String(t):kf[lf.call(t)]||"object"}function tf(t){return"function"==sf(t)}function uf(t){return null!=t&&t==t.window}function vf(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function wf(t){return"object"==sf(t)}function xf(t){return wf(t)&&!uf(t)&&Object.getPrototypeOf(t)==Object.prototype}function yf(t){var e=!!t&&"length"in t&&t.length,n=Pe.type(t);return"function"!=n&&!uf(t)&&("array"==n||0===e||"number"==typeof e&&0<e&&e-1 in t)}function Bf(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function Cf(t){return t in Xe?Xe[t]:Xe[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function Df(t,e){return"number"!=typeof e||Ye[Bf(t)]?e:e+"px"}function Ff(t){return"children"in t?Ue.call(t.children):Pe.map(t.childNodes,(function(t){if(1==t.nodeType)return t}))}function Gf(t,e){var n,r=t?t.length:0;for(n=0;n<r;n++)this[n]=t[n];this.length=r,this.selector=e||""}function If(t,e){return null==e?Pe(t):Pe(t).filter(e)}function Jf(t,e,n,r){return tf(e)?e.call(t,n,r):e}function Kf(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function Lf(t,e){var n=t.className||"",r=n&&n.baseVal!==Ne;if(e===Ne)return r?n.baseVal:n;r?n.baseVal=e:t.className=e}function Mf(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?Pe.parseJSON(t):t):t}catch(e){return t}}function Dn(t){var e=[["resolve","done",Bn.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",Bn.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",Bn.Callbacks({memory:1})]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Dn((function(n){Bn.each(e,(function(e,a){var o=Bn.isFunction(t[e])&&t[e];i[a[1]]((function(){var t=o&&o.apply(this,arguments);if(t&&Bn.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var e=this===r?n.promise():this,i=o?[t]:arguments;n[a[0]+"With"](e,i)}}))})),t=null})).promise()},promise:function(t){return null!=t?Bn.extend(t,r):r}},i={};return Bn.each(e,(function(t,a){var o=a[2],s=a[3];r[a[1]]=o.add,s&&o.add((function(){n=s}),e[1^t][2].disable,e[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?r:this,arguments),this},i[a[0]+"With"]=o.fireWith})),r.promise(i),t&&t.call(i,i),i}function Rq(t){return!(!(t=Nq(t)).width()&&!t.height())&&"none"!==t.css("display")}function Wq(t,e){t=t.replace(/=#\]/g,'="#"]');var n,r,i=Tq.exec(t);if(i&&i[2]in Sq&&(n=Sq[i[2]],r=i[3],t=i[1],r)){var a=Number(r);r=isNaN(a)?r.replace(/^["']|["']$/g,""):a}return e(t,n,r)}window.Zepto=Me,void 0===window.$&&(window.$=Me),function(Lk){var Ok,Pk,Mk=+new Date,Nk=window.document,Qk=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Rk=/^(?:text|application)\/javascript/i,Sk=/^(?:text|application)\/xml/i,Tk="application/json",Uk="text/html",Vk=/^\s*$/,Wk=Nk.createElement("a");function Yk(t,e,n,r){if(t.global)return function(t,e,n){var r=Lk.Event(e);return Lk(t).trigger(r,n),!r.isDefaultPrevented()}(e||Nk,n,r)}function _k(t,e){var n=e.context;if(!1===e.beforeSend.call(n,t,e)||!1===Yk(e,n,"ajaxBeforeSend",[t,e]))return!1;Yk(e,n,"ajaxSend",[t,e])}function al(t,e,n,r){var i=n.context,a="success";n.success.call(i,t,a,e),r&&r.resolveWith(i,[t,a,e]),Yk(n,i,"ajaxSuccess",[e,n,t]),cl(a,e,n)}function bl(t,e,n,r,i){var a=r.context;r.error.call(a,n,e,t),i&&i.rejectWith(a,[n,e,t]),Yk(r,a,"ajaxError",[n,r,t||e]),cl(e,n,r)}function cl(t,e,n){var r=n.context;n.complete.call(r,e,t),Yk(n,r,"ajaxComplete",[e,n]),function(t){t.global&&!--Lk.active&&Yk(t,null,"ajaxStop")}(n)}function el(){}function gl(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function il(t,e,n,r){return Lk.isFunction(e)&&(r=n,n=e,e=void 0),Lk.isFunction(n)||(r=n,n=void 0),{url:t,data:e,success:n,dataType:r}}Wk.href=window.location.href,Lk.active=0,Lk.ajaxJSONP=function(t,e){if(!("type"in t))return Lk.ajax(t);function n(t){Lk(s).triggerHandler("error",t||"abort")}var r,i,a=t.jsonpCallback,o=(Lk.isFunction(a)?a():a)||"Zepto"+Mk++,s=Nk.createElement("script"),l=window[o],u={abort:n};return e&&e.promise(u),Lk(s).on("load error",(function(n,a){clearTimeout(i),Lk(s).off().remove(),"error"!=n.type&&r?al(r[0],u,t,e):bl(null,a||"error",u,t,e),window[o]=l,r&&Lk.isFunction(l)&&l(r[0]),l=r=void 0})),!1===_k(u,t)?n("abort"):(window[o]=function(){r=arguments},s.src=t.url.replace(/\?(.+)=\?/,"?$1="+o),Nk.head.appendChild(s),0<t.timeout&&(i=setTimeout((function(){n("timeout")}),t.timeout))),u},Lk.ajaxSettings={type:"GET",beforeSend:el,success:el,error:el,complete:el,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:Tk,xml:"application/xml, text/xml",html:Uk,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:el},Lk.ajax=function(hm){var km,lm,im=Lk.extend({},hm||{}),jm=Lk.Deferred&&Lk.Deferred();for(Ok in Lk.ajaxSettings)void 0===im[Ok]&&(im[Ok]=Lk.ajaxSettings[Ok]);!function(t){t.global&&0==Lk.active++&&Yk(t,null,"ajaxStart")}(im),im.crossDomain||((km=Nk.createElement("a")).href=im.url,km.href=km.href,im.crossDomain=Wk.protocol+"//"+Wk.host!=km.protocol+"//"+km.host),im.url||(im.url=window.location.toString()),-1<(lm=im.url.indexOf("#"))&&(im.url=im.url.slice(0,lm)),function(t){t.processData&&t.data&&"string"!=Lk.type(t.data)&&(t.data=Lk.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=gl(t.url,t.data),t.data=void 0)}(im);var mm=im.dataType,nm=/\?.+=\?/.test(im.url);if(nm&&(mm="jsonp"),!1!==im.cache&&(hm&&!0===hm.cache||"script"!=mm&&"jsonp"!=mm)||(im.url=gl(im.url,"_="+Date.now())),"jsonp"==mm)return nm||(im.url=gl(im.url,im.jsonp?im.jsonp+"=?":!1===im.jsonp?"":"callback=?")),Lk.ajaxJSONP(im,jm);function qm(t,e){pm[t.toLowerCase()]=[t,e]}var um,om=im.accepts[mm],pm={},rm=/^([\w-]+:)\/\//.test(im.url)?RegExp.$1:window.location.protocol,sm=im.xhr(),tm=sm.setRequestHeader;if(jm&&jm.promise(sm),im.crossDomain||qm("X-Requested-With","XMLHttpRequest"),qm("Accept",om||"*/*"),(om=im.mimeType||om)&&(-1<om.indexOf(",")&&(om=om.split(",",2)[0]),sm.overrideMimeType&&sm.overrideMimeType(om)),(im.contentType||!1!==im.contentType&&im.data&&"GET"!=im.type.toUpperCase())&&qm("Content-Type",im.contentType||"application/x-www-form-urlencoded"),im.headers)for(Pk in im.headers)qm(Pk,im.headers[Pk]);if(sm.setRequestHeader=qm,!(sm.onreadystatechange=function(){if(4==sm.readyState){sm.onreadystatechange=el,clearTimeout(um);var ym,zm=!1;if(200<=sm.status&&sm.status<300||304==sm.status||0==sm.status&&"file:"==rm){if(mm=mm||function(t){return t&&(t=t.split(";",2)[0]),t&&(t==Uk?"html":t==Tk?"json":Rk.test(t)?"script":Sk.test(t)&&"xml")||"text"}(im.mimeType||sm.getResponseHeader("content-type")),"arraybuffer"==sm.responseType||"blob"==sm.responseType)ym=sm.response;else{ym=sm.responseText;try{ym=function(t,e,n){if(n.dataFilter==el)return t;var r=n.context;return n.dataFilter.call(r,t,e)}(ym,mm,im),"script"==mm?eval(ym):"xml"==mm?ym=sm.responseXML:"json"==mm&&(ym=Vk.test(ym)?null:Lk.parseJSON(ym))}catch(t){zm=t}if(zm)return bl(zm,"parsererror",sm,im,jm)}al(ym,sm,im,jm)}else bl(sm.statusText||null,sm.status?"error":"abort",sm,im,jm)}})===_k(sm,im))return sm.abort(),bl(null,"abort",sm,im,jm),sm;var vm=!("async"in im)||im.async;if(sm.open(im.type,im.url,vm,im.username,im.password),im.xhrFields)for(Pk in im.xhrFields)sm[Pk]=im.xhrFields[Pk];for(Pk in pm)tm.apply(sm,pm[Pk]);return 0<im.timeout&&(um=setTimeout((function(){sm.onreadystatechange=el,sm.abort(),bl(null,"timeout",sm,im,jm)}),im.timeout)),sm.send(im.data?im.data:null),sm},Lk.get=function(){return Lk.ajax(il.apply(null,arguments))},Lk.post=function(){var t=il.apply(null,arguments);return t.type="POST",Lk.ajax(t)},Lk.getJSON=function(){var t=il.apply(null,arguments);return t.dataType="json",Lk.ajax(t)},Lk.fn.load=function(t,e,n){if(!this.length)return this;var r,i=this,a=t.split(/\s/),o=il(t,e,n),s=o.success;return 1<a.length&&(o.url=a[0],r=a[1]),o.success=function(t){i.html(r?Lk("<div>").html(t.replace(Qk,"")).find(r):t),s&&s.apply(i,arguments)},Lk.ajax(o),this};var jl=encodeURIComponent;Lk.param=function(t,e){var n=[];return n.add=function(t,e){Lk.isFunction(e)&&(e=e()),null==e&&(e=""),this.push(jl(t)+"="+jl(e))},function t(e,n,r,i){var a,o=Lk.isArray(n),s=Lk.isPlainObject(n);Lk.each(n,(function(n,l){a=Lk.type(l),i&&(n=r?i:i+"["+(s||"object"==a||"array"==a?n:"")+"]"),!i&&o?e.add(l.name,l.value):"array"==a||!r&&"object"==a?t(e,l,r,n):e.add(n,l)}))}(n,t,e),n.join("&").replace(/%20/g,"+")}}(Me),(cn=Me).Callbacks=function(t){t=cn.extend({},t);var e,n,r,i,a,o,s=[],l=!t.once&&[],u=function(h){for(e=t.memory&&h,n=!0,o=i||0,i=0,a=s.length,r=!0;s&&o<a;++o)if(!1===s[o].apply(h[0],h[1])&&t.stopOnFalse){e=!1;break}r=!1,s&&(l?l.length&&u(l.shift()):e?s.length=0:c.disable())},c={add:function(){if(s){var n=s.length,o=function(e){cn.each(e,(function(e,n){"function"==typeof n?t.unique&&c.has(n)||s.push(n):n&&n.length&&"string"!=typeof n&&o(n)}))};o(arguments),r?a=s.length:e&&(i=n,u(e))}return this},remove:function(){return s&&cn.each(arguments,(function(t,e){for(var n;-1<(n=cn.inArray(e,s,n));)s.splice(n,1),r&&(n<=a&&--a,n<=o&&--o)})),this},has:function(t){return!(!s||!(t?-1<cn.inArray(t,s):s.length))},empty:function(){return a=s.length=0,this},disable:function(){return s=l=e=void 0,this},disabled:function(){return!s},lock:function(){return l=void 0,e||c.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!s||n&&!l||(e=[t,(e=e||[]).slice?e.slice():e],r?l.push(e):u(e)),this},fire:function(){return c.fireWith(this,arguments)},fired:function(){return!!n}};return c},Bn=Me,Cn=Array.prototype.slice,Bn.when=function(t){function e(t,e,r){return function(i){e[t]=this,r[t]=1<arguments.length?Cn.call(arguments):i,r===n?u.notifyWith(e,r):--l||u.resolveWith(e,r)}}var n,r,i,a=Cn.call(arguments),o=a.length,s=0,l=1!==o||t&&Bn.isFunction(t.promise)?o:0,u=1===l?t:Dn();if(1<o)for(n=new Array(o),r=new Array(o),i=new Array(o);s<o;++s)a[s]&&Bn.isFunction(a[s].promise)?a[s].promise().done(e(s,i,a)).fail(u.reject).progress(e(s,r,n)):--l;return l||u.resolveWith(i,a),u.promise()},Bn.Deferred=Dn,function(t){function e(t){return"string"==typeof t}var n,r=1,i=Array.prototype.slice,a=t.isFunction,o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function h(t){return t._zid||(t._zid=r++)}function d(t,e,n,r){if((e=f(e)).ns)var i=function(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}(e.ns);return(o[h(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||i.test(t.ns))&&(!n||h(t.fn)===h(n))&&(!r||t.sel==r)}))}function f(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function p(t,e){return t.del&&!l&&t.e in u||!!e}function g(t){return c[t]||l&&u[t]||t}function m(e,r,i,a,s,l,u){var d=h(e),m=o[d]||(o[d]=[]);r.split(/\s/).forEach((function(r){if("ready"==r)return t(document).ready(i);var o=f(r);o.fn=i,o.sel=s,o.e in c&&(i=function(e){var n=e.relatedTarget;if(!n||n!==this&&!t.contains(this,n))return o.fn.apply(this,arguments)});var h=(o.del=l)||i;o.proxy=function(t){if(!(t=A(t)).isImmediatePropagationStopped()){t.data=a;var r=h.apply(e,t._args==n?[t]:[t].concat(t._args));return!1===r&&(t.preventDefault(),t.stopPropagation()),r}},o.i=m.length,m.push(o),"addEventListener"in e&&e.addEventListener(g(o.e),o.proxy,p(o,u))}))}function v(t,e,n,r,i){var a=h(t);(e||"").split(/\s/).forEach((function(e){d(t,e,n,r).forEach((function(e){delete o[a][e.i],"removeEventListener"in t&&t.removeEventListener(g(e.e),e.proxy,p(e,i))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",t.event={add:m,remove:v},t.proxy=function(n,r){var o=2 in arguments&&i.call(arguments,2);if(a(n)){function s(){return n.apply(r,o?o.concat(i.call(arguments)):arguments)}return s._zid=h(n),s}if(e(r))return o?(o.unshift(n[r],n),t.proxy.apply(null,o)):t.proxy(n[r],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var y=function(){return!0},b=function(){return!1},_=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function A(e,r){return!r&&e.isDefaultPrevented||(r||(r=e),t.each(E,(function(t,n){var i=r[t];e[t]=function(){return this[n]=y,i&&i.apply(r,arguments)},e[n]=b})),e.timeStamp||(e.timeStamp=Date.now()),(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(e.isDefaultPrevented=y)),e}function T(t){var e,r={originalEvent:t};for(e in t)_.test(e)||t[e]===n||(r[e]=t[e]);return A(r,t)}t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(r,o,s,l,u){var c,h,d=this;return r&&!e(r)?(t.each(r,(function(t,e){d.on(t,o,s,e,u)})),d):(e(o)||a(l)||!1===l||(l=s,s=o,o=n),l!==n&&!1!==s||(l=s,s=n),!1===l&&(l=b),d.each((function(e,n){u&&(c=function(t){return v(n,t.type,l),l.apply(this,arguments)}),o&&(h=function(e){var r,a=t(e.target).closest(o,n).get(0);if(a&&a!==n)return r=t.extend(T(e),{currentTarget:a,liveFired:n}),(c||l).apply(a,[r].concat(i.call(arguments,1)))}),m(n,r,l,s,o,h||c)})))},t.fn.off=function(r,i,o){var s=this;return r&&!e(r)?(t.each(r,(function(t,e){s.off(t,i,e)})),s):(e(i)||a(o)||!1===o||(o=i,i=n),!1===o&&(o=b),s.each((function(){v(this,r,o,i)})))},t.fn.trigger=function(n,r){return(n=e(n)||t.isPlainObject(n)?t.Event(n):A(n))._args=r,this.each((function(){n.type in u&&"function"==typeof this[n.type]?this[n.type]():"dispatchEvent"in this?this.dispatchEvent(n):t(this).triggerHandler(n,r)}))},t.fn.triggerHandler=function(n,r){var i,a;return this.each((function(o,s){(i=T(e(n)?t.Event(n):n))._args=r,i.target=s,t.each(d(s,n.type||n),(function(t,e){if(a=e.proxy(i),i.isImmediatePropagationStopped())return!1}))})),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}})),t.Event=function(t,n){e(t)||(t=(n=t).type);var r=document.createEvent(s[t]||"Events"),i=!0;if(n)for(var a in n)"bubbles"==a?i=!!n[a]:r[a]=n[a];return r.initEvent(t,i,!0),A(r)}}(Me),function(){try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e,n){try{return t(e,n)}catch(e){return null}}}}(),Oq=(Nq=Me).zepto,Pq=Oq.qsa,Qq=Oq.matches,Sq=Nq.expr[":"]={visible:function(){if(Rq(this))return this},hidden:function(){if(!Rq(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(t){if(0===t)return this},last:function(t,e){if(t===e.length-1)return this},eq:function(t,e,n){if(t===n)return this},contains:function(t,e,n){if(-1<Nq(this).text().indexOf(n))return this},has:function(t,e,n){if(Oq.qsa(this,n).length)return this}},Tq=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),Uq=/^\s*>/,Vq="Zepto"+ +new Date,Oq.qsa=function(t,e){return Wq(e,(function(n,r,i){try{var a;!n&&r?n="*":Uq.test(n)&&(a=Nq(t).addClass(Vq),n="."+Vq+" "+n);var o=Pq(t,n)}catch(n){throw console.error("error performing selector: %o",e),n}finally{a&&a.removeClass(Vq)}return r?Oq.uniq(Nq.map(o,(function(t,e){return r.call(t,e,o,i)}))):o}))},Oq.matches=function(t,e){return Wq(e,(function(e,n,r){return(!e||Qq(t,e))&&(!n||n.call(t,null,r)===t)}))},Ke.exports=Me},function(t,e,n){"use strict";function r(t){return null===t?"":(""+t).replace(c,(function(t){return u[t]}))}function i(t,e){var n,i=new RegExp([(a.escape||o).source,(a.interpolate||o).source,(a.evaluate||o).source].join("|")+"|$","g"),u=0,c="__p+='";t.replace(i,(function(e,n,r,i,a){return c+=t.slice(u,a).replace(l,(function(t){return"\\"+s[t]})),n&&(c+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),r&&(c+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(c+="';\n"+i+"\n__p+='"),u=a+e.length,e})),c+="';\n",a.variable||(c="with(obj||{}){\n"+c+"}\n"),c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n//# sourceURL=/microtemplates/source["+h+++"]";try{n=new Function(a.variable||"obj","escapeExpr",c)}catch(e){throw e.source=c,e}if(e)return n(e,r);function d(t){return n.call(this,t,r)}return d.source="function("+(a.variable||"obj")+"){\n"+c+"}",d}Object.defineProperty(e,"__esModule",{value:!0});var a={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},o=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},l=/\\|'|\r|\n|\t|\u2028|\u2029/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},c=new RegExp("[&<>\"']","g"),h=0;i.settings=a,e.default=i,t.exports=e.default},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),a=r.sources.map((function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"}));return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r,i,a,o={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),l=(a={},function(t){if("function"==typeof t)return t();if(void 0===a[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}a[t]=e}return a[t]}),u=null,c=0,h=[],d=n(172);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(b(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function p(t,e){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i],o=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function g(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function v(t){var e=document.createElement("style");return t.attrs.type="text/css",y(e,t.attrs),g(t,e),e}function y(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,r,i,a;if(e.transform&&t.css){if(!(a=e.transform(t.css)))return function(){};t.css=a}if(e.singleton){var o=c++;n=u||(u=v(e)),r=A.bind(null,n,o,!1),i=A.bind(null,n,o,!0)}else i=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",y(e,t.attrs),g(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||a)&&(r=d(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,e),function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){m(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return f(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}for(t&&f(p(t,e),e),i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var _,E=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function A(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=E(e,i);else{var a=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n(12)),i=d(n(0)),a=d(n(1)),o=d(n(3)),s=d(n(2)),l=n(5),u=d(n(30)),c=d(n(20)),h=d(n(6));function d(t){return t&&t.__esModule?t:{default:t}}var f,p=(f=u.default,(0,s.default)(g,f),(0,o.default)(g,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"consented",get:function(){return this._consented}}]),g.prototype.consent=function(){this._consented=!0},g.prototype.play=function(){},g.prototype.pause=function(){},g.prototype.stop=function(){},g.prototype.seek=function(t){},g.prototype.seekPercentage=function(t){},g.prototype.getStartTimeOffset=function(){return 0},g.prototype.getDuration=function(){return 0},g.prototype.isPlaying=function(){return!1},g.prototype.getPlaybackType=function(){return g.NO_OP},g.prototype.isHighDefinitionInUse=function(){return!1},g.prototype.volume=function(t){},g.prototype.configure=function(t){this._options=h.default.extend(this._options,t)},g.prototype.attemptAutoPlay=function(){var t=this;this.canAutoPlay((function(e,n){e&&t.play()}))},g.prototype.canAutoPlay=function(t){t(!0,null)},(0,o.default)(g,[{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return 0<this.closedCaptionsTracks.length}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(t){}}]),g);function g(t,e,n){(0,i.default)(this,g);var r=(0,a.default)(this,f.call(this,t));return r.settings={},r._i18n=e,r.playerError=n,r._consented=!1,r}e.default=p,(0,r.default)(p.prototype,c.default),p.extend=function(t){return(0,l.extend)(p,t)},p.canPlay=function(t,e){return!1},p.VOD="vod",p.AOD="aod",p.LIVE="live",p.NO_OP="no_op",p.type="playback",t.exports=e.default},function(t,e,n){t.exports={default:n(102),__esModule:!0}},function(t,e,n){var r=n(50)("wks"),i=n(36),a=n(17).Symbol,o="function"==typeof a;(t.exports=function(t){return r[t]||(r[t]=o&&a[t]||(o?a:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(143),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(0)),i=u(n(1)),a=u(n(3)),o=u(n(2)),s=n(5),l=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}var c,h=(c=l.default,(0,o.default)(d,c),(0,a.default)(d,[{key:"options",get:function(){return this._options}}]),d);function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,d);var e=(0,i.default)(this,c.call(this,t));return e._options=t,e.uniqueId=(0,s.uniqueId)("o"),e}e.default=h,t.exports=e.default},function(t,e,n){var r=n(17),i=n(9),a=n(44),o=n(26),s="prototype",l=function(t,e,n){var u,c,h,d=t&l.F,f=t&l.G,p=t&l.S,g=t&l.P,m=t&l.B,v=t&l.W,y=f?i:i[e]||(i[e]={}),b=y[s],_=f?r:p?r[e]:(r[e]||{})[s];for(u in f&&(n=e),n)(c=!d&&_&&void 0!==_[u])&&u in y||(h=c?_[u]:n[u],y[u]=f&&"function"!=typeof _[u]?n[u]:m&&c?a(h,r):v&&_[u]==h?function(t){function e(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)}return e[s]=t[s],e}(h):g&&"function"==typeof h?a(Function.call,h):h,g&&((y.virtual||(y.virtual={}))[u]=h,t&l.R&&b&&!b[u]&&o(b,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(21),i=n(65),a=n(45),o=Object.defineProperty;e.f=n(22)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),i)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(68),i=n(47);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(12)),i=o(n(29)),a=o(n(25));function o(t){return t&&t.__esModule?t:{default:t}}var s={createError:function(t,e){var n=1<arguments.length&&void 0!==e?e:{useCodePrefix:!0},o=this.constructor&&this.constructor.type||"",s=this.name||o,l=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,u=s+":"+(t&&t.code||"unknown"),c={description:"",level:a.default.Levels.FATAL,origin:s,scope:o,raw:{}},h=(0,r.default)({},c,t,{code:n.useCodePrefix?u:t.code});if(l&&h.level==a.default.Levels.FATAL&&!h.UI){var d={title:l.t("default_error_title"),message:l.t("default_error_message")};h.UI=d}return this.playerError?this.playerError.createError(h):i.default.warn(s,"PlayerError is not defined. Error: ",h),h}};e.default=s,t.exports=e.default},function(t,e,n){var r=n(32);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(27)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(12)),i=h(n(0)),a=h(n(1)),o=h(n(3)),s=h(n(2)),l=n(5),u=h(n(30)),c=h(n(20));function h(t){return t&&t.__esModule?t:{default:t}}var d,f=(d=u.default,(0,s.default)(p,d),(0,o.default)(p,[{key:"playerError",get:function(){return this.core.playerError}}]),p.prototype.bindEvents=function(){},p.prototype.getExternalInterface=function(){return{}},p.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},p.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},p.prototype.render=function(){return this},p);function p(t){(0,i.default)(this,p);var e=(0,a.default)(this,d.call(this,t.options));return e.core=t,e.enabled=!0,e.bindEvents(),e.render(),e}e.default=f,(0,r.default)(f.prototype,c.default),f.extend=function(t){return(0,l.extend)(f,t)},f.type="core",t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(80),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){var r=n(18),i=n(33);t.exports=n(22)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(67),i=n(51);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(162),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(0)),i=c(n(1)),a=c(n(3)),o=c(n(2)),s=c(n(6)),l=n(5),u=c(n(15));function c(t){return t&&t.__esModule?t:{default:t}}var h,d=/^(\S+)\s*(.*)$/,f=(h=u.default,(0,o.default)(p,h),(0,a.default)(p,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),p.prototype.$=function(t){return this.$el.find(t)},p.prototype.render=function(){return this},p.prototype.destroy=function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this},p.prototype.setElement=function(t,e){return this.$el&&this.undelegateEvents(),this.$el=s.default.zepto.isZ(t)?t:(0,s.default)(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},p.prototype.delegateEvents=function(t){if(!t&&!(t=this.events))return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(n&&n.constructor!==Function&&(n=this[t[e]]),n){var r=e.match(d),i=r[1],a=r[2];i+=".delegateEvents"+this.cid,""===a?this.$el.on(i,n.bind(this)):this.$el.on(i,a,n.bind(this))}}return this},p.prototype.undelegateEvents=function(){return this.$el.off(".delegateEvents"+this.cid),this},p.prototype._ensureElement=function(){if(this.el)this.setElement(this.el,!1);else{var t=s.default.extend({},this.attributes);this.id&&(t.id=this.id),this.className&&(t.class=this.className);var e=l.DomRecycler.create(this.tagName).attr(t);this.setElement(e,!1)}},p);function p(t){(0,r.default)(this,p);var e=(0,i.default)(this,h.call(this,t));return e.cid=(0,l.uniqueId)("c"),e._ensureElement(),e.delegateEvents(),e}e.default=f,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(0));function i(t){return t&&t.__esModule?t:{default:t}}function a(){(0,r.default)(this,a)}var o=new(i(n(4)).default);(e.default=a).on=function(t,e,n){o.on(t,e,n)},a.once=function(t,e,n){o.once(t,e,n)},a.off=function(t,e,n){o.off(t,e,n)},a.trigger=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];o.trigger.apply(o,[t].concat(n))},a.stopListening=function(t,e,n){o.stopListening(t,e,n)},t.exports=e.default},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports={}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(12)),i=h(n(0)),a=h(n(1)),o=h(n(3)),s=h(n(2)),l=n(5),u=h(n(15)),c=h(n(20));function h(t){return t&&t.__esModule?t:{default:t}}var d,f=(d=u.default,(0,s.default)(p,d),(0,o.default)(p,[{key:"playerError",get:function(){return this.core.playerError}}]),p.prototype.bindEvents=function(){},p.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},p.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},p.prototype.getExternalInterface=function(){return{}},p.prototype.destroy=function(){this.stopListening()},p);function p(t){(0,i.default)(this,p);var e=(0,a.default)(this,d.call(this,t.options));return e.core=t,e.enabled=!0,e.bindEvents(),e}e.default=f,(0,r.default)(f.prototype,c.default),f.extend=function(t){return(0,l.extend)(f,t)},f.type="core",t.exports=e.default},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(47);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";e.__esModule=!0;var r=o(n(110)),i=o(n(120)),a="function"==typeof i.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":typeof t};function o(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof i.default&&"symbol"===a(r.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof i.default&&t.constructor===i.default&&t!==i.default.prototype?"symbol":void 0===t?"undefined":a(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r};function o(){(0,a.default)(this,o),this.options={},this.playbackPlugins=[],this.currentSize={width:0,height:0}}o._players={},o.getInstance=function(t){return o._players[t]||(o._players[t]=new o)},e.default=o,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(184),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(12)),i=h(n(0)),a=h(n(1)),o=h(n(3)),s=h(n(2)),l=n(5),u=h(n(30)),c=h(n(20));function h(t){return t&&t.__esModule?t:{default:t}}var d,f=(d=u.default,(0,s.default)(p,d),(0,o.default)(p,[{key:"playerError",get:function(){return this.container.playerError}}]),p.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},p.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},p.prototype.bindEvents=function(){},p);function p(t){(0,i.default)(this,p);var e=(0,a.default)(this,d.call(this,t.options));return e.container=t,e.enabled=!0,e.bindEvents(),e}e.default=f,(0,r.default)(f.prototype,c.default),f.extend=function(t){return(0,l.extend)(f,t)},f.type="container",t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(12)),i=h(n(0)),a=h(n(1)),o=h(n(3)),s=h(n(2)),l=h(n(15)),u=n(5),c=h(n(20));function h(t){return t&&t.__esModule?t:{default:t}}var d,f=(d=l.default,(0,s.default)(p,d),(0,o.default)(p,[{key:"playerError",get:function(){return this.container.playerError}}]),p.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},p.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},p.prototype.bindEvents=function(){},p.prototype.destroy=function(){this.stopListening()},p);function p(t){(0,i.default)(this,p);var e=(0,a.default)(this,d.call(this,t.options));return e.container=t,e.enabled=!0,e.bindEvents(),e}e.default=f,(0,r.default)(f.prototype,c.default),f.extend=function(t){return(0,u.extend)(f,t)},f.type="container",t.exports=e.default},function(t,e,n){var r=n(104);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(32);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?r:n)(t)}},function(t,e,n){var r=n(50)("keys"),i=n(36);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(17),i="__core-js_shared__",a=r[i]||(r[i]={});t.exports=function(t){return a[t]||(a[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){t.exports={default:n(108),__esModule:!0}},function(t,e,n){"use strict";var r=n(112)(!0);n(71)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e){t.exports=!0},function(t,e,n){function r(){}var i=n(21),a=n(114),o=n(51),s=n(49)("IE_PROTO"),l="prototype",u=function(){var t,e=n(66)("iframe"),r=o.length;for(e.style.display="none",n(115).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u[l][o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(r[l]=i(t),n=new r,r[l]=null,n[s]=t):n=u(),void 0===e?n:a(n,e)}},function(t,e,n){var r=n(18).f,i=n(23),a=n(13)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},function(t,e,n){e.f=n(13)},function(t,e,n){var r=n(17),i=n(9),a=n(55),o=n(58),s=n(18).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(37),i=n(33),a=n(19),o=n(45),s=n(23),l=n(65),u=Object.getOwnPropertyDescriptor;e.f=n(22)?u:function(t,e){if(t=a(t),e=o(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(163),a=(r=i)&&r.__esModule?r:{default:r};e.default={Kibo:a.default},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(84),a=(r=i)&&r.__esModule?r:{default:r};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,a.default)(t)}},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&f())}function f(){if(!c){var t=s(d);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=n(189),t.exports=e.default},function(t,e,n){t.exports=!n(22)&&!n(27)((function(){return 7!=Object.defineProperty(n(66)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(32),i=n(17).document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(23),i=n(19),a=n(106)(!1),o=n(49)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),l=0,u=[];for(n in s)n!=o&&r(s,n)&&u.push(n);for(;e.length>l;)r(s,n=e[l++])&&(~a(u,n)||u.push(n));return u}},function(t,e,n){var r=n(46);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(48),i=Math.min;t.exports=function(t){return 0<t?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(16),i=n(9),a=n(27);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*a((function(){n(1)})),"Object",o)}},function(t,e,n){"use strict";function r(){return this}var i=n(55),a=n(16),o=n(72),s=n(26),l=n(23),u=n(34),c=n(113),h=n(57),d=n(116),f=n(13)("iterator"),p=!([].keys&&"next"in[].keys()),g="values";t.exports=function(t,e,n,m,v,y,b){function _(t){if(!p&&t in L)return L[t];switch(t){case"keys":case g:return function(){return new n(this,t)}}return function(){return new n(this,t)}}c(n,e,m);var E,A,T,w=e+" Iterator",S=v==g,x=!1,L=t.prototype,M=L[f]||L["@@iterator"]||v&&L[v],k=M||_(v),C=v?S?_("entries"):k:void 0,R="Array"==e&&L.entries||M;if(R&&(T=d(R.call(new t)))!==Object.prototype&&(h(T,w,!0),i||l(T,f)||s(T,f,r)),S&&M&&M.name!==g&&(x=!0,k=function(){return M.call(this)}),i&&!b||!p&&!x&&L[f]||s(L,f,k),u[e]=k,u[w]=r,v)if(E={values:S?k:_(g),keys:y?k:_("keys"),entries:C},b)for(A in E)A in L||o(L,A,E[A]);else a(a.P+a.F*(p||x),e,E);return E}},function(t,e,n){t.exports=n(26)},function(t,e,n){n(117);for(var r=n(17),i=n(26),a=n(34),o=n(13)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=s[l],c=r[u],h=c&&c.prototype;h&&!h[o]&&i(h,o,u),a[u]=a.Array}},function(t,e,n){var r=n(67),i=n(51).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){t.exports={default:n(131),__esModule:!0}},function(t,e,n){t.exports={default:n(137),__esModule:!0}},function(t,e,n){var r=n(147),i=n(13)("iterator"),a=n(34);t.exports=n(9).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||a[r(t)]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(166),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(6)),i=a(n(7));function a(t){return t&&t.__esModule?t:{default:t}}var o={getStyleFor:function(t,e){var n=1<arguments.length&&void 0!==e?e:{baseUrl:""};return(0,r.default)('<style class="clappr-style"></style>').html((0,i.default)(t.toString())(n))}};e.default=o,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(0)),i=c(n(1)),a=c(n(3)),o=c(n(2)),s=c(n(4)),l=c(n(15)),u=c(n(29));function c(t){return t&&t.__esModule?t:{default:t}}var h,d=(h=l.default,(0,o.default)(f,h),(0,a.default)(f,[{key:"name",get:function(){return"error"}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),f.prototype.createError=function(t){this.core?this.core.trigger(s.default.ERROR,t):u.default.warn(this.name,"Core is not set. Error: ",t)},f);function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];(0,r.default)(this,f);var n=(0,i.default)(this,h.call(this,t));return n.core=e,n}e.default=d,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(169),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(177),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){t.exports={default:n(178),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(188),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(194),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(195),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(198),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){t.exports={default:n(199),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(202),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(205),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(209),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(215),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(219),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(225),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(226),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e){t.exports="<%=baseUrl%>/a8c874b93b3d848f39a71260c57e3863.cur"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(230),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(239),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=j(n(101)),i=j(n(5)),a=j(n(4)),o=j(n(11)),s=j(n(43)),l=j(n(35)),u=j(n(24)),c=j(n(42)),h=j(n(15)),d=j(n(30)),f=j(n(14)),p=j(n(81)),g=j(n(78)),m=j(n(25)),v=j(n(83)),y=j(n(31)),b=j(n(40)),_=j(n(64)),E=j(n(85)),A=j(n(87)),T=j(n(88)),w=j(n(86)),S=j(n(41)),x=j(n(90)),L=j(n(91)),M=j(n(96)),k=j(n(95)),C=j(n(98)),R=j(n(99)),P=j(n(29)),O=j(n(94)),D=j(n(92)),I=j(n(93)),N=j(n(79)),F=j(n(61)),B=j(n(7)),U=j(n(6));function j(t){return t&&t.__esModule?t:{default:t}}e.default={Player:r.default,Mediator:y.default,Events:a.default,Browser:f.default,PlayerInfo:b.default,MediaControl:M.default,ContainerPlugin:s.default,UIContainerPlugin:c.default,CorePlugin:l.default,UICorePlugin:u.default,Playback:o.default,Container:p.default,Core:g.default,PlayerError:m.default,Loader:v.default,BaseObject:h.default,UIObject:d.default,Utils:i.default,BaseFlashPlayback:_.default,Flash:E.default,FlasHLS:A.default,HLS:T.default,HTML5Audio:w.default,HTML5Video:S.default,HTMLImg:x.default,NoOp:L.default,ClickToPausePlugin:k.default,DVRControls:C.default,Favicon:R.default,Log:P.default,Poster:O.default,SpinnerThreeBouncePlugin:D.default,WaterMarkPlugin:I.default,Styler:N.default,Vendor:F.default,version:"0.3.13",template:B.default,$:U.default},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=y(n(12)),i=y(n(53)),a=y(n(0)),o=y(n(1)),s=y(n(3)),l=y(n(2)),u=n(5),c=y(n(15)),h=y(n(4)),d=y(n(14)),f=y(n(164)),p=y(n(83)),g=y(n(40)),m=y(n(20)),v=y(n(6));function y(t){return t&&t.__esModule?t:{default:t}}var b,_=(0,u.currentScriptUrl)().replace(/\/[^/]+$/,""),E=(b=c.default,(0,l.default)(A,b),(0,s.default)(A,[{key:"loader",set:function(t){this._loader=t},get:function(){return this._loader||(this._loader=new p.default(this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:h.default.PLAYER_READY,onResize:h.default.PLAYER_RESIZE,onPlay:h.default.PLAYER_PLAY,onPause:h.default.PLAYER_PAUSE,onStop:h.default.PLAYER_STOP,onEnded:h.default.PLAYER_ENDED,onSeek:h.default.PLAYER_SEEK,onError:h.default.PLAYER_ERROR,onTimeUpdate:h.default.PLAYER_TIMEUPDATE,onVolumeUpdate:h.default.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:h.default.PLAYER_SUBTITLE_AVAILABLE}}}]),A.prototype.setParentId=function(t){var e=document.querySelector(t);return e&&this.attachTo(e),this},A.prototype.attachTo=function(t){return this.options.parentElement=t,this.core=this._coreFactory.create(),this._addEventListeners(),this},A.prototype._addEventListeners=function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,h.default.CORE_READY,this._onReady),this.listenTo(this.core,h.default.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,h.default.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,h.default.CORE_RESIZE,this._onResize),this},A.prototype._addContainerEventListeners=function(){var t=this.core.activeContainer;return t&&(this.listenTo(t,h.default.CONTAINER_PLAY,this._onPlay),this.listenTo(t,h.default.CONTAINER_PAUSE,this._onPause),this.listenTo(t,h.default.CONTAINER_STOP,this._onStop),this.listenTo(t,h.default.CONTAINER_ENDED,this._onEnded),this.listenTo(t,h.default.CONTAINER_SEEK,this._onSeek),this.listenTo(t,h.default.CONTAINER_ERROR,this._onError),this.listenTo(t,h.default.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(t,h.default.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(t,h.default.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this},A.prototype._registerOptionEventListeners=function(t,e){var n=this,r=0<arguments.length&&void 0!==t?t:{},a=1<arguments.length&&void 0!==e?e:{};return 0<(0,i.default)(r).length&&(0,i.default)(a).forEach((function(t){var e=n.eventsMapping[t];e&&n.off(e,a[t])})),(0,i.default)(r).forEach((function(t){var e=n.eventsMapping[t];if(e){var i=r[t];(i="function"==typeof i&&i)&&n.on(e,i)}})),this},A.prototype._containerChanged=function(){this.stopListening(),this._addEventListeners()},A.prototype._onReady=function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(h.default.PLAYER_READY)},A.prototype._onFullscreenChange=function(t){this.trigger(h.default.PLAYER_FULLSCREEN,t)},A.prototype._onVolumeUpdate=function(t){this.trigger(h.default.PLAYER_VOLUMEUPDATE,t)},A.prototype._onSubtitleAvailable=function(){this.trigger(h.default.PLAYER_SUBTITLE_AVAILABLE)},A.prototype._onResize=function(t){this.trigger(h.default.PLAYER_RESIZE,t)},A.prototype._onPlay=function(){this.trigger(h.default.PLAYER_PLAY)},A.prototype._onPause=function(){this.trigger(h.default.PLAYER_PAUSE)},A.prototype._onStop=function(){this.trigger(h.default.PLAYER_STOP,this.getCurrentTime())},A.prototype._onEnded=function(){this.trigger(h.default.PLAYER_ENDED)},A.prototype._onSeek=function(t){this.trigger(h.default.PLAYER_SEEK,t)},A.prototype._onTimeUpdate=function(t){this.trigger(h.default.PLAYER_TIMEUPDATE,t)},A.prototype._onError=function(t){this.trigger(h.default.PLAYER_ERROR,t)},A.prototype._normalizeSources=function(t){var e=t.sources||(void 0!==t.source?[t.source]:[]);return 0===e.length?[{source:"",mimeType:""}]:e},A.prototype.resize=function(t){return this.core.resize(t),this},A.prototype.load=function(t,e,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(t,e),this},A.prototype.destroy=function(){return this.stopListening(),this.core.destroy(),this},A.prototype.consent=function(){return this.core.getCurrentPlayback().consent(),this},A.prototype.play=function(){return this.core.activeContainer.play(),this},A.prototype.pause=function(){return this.core.activeContainer.pause(),this},A.prototype.stop=function(){return this.core.activeContainer.stop(),this},A.prototype.seek=function(t){return this.core.activeContainer.seek(t),this},A.prototype.seekPercentage=function(t){return this.core.activeContainer.seekPercentage(t),this},A.prototype.mute=function(){return this._mutedVolume=this.getVolume(),this.setVolume(0),this},A.prototype.unmute=function(){return this.setVolume("number"==typeof this._mutedVolume?this._mutedVolume:100),this._mutedVolume=null,this},A.prototype.isPlaying=function(){return this.core.activeContainer.isPlaying()},A.prototype.isDvrEnabled=function(){return this.core.activeContainer.isDvrEnabled()},A.prototype.isDvrInUse=function(){return this.core.activeContainer.isDvrInUse()},A.prototype.configure=function(t){var e=0<arguments.length&&void 0!==t?t:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this},A.prototype.getPlugin=function(t){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(e){return e.name===t}))[0]},A.prototype.getCurrentTime=function(){return this.core.activeContainer.getCurrentTime()},A.prototype.getStartTimeOffset=function(){return this.core.activeContainer.getStartTimeOffset()},A.prototype.getDuration=function(){return this.core.activeContainer.getDuration()},A);function A(t){(0,a.default)(this,A);var e=(0,o.default)(this,b.call(this,t)),n={playerId:(0,u.uniqueId)(""),persistConfig:!0,width:640,height:360,baseUrl:_,allowUserInteraction:d.default.isMobile,playback:{recycleVideo:!0}};return e._options=v.default.extend(n,t),e.options.sources=e._normalizeSources(t),e.options.chromeless||(e.options.allowUserInteraction=!0),e.options.allowUserInteraction||(e.options.disableKeyboardShortcuts=!0),e._registerOptionEventListeners(e.options.events),e._coreFactory=new f.default(e),e.playerInfo=g.default.getInstance(e.options.playerId),e.playerInfo.currentSize={width:t.width,height:t.height},e.playerInfo.options=e.options,e.options.parentId?e.setParentId(e.options.parentId):e.options.parent&&e.attachTo(e.options.parent),e}e.default=E,(0,r.default)(E.prototype,m.default),t.exports=e.default},function(t,e,n){n(103),t.exports=n(9).Object.assign},function(t,e,n){var r=n(16);r(r.S+r.F,"Object",{assign:n(105)})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(28),i=n(52),a=n(37),o=n(38),s=n(68),l=Object.assign;t.exports=!l||n(27)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=r}))?function(t,e){for(var n=o(t),l=arguments.length,u=1,c=i.f,h=a.f;u<l;)for(var d,f=s(arguments[u++]),p=c?r(f).concat(c(f)):r(f),g=p.length,m=0;m<g;)h.call(f,d=p[m++])&&(n[d]=f[d]);return n}:l},function(t,e,n){var r=n(19),i=n(69),a=n(107);t.exports=function(t){return function(e,n,o){var s,l=r(e),u=i(l.length),c=a(o,u);if(t&&n!=n){for(;c<u;)if((s=l[c++])!=s)return!0}else for(;c<u;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},function(t,e,n){var r=n(48),i=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):a(t,e)}},function(t,e,n){n(109),t.exports=n(9).Object.keys},function(t,e,n){var r=n(38),i=n(28);n(70)("keys",(function(){return function(t){return i(r(t))}}))},function(t,e,n){t.exports={default:n(111),__esModule:!0}},function(t,e,n){n(54),n(73),t.exports=n(58).f("iterator")},function(t,e,n){var r=n(48),i=n(47);t.exports=function(t){return function(e,n){var a,o,s=String(i(e)),l=r(n),u=s.length;return l<0||u<=l?t?"":void 0:(a=s.charCodeAt(l))<55296||56319<a||l+1===u||(o=s.charCodeAt(l+1))<56320||57343<o?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(56),i=n(33),a=n(57),o={};n(26)(o,n(13)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(o,{next:i(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var r=n(18),i=n(21),a=n(28);t.exports=n(22)?Object.defineProperties:function(t,e){i(t);for(var n,o=a(e),s=o.length,l=0;l<s;)r.f(t,n=o[l++],e[n]);return t}},function(t,e,n){t.exports=n(17).document&&document.documentElement},function(t,e,n){var r=n(23),i=n(38),a=n(49)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e,n){"use strict";var r=n(118),i=n(119),a=n(34),o=n(19);t.exports=n(71)(Array,"Array",(function(t,e){this._t=o(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(121),__esModule:!0}},function(t,e,n){n(122),n(128),n(129),n(130),t.exports=n(9).Symbol},function(t,e,n){"use strict";function r(t){var e=H[t]=k(F[j]);return e._k=t,e}function i(t,e){S(t);for(var n,r=T(e=x(e)),i=0,a=r.length;i<a;)Q(t,n=r[i++],e[n]);return t}function a(t){var e=z.call(this,t=L(t,!0));return!(this===W&&c(H,t)&&!c($,t))&&(!(e||!c(this,t)||!c(H,t)||c(this,V)&&this[V][t])||e)}function o(t,e){if(t=x(t),e=L(e,!0),t!==W||!c(H,e)||c($,e)){var n=D(t,e);return!n||!c(H,e)||c(t,V)&&t[V][e]||(n.enumerable=!0),n}}function s(t){for(var e,n=N(x(t)),r=[],i=0;n.length>i;)c(H,e=n[i++])||e==V||e==p||r.push(e);return r}function l(t){for(var e,n=t===W,r=N(n?$:x(t)),i=[],a=0;r.length>a;)!c(H,e=r[a++])||n&&!c(W,e)||i.push(H[e]);return i}var u=n(17),c=n(23),h=n(22),d=n(16),f=n(72),p=n(123).KEY,g=n(27),m=n(50),v=n(57),y=n(36),b=n(13),_=n(58),E=n(59),A=n(124),T=n(125),w=n(126),S=n(21),x=n(19),L=n(45),M=n(33),k=n(56),C=n(127),R=n(60),P=n(18),O=n(28),D=R.f,I=P.f,N=C.f,F=u.Symbol,B=u.JSON,U=B&&B.stringify,j="prototype",V=b("_hidden"),G=b("toPrimitive"),z={}.propertyIsEnumerable,Y=m("symbol-registry"),H=m("symbols"),$=m("op-symbols"),W=Object[j],K="function"==typeof F,X=u.QObject,q=!X||!X[j]||!X[j].findChild,Z=h&&g((function(){return 7!=k(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=D(W,e);r&&delete W[e],I(t,e,n),r&&t!==W&&I(W,e,r)}:I,J=K&&"symbol"==typeof F.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof F},Q=function(t,e,n){return t===W&&Q($,e,n),S(t),e=L(e,!0),S(n),c(H,e)?(n.enumerable?(c(t,V)&&t[V][e]&&(t[V][e]=!1),n=k(n,{enumerable:M(0,!1)})):(c(t,V)||I(t,V,M(1,{})),t[V][e]=!0),Z(t,e,n)):I(t,e,n)};K||(f((F=function(t){if(this instanceof F)throw TypeError("Symbol is not a constructor!");var e=y(0<arguments.length?t:void 0),n=function(t){this===W&&n.call($,t),c(this,V)&&c(this[V],e)&&(this[V][e]=!1),Z(this,e,M(1,t))};return h&&q&&Z(W,e,{configurable:!0,set:n}),r(e)})[j],"toString",(function(){return this._k})),R.f=o,P.f=Q,n(74).f=C.f=s,n(37).f=a,n(52).f=l,h&&!n(55)&&f(W,"propertyIsEnumerable",a,!0),_.f=function(t){return r(b(t))}),d(d.G+d.W+d.F*!K,{Symbol:F});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)b(tt[et++]);for(tt=O(b.store),et=0;tt.length>et;)E(tt[et++]);d(d.S+d.F*!K,"Symbol",{for:function(t){return c(Y,t+="")?Y[t]:Y[t]=F(t)},keyFor:function(t){if(J(t))return A(Y,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){q=!0},useSimple:function(){q=!1}}),d(d.S+d.F*!K,"Object",{create:function(t,e){return void 0===e?k(t):i(k(t),e)},defineProperty:Q,defineProperties:i,getOwnPropertyDescriptor:o,getOwnPropertyNames:s,getOwnPropertySymbols:l}),B&&d(d.S+d.F*(!K||g((function(){var t=F();return"[null]"!=U([t])||"{}"!=U({a:t})||"{}"!=U(Object(t))}))),"JSON",{stringify:function(t){if(void 0!==t&&!J(t)){for(var e,n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);return"function"==typeof(e=r[1])&&(n=e),!n&&w(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!J(e))return e}),r[1]=e,U.apply(B,r)}}}),F[j][G]||n(26)(F[j],G,F[j].valueOf),v(F,"Symbol"),v(Math,"Math",!0),v(u.JSON,"JSON",!0)},function(t,e,n){function r(t){s(t,i,{value:{i:"O"+ ++l,w:{}}})}var i=n(36)("meta"),a=n(32),o=n(23),s=n(18).f,l=0,u=Object.isExtensible||function(){return!0},c=!n(27)((function(){return u(Object.preventExtensions({}))})),h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";r(t)}return t[i].i},getWeak:function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;r(t)}return t[i].w},onFreeze:function(t){return c&&h.NEED&&u(t)&&!o(t,i)&&r(t),t}}},function(t,e,n){var r=n(28),i=n(19);t.exports=function(t,e){for(var n,a=i(t),o=r(a),s=o.length,l=0;l<s;)if(a[n=o[l++]]===e)return n}},function(t,e,n){var r=n(28),i=n(52),a=n(37);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var o,s=n(t),l=a.f,u=0;s.length>u;)l.call(t,o=s[u++])&&e.push(o);return e}},function(t,e,n){var r=n(46);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(19),i=n(74).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?function(t){try{return i(t)}catch(t){return o.slice()}}(t):i(r(t))}},function(t,e){},function(t,e,n){n(59)("asyncIterator")},function(t,e,n){n(59)("observable")},function(t,e,n){n(132);var r=n(9).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(16);r(r.S+r.F*!n(22),"Object",{defineProperty:n(18).f})},function(t,e,n){t.exports={default:n(134),__esModule:!0}},function(t,e,n){n(135),t.exports=n(9).Object.setPrototypeOf},function(t,e,n){var r=n(16);r(r.S,"Object",{setPrototypeOf:n(136).set})},function(t,e,n){function r(t,e){if(a(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var i=n(32),a=n(21);t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(44)(Function.call,n(60).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:r}},function(t,e,n){n(138);var r=n(9).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(16);r(r.S,"Object",{create:n(56)})},function(t,e,n){t.exports={default:n(140),__esModule:!0}},function(t,e,n){n(141);var r=n(9).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var r=n(19),i=n(60).f;n(70)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(r(t),e)}}))},function(t,e,n){"use strict";Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=e,a=0;a<r;){var o=n[a];if(t.call(i,o,a,n))return o;a++}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDevice=e.getViewportSize=e.getOsData=e.getBrowserData=e.getBrowserInfo=void 0;var r=s(n(144)),i=s(n(6)),a=s(n(148)),o=s(n(149));function s(t){return t&&t.__esModule?t:{default:t}}var l={},u=e.getBrowserInfo=function(t){var e=t.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],n=void 0;if(/trident/i.test(e[1]))return n=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:parseInt(n[1]||"")};if("Chrome"===e[1]){if(null!=(n=t.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(n[1])};if(null!=(n=t.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(n[1])}}else/android/i.test(t)&&(n=t.match(/version\/(\d+)/i))&&(e.splice(1,1,"Android WebView"),e.splice(2,1,n[1]));return{name:(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(e[1])}},c=e.getBrowserData=function(){var t={},e=l.userAgent.toLowerCase(),n=!0,i=!1,o=void 0;try{for(var s,u=(0,r.default)(a.default);!(n=(s=u.next()).done);n=!0){var c=s.value,d=new RegExp(c.identifier.toLowerCase()).exec(e);if(null!=d&&d[1]){if(t.name=c.name,t.group=c.group,c.versionIdentifier){var f=new RegExp(c.versionIdentifier.toLowerCase()).exec(e);null!=f&&f[1]&&h(f[1],t)}else h(d[1],t);break}}}catch(t){i=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return t},h=function(t,e){var n=t.split(".",2);e.fullVersion=t,n[0]&&(e.majorVersion=parseInt(n[0])),n[1]&&(e.minorVersion=parseInt(n[1]))},d=e.getOsData=function(){var t={},e=l.userAgent.toLowerCase(),n=!0,i=!1,a=void 0;try{for(var s,u=(0,r.default)(o.default);!(n=(s=u.next()).done);n=!0){var c=s.value,h=new RegExp(c.identifier.toLowerCase()).exec(e);if(null!=h){if(t.name=c.name,t.group=c.group,c.version)f(c.version,c.versionSeparator?c.versionSeparator:".",t);else if(h[1])f(h[1],c.versionSeparator?c.versionSeparator:".",t);else if(c.versionIdentifier){var d=new RegExp(c.versionIdentifier.toLowerCase()).exec(e);null!=d&&d[1]&&f(d[1],c.versionSeparator?c.versionSeparator:".",t)}break}}}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return t},f=function(t,e,n){var r="["==e.substr(0,1)?new RegExp(e,"g"):e,i=t.split(r,2);"."!=e&&(t=t.replace(new RegExp(e,"g"),".")),n.fullVersion=t,i&&i[0]&&(n.majorVersion=parseInt(i[0])),i&&i[1]&&(n.minorVersion=parseInt(i[1]))},p=e.getViewportSize=function(){var t={};return t.width=(0,i.default)(window).width(),t.height=(0,i.default)(window).height(),t},g=e.getDevice=function(t){var e=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(t);return e&&(e[1]||e[2])||""},m=u(navigator.userAgent);l.isEdge=/edge/i.test(navigator.userAgent),l.isChrome=/chrome|CriOS/i.test(navigator.userAgent)&&!l.isEdge,l.isSafari=/safari/i.test(navigator.userAgent)&&!l.isChrome&&!l.isEdge,l.isFirefox=/firefox/i.test(navigator.userAgent),l.isLegacyIE=!!window.ActiveXObject,l.isIE=l.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),l.isIE11=/trident.*rv:11/i.test(navigator.userAgent),l.isChromecast=l.isChrome&&/CrKey/i.test(navigator.userAgent),l.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),l.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),l.isAndroid=/Android/i.test(navigator.userAgent),l.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),l.isWin8App=/MSAppHost/i.test(navigator.userAgent),l.isWiiU=/WiiU/i.test(navigator.userAgent),l.isPS4=/PlayStation 4/i.test(navigator.userAgent),l.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(t){return!1}}(),l.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),l.name=m.name,l.version=m.version,l.userAgent=navigator.userAgent,l.data=c(),l.os=d(),l.viewport=p(),l.device=g(l.userAgent),void 0!==window.orientation&&function(){switch(window.orientation){case-90:case 90:l.viewport.orientation="landscape";break;default:l.viewport.orientation="portrait"}}(),e.default=l},function(t,e,n){t.exports={default:n(145),__esModule:!0}},function(t,e,n){n(73),n(54),t.exports=n(146)},function(t,e,n){var r=n(21),i=n(77);t.exports=n(9).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(46),i=n(13)("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:a?r(e):"Object"==(o=r(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.mp4="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=";e.default={mp4:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.volumeMute=e.volume=e.stop=e.reload=e.play=e.pause=e.hd=e.fullscreen=e.exitFullscreen=e.cc=void 0;var r=f(n(152)),i=f(n(153)),a=f(n(154)),o=f(n(155)),s=f(n(156)),l=f(n(157)),u=f(n(158)),c=f(n(159)),h=f(n(160)),d=f(n(161));function f(t){return t&&t.__esModule?t:{default:t}}e.cc=h.default,e.exitFullscreen=u.default,e.fullscreen=l.default,e.hd=c.default,e.pause=i.default,e.play=r.default,e.reload=d.default,e.stop=a.default,e.volume=o.default,e.volumeMute=s.default,e.default={cc:h.default,exitFullscreen:u.default,fullscreen:l.default,hd:c.default,pause:i.default,play:r.default,reload:d.default,stop:a.default,volume:o.default,volumeMute:s.default}},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"></path></svg>'},function(t,e){t.exports='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49 41.8" style="enable-background:new 0 0 49 41.8;" xml:space="preserve"><path d="M47.1,0H3.2C1.6,0,0,1.2,0,2.8v31.5C0,35.9,1.6,37,3.2,37h11.9l3.2,1.9l4.7,2.7c0.9,0.5,2-0.1,2-1.1V37h22.1 c1.6,0,1.9-1.1,1.9-2.7V2.8C49,1.2,48.7,0,47.1,0z M7.2,18.6c0-4.8,3.5-9.3,9.9-9.3c4.8,0,7.1,2.7,7.1,2.7l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2c0,0-2.7,2.9-7.6,2.9 C10.8,27.9,7.2,23.5,7.2,18.6z M36.9,27.9c-6.4,0-9.9-4.4-9.9-9.3c0-4.8,3.5-9.3,9.9-9.3C41.7,9.3,44,12,44,12l-2.5,4 c0,0-1.7-1.7-4.2-1.7c-2.8,0-4.3,2.1-4.3,4.3c0,2.1,1.5,4.4,4.5,4.4c2.5,0,4.9-2.1,4.9-2.1l2.2,4.2C44.5,25,41.9,27.9,36.9,27.9z"></path></svg>'},function(t,e){t.exports='<svg fill="#FFFFFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(0),a=(r=i)&&r.__esModule?r:{default:r},o=n(61),s="font-weight: bold; font-size: 13px;",l="color: #ff8000;"+s,u="color: #ff0000;"+s,c=["color: #0000ff;font-weight: bold; font-size: 13px;","color: #006600;font-weight: bold; font-size: 13px;",l,u,u],h=["debug","info","warn","error","disabled"],d=(f.prototype.debug=function(t){this.log(t,0,Array.prototype.slice.call(arguments,1))},f.prototype.info=function(t){this.log(t,1,Array.prototype.slice.call(arguments,1))},f.prototype.warn=function(t){this.log(t,2,Array.prototype.slice.call(arguments,1))},f.prototype.error=function(t){this.log(t,3,Array.prototype.slice.call(arguments,1))},f.prototype.onOff=function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+h[this.level],l)},f.prototype.level=function(t){this.level=t},f.prototype.log=function(t,e,n){if(!(0<=this.BLACKLIST.indexOf(n[0])||e<this.level)){n||(n=t,t=null);var r=c[e],i="";t&&(i="["+t+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+h[e]+"]"+i,r].concat(n))}},f);function f(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3;(0,a.default)(this,f),this.kibo=new o.Kibo,this.kibo.down(["ctrl shift d"],(function(){return t.onOff()})),this.BLACKLIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=e,this.offLevel=n}(e.default=d).LEVEL_DEBUG=0,d.LEVEL_INFO=1,d.LEVEL_WARN=2,d.LEVEL_ERROR=3,d.getInstance=function(){return void 0===this._instance&&(this._instance=new this,this._instance.previousLevel=this._instance.level,this._instance.level=this._instance.offLevel),this._instance},d.setLevel=function(t){this.getInstance().level=t},d.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},d.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},d.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},d.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},t.exports=e.default},function(t,e,n){"use strict";function r(t){this.element=t||window.document,this.initialize()}Object.defineProperty(e,"__esModule",{value:!0}),r.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},r.KEY_CODES_BY_NAME={},function(){for(var t in r.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(r.KEY_NAMES_BY_CODE,t)&&(r.KEY_CODES_BY_NAME[r.KEY_NAMES_BY_CODE[t]]=+t)}(),r.MODIFIERS=["shift","ctrl","alt"],r.registerEvent=document.addEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:document.attachEvent?function(t,e,n){t.attachEvent("on"+e,n)}:void 0,r.unregisterEvent=document.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1)}:document.detachEvent?function(t,e,n){t.detachEvent("on"+e,n)}:void 0,r.stringContains=function(t,e){return-1!==t.indexOf(e)},r.neatString=function(t){return t.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},r.capitalize=function(t){return t.toLowerCase().replace(/^./,(function(t){return t.toUpperCase()}))},r.isString=function(t){return r.stringContains(Object.prototype.toString.call(t),"String")},r.arrayIncludes=Array.prototype.indexOf?function(t,e){return-1!==t.indexOf(e)}:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},r.extractModifiers=function(t){var e,n;for(e=[],n=0;n<r.MODIFIERS.length;n++)r.stringContains(t,r.MODIFIERS[n])&&e.push(r.MODIFIERS[n]);return e},r.extractKey=function(t){var e,n;for(e=r.neatString(t).split(" "),n=0;n<e.length;n++)if(!r.arrayIncludes(r.MODIFIERS,e[n]))return e[n]},r.modifiersAndKey=function(t){var e,n;return r.stringContains(t,"any")?r.neatString(t).split(" ").slice(0,2).join(" "):(e=r.extractModifiers(t),(n=r.extractKey(t))&&!r.arrayIncludes(r.MODIFIERS,n)&&e.push(n),e.join(" "))},r.keyName=function(t){return r.KEY_NAMES_BY_CODE[t+""]},r.keyCode=function(t){return+r.KEY_CODES_BY_NAME[t]},r.prototype.initialize=function(){var t,e=this;for(this.lastKeyCode=-1,this.lastModifiers={},t=0;t<r.MODIFIERS.length;t++)this.lastModifiers[r.MODIFIERS[t]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),r.registerEvent(this.element,"keydown",this.downHandler),r.registerEvent(this.element,"keyup",this.upHandler),r.registerEvent(window,"unload",(function t(){r.unregisterEvent(e.element,"keydown",e.downHandler),r.unregisterEvent(e.element,"keyup",e.upHandler),r.unregisterEvent(window,"unload",t)}))},r.prototype.handler=function(t){var e=this;return function(n){var i,a,o;for(n=n||window.event,e.lastKeyCode=n.keyCode,i=0;i<r.MODIFIERS.length;i++)e.lastModifiers[r.MODIFIERS[i]]=n[r.MODIFIERS[i]+"Key"];for(r.arrayIncludes(r.MODIFIERS,r.keyName(e.lastKeyCode))&&(e.lastModifiers[r.keyName(e.lastKeyCode)]=!0),a=e["keys"+r.capitalize(t)],i=0;i<a.any.length;i++)!1===a.any[i](n)&&n.preventDefault&&n.preventDefault();if(a[o=e.lastModifiersAndKey()])for(i=0;i<a[o].length;i++)!1===a[o][i](n)&&n.preventDefault&&n.preventDefault()}},r.prototype.registerKeys=function(t,e,n){var i,a,o=this["keys"+r.capitalize(t)];for(r.isString(e)&&(e=[e]),i=0;i<e.length;i++)a=e[i],o[a=r.modifiersAndKey(a+"")]?o[a].push(n):o[a]=[n];return this},r.prototype.unregisterKeys=function(t,e,n){var i,a,o,s=this["keys"+r.capitalize(t)];for(r.isString(e)&&(e=[e]),i=0;i<e.length;i++)if(o=e[i],o=r.modifiersAndKey(o+""),null===n)delete s[o];else if(s[o])for(a=0;a<s[o].length;a++)if(String(s[o][a])===String(n)){s[o].splice(a,1);break}return this},r.prototype.off=function(t){return this.unregisterKeys("down",t,null)},r.prototype.delegate=function(t,e,n){return null!==n||void 0!==n?this.registerKeys(t,e,n):this.unregisterKeys(t,e,n)},r.prototype.down=function(t,e){return this.delegate("down",t,e)},r.prototype.up=function(t,e){return this.delegate("up",t,e)},r.prototype.lastKey=function(t){return t?this.lastModifiers[t]:r.keyName(this.lastKeyCode)},r.prototype.lastModifiersAndKey=function(){var t,e;for(t=[],e=0;e<r.MODIFIERS.length;e++)this.lastKey(r.MODIFIERS[e])&&t.push(r.MODIFIERS[e]);return r.arrayIncludes(t,this.lastKey())||t.push(this.lastKey()),t.join(" ")},e.default=r,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(165),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(0)),i=u(n(1)),a=u(n(3)),o=u(n(2)),s=u(n(15)),l=u(n(78));function u(t){return t&&t.__esModule?t:{default:t}}var c,h=(c=s.default,(0,o.default)(d,c),(0,a.default)(d,[{key:"loader",get:function(){return this.player.loader}}]),d.prototype.create=function(){return this.options.loader=this.loader,this.core=new l.default(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core},d.prototype.addCorePlugins=function(){var t=this;return this.loader.corePlugins.forEach((function(e){var n=new e(t.core);t.core.addPlugin(n),t.setupExternalInterface(n)})),this.core},d.prototype.setupExternalInterface=function(t){var e=t.getExternalInterface();for(var n in e)this.player[n]=e[n].bind(t),this.core[n]=e[n].bind(t)},d);function d(t){(0,r.default)(this,d);var e=(0,i.default)(this,c.call(this));return e.player=t,e._options=t.options,e}e.default=h,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=E(n(12)),i=E(n(0)),a=E(n(1)),o=E(n(3)),s=E(n(2)),l=n(5),u=E(n(79)),c=E(n(4)),h=E(n(30)),d=E(n(24)),f=E(n(14)),p=E(n(167)),g=E(n(31)),m=E(n(40)),v=E(n(25)),y=E(n(20)),b=E(n(6));n(173);var _=E(n(175));function E(t){return t&&t.__esModule?t:{default:t}}var A,T=void 0,w=(A=h.default,(0,s.default)(S,A),(0,o.default)(S,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(t){return t}}}},{key:"mediaControl",get:function(){return this.getPlugin("media_control")||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new d.default(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(t){this._activeContainer=t,this.trigger(c.default.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}}]),S.prototype.configureDomRecycler=function(){var t=this.options&&this.options.playback&&this.options.playback.recycleVideo;l.DomRecycler.configure({recycleVideo:t})},S.prototype.createContainers=function(t){this.defer=b.default.Deferred(),this.defer.promise(this),this.containerFactory=new p.default(t,t.loader,this.i18n,this.playerError),this.prepareContainers()},S.prototype.prepareContainers=function(){var t=this;this.containerFactory.createContainers().then((function(e){return t.setupContainers(e)})).then((function(e){return t.resolveOnContainersReady(e)}))},S.prototype.updateSize=function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()},S.prototype.setFullscreen=function(){f.default.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.playerInfo.currentSize={width:(0,b.default)(window).width(),height:(0,b.default)(window).height()})},S.prototype.setPlayerSize=function(){this.$el.removeClass("fullscreen"),this.playerInfo.currentSize=this.playerInfo.previousSize,this.playerInfo.previousSize={width:(0,b.default)(window).width(),height:(0,b.default)(window).height()},this.resize(this.playerInfo.currentSize)},S.prototype.resize=function(t){(0,l.isNumber)(t.height)||(0,l.isNumber)(t.width)?(this.el.style.height=t.height+"px",this.el.style.width=t.width+"px"):(this.el.style.height=""+t.height,this.el.style.width=""+t.width),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.options.width=t.width,this.options.height=t.height,this.playerInfo.currentSize=t,this.triggerResize(this.playerInfo.currentSize)},S.prototype.enableResizeObserver=function(){var t=this;this.resizeObserverInterval=setInterval((function(){t.triggerResize({width:t.el.clientWidth,height:t.el.clientHeight})}),500)},S.prototype.triggerResize=function(t){!this.firstResize&&this.oldHeight===t.height&&this.oldWidth===t.width||(this.oldHeight=t.height,this.oldWidth=t.width,this.playerInfo.computedSize=t,this.firstResize=!1,g.default.trigger(this.options.playerId+":"+c.default.PLAYER_RESIZE,t),this.trigger(c.default.CORE_RESIZE,t))},S.prototype.disableResizeObserver=function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)},S.prototype.resolveOnContainersReady=function(t){var e=this;b.default.when.apply(b.default,t).done((function(){e.defer.resolve(e),e.ready=!0,e.trigger(c.default.CORE_READY)}))},S.prototype.addPlugin=function(t){this.plugins.push(t)},S.prototype.hasPlugin=function(t){return!!this.getPlugin(t)},S.prototype.getPlugin=function(t){return this.plugins.filter((function(e){return e.name===t}))[0]},S.prototype.load=function(t,e){this.options.mimeType=e,t=t&&t.constructor===Array?t:[t],this.options.sources=t,this.containers.forEach((function(t){return t.destroy()})),this.containerFactory.options=b.default.extend(this.options,{sources:t}),this.prepareContainers()},S.prototype.destroy=function(){this.disableResizeObserver(),this.containers.forEach((function(t){return t.destroy()})),this.plugins.forEach((function(t){return t.destroy()})),this.$el.remove(),(0,b.default)(document).unbind("fullscreenchange",this._boundFullscreenHandler),(0,b.default)(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),(0,b.default)(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()},S.prototype.handleFullscreenChange=function(){this.trigger(c.default.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()},S.prototype.handleWindowResize=function(t){var e=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==e&&(this._screenOrientation=e,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(c.default.CORE_SCREEN_ORIENTATION_CHANGED,{event:t,orientation:this._screenOrientation}))},S.prototype.removeContainer=function(t){this.stopListening(t),this.containers=this.containers.filter((function(e){return e!==t}))},S.prototype.setupContainer=function(t){this.listenTo(t,c.default.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(t)},S.prototype.setupContainers=function(t){return t.forEach(this.setupContainer.bind(this)),this.trigger(c.default.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=t[0],this.render(),this.appendToParent(),this.containers},S.prototype.renderContainers=function(){var t=this;this.containers.forEach((function(e){return t.el.appendChild(e.render().el)}))},S.prototype.createContainer=function(t,e){var n=this.containerFactory.createContainer(t,e);return this.setupContainer(n),this.el.appendChild(n.render().el),n},S.prototype.getCurrentContainer=function(){return this.activeContainer},S.prototype.getCurrentPlayback=function(){return this.activePlayback},S.prototype.getPlaybackType=function(){return this.activeContainer&&this.activeContainer.getPlaybackType()},S.prototype.isFullscreen=function(){var t=f.default.isiOS&&this.activeContainer&&this.activeContainer.el||this.el;return l.Fullscreen.fullscreenElement()===t},S.prototype.toggleFullscreen=function(){this.isFullscreen()?(l.Fullscreen.cancelFullscreen(),f.default.isiOS||this.$el.removeClass("fullscreen nocursor")):(l.Fullscreen.requestFullscreen(f.default.isiOS?this.activeContainer.el:this.el),f.default.isiOS||this.$el.addClass("fullscreen"))},S.prototype.onMouseMove=function(t){this.trigger(c.default.CORE_MOUSE_MOVE,t)},S.prototype.onMouseLeave=function(t){this.trigger(c.default.CORE_MOUSE_LEAVE,t)},S.prototype.configure=function(t){var e=this;this._options=b.default.extend(this._options,t),this.configureDomRecycler();var n=t.source||t.sources;n&&this.load(n,t.mimeType||this.options.mimeType),this.trigger(c.default.CORE_OPTIONS_CHANGE,t),this.containers.forEach((function(t){return t.configure(e.options)}))},S.prototype.appendToParent=function(){this.$el.parent()&&this.$el.parent().length||this.$el.appendTo(this.options.parentElement)},S.prototype.render=function(){T||(T=u.default.getStyleFor(_.default,{baseUrl:this.options.baseUrl})),(0,b.default)("head").append(T),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var t={width:this.options.width,height:this.options.height};return this.playerInfo.previousSize=this.playerInfo.currentSize=this.playerInfo.computedSize=t,this.updateSize(),this.previousSize={width:this.$el.width(),height:this.$el.height()},this.enableResizeObserver(),this},S);function S(t){(0,i.default)(this,S);var e=(0,a.default)(this,A.call(this,t));return e.playerError=new v.default(t,e),e.configureDomRecycler(),e.playerInfo=m.default.getInstance(t.playerId),e.firstResize=!0,e.plugins=[],e.containers=[],e._boundFullscreenHandler=function(){return e.handleFullscreenChange()},(0,b.default)(document).bind("fullscreenchange",e._boundFullscreenHandler),(0,b.default)(document).bind("MSFullscreenChange",e._boundFullscreenHandler),(0,b.default)(document).bind("mozfullscreenchange",e._boundFullscreenHandler),f.default.isMobile&&(0,b.default)(window).bind("resize",(function(t){e.handleWindowResize(t)})),e}e.default=w,(0,r.default)(w.prototype,y.default),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(168),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n(39)),i=d(n(0)),a=d(n(1)),o=d(n(3)),s=d(n(2)),l=d(n(15)),u=d(n(4)),c=d(n(81)),h=d(n(6));function d(t){return t&&t.__esModule?t:{default:t}}var f,p=(f=l.default,(0,s.default)(g,f),(0,o.default)(g,[{key:"options",get:function(){return this._options},set:function(t){this._options=t}}]),g.prototype.createContainers=function(){var t=this;return h.default.Deferred((function(e){e.resolve(t.options.sources.map((function(e){return t.createContainer(e)})))}))},g.prototype.findPlaybackPlugin=function(t,e){return this.loader.playbackPlugins.filter((function(n){return n.canPlay(t,e)}))[0]},g.prototype.createContainer=function(t){var e=null,n=this.options.mimeType;"object"===(void 0===t?"undefined":(0,r.default)(t))?(e=t.source.toString(),t.mimeType&&(n=t.mimeType)):e=t.toString(),e.match(/^\/\//)&&(e=window.location.protocol+e);var i=h.default.extend({},this.options,{src:e,mimeType:n}),a=new(this.findPlaybackPlugin(e,n))(i,this._i18n,this.playerError);i=h.default.extend({},i,{playback:a});var o=new c.default(i,this._i18n,this.playerError),s=h.default.Deferred();return s.promise(o),this.addContainerPlugins(o),this.listenToOnce(o,u.default.CONTAINER_READY,(function(){return s.resolve(o)})),o},g.prototype.addContainerPlugins=function(t){this.loader.containerPlugins.forEach((function(e){t.addPlugin(new e(t))}))},g);function g(t,e,n,r){(0,i.default)(this,g);var o=(0,a.default)(this,f.call(this,t));return o._i18n=n,o.loader=e,o.playerError=r,o}e.default=p,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(12)),i=f(n(0)),a=f(n(1)),o=f(n(3)),s=f(n(2)),l=f(n(4)),u=f(n(30)),c=f(n(20)),h=n(5);n(170);var d=f(n(6));function f(t){return t&&t.__esModule?t:{default:t}}var p,g=(p=u.default,(0,s.default)(m,p),(0,o.default)(m,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(t){this.playback.closedCaptionsTrackId=t}}]),m.prototype.bindEvents=function(){this.listenTo(this.playback,l.default.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,l.default.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,l.default.PLAYBACK_READY,this.ready),this.listenTo(this.playback,l.default.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,l.default.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,l.default.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,l.default.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,l.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,l.default.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,l.default.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,l.default.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,l.default.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,l.default.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,l.default.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,l.default.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,l.default.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,l.default.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,l.default.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,l.default.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,l.default.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,l.default.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged)},m.prototype.subtitleAvailable=function(){this.trigger(l.default.CONTAINER_SUBTITLE_AVAILABLE)},m.prototype.subtitleChanged=function(t){this.trigger(l.default.CONTAINER_SUBTITLE_CHANGED,t)},m.prototype.playbackStateChanged=function(t){this.trigger(l.default.CONTAINER_PLAYBACKSTATE,t)},m.prototype.playbackDvrStateChanged=function(t){this.settings=this.playback.settings,this.dvrInUse=t,this.trigger(l.default.CONTAINER_PLAYBACKDVRSTATECHANGED,t)},m.prototype.updateBitrate=function(t){this.trigger(l.default.CONTAINER_BITRATE,t)},m.prototype.statsReport=function(t){this.trigger(l.default.CONTAINER_STATS_REPORT,t)},m.prototype.getPlaybackType=function(){return this.playback.getPlaybackType()},m.prototype.isDvrEnabled=function(){return!!this.playback.dvrEnabled},m.prototype.isDvrInUse=function(){return!!this.dvrInUse},m.prototype.destroy=function(){this.trigger(l.default.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(t){return t.destroy()})),this.$el.remove()},m.prototype.setStyle=function(t){this.$el.css(t)},m.prototype.animate=function(t,e){return this.$el.animate(t,e).promise()},m.prototype.ready=function(){this.isReady=!0,this.trigger(l.default.CONTAINER_READY,this.name)},m.prototype.isPlaying=function(){return this.playback.isPlaying()},m.prototype.getStartTimeOffset=function(){return this.playback.getStartTimeOffset()},m.prototype.getCurrentTime=function(){return this.currentTime},m.prototype.getDuration=function(){return this.playback.getDuration()},m.prototype.error=function(t){this.isReady||this.ready(),this.trigger(l.default.CONTAINER_ERROR,t,this.name)},m.prototype.loadedMetadata=function(t){this.trigger(l.default.CONTAINER_LOADEDMETADATA,t)},m.prototype.timeUpdated=function(t){this.currentTime=t.current,this.trigger(l.default.CONTAINER_TIMEUPDATE,t,this.name)},m.prototype.onProgress=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.trigger.apply(this,[l.default.CONTAINER_PROGRESS].concat(e,[this.name]))},m.prototype.playing=function(){this.trigger(l.default.CONTAINER_PLAY,this.name)},m.prototype.paused=function(){this.trigger(l.default.CONTAINER_PAUSE,this.name)},m.prototype.play=function(){this.playback.play()},m.prototype.stop=function(){this.playback.stop(),this.currentTime=0},m.prototype.pause=function(){this.playback.pause()},m.prototype.onEnded=function(){this.trigger(l.default.CONTAINER_ENDED,this,this.name),this.currentTime=0},m.prototype.stopped=function(){this.trigger(l.default.CONTAINER_STOP)},m.prototype.clicked=function(){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){t.clickTimer&&t.trigger(l.default.CONTAINER_CLICK,t,t.name)}),this.clickDelay))},m.prototype.cancelClicked=function(){clearTimeout(this.clickTimer),this.clickTimer=null},m.prototype.dblClicked=function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(l.default.CONTAINER_DBLCLICK,this,this.name))},m.prototype.dblTap=function(t){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(t,(function(){e.cancelClicked(),e.trigger(l.default.CONTAINER_DBLCLICK,e,e.name)}))},m.prototype.onContextMenu=function(t){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(l.default.CONTAINER_CONTEXTMENU,t,this.name)},m.prototype.seek=function(t){this.trigger(l.default.CONTAINER_SEEK,t,this.name),this.playback.seek(t)},m.prototype.onSeeked=function(){this.trigger(l.default.CONTAINER_SEEKED,this.name)},m.prototype.seekPercentage=function(t){var e=this.getDuration();if(0<=t&&t<=100){var n=e*(t/100);this.seek(n)}},m.prototype.setVolume=function(t){this.volume=parseFloat(t),this.trigger(l.default.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)},m.prototype.fullscreen=function(){this.trigger(l.default.CONTAINER_FULLSCREEN,this.name)},m.prototype.onBuffering=function(){this.trigger(l.default.CONTAINER_STATE_BUFFERING,this.name)},m.prototype.bufferfull=function(){this.trigger(l.default.CONTAINER_STATE_BUFFERFULL,this.name)},m.prototype.addPlugin=function(t){this.plugins.push(t)},m.prototype.hasPlugin=function(t){return!!this.getPlugin(t)},m.prototype.getPlugin=function(t){return this.plugins.filter((function(e){return e.name===t}))[0]},m.prototype.mouseEnter=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(l.default.CONTAINER_MOUSE_ENTER)},m.prototype.mouseLeave=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(l.default.CONTAINER_MOUSE_LEAVE)},m.prototype.settingsUpdate=function(){this.settings=this.playback.settings,this.trigger(l.default.CONTAINER_SETTINGSUPDATE)},m.prototype.highDefinitionUpdate=function(t){this.trigger(l.default.CONTAINER_HIGHDEFINITIONUPDATE,t)},m.prototype.isHighDefinitionInUse=function(){return this.playback.isHighDefinitionInUse()},m.prototype.disableMediaControl=function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(l.default.CONTAINER_MEDIACONTROL_DISABLE))},m.prototype.enableMediaControl=function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(l.default.CONTAINER_MEDIACONTROL_ENABLE))},m.prototype.updateStyle=function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")},m.prototype.configure=function(t){this._options=d.default.extend(this._options,t),this.updateStyle(),this.playback.configure(this.options),this.trigger(l.default.CONTAINER_OPTIONS_CHANGE)},m.prototype.render=function(){return this.$el.append(this.playback.render().el),this.updateStyle(),this},m);function m(t,e,n){(0,i.default)(this,m);var r=(0,a.default)(this,p.call(this,t));return r._i18n=e,r.currentTime=0,r.volume=100,r.playback=t.playback,r.playerError=n,r.settings=d.default.extend({},r.playback.settings),r.isReady=!1,r.mediaControlDisabled=!1,r.plugins=[r.playback],r.dblTapHandler=new h.DoubleEventHandler(500),r.clickTimer=null,r.clickDelay=200,r.bindEvents(),r}e.default=g,(0,r.default)(g.prototype,c.default),t.exports=e.default},function(t,e,n){var r=n(171);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,".container[data-container]{position:absolute;background-color:#000;height:100%;width:100%;max-width:100%}.container[data-container] .chromeless{cursor:default}[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled{cursor:pointer}",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,a=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(i=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(t,e,n){var r=n(174);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,'[data-player]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-transform:translateZ(0);transform:translateZ(0);position:relative;margin:0;padding:0;border:0;font-style:normal;font-weight:400;text-align:center;overflow:hidden;font-size:100%;font-family:Roboto,Open Sans,Arial,sans-serif;text-shadow:0 0 0;box-sizing:border-box}[data-player] a,[data-player] abbr,[data-player] acronym,[data-player] address,[data-player] applet,[data-player] article,[data-player] aside,[data-player] audio,[data-player] b,[data-player] big,[data-player] blockquote,[data-player] canvas,[data-player] caption,[data-player] center,[data-player] cite,[data-player] code,[data-player] dd,[data-player] del,[data-player] details,[data-player] dfn,[data-player] div,[data-player] dl,[data-player] dt,[data-player] em,[data-player] embed,[data-player] fieldset,[data-player] figcaption,[data-player] figure,[data-player] footer,[data-player] form,[data-player] h1,[data-player] h2,[data-player] h3,[data-player] h4,[data-player] h5,[data-player] h6,[data-player] header,[data-player] hgroup,[data-player] i,[data-player] iframe,[data-player] img,[data-player] ins,[data-player] kbd,[data-player] label,[data-player] legend,[data-player] li,[data-player] mark,[data-player] menu,[data-player] nav,[data-player] object,[data-player] ol,[data-player] output,[data-player] p,[data-player] pre,[data-player] q,[data-player] ruby,[data-player] s,[data-player] samp,[data-player] section,[data-player] small,[data-player] span,[data-player] strike,[data-player] strong,[data-player] sub,[data-player] summary,[data-player] sup,[data-player] table,[data-player] tbody,[data-player] td,[data-player] tfoot,[data-player] th,[data-player] thead,[data-player] time,[data-player] tr,[data-player] tt,[data-player] u,[data-player] ul,[data-player] var,[data-player] video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}[data-player] table{border-collapse:collapse;border-spacing:0}[data-player] caption,[data-player] td,[data-player] th{text-align:left;font-weight:400;vertical-align:middle}[data-player] blockquote,[data-player] q{quotes:none}[data-player] blockquote:after,[data-player] blockquote:before,[data-player] q:after,[data-player] q:before{content:"";content:none}[data-player] a img{border:none}[data-player]:focus{outline:0}[data-player] *{max-width:none;box-sizing:inherit;float:none}[data-player] div{display:block}[data-player].fullscreen{width:100%!important;height:100%!important;top:0;left:0}[data-player].nocursor{cursor:none}.clappr-style{display:none!important}',""])},function(t,e,n){var r=n(82);(t.exports=n(8)(!1)).push([t.i,'@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:local("Roboto"),local("Roboto-Regular"),url('+r(n(176))+') format("truetype")}',""])},function(t,e){t.exports="<%=baseUrl%>/38861cba61c66739c1452c3a71e39852.ttf"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=P(n(76)),i=P(n(62)),a=P(n(0)),o=P(n(1)),s=P(n(2)),l=P(n(15)),u=P(n(40)),c=P(n(41)),h=P(n(85)),d=P(n(86)),f=P(n(87)),p=P(n(88)),g=P(n(90)),m=P(n(91)),v=P(n(92)),y=P(n(213)),b=P(n(93)),_=P(n(94)),E=P(n(223)),A=P(n(95)),T=P(n(96)),w=P(n(98)),S=P(n(234)),x=P(n(99)),L=P(n(240)),M=P(n(245)),k=P(n(246)),C=P(n(247)),R=P(n(248));function P(t){return t&&t.__esModule?t:{default:t}}var O,D=(O=l.default,(0,s.default)(I,O),I.prototype.groupPluginsByType=function(t){return Array.isArray(t)&&(t=t.reduce((function(t,e){return t[e.type]||(t[e.type]=[]),t[e.type].push(e),t}),{})),t},I.prototype.removeDups=function(t){var e=t.reduceRight((function(t,e){return t[e.prototype.name]&&delete t[e.prototype.name],t[e.prototype.name]=e,t}),(0,r.default)(null)),n=[];for(var i in e)n.unshift(e[i]);return n},I.prototype.addExternalPlugins=function(t){(t=this.groupPluginsByType(t)).playback&&(this.playbackPlugins=this.removeDups(t.playback.concat(this.playbackPlugins))),t.container&&(this.containerPlugins=this.removeDups(t.container.concat(this.containerPlugins))),t.core&&(this.corePlugins=this.removeDups(t.core.concat(this.corePlugins))),u.default.getInstance(this.playerId).playbackPlugins=this.playbackPlugins},I.prototype.validateExternalPluginsType=function(t){["playback","container","core"].forEach((function(e){(t[e]||[]).forEach((function(t){var n="external "+t.type+" plugin on "+e+" array";if(t.type!==e)throw new ReferenceError(n)}))}))},I);function I(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];(0,a.default)(this,I);var r=(0,o.default)(this,O.call(this));return r.playerId=e,r.playbackPlugins=[],n||(r.playbackPlugins=[].concat((0,i.default)(r.playbackPlugins),[p.default])),r.playbackPlugins=[].concat((0,i.default)(r.playbackPlugins),[c.default,d.default]),n||(r.playbackPlugins=[].concat((0,i.default)(r.playbackPlugins),[h.default,f.default])),r.playbackPlugins=[].concat((0,i.default)(r.playbackPlugins),[g.default,m.default]),r.containerPlugins=[v.default,b.default,_.default,y.default,E.default,A.default],r.corePlugins=[T.default,w.default,S.default,x.default,L.default,M.default,k.default,R.default,C.default],Array.isArray(t)||r.validateExternalPluginsType(t),r.addExternalPlugins(t),r}e.default=D,t.exports=e.default},function(t,e,n){n(54),n(179),t.exports=n(9).Array.from},function(t,e,n){"use strict";var r=n(44),i=n(16),a=n(38),o=n(180),s=n(181),l=n(69),u=n(182),c=n(77);i(i.S+i.F*!n(183)((function(t){Array.from(t)})),"Array",{from:function(t,e,n){var i,h,d,f,p=a(t),g="function"==typeof this?this:Array,m=arguments.length,v=1<m?e:void 0,y=void 0!==v,b=0,_=c(p);if(y&&(v=r(v,2<m?n:void 0,2)),null==_||g==Array&&s(_))for(h=new g(i=l(p.length));b<i;b++)u(h,b,y?v(p[b],b):p[b]);else for(f=_.call(p),h=new g;!(d=f.next()).done;b++)u(h,b,y?o(f,v,[d.value,b],!0):d.value);return h.length=b,h}})},function(t,e,n){var r=n(21);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var a=t.return;throw void 0!==a&&r(a.call(t)),e}}},function(t,e,n){var r=n(34),i=n(13)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[i]===t)}},function(t,e,n){"use strict";var r=n(18),i=n(33);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(13)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var a=[7],o=a[r]();o.next=function(){return{done:n=!0}},a[r]=function(){return o},t(a)}catch(t){}return n}},function(t,e,n){"use strict";(function(r){Object.defineProperty(e,"__esModule",{value:!0});var i=_(n(84)),a=_(n(0)),o=_(n(1)),s=_(n(3)),l=_(n(2)),u=_(n(62)),c=_(n(53)),h=n(5),d=_(n(11)),f=_(n(14)),p=_(n(25)),g=_(n(4)),m=_(n(29)),v=_(n(6)),y=_(n(7)),b=_(n(185));function _(t){return t&&t.__esModule?t:{default:t}}n(186);var E={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(t){return'video/mp4; codecs="'+t+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};E.ogv=E.ogg,E["3gp"]=E["3gpp"];var A,T={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},w=(0,c.default)(T).reduce((function(t,e){return[].concat((0,u.default)(t),(0,u.default)(T[e]))}),[]),S={code:"unknown",message:"unknown"},x=(A=d.default,(0,l.default)(L,A),(0,s.default)(L,[{key:"name",get:function(){return"html5_video"}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var t=this.options.src,e=L._mimeTypesForUrl(t,T,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||0<=w.indexOf(e[0])}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}}]),L.prototype.configure=function(t){A.prototype.configure.call(this,t),this.el.loop=!!t.loop},L.prototype.attemptAutoPlay=function(){var t=this;this.canAutoPlay((function(e,n){n&&m.default.warn(t.name,"autoplay error.",{result:e,error:n}),e&&r.nextTick((function(){return!t._destroyed&&t.play()}))}))},L.prototype.canAutoPlay=function(t){this.options.disableCanAutoPlay&&t(!0,null);var e={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};f.default.isMobile&&h.DomRecycler.options.recycleVideo&&(e.element=this.el),(0,h.canAutoPlayMedia)(t,e)},L.prototype._setupExternalTracks=function(t){this._externalTracks=t.map((function(t){return{kind:t.kind||"subtitles",label:t.label,lang:t.lang,src:t.src}}))},L.prototype._setupSrc=function(t){this.el.src!==t&&(this._ccIsSetup=!1,this.el.src=t,this._src=this.el.src)},L.prototype._onLoadedMetadata=function(t){this._handleBufferingEvents(),this.trigger(g.default.PLAYBACK_LOADEDMETADATA,{duration:t.target.duration,data:t}),this._updateSettings();var e=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==d.default.LIVE&&e&&this._checkInitialSeek()},L.prototype._onDurationChange=function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()},L.prototype._updateSettings=function(){this.getPlaybackType()===d.default.VOD||this.getPlaybackType()===d.default.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(g.default.PLAYBACK_SETTINGSUPDATE)},L.prototype.isSeekEnabled=function(){return isFinite(this.getDuration())},L.prototype.getPlaybackType=function(){var t="audio"===this.tagName?d.default.AOD:d.default.VOD;return 0<=[0,void 0,1/0].indexOf(this.el.duration)?d.default.LIVE:t},L.prototype.isHighDefinitionInUse=function(){return!1},L.prototype.consent=function(){this.isPlaying()||(A.prototype.consent.call(this),this.el.load())},L.prototype.play=function(){this.trigger(g.default.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var t=this.el.play();t&&t.catch&&t.catch((function(){}))},L.prototype.pause=function(){this.el.pause()},L.prototype.stop=function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(g.default.PLAYBACK_STOP)},L.prototype.volume=function(t){0===t?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=t/100)},L.prototype.mute=function(){this.el.muted=!0},L.prototype.unmute=function(){this.el.muted=!1},L.prototype.isMuted=function(){return!0===this.el.muted||0===this.el.volume},L.prototype.isPlaying=function(){return!this.el.paused&&!this.el.ended},L.prototype._startPlayheadMovingChecks=function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))},L.prototype._stopPlayheadMovingChecks=function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)},L.prototype._determineIfPlayheadMoving=function(){var t=this._playheadMovingTimeOnCheck,e=this.el.currentTime;this._playheadMoving=t!==e,this._playheadMovingTimeOnCheck=e,this._handleBufferingEvents()},L.prototype._onWaiting=function(){this._loadStarted=!0,this._handleBufferingEvents()},L.prototype._onLoadedData=function(){this._loadStarted=!0,this._handleBufferingEvents()},L.prototype._onCanPlay=function(){this._handleBufferingEvents()},L.prototype._onPlaying=function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(g.default.PLAYBACK_PLAY)},L.prototype._onPause=function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(g.default.PLAYBACK_PAUSE)},L.prototype._onSeeking=function(){this._handleBufferingEvents(),this.trigger(g.default.PLAYBACK_SEEK)},L.prototype._onSeeked=function(){this._handleBufferingEvents(),this.trigger(g.default.PLAYBACK_SEEKED)},L.prototype._onEnded=function(){this._handleBufferingEvents(),this.trigger(g.default.PLAYBACK_ENDED,this.name)},L.prototype._handleBufferingEvents=function(){var t=!this.el.ended&&!this.el.paused,e=this._loadStarted&&!this.el.ended&&!this._stopped&&(t&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==e&&((this._isBuffering=e)?this.trigger(g.default.PLAYBACK_BUFFERING,this.name):this.trigger(g.default.PLAYBACK_BUFFERFULL,this.name))},L.prototype._onError=function(){var t=this.el.error||S,e=t.code,n=t.message,r=e===S.code,i=this.createError({code:e,description:n,raw:this.el.error,level:r?p.default.Levels.WARN:p.default.Levels.FATAL});r?m.default.warn(this.name,"HTML5 unknown error: ",i):this.trigger(g.default.PLAYBACK_ERROR,i)},L.prototype.destroy=function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),A.prototype.destroy.call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,h.DomRecycler.garbage(this.$el)},L.prototype.seek=function(t){this.el.currentTime=t},L.prototype.seekPercentage=function(t){var e=this.el.duration*(t/100);this.seek(e)},L.prototype._checkInitialSeek=function(){var t=(0,h.seekStringToSeconds)();0!==t&&this.seek(t)},L.prototype.getCurrentTime=function(){return this.el.currentTime},L.prototype.getDuration=function(){return this.el.duration},L.prototype._onTimeUpdate=function(){this.getPlaybackType()===d.default.LIVE?this.trigger(g.default.PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name):this.trigger(g.default.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration},this.name)},L.prototype._onProgress=function(){if(this.el.buffered.length){for(var t=[],e=0,n=0;n<this.el.buffered.length;n++)t=[].concat((0,u.default)(t),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=t[n].start&&this.el.currentTime<=t[n].end&&(e=n);var r={start:t[e].start,current:t[e].end,total:this.el.duration};this.trigger(g.default.PLAYBACK_PROGRESS,r,t)}},L.prototype._typeFor=function(t){var e=L._mimeTypesForUrl(t,E,this.options.mimeType);return 0===e.length&&(e=L._mimeTypesForUrl(t,T,this.options.mimeType)),(e[0]||"").split(";")[0]},L.prototype._ready=function(){this._isReadyState||(this._isReadyState=!0,this.trigger(g.default.PLAYBACK_READY,this.name))},L.prototype._checkForClosedCaptions=function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(g.default.PLAYBACK_SUBTITLE_AVAILABLE);var t=this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}},L.prototype._handleTextTrackChange=function(){var t=this.closedCaptionsTracks.find((function(t){return"showing"===t.track.mode}))||{id:-1};this._ccTrackId!==t.id&&(this._ccTrackId=t.id,this.trigger(g.default.PLAYBACK_SUBTITLE_CHANGED,{id:t.id}))},L.prototype.render=function(){return this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&0<this._externalTracks.length&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready(),this},(0,s.default)(L,[{key:"isReady",get:function(){return this._isReadyState}},{key:"isHTML5Video",get:function(){return this.name===L.prototype.name}},{key:"closedCaptionsTracks",get:function(){var t=0;return(this.el.textTracks?(0,i.default)(this.el.textTracks):[]).filter((function(t){return"subtitles"===t.kind||"captions"===t.kind})).map((function(e){return{id:t++,name:e.label,track:e}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(t){if((0,h.isNumber)(t)){var e=this.closedCaptionsTracks,n=void 0;if(-1!==t){if(!(n=e.find((function(e){return e.id===t}))))return;if("showing"===n.track.mode)return}e.filter((function(t){return"hidden"!==t.track.mode})).forEach((function(t){return t.track.mode="hidden"})),n&&(n.track.mode="showing"),this._ccTrackId=t,this.trigger(g.default.PLAYBACK_SUBTITLE_CHANGED,{id:t})}}},{key:"template",get:function(){return(0,y.default)(b.default)}}]),L);function L(){(0,a.default)(this,L);for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=(0,o.default)(this,A.call.apply(A,[this].concat(e)));r._destroyed=!1,r._loadStarted=!1,r._isBuffering=!1,r._playheadMoving=!1,r._playheadMovingTimer=null,r._stopped=!1,r._ccTrackId=-1,r._setupSrc(r.options.src),r.options.playback||(r.options.playback=r.options||{}),r.options.playback.disableContextMenu=r.options.playback.disableContextMenu||r.options.disableVideoTagContextMenu;var i=r.options.playback,s=i.preload||(f.default.isSafari?"auto":r.options.preload),l=void 0;return r.options.poster&&("string"==typeof r.options.poster?l=r.options.poster:"string"==typeof r.options.poster.url&&(l=r.options.poster.url)),v.default.extend(r.el,{muted:r.options.mute,defaultMuted:r.options.mute,loop:r.options.loop,poster:l,preload:s||"metadata",controls:(i.controls||r.options.useVideoTagDefaultControls)&&"controls",crossOrigin:i.crossOrigin,"x-webkit-playsinline":i.playInline}),i.playInline&&r.$el.attr({playsinline:"playsinline"}),i.crossOrigin&&r.$el.attr({crossorigin:i.crossOrigin}),r.settings={default:["seekbar"]},r.settings.left=["playpause","position","duration"],r.settings.right=["fullscreen","volume","hd-indicator"],i.externalTracks&&r._setupExternalTracks(i.externalTracks),r.options.autoPlay&&r.attemptAutoPlay(),r}(e.default=x)._mimeTypesForUrl=function(t,e,n){var r=(t.split("?")[0].match(/.*\.(.*)$/)||[])[1],i=n||r&&e[r.toLowerCase()]||[];return i.constructor===Array?i:[i]},x._canPlay=function(t,e,n,r){var i=x._mimeTypesForUrl(n,e,r),a=document.createElement(t);return!!i.filter((function(t){return!!a.canPlayType(t).replace(/no/,"")}))[0]},x.canPlay=function(t,e){return x._canPlay("audio",T,t,e)||x._canPlay("video",E,t,e)},t.exports=e.default}).call(this,n(63))},function(t,e){t.exports='<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>" />\n<% }; %>\n'},function(t,e,n){var r=n(187);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,"[data-html5-video]{position:absolute;height:100%;width:100%;display:block}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=m(n(0)),i=m(n(1)),a=m(n(3)),o=m(n(2)),s=n(5),l=m(n(64)),u=m(n(14)),c=m(n(31)),h=m(n(7)),d=m(n(6)),f=m(n(4)),p=m(n(11)),g=m(n(193));function m(t){return t&&t.__esModule?t:{default:t}}var v,y=(v=l.default,(0,o.default)(b,v),(0,a.default)(b,[{key:"name",get:function(){return"flash"}},{key:"swfPath",get:function(){return(0,h.default)(g.default)({baseUrl:this._baseUrl})}},{key:"ended",get:function(){return"ENDED"===this._currentState}},{key:"buffering",get:function(){return!!this._bufferingState&&"ENDED"!==this._currentState}}]),b.prototype._bootstrap=function(){var t=this;this.el.playerPlay?(this.el.width="100%",this.el.height="100%","PLAYING"===this._currentState?this._firstPlay():(this._currentState="IDLE",this._autoPlay&&this.play()),(0,d.default)('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" />').insertAfter(this.$el),0<this.getDuration()?this._metadataLoaded():c.default.once(this.uniqueId+":timeupdate",this._metadataLoaded,this)):(this._attempts=this._attempts||0,++this._attempts<=60?setTimeout((function(){return t._bootstrap()}),50):this.trigger(f.default.PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},b.prototype._metadataLoaded=function(){this._isReadyState=!0,this.trigger(f.default.PLAYBACK_READY,this.name),this.trigger(f.default.PLAYBACK_SETTINGSUPDATE,this.name)},b.prototype.getPlaybackType=function(){return p.default.VOD},b.prototype.isHighDefinitionInUse=function(){return!1},b.prototype._updateTime=function(){this.trigger(f.default.PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name)},b.prototype._addListeners=function(){c.default.on(this.uniqueId+":progress",this._progress,this),c.default.on(this.uniqueId+":timeupdate",this._updateTime,this),c.default.on(this.uniqueId+":statechanged",this._checkState,this),c.default.on(this.uniqueId+":flashready",this._bootstrap,this)},b.prototype.stopListening=function(){v.prototype.stopListening.call(this),c.default.off(this.uniqueId+":progress"),c.default.off(this.uniqueId+":timeupdate"),c.default.off(this.uniqueId+":statechanged"),c.default.off(this.uniqueId+":flashready")},b.prototype._checkState=function(){this._isIdle||"PAUSED"===this._currentState||("PLAYING_BUFFERING"!==this._currentState&&"PLAYING_BUFFERING"===this.el.getState()?(this._bufferingState=!0,this.trigger(f.default.PLAYBACK_BUFFERING,this.name),this._currentState="PLAYING_BUFFERING"):"PLAYING"===this.el.getState()?(this._bufferingState=!1,this.trigger(f.default.PLAYBACK_BUFFERFULL,this.name),this._currentState="PLAYING"):"IDLE"===this.el.getState()?this._currentState="IDLE":"ENDED"===this.el.getState()&&(this.trigger(f.default.PLAYBACK_ENDED,this.name),this.trigger(f.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.el.getDuration()},this.name),this._currentState="ENDED",this._isIdle=!0))},b.prototype._progress=function(){"IDLE"!==this._currentState&&"ENDED"!==this._currentState&&this.trigger(f.default.PLAYBACK_PROGRESS,{start:0,current:this.el.getBytesLoaded(),total:this.el.getBytesTotal()})},b.prototype._firstPlay=function(){var t=this;this.el.playerPlay?(this._isIdle=!1,this.el.playerPlay(this._src),this.listenToOnce(this,f.default.PLAYBACK_BUFFERFULL,(function(){return t._checkInitialSeek()})),this._currentState="PLAYING"):this.listenToOnce(this,f.default.PLAYBACK_READY,this._firstPlay)},b.prototype._checkInitialSeek=function(){var t=(0,s.seekStringToSeconds)(window.location.href);0!==t&&this.seekSeconds(t)},b.prototype.play=function(){this.trigger(f.default.PLAYBACK_PLAY_INTENT),"PAUSED"===this._currentState||"PLAYING_BUFFERING"===this._currentState?(this._currentState="PLAYING",this.el.playerResume(),this.trigger(f.default.PLAYBACK_PLAY,this.name)):"PLAYING"!==this._currentState&&(this._firstPlay(),this.trigger(f.default.PLAYBACK_PLAY,this.name))},b.prototype.volume=function(t){var e=this;this.isReady?this.el.playerVolume(t):this.listenToOnce(this,f.default.PLAYBACK_BUFFERFULL,(function(){return e.volume(t)}))},b.prototype.pause=function(){this._currentState="PAUSED",this.el.playerPause(),this.trigger(f.default.PLAYBACK_PAUSE,this.name)},b.prototype.stop=function(){this.el.playerStop(),this.trigger(f.default.PLAYBACK_STOP),this.trigger(f.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},b.prototype.isPlaying=function(){return!!(this.isReady&&-1<this._currentState.indexOf("PLAYING"))},b.prototype.getDuration=function(){return this.el.getDuration()},b.prototype.seekPercentage=function(t){var e=this;if(0<this.el.getDuration()){var n=this.el.getDuration()*(t/100);this.seek(n)}else this.listenToOnce(this,f.default.PLAYBACK_BUFFERFULL,(function(){return e.seekPercentage(t)}))},b.prototype.seek=function(t){var e=this;this.isReady&&this.el.playerSeek?(this.el.playerSeek(t),this.trigger(f.default.PLAYBACK_TIMEUPDATE,{current:t,total:this.el.getDuration()},this.name),"PAUSED"===this._currentState&&this.el.playerPause()):this.listenToOnce(this,f.default.PLAYBACK_BUFFERFULL,(function(){return e.seek(t)}))},b.prototype.destroy=function(){clearInterval(this.bootstrapId),v.prototype.stopListening.call(this),this.$el.remove()},(0,a.default)(b,[{key:"isReady",get:function(){return this._isReadyState}}]),b);function b(){(0,r.default)(this,b);for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=(0,i.default)(this,v.call.apply(v,[this].concat(e)));return a._src=a.options.src,a._baseUrl=a.options.baseUrl,a._autoPlay=a.options.autoPlay,a.settings={default:["seekbar"]},a.settings.left=["playpause","position","duration"],a.settings.right=["fullscreen","volume"],a.settings.seekEnabled=!0,a._isReadyState=!1,a._addListeners(),a}(e.default=y).canPlay=function(t){if(u.default.hasFlash&&t&&t.constructor===String){var e=t.split("?")[0].match(/.*\.(.*)$/)||[];return 1<e.length&&!u.default.isMobile&&e[1].toLowerCase().match(/^(mp4|mov|f4v|3gpp|3gp)$/)}return!1},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(0)),i=h(n(3)),a=h(n(1)),o=h(n(2)),s=h(n(11)),l=h(n(7)),u=h(n(14)),c=h(n(190));function h(t){return t&&t.__esModule?t:{default:t}}n(191);var d,f=(d=s.default,(0,o.default)(p,d),p.prototype.setElement=function(t){this.$el=t,this.el=t[0]},p.prototype.render=function(){return this.$el.attr("data",this.swfPath),this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,baseUrl:this.baseUrl,playbackId:this.uniqueId,wmode:this.wmode,callbackName:"window.Clappr.flashlsCallbacks."+this.cid})),u.default.isIE&&(this.$("embed").remove(),u.default.isLegacyIE&&this.$el.attr("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000")),this.el.id=this.cid,this},(0,i.default)(p,[{key:"tagName",get:function(){return"object"}},{key:"swfPath",get:function(){return""}},{key:"wmode",get:function(){return"transparent"}},{key:"template",get:function(){return(0,l.default)(c.default)}},{key:"attributes",get:function(){var t="application/x-shockwave-flash";return u.default.isLegacyIE&&(t=""),{class:"clappr-flash-playback",type:t,width:"100%",height:"100%",data:this.swfPath,"data-flash-playback":this.name}}}]),p);function p(){return(0,r.default)(this,p),(0,a.default)(this,d.apply(this,arguments))}e.default=f,t.exports=e.default},function(t,e){t.exports='<param name="movie" value="<%= swfPath %>">\n<param name="quality" value="autohigh">\n<param name="swliveconnect" value="true">\n<param name="allowScriptAccess" value="always">\n<param name="bgcolor" value="#000000">\n<param name="allowFullScreen" value="false">\n<param name="wmode" value="<%= wmode %>">\n<param name="tabindex" value="1">\n<param name="FlashVars" value="playbackId=<%= playbackId %>&callback=<%= callbackName %>">\n<embed\n  name="<%= cid %>"\n  type="application/x-shockwave-flash"\n  disabled="disabled"\n  tabindex="-1"\n  enablecontextmenu="false"\n  allowScriptAccess="always"\n  quality="autohigh"\n  pluginspage="http://www.macromedia.com/go/getflashplayer"\n  wmode="<%= wmode %>"\n  swliveconnect="true"\n  allowfullscreen="false"\n  bgcolor="#000000"\n  FlashVars="playbackId=<%= playbackId %>&callback=<%= callbackName %>"\n  data="<%= swfPath %>"\n  src="<%= swfPath %>"\n  width="100%"\n  height="100%">\n</embed>\n'},function(t,e,n){var r=n(192);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}",""])},function(t,e){t.exports="<%=baseUrl%>/4b76590b32dab62bc95c1b7951efae78.swf"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(0)),i=c(n(3)),a=c(n(1)),o=c(n(2)),s=c(n(4)),l=c(n(11)),u=c(n(41));function c(t){return t&&t.__esModule?t:{default:t}}var h,d=(h=u.default,(0,o.default)(f,h),f.prototype.updateSettings=function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(s.default.PLAYBACK_SETTINGSUPDATE)},f.prototype.getPlaybackType=function(){return l.default.AOD},(0,i.default)(f,[{key:"name",get:function(){return"html5_audio"}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}}]),f);function f(){return(0,r.default)(this,f),(0,a.default)(this,h.apply(this,arguments))}(e.default=d).canPlay=function(t,e){return u.default._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},t,e)},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=v(n(0)),i=v(n(1)),a=v(n(3)),o=v(n(2)),s=v(n(64)),l=v(n(4)),u=v(n(7)),c=v(n(11)),h=v(n(31)),d=v(n(14)),f=v(n(25)),p=v(n(196)),g=v(n(197)),m=v(n(6));function v(t){return t&&t.__esModule?t:{default:t}}var y,b=(y=s.default,(0,o.default)(_,y),(0,a.default)(_,[{key:"name",get:function(){return"flashls"}},{key:"swfPath",get:function(){return(0,u.default)(g.default)({baseUrl:this._baseUrl})}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?-1:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(l.default.PLAYBACK_LEVEL_SWITCH_START),this.el.playerSetCurrentLevel(t)}},{key:"ended",get:function(){return this._hasEnded}},{key:"buffering",get:function(){return!!this._bufferingState&&!this._hasEnded}}]),_.prototype._initHlsParameters=function(t){this._autoStartLoad=void 0===t.autoStartLoad||t.autoStartLoad,this._capLevelToStage=void 0!==t.capLevelToStage&&t.capLevelToStage,this._maxLevelCappingMode=void 0===t.maxLevelCappingMode?"downscale":t.maxLevelCappingMode,this._minBufferLength=void 0===t.minBufferLength?-1:t.minBufferLength,this._minBufferLengthCapping=void 0===t.minBufferLengthCapping?-1:t.minBufferLengthCapping,this._maxBufferLength=void 0===t.maxBufferLength?120:t.maxBufferLength,this._maxBackBufferLength=void 0===t.maxBackBufferLength?30:t.maxBackBufferLength,this._lowBufferLength=void 0===t.lowBufferLength?3:t.lowBufferLength,this._mediaTimePeriod=void 0===t.mediaTimePeriod?100:t.mediaTimePeriod,this._fpsDroppedMonitoringPeriod=void 0===t.fpsDroppedMonitoringPeriod?5e3:t.fpsDroppedMonitoringPeriod,this._fpsDroppedMonitoringThreshold=void 0===t.fpsDroppedMonitoringThreshold?.2:t.fpsDroppedMonitoringThreshold,this._capLevelonFPSDrop=void 0!==t.capLevelonFPSDrop&&t.capLevelonFPSDrop,this._smoothAutoSwitchonFPSDrop=void 0===t.smoothAutoSwitchonFPSDrop?this.capLevelonFPSDrop:t.smoothAutoSwitchonFPSDrop,this._switchDownOnLevelError=void 0===t.switchDownOnLevelError||t.switchDownOnLevelError,this._seekMode=void 0===t.seekMode?"ACCURATE":t.seekMode,this._keyLoadMaxRetry=void 0===t.keyLoadMaxRetry?3:t.keyLoadMaxRetry,this._keyLoadMaxRetryTimeout=void 0===t.keyLoadMaxRetryTimeout?64e3:t.keyLoadMaxRetryTimeout,this._fragmentLoadMaxRetry=void 0===t.fragmentLoadMaxRetry?3:t.fragmentLoadMaxRetry,this._fragmentLoadMaxRetryTimeout=void 0===t.fragmentLoadMaxRetryTimeout?4e3:t.fragmentLoadMaxRetryTimeout,this._fragmentLoadSkipAfterMaxRetry=void 0===t.fragmentLoadSkipAfterMaxRetry||t.fragmentLoadSkipAfterMaxRetry,this._maxSkippedFragments=void 0===t.maxSkippedFragments?5:t.maxSkippedFragments,this._flushLiveURLCache=void 0!==t.flushLiveURLCache&&t.flushLiveURLCache,this._initialLiveManifestSize=void 0===t.initialLiveManifestSize?1:t.initialLiveManifestSize,this._manifestLoadMaxRetry=void 0===t.manifestLoadMaxRetry?3:t.manifestLoadMaxRetry,this._manifestLoadMaxRetryTimeout=void 0===t.manifestLoadMaxRetryTimeout?64e3:t.manifestLoadMaxRetryTimeout,this._manifestRedundantLoadmaxRetry=void 0===t.manifestRedundantLoadmaxRetry?3:t.manifestRedundantLoadmaxRetry,this._startFromBitrate=void 0===t.startFromBitrate?-1:t.startFromBitrate,this._startFromLevel=void 0===t.startFromLevel?-1:t.startFromLevel,this._autoStartMaxDuration=void 0===t.autoStartMaxDuration?-1:t.autoStartMaxDuration,this._seekFromLevel=void 0===t.seekFromLevel?-1:t.seekFromLevel,this._useHardwareVideoDecoder=void 0!==t.useHardwareVideoDecoder&&t.useHardwareVideoDecoder,this._hlsLogEnabled=void 0===t.hlsLogEnabled||t.hlsLogEnabled,this._logDebug=void 0!==t.logDebug&&t.logDebug,this._logDebug2=void 0!==t.logDebug2&&t.logDebug2,this._logWarn=void 0===t.logWarn||t.logWarn,this._logError=void 0===t.logError||t.logError,this._hlsMinimumDvrSize=void 0===t.hlsMinimumDvrSize?60:t.hlsMinimumDvrSize},_.prototype._addListeners=function(){var t=this;h.default.on(this.cid+":flashready",(function(){return t._bootstrap()})),h.default.on(this.cid+":timeupdate",(function(e){return t._updateTime(e)})),h.default.on(this.cid+":playbackstate",(function(e){return t._setPlaybackState(e)})),h.default.on(this.cid+":levelchanged",(function(e){return t._levelChanged(e)})),h.default.on(this.cid+":error",(function(e,n,r){return t._flashPlaybackError(e,n,r)})),h.default.on(this.cid+":fragmentloaded",(function(e){return t._onFragmentLoaded(e)})),h.default.on(this.cid+":levelendlist",(function(e){return t._onLevelEndlist(e)}))},_.prototype.stopListening=function(){y.prototype.stopListening.call(this),h.default.off(this.cid+":flashready"),h.default.off(this.cid+":timeupdate"),h.default.off(this.cid+":playbackstate"),h.default.off(this.cid+":levelchanged"),h.default.off(this.cid+":playbackerror"),h.default.off(this.cid+":fragmentloaded"),h.default.off(this.cid+":manifestloaded"),h.default.off(this.cid+":levelendlist")},_.prototype._bootstrap=function(){var t=this;if(this.el.playerLoad)this.el.width="100%",this.el.height="100%",this._isReadyState=!0,this._srcLoaded=!1,this._currentState="IDLE",this._setFlashSettings(),this._updatePlaybackType(),(this._autoPlay||this._shouldPlayOnManifestLoaded)&&this.play(),this.trigger(l.default.PLAYBACK_READY,this.name);else if(this._bootstrapAttempts=this._bootstrapAttempts||0,++this._bootstrapAttempts<=60)setTimeout((function(){return t._bootstrap()}),50);else{var e=this.createError({code:"playerLoadFail_maxNumberAttemptsReached",description:this.name+" error: Max number of attempts reached",level:f.default.Levels.FATAL,raw:{}});this.trigger(l.default.PLAYBACK_ERROR,e)}},_.prototype._setFlashSettings=function(){this.el.playerSetAutoStartLoad(this._autoStartLoad),this.el.playerSetCapLevelToStage(this._capLevelToStage),this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode),this.el.playerSetMinBufferLength(this._minBufferLength),this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping),this.el.playerSetMaxBufferLength(this._maxBufferLength),this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength),this.el.playerSetLowBufferLength(this._lowBufferLength),this.el.playerSetMediaTimePeriod(this._mediaTimePeriod),this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod),this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold),this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop),this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop),this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError),this.el.playerSetSeekMode(this._seekMode),this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry),this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout),this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry),this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout),this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry),this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments),this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache),this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize),this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry),this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout),this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry),this.el.playerSetStartFromBitrate(this._startFromBitrate),this.el.playerSetStartFromLevel(this._startFromLevel),this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration),this.el.playerSetSeekFromLevel(this._seekFromLevel),this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder),this.el.playerSetLogInfo(this._hlsLogEnabled),this.el.playerSetLogDebug(this._logDebug),this.el.playerSetLogDebug2(this._logDebug2),this.el.playerSetLogWarn(this._logWarn),this.el.playerSetLogError(this._logError)},_.prototype.setAutoStartLoad=function(t){this._autoStartLoad=t,this.el.playerSetAutoStartLoad(this._autoStartLoad)},_.prototype.setCapLevelToStage=function(t){this._capLevelToStage=t,this.el.playerSetCapLevelToStage(this._capLevelToStage)},_.prototype.setMaxLevelCappingMode=function(t){this._maxLevelCappingMode=t,this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode)},_.prototype.setSetMinBufferLength=function(t){this._minBufferLength=t,this.el.playerSetMinBufferLength(this._minBufferLength)},_.prototype.setMinBufferLengthCapping=function(t){this._minBufferLengthCapping=t,this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping)},_.prototype.setMaxBufferLength=function(t){this._maxBufferLength=t,this.el.playerSetMaxBufferLength(this._maxBufferLength)},_.prototype.setMaxBackBufferLength=function(t){this._maxBackBufferLength=t,this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength)},_.prototype.setLowBufferLength=function(t){this._lowBufferLength=t,this.el.playerSetLowBufferLength(this._lowBufferLength)},_.prototype.setMediaTimePeriod=function(t){this._mediaTimePeriod=t,this.el.playerSetMediaTimePeriod(this._mediaTimePeriod)},_.prototype.setFpsDroppedMonitoringPeriod=function(t){this._fpsDroppedMonitoringPeriod=t,this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod)},_.prototype.setFpsDroppedMonitoringThreshold=function(t){this._fpsDroppedMonitoringThreshold=t,this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold)},_.prototype.setCapLevelonFPSDrop=function(t){this._capLevelonFPSDrop=t,this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop)},_.prototype.setSmoothAutoSwitchonFPSDrop=function(t){this._smoothAutoSwitchonFPSDrop=t,this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop)},_.prototype.setSwitchDownOnLevelError=function(t){this._switchDownOnLevelError=t,this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError)},_.prototype.setSeekMode=function(t){this._seekMode=t,this.el.playerSetSeekMode(this._seekMode)},_.prototype.setKeyLoadMaxRetry=function(t){this._keyLoadMaxRetry=t,this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry)},_.prototype.setKeyLoadMaxRetryTimeout=function(t){this._keyLoadMaxRetryTimeout=t,this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout)},_.prototype.setFragmentLoadMaxRetry=function(t){this._fragmentLoadMaxRetry=t,this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry)},_.prototype.setFragmentLoadMaxRetryTimeout=function(t){this._fragmentLoadMaxRetryTimeout=t,this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout)},_.prototype.setFragmentLoadSkipAfterMaxRetry=function(t){this._fragmentLoadSkipAfterMaxRetry=t,this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry)},_.prototype.setMaxSkippedFragments=function(t){this._maxSkippedFragments=t,this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments)},_.prototype.setFlushLiveURLCache=function(t){this._flushLiveURLCache=t,this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache)},_.prototype.setInitialLiveManifestSize=function(t){this._initialLiveManifestSize=t,this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize)},_.prototype.setManifestLoadMaxRetry=function(t){this._manifestLoadMaxRetry=t,this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry)},_.prototype.setManifestLoadMaxRetryTimeout=function(t){this._manifestLoadMaxRetryTimeout=t,this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout)},_.prototype.setManifestRedundantLoadmaxRetry=function(t){this._manifestRedundantLoadmaxRetry=t,this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry)},_.prototype.setStartFromBitrate=function(t){this._startFromBitrate=t,this.el.playerSetStartFromBitrate(this._startFromBitrate)},_.prototype.setStartFromLevel=function(t){this._startFromLevel=t,this.el.playerSetStartFromLevel(this._startFromLevel)},_.prototype.setAutoStartMaxDuration=function(t){this._autoStartMaxDuration=t,this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration)},_.prototype.setSeekFromLevel=function(t){this._seekFromLevel=t,this.el.playerSetSeekFromLevel(this._seekFromLevel)},_.prototype.setUseHardwareVideoDecoder=function(t){this._useHardwareVideoDecoder=t,this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder)},_.prototype.setSetLogInfo=function(t){this._hlsLogEnabled=t,this.el.playerSetLogInfo(this._hlsLogEnabled)},_.prototype.setLogDebug=function(t){this._logDebug=t,this.el.playerSetLogDebug(this._logDebug)},_.prototype.setLogDebug2=function(t){this._logDebug2=t,this.el.playerSetLogDebug2(this._logDebug2)},_.prototype.setLogWarn=function(t){this._logWarn=t,this.el.playerSetLogWarn(this._logWarn)},_.prototype.setLogError=function(t){this._logError=t,this.el.playerSetLogError(this._logError)},_.prototype._levelChanged=function(t){var e=this.el.getLevels()[t];e&&(this.highDefinition=720<=e.height||2e3<=e.bitrate/1e3,this.trigger(l.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this._levels&&0!==this._levels.length||this._fillLevels(),this.trigger(l.default.PLAYBACK_BITRATE,{height:e.height,width:e.width,bandwidth:e.bitrate,bitrate:e.bitrate,level:t}),this.trigger(l.default.PLAYBACK_LEVEL_SWITCH_END))},_.prototype._updateTime=function(t){if("IDLE"!==this._currentState){var e=this._normalizeDuration(t.duration),n=Math.min(Math.max(t.position,0),e),r=this._dvrEnabled,i=this._playbackType===c.default.LIVE;this._dvrEnabled=i&&e>this._hlsMinimumDvrSize,100!==e&&(this._dvrEnabled!==r&&(this._updateSettings(),this.trigger(l.default.PLAYBACK_SETTINGSUPDATE,this.name)),i&&!this._dvrEnabled&&(n=e),this.trigger(l.default.PLAYBACK_TIMEUPDATE,{current:n,total:e},this.name))}},_.prototype.play=function(){this.trigger(l.default.PLAYBACK_PLAY_INTENT),"PAUSED"===this._currentState?this.el.playerResume():this._srcLoaded||"PLAYING"===this._currentState?this.el.playerPlay():this._firstPlay()},_.prototype.getPlaybackType=function(){return this._playbackType?this._playbackType:null},_.prototype.getCurrentTime=function(){return this.el.getPosition()},_.prototype.getCurrentLevelIndex=function(){return this._currentLevel},_.prototype.getCurrentLevel=function(){return this.levels[this.currentLevel]},_.prototype.getCurrentBitrate=function(){return this.levels[this.currentLevel].bitrate},_.prototype.setCurrentLevel=function(t){this.currentLevel=t},_.prototype.isHighDefinitionInUse=function(){return this.highDefinition},_.prototype.getLevels=function(){return this.levels},_.prototype._setPlaybackState=function(t){0<=["PLAYING_BUFFERING","PAUSED_BUFFERING"].indexOf(t)?(this._bufferingState=!0,this.trigger(l.default.PLAYBACK_BUFFERING,this.name),this._updateCurrentState(t)):0<=["PLAYING","PAUSED"].indexOf(t)?(0<=["PLAYING_BUFFERING","PAUSED_BUFFERING","IDLE"].indexOf(this._currentState)&&(this._bufferingState=!1,this.trigger(l.default.PLAYBACK_BUFFERFULL,this.name)),this._updateCurrentState(t)):"IDLE"===t&&(this._srcLoaded=!1,this._loop&&0<=["PLAYING_BUFFERING","PLAYING"].indexOf(this._currentState)?(this.play(),this.seek(0)):(this._updateCurrentState(t),this._hasEnded=!0,this.trigger(l.default.PLAYBACK_TIMEUPDATE,{current:0,total:this.getDuration()},this.name),this.trigger(l.default.PLAYBACK_ENDED,this.name)))},_.prototype._updateCurrentState=function(t){"IDLE"!==(this._currentState=t)&&(this._hasEnded=!1),this._updatePlaybackType(),"PLAYING"===t?this.trigger(l.default.PLAYBACK_PLAY,this.name):"PAUSED"===t&&this.trigger(l.default.PLAYBACK_PAUSE,this.name)},_.prototype._updatePlaybackType=function(){this._playbackType=this.el.getType(),this._playbackType&&(this._playbackType=this._playbackType.toLowerCase(),this._playbackType===c.default.VOD?this._startReportingProgress():this._stopReportingProgress()),this.trigger(l.default.PLAYBACK_PLAYBACKSTATE,{type:this._playbackType})},_.prototype._startReportingProgress=function(){this._reportingProgress||(this._reportingProgress=!0)},_.prototype._stopReportingProgress=function(){this._reportingProgress=!1},_.prototype._onFragmentLoaded=function(t){if(this.trigger(l.default.PLAYBACK_FRAGMENT_LOADED,t),this._reportingProgress&&this.getCurrentTime()){var e=this.getCurrentTime()+this.el.getbufferLength();this.trigger(l.default.PLAYBACK_PROGRESS,{start:this.getCurrentTime(),current:e,total:this.el.getDuration()})}},_.prototype._onLevelEndlist=function(){this._updatePlaybackType()},_.prototype._firstPlay=function(){var t=this;this._shouldPlayOnManifestLoaded=!0,this.el.playerLoad&&(h.default.once(this.cid+":manifestloaded",(function(e,n){return t._manifestLoaded(e,n)})),this._setFlashSettings(),this.el.playerLoad(this._src),this._srcLoaded=!0)},_.prototype.volume=function(t){var e=this;this.isReady?this.el.playerVolume(t):this.listenToOnce(this,l.default.PLAYBACK_BUFFERFULL,(function(){return e.volume(t)}))},_.prototype.pause=function(){this._playbackType===c.default.LIVE&&!this._dvrEnabled||(this.el.playerPause(),this._playbackType===c.default.LIVE&&this._dvrEnabled&&this._updateDvr(!0))},_.prototype.stop=function(){this._srcLoaded=!1,this.el.playerStop(),this.trigger(l.default.PLAYBACK_STOP),this.trigger(l.default.PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},_.prototype.isPlaying=function(){return!!this._currentState&&!!this._currentState.match(/playing/i)},_.prototype.getDuration=function(){return this._normalizeDuration(this.el.getDuration())},_.prototype._normalizeDuration=function(t){return this._playbackType===c.default.LIVE&&(t=Math.max(0,t-10)),t},_.prototype.seekPercentage=function(t){var e=this.el.getDuration(),n=0;0<t&&(n=e*t/100),this.seek(n)},_.prototype.seek=function(t){var e=this.getDuration();if(this._playbackType===c.default.LIVE){var n=3<e-t;this._updateDvr(n)}this.el.playerSeek(t),this.trigger(l.default.PLAYBACK_TIMEUPDATE,{current:t,total:e},this.name)},_.prototype._updateDvr=function(t){var e=!!this._dvrInUse;this._dvrInUse=t,this._dvrInUse!==e&&(this._updateSettings(),this.trigger(l.default.PLAYBACK_DVR,this._dvrInUse),this.trigger(l.default.PLAYBACK_STATS_ADD,{dvr:this._dvrInUse}))},_.prototype._flashPlaybackError=function(t,e,n){var r={code:t,description:n,level:f.default.Levels.FATAL,raw:{code:t,url:e,message:n}},i=this.createError(r);this.trigger(l.default.PLAYBACK_ERROR,i),this.trigger(l.default.PLAYBACK_STOP)},_.prototype._manifestLoaded=function(t,e){this._shouldPlayOnManifestLoaded&&(this._shouldPlayOnManifestLoaded=!1,this.el.playerPlay()),this._fillLevels(),this.trigger(l.default.PLAYBACK_LOADEDMETADATA,{duration:t,data:e})},_.prototype._fillLevels=function(){var t=this.el.getLevels(),e=t.length;this._levels=[];for(var n=0;n<e;n++)this._levels.push({id:n,label:t[n].height+"p",level:t[n]});this.trigger(l.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},_.prototype.destroy=function(){this.stopListening(),this.$el.remove()},_.prototype._updateSettings=function(){this.settings=m.default.extend({},this._defaultSettings),this._playbackType===c.default.VOD||this._dvrInUse?(this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=!0):this._dvrEnabled?(this.settings.left=["playpause"],this.settings.seekEnabled=!0):this.settings.seekEnabled=!1},_.prototype._createCallbacks=function(){var t=this;window.Clappr||(window.Clappr={}),window.Clappr.flashlsCallbacks||(window.Clappr.flashlsCallbacks={}),this.flashlsEvents=new p.default(this.cid),window.Clappr.flashlsCallbacks[this.cid]=function(e,n){t.flashlsEvents[e].apply(t.flashlsEvents,n)}},_.prototype.render=function(){return y.prototype.render.call(this),this._createCallbacks(),this},(0,a.default)(_,[{key:"isReady",get:function(){return this._isReadyState}},{key:"dvrEnabled",get:function(){return!!this._dvrEnabled}}]),_);function _(){(0,r.default)(this,_);for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=(0,i.default)(this,y.call.apply(y,[this].concat(e)));return a._src=a.options.src,a._baseUrl=a.options.baseUrl,a._initHlsParameters(a.options),a.highDefinition=!1,a._autoPlay=a.options.autoPlay,a._loop=a.options.loop,a._defaultSettings={left:["playstop"],default:["seekbar"],right:["fullscreen","volume","hd-indicator"],seekEnabled:!1},a.settings=m.default.extend({},a._defaultSettings),a._playbackType=c.default.LIVE,a._hasEnded=!1,a._addListeners(),a}(e.default=b).canPlay=function(t,e){var n=t.split("?")[0].match(/.*\.(.*)$/)||[];return d.default.hasFlash&&(1<n.length&&"m3u8"===n[1].toLowerCase()||"application/x-mpegURL"===e||"application/vnd.apple.mpegurl"===e)},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(0)),i=a(n(31));function a(t){return t&&t.__esModule?t:{default:t}}var o=(s.prototype.ready=function(){i.default.trigger(this.instanceId+":flashready")},s.prototype.videoSize=function(t,e){i.default.trigger(this.instanceId+":videosizechanged",t,e)},s.prototype.complete=function(){i.default.trigger(this.instanceId+":complete")},s.prototype.error=function(t,e,n){i.default.trigger(this.instanceId+":error",t,e,n)},s.prototype.manifest=function(t,e){i.default.trigger(this.instanceId+":manifestloaded",t,e)},s.prototype.audioLevelLoaded=function(t){i.default.trigger(this.instanceId+":audiolevelloaded",t)},s.prototype.levelLoaded=function(t){i.default.trigger(this.instanceId+":levelloaded",t)},s.prototype.levelEndlist=function(t){i.default.trigger(this.instanceId+":levelendlist",t)},s.prototype.fragmentLoaded=function(t){i.default.trigger(this.instanceId+":fragmentloaded",t)},s.prototype.fragmentPlaying=function(t){i.default.trigger(this.instanceId+":fragmentplaying",t)},s.prototype.position=function(t){i.default.trigger(this.instanceId+":timeupdate",t)},s.prototype.state=function(t){i.default.trigger(this.instanceId+":playbackstate",t)},s.prototype.seekState=function(t){i.default.trigger(this.instanceId+":seekstate",t)},s.prototype.switch=function(t){i.default.trigger(this.instanceId+":levelchanged",t)},s.prototype.audioTracksListChange=function(t){i.default.trigger(this.instanceId+":audiotracklistchanged",t)},s.prototype.audioTrackChange=function(t){i.default.trigger(this.instanceId+":audiotrackchanged",t)},s);function s(t){(0,r.default)(this,s),this.instanceId=t}e.default=o,t.exports=e.default},function(t,e){t.exports="<%=baseUrl%>/8fa12a459188502b9f0d39b8a67d9e6c.swf"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=v(n(62)),i=v(n(89)),a=v(n(200)),o=v(n(0)),s=v(n(1)),l=v(n(3)),u=v(n(2)),c=v(n(41)),h=v(n(201)),d=v(n(4)),f=v(n(11)),p=n(5),g=v(n(29)),m=v(n(25));function v(t){return t&&t.__esModule?t:{default:t}}var y,b=(y=c.default,(0,u.default)(_,y),(0,l.default)(_,[{key:"name",get:function(){return"hls"}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?-1:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(d.default.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===f.default.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return(0,p.now)()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var t=this._localStartTimeCorrelation,e=this._now-t.local,n=(t.remote+e)/1e3;return Math.min(n,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var t=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return t;var e=this._localEndTimeCorrelation,n=this._now-e.local,r=(e.remote+n)/1e3;return Math.max(t-this._extrapolatedWindowDuration,Math.min(r,t))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}}],[{key:"HLSJS",get:function(){return h.default}}]),_.prototype._setup=function(){var t=this;this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls=new h.default((0,p.assign)({},this.options.playback.hlsjsConfig)),this._hls.on(h.default.Events.MEDIA_ATTACHED,(function(){return t._hls.loadSource(t.options.src)})),this._hls.on(h.default.Events.LEVEL_LOADED,(function(e,n){return t._updatePlaybackType(e,n)})),this._hls.on(h.default.Events.LEVEL_UPDATED,(function(e,n){return t._onLevelUpdated(e,n)})),this._hls.on(h.default.Events.LEVEL_SWITCHING,(function(e,n){return t._onLevelSwitch(e,n)})),this._hls.on(h.default.Events.FRAG_LOADED,(function(e,n){return t._onFragmentLoaded(e,n)})),this._hls.on(h.default.Events.ERROR,(function(e,n){return t._onHLSJSError(e,n)})),this._hls.on(h.default.Events.SUBTITLE_TRACK_LOADED,(function(e,n){return t._onSubtitleLoaded(e,n)})),this._hls.on(h.default.Events.SUBTITLE_TRACKS_UPDATED,(function(){return t._ccTracksUpdated=!0})),this._hls.attachMedia(this.el)},_.prototype.render=function(){return this._ready(),y.prototype.render.call(this)},_.prototype._ready=function(){this._isReadyState=!0,this.trigger(d.default.PLAYBACK_READY,this.name)},_.prototype._recover=function(t,e,n){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){g.default.error("hlsjs: failed to recover",{evt:t,data:e}),n.level=m.default.Levels.FATAL;var r=this.createError(n);this.trigger(d.default.PLAYBACK_ERROR,r),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()},_.prototype._setupSrc=function(t){},_.prototype._startTimeUpdateTimer=function(){var t=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){t._onDurationChange(),t._onTimeUpdate()}),100))},_.prototype._stopTimeUpdateTimer=function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)},_.prototype.getProgramDateTime=function(){return this._programDateTime},_.prototype.getDuration=function(){return this._duration},_.prototype.getCurrentTime=function(){return Math.max(0,this.el.currentTime-this._startTime)},_.prototype.getStartTimeOffset=function(){return this._startTime},_.prototype.seekPercentage=function(t){var e=this._duration;0<t&&(e=this._duration*(t/100)),this.seek(e)},_.prototype.seek=function(t){t<0&&(g.default.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(t<this.getDuration()-3),t+=this._startTime,y.prototype.seek.call(this,t)},_.prototype.seekToLivePoint=function(){this.seek(this.getDuration())},_.prototype._updateDvr=function(t){this.trigger(d.default.PLAYBACK_DVR,t),this.trigger(d.default.PLAYBACK_STATS_ADD,{dvr:t})},_.prototype._updateSettings=function(){this._playbackType===f.default.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(d.default.PLAYBACK_SETTINGSUPDATE)},_.prototype._onHLSJSError=function(t,e){var n={code:e.type+"_"+e.details,description:this.name+" error: type: "+e.type+", details: "+e.details,raw:e},r=void 0;if(e.response&&(n.description+=", response: "+(0,i.default)(e.response)),e.fatal)if(0<this._recoverAttemptsRemaining)switch(this._recoverAttemptsRemaining-=1,e.type){case h.default.ErrorTypes.NETWORK_ERROR:switch(e.details){case h.default.ErrorDetails.MANIFEST_LOAD_ERROR:case h.default.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case h.default.ErrorDetails.MANIFEST_PARSING_ERROR:case h.default.ErrorDetails.LEVEL_LOAD_ERROR:case h.default.ErrorDetails.LEVEL_LOAD_TIMEOUT:g.default.error("hlsjs: unrecoverable network fatal error.",{evt:t,data:e}),r=this.createError(n),this.trigger(d.default.PLAYBACK_ERROR,r),this.stop();break;default:g.default.warn("hlsjs: trying to recover from network error.",{evt:t,data:e}),n.level=m.default.Levels.WARN,this.createError(n),this._hls.startLoad()}break;case h.default.ErrorTypes.MEDIA_ERROR:g.default.warn("hlsjs: trying to recover from media error.",{evt:t,data:e}),n.level=m.default.Levels.WARN,this.createError(n),this._recover(t,e,n);break;default:g.default.error("hlsjs: could not recover from error.",{evt:t,data:e}),r=this.createError(n),this.trigger(d.default.PLAYBACK_ERROR,r),this.stop()}else g.default.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:t,data:e}),r=this.createError(n),this.trigger(d.default.PLAYBACK_ERROR,r),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(e))return g.default.error("hlsjs: could not load decrypt key.",{evt:t,data:e}),r=this.createError(n),this.trigger(d.default.PLAYBACK_ERROR,r),void this.stop();n.level=m.default.Levels.WARN,this.createError(n),g.default.warn("hlsjs: non-fatal error occurred",{evt:t,data:e})}},_.prototype._keyIsDenied=function(t){return t.type===h.default.ErrorTypes.NETWORK_ERROR&&t.details===h.default.ErrorDetails.KEY_LOAD_ERROR&&t.response&&400<=t.response.code},_.prototype._onTimeUpdate=function(){var t={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&t.current===this._lastTimeUpdate.current&&t.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=t,this.trigger(d.default.PLAYBACK_TIMEUPDATE,t,this.name))},_.prototype._onDurationChange=function(){var t=this.getDuration();this._lastDuration!==t&&(this._lastDuration=t,y.prototype._onDurationChange.call(this))},_.prototype._onProgress=function(){if(this.el.buffered.length){for(var t=[],e=0,n=0;n<this.el.buffered.length;n++)t=[].concat((0,r.default)(t),[{start:Math.max(0,this.el.buffered.start(n)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(n)-this._playableRegionStartTime)}]),this.el.currentTime>=t[n].start&&this.el.currentTime<=t[n].end&&(e=n);var i={start:t[e].start,current:t[e].end,total:this.getDuration()};this.trigger(d.default.PLAYBACK_PROGRESS,i,t)}},_.prototype.play=function(){this._hls||this._setup(),y.prototype.play.call(this),this._startTimeUpdateTimer()},_.prototype.pause=function(){this._hls&&(y.prototype.pause.call(this),this.dvrEnabled&&this._updateDvr(!0))},_.prototype.stop=function(){this._stopTimeUpdateTimer(),this._hls&&(y.prototype.stop.call(this),this._hls.destroy(),delete this._hls)},_.prototype.destroy=function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),y.prototype.destroy.call(this)},_.prototype._updatePlaybackType=function(t,e){this._playbackType=e.details.live?f.default.LIVE:f.default.VOD,this._onLevelUpdated(t,e),this._ccTracksUpdated&&this._playbackType===f.default.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()},_.prototype._fillLevels=function(){this._levels=this._hls.levels.map((function(t,e){return{id:e,level:t,label:t.bitrate/1e3+"Kbps"}})),this.trigger(d.default.PLAYBACK_LEVELS_AVAILABLE,this._levels)},_.prototype._onLevelUpdated=function(t,e){this._segmentTargetDuration=e.details.targetduration,this._playlistType=e.details.type||null;var n=!1,r=!1,i=e.details.fragments,a=this._playableRegionStartTime,o=this._playableRegionDuration;if(0!==i.length){if(i[0].rawProgramDateTime&&(this._programDateTime=i[0].rawProgramDateTime),this._playableRegionStartTime!==i[0].start&&(n=!0,this._playableRegionStartTime=i[0].start),n)if(this._localStartTimeCorrelation){var s=this._localStartTimeCorrelation,l=this._now-s.local,u=(s.remote+l)/1e3;u<i[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*i[0].start}:u>a+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(i[0].start,a+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(i[0].start+this._extrapolatedWindowDuration/2)};var c=e.details.totalduration;if(this._playbackType===f.default.LIVE){var d=e.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||h.default.DefaultConfig.liveSyncDurationCount);d<=c?(c-=d,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}c!==this._playableRegionDuration&&(r=!0,this._playableRegionDuration=c);var p=i[0].start+c,g=a+o;if(p!==g)if(this._localEndTimeCorrelation){var m=this._localEndTimeCorrelation,v=this._now-m.local,y=(m.remote+v)/1e3;p<y?this._localEndTimeCorrelation={local:this._now,remote:1e3*p}:y<p-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(p-this._extrapolatedWindowDuration)}:g<y&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*g})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*p};r&&this._onDurationChange(),n&&this._onProgress()}},_.prototype._onFragmentLoaded=function(t,e){this.trigger(d.default.PLAYBACK_FRAGMENT_LOADED,e)},_.prototype._onSubtitleLoaded=function(){if(!this._ccIsSetup){this.trigger(d.default.PLAYBACK_SUBTITLE_AVAILABLE);var t=this._playbackType===f.default.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this._ccIsSetup=!0}},_.prototype._onLevelSwitch=function(t,e){this.levels.length||this._fillLevels(),this.trigger(d.default.PLAYBACK_LEVEL_SWITCH_END),this.trigger(d.default.PLAYBACK_LEVEL_SWITCH,e);var n=this._hls.levels[e.level];n&&(this.highDefinition=720<=n.height||2e3<=n.bitrate/1e3,this.trigger(d.default.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(d.default.PLAYBACK_BITRATE,{height:n.height,width:n.width,bandwidth:n.bitrate,bitrate:n.bitrate,level:e.level}))},_.prototype.getPlaybackType=function(){return this._playbackType},_.prototype.isSeekEnabled=function(){return this._playbackType===f.default.VOD||this.dvrEnabled},(0,l.default)(_,[{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===f.default.LIVE}}]),_);function _(){(0,o.default)(this,_);for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=(0,s.default)(this,y.call.apply(y,[this].concat(e)));return r.options.playback=(0,a.default)({},r.options,r.options.playback),r._minDvrSize=void 0===r.options.hlsMinimumDvrSize?60:r.options.hlsMinimumDvrSize,r._extrapolatedWindowNumSegments=r.options.playback&&void 0!==r.options.playback.extrapolatedWindowNumSegments?r.options.playback.extrapolatedWindowNumSegments:2,r._playbackType=f.default.VOD,r._lastTimeUpdate={current:0,total:0},r._lastDuration=null,r._playableRegionStartTime=0,r._localStartTimeCorrelation=null,r._localEndTimeCorrelation=null,r._playableRegionDuration=0,r._programDateTime=0,r._durationExcludesAfterLiveSyncPoint=!1,r._segmentTargetDuration=null,r._playlistType=null,r._recoverAttemptsRemaining=r.options.hlsRecoverAttempts||16,r}(e.default=b).canPlay=function(t,e){var n=t.split("?")[0].match(/.*\.(.*)$/)||[],r=1<n.length&&"m3u8"===n[1].toLowerCase()||(0,p.listContainsIgnoreCase)(e,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!h.default.isSupported()||!r)},t.exports=e.default},function(t,e,n){var r=n(9),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(12),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){var r;"undefined"!=typeof window&&(r=function(){return(n={},t.m=e={"./node_modules/eventemitter3/index.js":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||t,a),l=i?i+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],s]:t._events[l].push(s):(t._events[l]=s,t._eventsCount++),t}function l(t,e){0==--t._eventsCount?t._events=new a:delete t._events[e]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),u.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},u.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},u.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},u.prototype.emit=function(t,e,n,r,a,o){var s=i?i+t:t;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,a),!0;case 6:return c.fn.call(c.context,e,n,r,a,o),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,r);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&l(this,e)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":function(t,e,n){var r,i,a,o,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=s.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,h=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(h)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},"./node_modules/webworkify-webpack/index.js":function(t,e,n){function r(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var r=n(n.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function o(t){return(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(t,e,r){var s={};s[r]=[];var l=e.toString(),u=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,h=u[1],d=new RegExp("(\\\\n|\\W)"+o(h)+a,"g");c=d.exec(l);)"dll-reference"!==c[3]&&s[r].push(c[3]);for(d=new RegExp("\\("+o(h)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");c=d.exec(l);)t[c[2]]||(s[r].push(c[1]),t[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var f,p=Object.keys(s),g=0;g<p.length;g++)for(var m=0;m<s[p[g]].length;m++)f=s[p[g]][m],isNaN(1*f)||(s[p[g]][m]=1*s[p[g]][m]);return s}function l(t){return Object.keys(t).reduce((function(e,n){return e||0<t[n].length}),!1)}t.exports=function(t,e){e=e||{};var i={main:n.m},a=e.all?{main:Object.keys(i.main)}:function(t,e){for(var n={main:[e]},r={main:[]},i={main:{}};l(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var u=a[o],c=n[u].pop();if(i[u]=i[u]||{},!i[u][c]&&t[u][c]){i[u][c]=!0,r[u]=r[u]||[],r[u].push(c);for(var h=s(t,t[u][c],u),d=Object.keys(h),f=0;f<d.length;f++)n[d[f]]=n[d[f]]||[],n[d[f]]=n[d[f]].concat(h[d[f]])}}return r}(i,t),o="";Object.keys(a).filter((function(t){return"main"!==t})).forEach((function(t){for(var e=0;a[t][e];)e++;a[t].push(e),i[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+t+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a[t].map((function(e){return JSON.stringify(e)+": "+i[t][e].toString()})).join(",")+"});\n"})),o=o+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+a.main.map((function(t){return JSON.stringify(t)+": "+i.main[t].toString()})).join(",")+"}))(self);";var u=new window.Blob([o],{type:"text/javascript"});if(e.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),h=new window.Worker(c);return h.objectURL=c,h}},"./src/crypt/decrypter.js":function(t,e,n){"use strict";n.r(e);var r=function(){function t(t,e){this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),i=function(){function t(t,e){this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),a=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),n=new Uint32Array(4),r=0;r<4;r++)n[r]=e.getUint32(4*r);return n},e.initTable=function(){var t=this.sBox,e=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],h=s[3],d=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)d[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99;var v=d[e[t[f]=m]=f],y=d[v],b=d[y],_=257*d[m]^16843008*m;r[f]=_<<24|_>>>8,i[f]=_<<16|_>>>16,a[f]=_<<8|_>>>24,o[f]=_,_=16843009*b^65537*y^257*v^16843008*f,l[m]=_<<24|_>>>8,u[m]=_<<16|_>>>16,c[m]=_<<8|_>>>24,h[m]=_,f?(f=v^d[d[d[b^v]]],p^=d[d[p]]):f=p=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),n=!0,r=0;r<e.length&&n;)n=e[r]===this.key[r],r++;if(!n){this.key=e;var i=this.keySize=e.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,o,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),h=this.invKeySchedule=new Uint32Array(u),d=this.sBox,f=this.rcon,p=this.invSubMix,g=p[0],m=p[1],v=p[2],y=p[3];for(a=0;a<u;a++)a<i?s=c[a]=e[a]:(l=s,a%i==0?(l=d[(l=l<<8|l>>>24)>>>24]<<24|d[l>>>16&255]<<16|d[l>>>8&255]<<8|d[255&l],l^=f[a/i|0]<<24):6<i&&a%i==4&&(l=d[l>>>24]<<24|d[l>>>16&255]<<16|d[l>>>8&255]<<8|d[255&l]),c[a]=s=(c[a-i]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],h[o]=o<4||a<=4?l:g[d[l>>>24]]^m[d[l>>>16&255]]^v[d[l>>>8&255]]^y[d[255&l]],h[o]=h[o]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,n,r){for(var i,a,o,s,l,u,c,h,d,f,p,g,m,v,y=this.keySize+6,b=this.invKeySchedule,_=this.invSBox,E=this.invSubMix,A=E[0],T=E[1],w=E[2],S=E[3],x=this.uint8ArrayToUint32Array_(n),L=x[0],M=x[1],k=x[2],C=x[3],R=new Int32Array(t),P=new Int32Array(R.length),O=this.networkToHostOrderSwap;e<R.length;){for(d=O(R[e]),f=O(R[e+1]),p=O(R[e+2]),g=O(R[e+3]),l=d^b[0],u=g^b[1],c=p^b[2],h=f^b[3],m=4,v=1;v<y;v++)i=A[l>>>24]^T[u>>16&255]^w[c>>8&255]^S[255&h]^b[m],a=A[u>>>24]^T[c>>16&255]^w[h>>8&255]^S[255&l]^b[m+1],o=A[c>>>24]^T[h>>16&255]^w[l>>8&255]^S[255&u]^b[m+2],s=A[h>>>24]^T[l>>16&255]^w[u>>8&255]^S[255&c]^b[m+3],l=i,u=a,c=o,h=s,m+=4;i=_[l>>>24]<<24^_[u>>16&255]<<16^_[c>>8&255]<<8^_[255&h]^b[m],a=_[u>>>24]<<24^_[c>>16&255]<<16^_[h>>8&255]<<8^_[255&l]^b[m+1],o=_[c>>>24]<<24^_[h>>16&255]<<16^_[l>>8&255]<<8^_[255&u]^b[m+2],s=_[h>>>24]<<24^_[l>>16&255]<<16^_[u>>8&255]<<8^_[255&c]^b[m+3],m+=3,P[e]=O(i^L),P[e+1]=O(s^M),P[e+2]=O(o^k),P[e+3]=O(a^C),L=d,M=f,k=p,C=g,e+=4}return r?function(t){var e=t.byteLength,n=e&&new DataView(t).getUint8(e-1);return n?t.slice(0,e-n):t}(P.buffer):P.buffer},e.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},t}(),o=n("./src/errors.ts"),s=n("./src/utils/logger.js"),l=n("./src/events.js"),u=n("./src/utils/get-self-scope.js"),c=Object(u.getSelfScope)(),h=function(){function t(t,e,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=t,this.config=e,this.removePKCS7Padding=i)try{var a=c.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(t){}this.disableWebCrypto=!this.subtle}var e=t.prototype;return e.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.decrypt=function(t,e,n,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new a),u.expandKey(e),o(u.decrypt(t,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==e&&(this.key=e,this.fastAesKey=new i(c,e)),this.fastAesKey.expandKey().then((function(i){new r(c,n).decrypt(t,i).catch((function(r){l.onWebCryptoError(r,t,e,n,o)})).then((function(t){o(t)}))})).catch((function(r){l.onWebCryptoError(r,t,e,n,o)}))}},e.onWebCryptoError=function(t,e,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(e,n,r,i)):(s.logger.error("decrypting error : "+t.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))},e.destroy=function(){var t=this.decryptor;t&&(t.destroy(),this.decryptor=void 0)},t}();e.default=h},"./src/demux/demuxer-inline.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/events.js"),i=n("./src/errors.ts"),a=n("./src/crypt/decrypter.js"),o=n("./src/polyfills/number-isFinite.js"),s=n("./src/utils/logger.js"),l=n("./src/utils/get-self-scope.js");function u(t,e){return 255===t[e]&&240==(246&t[e+1])}function c(t,e){return 1&t[e+1]?7:9}function h(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function d(t,e){return!!(e+1<t.length&&u(t,e))}function f(t,e){if(d(t,e)){var n=c(t,e);e+5<t.length&&(n=h(t,e));var r=e+n;if(r===t.length||r+1<t.length&&u(t,r))return!0}return!1}function p(t,e,n,a,o){if(!t.samplerate){var l=function(t,e,n,a){var o,l,u,c,h,d=navigator.userAgent.toLowerCase(),f=a,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&e[n+2])>>>6),l=(60&e[n+2])>>>2,!(p.length-1<l))return c=(1&e[n+2])<<2,c|=(192&e[n+3])>>>6,s.logger.log("manifest codec:"+a+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+c),u=/firefox/i.test(d)?6<=l?(o=5,h=new Array(4),l-3):(o=2,h=new Array(2),l):-1!==d.indexOf("android")?(o=2,h=new Array(2),l):(o=5,h=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&6<=l?l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(6<=l&&1==c||/vivaldi/i.test(d))||!a&&1==c)&&(o=2,h=new Array(2)),l)),h[0]=o<<3,h[0]|=(14&l)>>1,h[1]|=(1&l)<<7,h[1]|=c<<3,5===o&&(h[1]|=(14&u)>>1,h[2]=(1&u)<<7,h[2]|=8,h[3]=0),{config:h,samplerate:p[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:f};t.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(e,n,a,o);t.config=l.config,t.samplerate=l.samplerate,t.channelCount=l.channelCount,t.codec=l.codec,t.manifestCodec=l.manifestCodec,s.logger.log("parsed codec:"+t.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function g(t){return 9216e4/t}function m(t,e,n,r,i){var a=function(t,e,n,r,i){var a,o,s=t.length;if(a=c(t,e),o=h(t,e),0<(o-=a)&&e+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+r*i}}(e,n,r,i,g(t.samplerate));if(a){var o=a.stamp,s=a.headerLength,l=a.frameLength,u={unit:e.subarray(n+s,n+s+l),pts:o,dts:o};return t.samples.push(u),{sample:u,length:l+s}}}var v=n("./src/demux/id3.js"),y=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){if(!t)return!1;for(var e=(v.default.getID3Data(t,0)||[]).length,n=t.length;e<n;e++)if(f(t,e))return s.logger.log("ADTS sync word found !"),!0;return!1},e.append=function(t,e,n,r){for(var i=this._audioTrack,a=v.default.getID3Data(t,0)||[],l=v.default.getTimeStamp(a),u=Object(o.isFiniteNumber)(l)?90*l:9e4*e,c=0,h=u,f=t.length,g=a.length,y=[{pts:h,dts:h,data:a}];g<f-1;)if(d(t,g)&&g+5<f){p(i,this.observer,t,g,i.manifestCodec);var b=m(i,t,g,u,c);if(!b){s.logger.log("Unable to parse AAC frame");break}g+=b.length,h=b.sample.pts,c++}else v.default.isHeader(t,g)?(a=v.default.getID3Data(t,g),y.push({pts:h,dts:h,data:a}),g+=a.length):g++;this.remuxer.remux(i,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},e,n,r)},e.destroy=function(){},t}(),b=n("./src/demux/mp4demuxer.js"),_={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,n,r,i){if(!(n+24>e.length)){var a=this.parseHeader(e,n);if(a&&n+a.frameLength<=e.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:e.subarray(n,n+a.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(s),{sample:s,length:a.frameLength}}}},parseHeader:function(t,e){var n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,a=t[e+2]>>2&3,o=t[e+2]>>1&1;if(1!=n&&0!=i&&15!=i&&3!=a){var s=3==n?3-r:3==r?3:4,l=1e3*_.BitratesMap[14*s+i-1],u=3==n?0:2==n?1:2,c=_.SamplingRateMap[3*u+a],h=t[e+3]>>6==3?1:2,d=_.SamplesCoefficients[n][r],f=_.BytesInSlot[r],p=8*d*f;return{sampleRate:c,channelCount:h,frameLength:parseInt(d*l/c+o,10)*f,samplesPerFrame:p}}},isHeaderPattern:function(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])},isHeader:function(t,e){return!!(e+1<t.length&&this.isHeaderPattern(t,e))},probe:function(t,e){if(e+1<t.length&&this.isHeaderPattern(t,e)){var n=this.parseHeader(t,e),r=4;n&&n.frameLength&&(r=n.frameLength);var i=e+r;if(i===t.length||i+1<t.length&&this.isHeaderPattern(t,i))return!0}return!1}},E=_,A=function(){function t(t){this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,n=t.byteLength-e,r=new Uint8Array(4),i=Math.min(4,e);if(0===i)throw new Error("no bytes available");r.set(t.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.skipBits=function(t){var e;this.bitsAvailable>t||(t-=this.bitsAvailable,t-=(e=t>>3)>>3,this.bytesAvailable-=e,this.loadWord()),this.word<<=t,this.bitsAvailable-=t},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return 32<t&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,0<this.bitsAvailable?this.word<<=e:0<this.bytesAvailable&&this.loadWord(),0<(e=t-e)&&this.bitsAvailable?n<<e|this.readBits(e):n},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){var e,n=8,r=8;for(e=0;e<t;e++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e.readSPS=function(){var t,e,n,r,i,a,o,s=0,l=0,u=0,c=0,h=this.readUByte.bind(this),d=this.readBits.bind(this),f=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(h(),t=h(),d(5),g(3),h(),v(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var b=f();if(3===b&&g(1),v(),v(),g(1),p())for(a=3!==b?8:12,o=0;o<a;o++)p()&&y(o<6?16:64)}v();var _=f();if(0===_)f();else if(1===_)for(g(1),m(),m(),e=f(),o=0;o<e;o++)m();v(),g(1),n=f(),r=f(),0===(i=d(1))&&g(1),g(1),p()&&(s=f(),l=f(),u=f(),c=f());var E=[1,1];if(p()&&p())switch(h()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[h()<<8|h(),h()<<8|h()]}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-i)*(r+1)*16-(i?2:4)*(u+c),pixelRatio:E}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),T=function(){function t(t,e,n,r){this.decryptdata=n,this.discardEPB=r,this.decrypter=new a.default(t,e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t,e){this.decrypter.decrypt(t,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,e)},e.decryptAacSample=function(t,e,n,r){var i=t[e].unit,a=i.subarray(16,i.length-i.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,(function(a){a=new Uint8Array(a),i.set(a,16),r||s.decryptAacSamples(t,e+1,n)}))},e.decryptAacSamples=function(t,e,n){for(;;e++){if(e>=t.length)return void n();if(!(t[e].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(t,e,n,r),!r)return}}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,n=new Int8Array(e),r=0,i=32;i<=t.length-16;i+=160,r+=16)n.set(t.subarray(i,i+16),r);return n},e.getAvcDecryptedUnit=function(t,e){e=new Uint8Array(e);for(var n=0,r=32;r<=t.length-16;r+=160,n+=16)t.set(e.subarray(n,n+16),r);return t},e.decryptAvcSample=function(t,e,n,r,i,a){var o=this.discardEPB(i.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,(function(s){i.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(t,e,n+1,r)}))},e.decryptAvcSamples=function(t,e,n,r){for(;;e++,n=0){if(e>=t.length)return void r();for(var i=t[e].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(t,e,n,r,a,o),!o)return}}}},t}(),w={video:1,audio:2,id3:3,text:4},S=function(){function t(t,e,n,r){this.observer=t,this.config=n,this.typeSupported=r,this.remuxer=e,this.sampleAes=null}var e=t.prototype;return e.setDecryptData=function(t){null!=t&&null!=t.key&&"SAMPLE-AES"===t.method?this.sampleAes=new T(this.observer,this.config,t,this.discardEPB):this.sampleAes=null},t.probe=function(e){var n=t._syncOffset(e);return!(n<0)&&(n&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},t._syncOffset=function(t){for(var e=Math.min(1e3,t.length-564),n=0;n<e;){if(71===t[n]&&71===t[n+188]&&71===t[n+376])return n;n++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:w[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===t?0:void 0,isAAC:"audio"===t||void 0,duration:"audio"===t?e:void 0}},e.resetInitSegment=function(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video",i),this._audioTrack=t.createTrack("audio",i),this._id3Track=t.createTrack("id3",i),this._txtTrack=t.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},e.resetTimeStamp=function(){},e.append=function(e,n,a,o){var l,u,c,h,d,f=e.length,p=!1;this.contiguous=a;var g=this.pmtParsed,m=this._avcTrack,v=this._audioTrack,y=this._id3Track,b=m.pid,_=v.pid,E=y.pid,A=this._pmtId,T=m.pesData,w=v.pesData,S=y.pesData,x=this._parsePAT,L=this._parsePMT,M=this._parsePES,k=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this),O=t._syncOffset(e);for(f-=(f+O)%188,l=O;l<f;l+=188)if(71===e[l]){if(u=!!(64&e[l+1]),c=((31&e[l+1])<<8)+e[l+2],1<(48&e[l+3])>>4){if((h=l+5+e[l+4])===l+188)continue}else h=l+4;switch(c){case b:u&&(T&&(d=M(T))&&k(d,!1),T={data:[],size:0}),T&&(T.data.push(e.subarray(h,l+188)),T.size+=l+188-h);break;case _:u&&(w&&(d=M(w))&&(v.isAAC?C(d):R(d)),w={data:[],size:0}),w&&(w.data.push(e.subarray(h,l+188)),w.size+=l+188-h);break;case E:u&&(S&&(d=M(S))&&P(d),S={data:[],size:0}),S&&(S.data.push(e.subarray(h,l+188)),S.size+=l+188-h);break;case 0:u&&(h+=e[h]+1),A=this._pmtId=x(e,h);break;case A:u&&(h+=e[h]+1);var D=L(e,h,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(b=D.avc)&&(m.pid=b),0<(_=D.audio)&&(v.pid=_,v.isAAC=D.isAAC),0<(E=D.id3)&&(y.pid=E),p&&!g&&(s.logger.log("reparse from beginning"),p=!1,l=O-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(d=M(T))?(k(d,!0),m.pesData=null):m.pesData=T,w&&(d=M(w))?(v.isAAC?C(d):R(d),v.pesData=null):(w&&w.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=w),S&&(d=M(S))?(P(d),y.pesData=null):y.pesData=S,null==this.sampleAes?this.remuxer.remux(v,m,y,this._txtTrack,n,a,o):this.decryptAndRemux(v,m,y,this._txtTrack,n,a,o)},e.decryptAndRemux=function(t,e,n,r,i,a,o){if(t.samples&&t.isAAC){var s=this;this.sampleAes.decryptAacSamples(t.samples,0,(function(){s.decryptAndRemuxAvc(t,e,n,r,i,a,o)}))}else this.decryptAndRemuxAvc(t,e,n,r,i,a,o)},e.decryptAndRemuxAvc=function(t,e,n,r,i,a,o){if(e.samples){var s=this;this.sampleAes.decryptAvcSamples(e.samples,0,0,(function(){s.remuxer.remux(t,e,n,r,i,a,o)}))}else this.remuxer.remux(t,e,n,r,i,a,o)},e.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},e._parsePMT=function(t,e,n,r){var i,a,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=e+3+((15&t[e+1])<<8|t[e+2])-4,e+=12+((15&t[e+10])<<8|t[e+11]);e<i;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!r){s.logger.log("unknown stream type:"+t[e]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!r){s.logger.log("unknown stream type:"+t[e]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):s.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:s.logger.warn("HEVC stream type found, not supported for now");break;default:s.logger.log("unknown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return o},e._parsePES=function(t){var e,n,r,i,a,o,l,u,c=0,h=t.data;if(!t||0===t.size)return null;for(;h[0].length<19&&1<h.length;){var d=new Uint8Array(h[0].length+h[1].length);d.set(h[0]),d.set(h[1],h[0].length),h[0]=d,h.splice(1,1)}if(1!==((e=h[0])[0]<<16)+(e[1]<<8)+e[2])return null;if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;if(192&(n=e[7])&&(4294967295<(o=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2)&&(o-=8589934592),64&n?(4294967295<(l=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)&&(l-=8589934592),54e5<o-l&&(s.logger.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l)):l=o),u=(i=e[8])+9,t.size<=u)return null;t.size-=u,a=new Uint8Array(t.size);for(var f=0,p=h.length;f<p;f++){var g=(e=h[f]).byteLength;if(u){if(g<u){u-=g;continue}e=e.subarray(u),g-=u,u=0}a.set(e,c),c+=g}return r&&(r-=i+3),{data:a,pts:o,dts:l,len:r}},e.pushAccesUnit=function(t,e){if(t.units.length&&t.frame){var n=e.samples,r=n.length;if(isNaN(t.pts)){if(!r)return void e.dropped++;var i=n[r-1];t.pts=i.pts,t.dts=i.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(r||this.contiguous)?(t.id=r,n.push(t)):e.dropped++}t.debug.length&&s.logger.log(t.pts+"/"+t.dts+":"+t.debug)},e._parseAVCPES=function(t,e){function n(t,e,n,r){return{key:t,pts:e,dts:n,units:[],debug:r}}var r,i,a,o=this,s=this._avcTrack,l=this._parseAVCNALu(t.data),u=this.avcSample,c=!1,h=this.pushAccesUnit.bind(this);t.data=null,u&&l.length&&!s.audFound&&(h(u,s),u=this.avcSample=n(!1,t.pts,t.dts,"")),l.forEach((function(e){switch(e.type){case 1:i=!0,u||(u=o.avcSample=n(!0,t.pts,t.dts,"")),u.frame=!0;var l=e.data;if(c&&4<l.length){var d=new A(l).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case 5:i=!0,u||(u=o.avcSample=n(!0,t.pts,t.dts,"")),u.key=!0,u.frame=!0;break;case 6:i=!0,(r=new A(o.discardEPB(e.data))).readUByte();for(var f=0,p=0,g=!1,m=0;!g&&1<r.bytesAvailable;){for(f=0;f+=m=r.readUByte(),255===m;);for(p=0;p+=m=r.readUByte(),255===m;);if(4===f&&0!==r.bytesAvailable){if(g=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var y=r.readUByte(),b=31&y,_=[y,r.readUByte()];for(a=0;a<b;a++)_.push(r.readUByte()),_.push(r.readUByte()),_.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:t.pts,bytes:_})}}else if(5===f&&0!==r.bytesAvailable){if(g=!0,16<p){var E=[];for(a=0;a<16;a++)E.push(r.readUByte().toString(16)),3!==a&&5!==a&&7!==a&&9!==a||E.push("-");var T=p-16,w=new Uint8Array(T);for(a=0;a<T;a++)w[a]=r.readUByte();o._insertSampleInOrder(o._txtTrack.samples,{pts:t.pts,payloadType:f,uuid:E.join(""),userDataBytes:w,userData:Object(v.utf8ArrayToStr)(w.buffer)})}}else if(p<r.bytesAvailable)for(a=0;a<p;a++)r.readUByte()}break;case 7:if(c=i=!0,!s.sps){var S=(r=new A(e.data)).readSPS();s.width=S.width,s.height=S.height,s.pixelRatio=S.pixelRatio,s.sps=[e.data],s.duration=o._duration;var x=e.data.subarray(1,4),L="avc1.";for(a=0;a<3;a++){var M=x[a].toString(16);M.length<2&&(M="0"+M),L+=M}s.codec=L}break;case 8:i=!0,s.pps||(s.pps=[e.data]);break;case 9:i=!1,s.audFound=!0,u&&h(u,s),u=o.avcSample=n(!1,t.pts,t.dts,"");break;case 12:i=!1;break;default:i=!1,u&&(u.debug+="unknown NAL "+e.type+" ")}u&&i&&u.units.push(e)})),e&&u&&(h(u,s),this.avcSample=null)},e._insertSampleInOrder=function(t,e){var n=t.length;if(0<n){if(e.pts>=t[n-1].pts)t.push(e);else for(var r=n-1;0<=r;r--)if(e.pts<t[r].pts){t.splice(r,0,e);break}}else t.push(e)},e._getLastNalUnit=function(){var t,e=this.avcSample;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},e._parseAVCNALu=function(t){var e,n,r,i,a=0,o=t.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],h=-1;for(-1===l&&(i=31&t[h=0],l=0,a=1);a<o;)if(e=t[a++],l)if(1!==l)if(e)if(1===e){if(0<=h)r={data:t.subarray(h,a-l-1),type:i},c.push(r);else{var d=this._getLastNalUnit();if(d&&(u&&a<=4-u&&d.state&&(d.data=d.data.subarray(0,d.data.byteLength-u)),0<(n=a-l-1))){var f=new Uint8Array(d.data.byteLength+n);f.set(d.data,0),f.set(t.subarray(0,n),d.data.byteLength),d.data=f}}l=a<o?(i=31&t[h=a],0):-1}else l=0;else l=3;else l=e?0:2;else l=e?0:1;if(0<=h&&0<=l&&(r={data:t.subarray(h,o),type:i,state:l},c.push(r)),0===c.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+t.byteLength);g.set(p.data,0),g.set(t,p.data.byteLength),p.data=g}}return s.naluState=l,c},e.discardEPB=function(t){for(var e,n,r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=t[o];return n},e._parseAACPES=function(t){var e,n,a,o,l,u,c,h=this._audioTrack,f=t.data,v=t.pts,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var _=new Uint8Array(y.byteLength+f.byteLength);_.set(y,0),_.set(f,y.byteLength),f=_}for(a=0,l=f.length;a<l-1&&!d(f,a);a++);if(!a||(c=a<l-1?(u="AAC PES did not start with ADTS header,offset:"+a,!1):(u="no ADTS header found in AAC PES",!0),s.logger.warn("parsing error:"+u),this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:u}),!c)){if(p(h,this.observer,f,a,this.audioCodec),n=0,e=g(h.samplerate),y&&b){var E=b+e;1<Math.abs(E-v)&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((E-v)/90)),v=E)}for(;a<l;){if(d(f,a)){if(a+5<l){var A=m(h,f,a,v,n);if(A){a+=A.length,o=A.sample.pts,n++;continue}}break}a++}y=a<l?f.subarray(a,l):null,this.aacOverFlow=y,this.aacLastPTS=o}},e._parseMPEGPES=function(t){for(var e=t.data,n=e.length,r=0,i=0,a=t.pts;i<n;)if(E.isHeader(e,i)){var o=E.appendFrame(this._audioTrack,e,i,a,r);if(!o)break;i+=o.length,r++}else i++},e._parseID3PES=function(t){this._id3Track.samples.push(t)},t}(),x=function(){function t(t,e,n){this.observer=t,this.config=n,this.remuxer=e}var e=t.prototype;return e.resetInitSegment=function(t,e,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:e,duration:r,inputTimeScale:9e4}},e.resetTimeStamp=function(){},t.probe=function(t){var e,n,r=v.default.getID3Data(t,0);if(r&&void 0!==v.default.getTimeStamp(r))for(e=r.length,n=Math.min(t.length-1,e+100);e<n;e++)if(E.probe(t,e))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},e.append=function(t,e,n,r){for(var i=v.default.getID3Data(t,0),a=v.default.getTimeStamp(i),o=a?90*a:9e4*e,s=i.length,l=t.length,u=0,c=0,h=this._audioTrack,d=[{pts:o,dts:o,data:i}];s<l;)if(E.isHeader(t,s)){var f=E.appendFrame(h,t,s,o,u);if(!f)break;s+=f.length,c=f.sample.pts,u++}else v.default.isHeader(t,s)?(i=v.default.getID3Data(t,s),d.push({pts:c,dts:c,data:i}),s+=i.length):s++;this.remuxer.remux(h,{samples:[]},{samples:d,inputTimeScale:9e4},{samples:[]},e,n,r)},e.destroy=function(){},t}(),L=function(){function t(){}return t.getSilentFrame=function(t,e){switch(t){case"mp4a.40.2":if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},t}(),M=Math.pow(2,32)-1,k=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]})t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,l,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))},t.box=function(t){for(var e,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for((e=new Uint8Array(r))[0]=r>>24&255,e[1]=r>>16&255,e[2]=r>>8&255,e[3]=255&r,e.set(t,4),i=0,r=8;i<a;i++)e.set(n[i],r),r+=n[i].byteLength;return e},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,n){n*=e;var r=Math.floor(n/(1+M)),i=Math.floor(n%(1+M));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))},t.moov=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))},t.mvex=function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))},t.mvhd=function(e,n){n*=e;var r=Math.floor(n/(1+M)),i=Math.floor(n%(1+M)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24,r>>16&255,r>>8&255,255&r,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var n,r,i,a=[],o=[];for(n=0;n<e.sps.length;n++)i=(r=e.sps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)i=(r=e.pps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),l=e.width,u=e.height,c=e.pixelRatio[0],h=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,h>>24,h>>16&255,h>>8&255,255&h])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var n=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var n=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},t.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var n=e.id,r=e.duration*e.timescale,i=e.width,a=e.height,o=Math.floor(r/(1+M)),s=Math.floor(r%(1+M));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,n){var r=t.sdtp(e),i=e.id,a=Math.floor(n/(1+M)),o=Math.floor(n%(1+M));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),t.trun(e,r.length+16+20+8+16+8+8),r)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,n){var r,i,a,o,s,l,u=e.samples||[],c=u.length,h=12+16*c,d=new Uint8Array(h);for(n+=8+h,d.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)a=(i=u[r]).duration,o=i.size,s=i.flags,l=i.cts,d.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return t.box(t.types.trun,d)},t.initSegment=function(e){t.types||t.init();var n,r=t.moov(e);return(n=new Uint8Array(t.FTYP.byteLength+r.byteLength)).set(t.FTYP),n.set(r,t.FTYP.byteLength),n},t}();function C(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=t*e*n;return r?Math.round(i):i}function R(t,e){return void 0===e&&(e=!1),C(t,1e3,1/9e4,e)}function P(t,e){return void 0===e&&(e=1),C(t,9e4,1/e)}var O,D=P(10),I=P(.2),N=function(){function t(t,e,n,r){this.observer=t,this.config=e,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&-1<r.indexOf("Apple")&&i&&!i.match("CriOS"),this.ISGenerated=!1}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},e.resetInitSegment=function(){this.ISGenerated=!1},e.remux=function(t,e,n,i,a,o,l){if(this.ISGenerated||this.generateIS(t,e,a),this.ISGenerated){var u=t.samples.length,c=e.samples.length,h=a,d=a;if(u&&c){var f=(t.samples[0].pts-e.samples[0].pts)/e.inputTimeScale;h+=Math.max(0,f),d+=Math.max(0,-f)}if(u){t.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,a));var p,g=this.remuxAudio(t,h,o,l);c&&(g&&(p=g.endPTS-g.startPTS),e.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,a)),this.remuxVideo(e,d,o,p,l))}else if(c){var m=this.remuxVideo(e,d,o,0,l);m&&t.codec&&this.remuxEmptyAudio(t,h,o,m)}}n.samples.length&&this.remuxID3(n,a),i.samples.length&&this.remuxText(i,a),this.observer.trigger(r.default.FRAG_PARSED)},e.generateIS=function(t,e,n){var a,o,l=this.observer,u=t.samples,c=e.samples,h=this.typeSupported,d="audio/mp4",f={},p={tracks:f},g=void 0===this._initPTS;if(g&&(a=o=1/0),t.config&&u.length&&(t.timescale=t.samplerate,s.logger.log("audio sampling rate : "+t.samplerate),t.isAAC||(h.mpeg?(d="audio/mpeg",t.codec=""):h.mp3&&(t.codec="mp3")),f.audio={container:d,codec:t.codec,initSegment:!t.isAAC&&h.mpeg?new Uint8Array:k.initSegment([t]),metadata:{channelCount:t.channelCount}},g&&(a=o=u[0].pts-t.inputTimeScale*n)),e.sps&&e.pps&&c.length){var m=e.inputTimeScale;e.timescale=m,f.video={container:"video/mp4",codec:e.codec,initSegment:k.initSegment([e]),metadata:{width:e.width,height:e.height}},g&&(a=Math.min(a,c[0].pts-m*n),o=Math.min(o,c[0].dts-m*n),this.observer.trigger(r.default.INIT_PTS_FOUND,{initPTS:a}))}Object.keys(f).length?(l.trigger(r.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=a,this._initDTS=o)):l.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.remuxVideo=function(t,e,n,a,o){var l,u,c,h,d,f,p,g=8,m=t.timescale,v=t.samples,y=[],b=v.length,_=this._PTSNormalize,E=this._initPTS,A=this.nextAvcDts,T=this.isSafari;if(0!==b){T&&(n|=v.length&&A&&(o&&Math.abs(e-A/m)<.1||Math.abs(v[0].pts-A-E)<m/5)),n||(A=e*m),v.forEach((function(t){t.pts=_(t.pts-E,A),t.dts=_(t.dts-E,A)})),v.sort((function(t,e){var n=t.dts-e.dts,r=t.pts-e.pts;return n||r||t.id-e.id}));var w=v.reduce((function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-1*I)}),0);if(w<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+R(w,!0)+" ms to overcome this issue");for(var S=0;S<v.length;S++)v[S].dts+=w}var x=v[0];d=Math.max(x.dts,0),h=Math.max(x.pts,0);var L=d-A;n&&L&&(1<L?s.logger.log("AVC: "+R(L,!0)+" ms hole between fragments detected,filling it"):L<-1&&s.logger.log("AVC: "+R(-L,!0)+" ms overlapping between fragments detected"),d=A,v[0].dts=d,h=Math.max(h-L,A),v[0].pts=h,s.logger.log("Video: PTS/DTS adjusted: "+R(h,!0)+"/"+R(d,!0)+", delta: "+R(L,!0)+" ms")),x=v[v.length-1],p=Math.max(x.dts,0),f=Math.max(x.pts,0,p),T&&(l=Math.round((p-d)/(v.length-1)));for(var M=0,C=0,P=0;P<b;P++){for(var O=v[P],D=O.units,N=D.length,F=0,B=0;B<N;B++)F+=D[B].data.length;C+=F,M+=N,O.length=F,O.dts=T?d+P*l:Math.max(O.dts,d),O.pts=Math.max(O.pts,O.dts)}var U=C+4*M+8;try{u=new Uint8Array(U)}catch(t){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating video mdat "+U})}var j=new DataView(u.buffer);j.setUint32(0,U),u.set(k.types.mdat,4);for(var V=0;V<b;V++){for(var G=v[V],z=G.units,Y=0,H=void 0,$=0,W=z.length;$<W;$++){var K=z[$],X=K.data,q=K.data.byteLength;j.setUint32(g,q),g+=4,u.set(X,g),g+=q,Y+=4+q}if(T)H=Math.max(0,l*Math.round((G.pts-G.dts)/l));else{if(V<b-1)l=v[V+1].dts-G.dts;else{var Z=this.config,J=G.dts-v[0<V?V-1:V].dts;if(Z.stretchShortVideoTrack){var Q=Z.maxBufferHole,tt=Math.floor(Q*m),et=(a?h+a*m:this.nextAudioPts)-G.pts;tt<et?((l=et-J)<0&&(l=J),s.logger.log("It is approximately "+R(et,!1)+" ms to the next segment; using duration "+R(l,!1)+" ms for the last video frame.")):l=J}else l=J}H=Math.round(G.pts-G.dts)}y.push({size:Y,duration:l,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=p+l;var nt=t.dropped;if(t.nbNalu=0,t.dropped=0,y.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var rt=y[0].flags;rt.dependsOn=2,rt.isNonSync=0}t.samples=y,c=k.moof(t.sequenceNumber++,d,t),t.samples=[];var it={data1:c,data2:u,startPTS:h/m,endPTS:(f+l)/m,startDTS:d/m,endDTS:this.nextAvcDts/m,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:nt};return this.observer.trigger(r.default.FRAG_PARSING_DATA,it),it}},e.remuxAudio=function(t,e,n,a){var o,l,u,c,h,d,f=t.inputTimeScale,p=t.timescale,g=f/p,m=(t.isAAC?1024:1152)*g,v=this._PTSNormalize,y=this._initPTS,b=!t.isAAC&&this.typeSupported.mpeg,_=b?0:8,E=t.samples,A=[],T=this.nextAudioPts;if(n|=E.length&&T&&(a&&Math.abs(e-T/f)<.1||Math.abs(E[0].pts-T-y)<20*m),E.forEach((function(t){t.pts=t.dts=v(t.pts-y,e*f)})),0!==(E=E.filter((function(t){return 0<=t.pts}))).length){if(n||(T=a?e*f:E[0].pts),t.isAAC)for(var w=this.config.maxAudioFramesDrift,S=0,x=T;S<E.length;){var M,C=E[S];if((M=C.pts-x)<=-w*m)s.logger.warn("Dropping 1 audio frame @ "+R(x,!0)+" ms due to "+R(M,!0)+" ms overlap."),E.splice(S,1);else if(w*m<=M&&M<D&&x){var P=Math.round(M/m);s.logger.warn("Injecting "+P+" audio frames @ "+R(x,!0)+" ms due to "+R(x,!0)+" ms gap.");for(var O=0;O<P;O++){var I=Math.max(x,0);(l=L.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=C.unit.subarray()),E.splice(S,0,{unit:l,pts:I,dts:I}),x+=m,S++}C.pts=C.dts=x,x+=m,S++}else Math.abs(M),C.pts=C.dts=x,x+=m,S++}for(var N=E.length,F=0;N--;)F+=E[N].unit.byteLength;for(var B=0,U=E.length;B<U;B++){var j=E[B],V=j.unit,G=j.pts;if(void 0!==d)o.duration=Math.round((G-d)/g);else{var z=G-T,Y=0;if(n&&t.isAAC&&z){if(0<z&&z<D)Y=Math.round((G-T)/m),s.logger.log(R(z,!0)+" ms hole between AAC samples detected,filling it"),0<Y&&((l=L.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(l=V.subarray()),F+=Y*l.length);else if(z<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+R(T,!0)+" ms / "+R(G,!0)+" ms / "+R(-z,!0)+" ms"),F-=V.byteLength;continue}G=T}if(h=G,!(0<F))return;F+=_;try{u=new Uint8Array(F)}catch(t){return void this.observer.trigger(r.default.ERROR,{type:i.ErrorTypes.MUX_ERROR,details:i.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}b||(new DataView(u.buffer).setUint32(0,F),u.set(k.types.mdat,4));for(var H=0;H<Y;H++)(l=L.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=V.subarray()),u.set(l,_),_+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(o)}u.set(V,_);var $=V.byteLength;_+=$,o={size:$,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(o),d=G}var W=0;if(2<=(N=A.length)&&(W=A[N-2].duration,o.duration=W),N){this.nextAudioPts=T=d+g*W,t.samples=A,c=b?new Uint8Array:k.moof(t.sequenceNumber++,h/g,t),t.samples=[];var K=h/f,X=T/f,q={data1:c,data2:u,startPTS:K,endPTS:X,startDTS:K,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:N};return this.observer.trigger(r.default.FRAG_PARSING_DATA,q),q}return null}},e.remuxEmptyAudio=function(t,e,n,r){var i=t.inputTimeScale,a=i/(t.samplerate?t.samplerate:i),o=this.nextAudioPts,l=(void 0!==o?o:r.startDTS*i)+this._initDTS,u=r.endDTS*i+this._initDTS,c=1024*a,h=Math.ceil((u-l)/c),d=L.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(s.logger.warn("remux empty Audio"),d){for(var f=[],p=0;p<h;p++){var g=l+p*c;f.push({unit:d,pts:g,dts:g})}t.samples=f,this.remuxAudio(t,e,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.remuxID3=function(t){var e,n=t.samples.length,i=t.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(e=t.samples[s]).pts=(e.pts-a)/i,e.dts=(e.dts-o)/i;this.observer.trigger(r.default.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},e.remuxText=function(t){t.samples.sort((function(t,e){return t.pts-e.pts}));var e,n=t.samples.length,i=t.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(e=t.samples[o]).pts=(e.pts-a)/i;this.observer.trigger(r.default.FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[]},e._PTSNormalize=function(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;4294967296<Math.abs(t-e);)t+=n;return t},t}(),F=function(){function t(t){this.observer=t}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(){},e.resetInitSegment=function(){},e.remux=function(t,e,n,i,a,o,s,l){var u=this.observer,c="";t&&(c+="audio"),e&&(c+="video"),u.trigger(r.default.FRAG_PARSING_DATA,{data1:l,startPTS:a,startDTS:a,type:c,hasAudio:!!t,hasVideo:!!e,nb:1,dropped:0}),u.trigger(r.default.FRAG_PARSED)},t}(),B=Object(l.getSelfScope)();try{O=B.performance.now.bind(B.performance)}catch(t){s.logger.debug("Unable to use Performance API on this environment"),O=B.Date.now}var U=function(){function t(t,e,n,r){this.observer=t,this.typeSupported=e,this.config=n,this.vendor=r}var e=t.prototype;return e.destroy=function(){var t=this.demuxer;t&&t.destroy()},e.push=function(t,e,n,i,o,s,l,u,c,h,d,f){var p=this;if(0<t.byteLength&&null!=e&&null!=e.key&&"AES-128"===e.method){var g=this.decrypter;null==g&&(g=this.decrypter=new a.default(this.observer,this.config));var m=O();g.decrypt(t,e.key.buffer,e.iv.buffer,(function(t){var a=O();p.observer.trigger(r.default.FRAG_DECRYPTED,{stats:{tstart:m,tdecrypt:a}}),p.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,o,s,l,u,c,h,d,f)}))}else this.pushDecrypted(new Uint8Array(t),e,new Uint8Array(n),i,o,s,l,u,c,h,d,f)},e.pushDecrypted=function(t,e,n,a,o,s,l,u,c,h,d,f){var p=this.demuxer;if(!p||(l||u)&&!this.probe(t)){for(var g=this.observer,m=this.typeSupported,v=this.config,_=[{demux:S,remux:N},{demux:b.default,remux:F},{demux:y,remux:N},{demux:x,remux:N}],E=0,A=_.length;E<A;E++){var T=_[E],w=T.demux.probe;if(w(t)){var L=this.remuxer=new T.remux(g,v,m,this.vendor);p=new T.demux(g,L,v,m),this.probe=w;break}}if(!p)return void g.trigger(r.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var M=this.remuxer;(l||u)&&(p.resetInitSegment(n,a,o,h),M.resetInitSegment()),l&&(p.resetTimeStamp(f),M.resetTimeStamp(f)),"function"==typeof p.setDecryptData&&p.setDecryptData(e),p.append(t,s,c,d)},t}();e.default=U},"./src/demux/demuxer-worker.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/demux/demuxer-inline.js"),i=n("./src/events.js"),a=n("./src/utils/logger.js"),o=n("./node_modules/eventemitter3/index.js");e.default=function(t){var e=new o.EventEmitter;function n(e,n){t.postMessage({event:e,data:n})}e.trigger=function(t){for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(r))},e.off=function(t){for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(r))},t.addEventListener("message",(function(i){var o=i.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);t.demuxer=new r.default(e,o.typeSupported,s,o.vendor),Object(a.enableLogs)(s.debug),n("init",null);break;case"demux":t.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}})),e.on(i.default.FRAG_DECRYPTED,n),e.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),e.on(i.default.FRAG_PARSED,n),e.on(i.default.ERROR,n),e.on(i.default.FRAG_PARSING_METADATA,n),e.on(i.default.FRAG_PARSING_USERDATA,n),e.on(i.default.INIT_PTS_FOUND,n),e.on(i.default.FRAG_PARSING_DATA,(function(e,n){var r=[],i={event:e,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),t.postMessage(i,r)}))}},"./src/demux/id3.js":function(t,e,n){"use strict";n.r(e),n.d(e,"utf8ArrayToStr",(function(){return o}));var r,i=n("./src/utils/get-self-scope.js"),a=function(){function t(){}return t.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.isFooter=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},t.getID3Data=function(e,n){for(var r=n,i=0;t.isHeader(e,n);)i+=10,i+=t._readSize(e,n+6),t.isFooter(e,n+10)&&(i+=10),n+=i;if(0<i)return e.subarray(r,r+i)},t._readSize=function(t,e){var n=0;return n=(127&t[e])<<21,n|=(127&t[e+1])<<14,n|=(127&t[e+2])<<7,n|127&t[e+3]},t.getTimeStamp=function(e){for(var n=t.getID3Frames(e),r=0;r<n.length;r++){var i=n[r];if(t.isTimeStampFrame(i))return t._readTimeStamp(i)}},t.isTimeStampFrame=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},t._getFrameData=function(e){var n=String.fromCharCode(e[0],e[1],e[2],e[3]),r=t._readSize(e,4);return{type:n,size:r,data:e.subarray(10,10+r)}},t.getID3Frames=function(e){for(var n=0,r=[];t.isHeader(e,n);){for(var i=t._readSize(e,n+6),a=(n+=10)+i;n+8<a;){var o=t._getFrameData(e.subarray(n)),s=t._decodeFrame(o);s&&r.push(s),n+=o.size+10}t.isFooter(e,n)&&(n+=10)}return r},t._decodeFrame=function(e){return"PRIV"===e.type?t._decodePrivFrame(e):"T"===e.type[0]?t._decodeTextFrame(e):"W"===e.type[0]?t._decodeURLFrame(e):void 0},t._readTimeStamp=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),n=1&e[3],r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},t._decodePrivFrame=function(e){if(!(e.size<2)){var n=t._utf8ArrayToStr(e.data,!0),r=new Uint8Array(e.data.subarray(n.length+1));return{key:e.type,info:n,data:r.buffer}}},t._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var n=1,r=t._utf8ArrayToStr(e.data.subarray(n),!0);n+=r.length+1;var i=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:r,data:i}}var a=t._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:a}}},t._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var n=1,r=t._utf8ArrayToStr(e.data.subarray(n));n+=r.length+1;var i=t._utf8ArrayToStr(e.data.subarray(n));return{key:e.type,info:r,data:i}}var a=t._utf8ArrayToStr(e.data);return{key:e.type,data:a}},t._utf8ArrayToStr=function(t,e){void 0===e&&(e=!1);var n=function(){var t=Object(i.getSelfScope)();return r||void 0===t.TextDecoder||(r=new t.TextDecoder("utf-8")),r}();if(n){var a=n.decode(t);if(e){var o=a.indexOf("\0");return-1!==o?a.substring(0,o):a}return a.replace(/\0/g,"")}for(var s,l,u,c=t.length,h="",d=0;d<c;){if(0===(s=t[d++])&&e)return h;if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:h+=String.fromCharCode(s);break;case 12:case 13:l=t[d++],h+=String.fromCharCode((31&s)<<6|63&l);break;case 14:l=t[d++],u=t[d++],h+=String.fromCharCode((15&s)<<12|(63&l)<<6|(63&u)<<0)}}return h},t}(),o=a._utf8ArrayToStr;e.default=a},"./src/demux/mp4demuxer.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/utils/logger.js"),i=n("./src/events.js"),a=Math.pow(2,32)-1,o=function(){function t(t,e){this.observer=t,this.remuxer=e}var e=t.prototype;return e.resetTimeStamp=function(t){this.initPTS=t},e.resetInitSegment=function(e,n,r,a){if(e&&e.byteLength){var o=this.initData=t.parseInitSegment(e);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:a?e:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:a?e:null}),o.video&&(s.video={container:"video/mp4",codec:r,initSegment:a?e:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},t.probe=function(e){return 0<t.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},t.bin2str=function(t){return String.fromCharCode.apply(null,t)},t.readUint16=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<8|t[e+1];return n<0?65536+n:n},t.readUint32=function(t,e){t.data&&(e+=t.start,t=t.data);var n=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];return n<0?4294967296+n:n},t.writeUint32=function(t,e,n){t.data&&(e+=t.start,t=t.data),t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n},t.findBox=function(e,n){var r,i,a,o,s,l,u=[];if(e.data?(s=e.start,a=e.end,e=e.data):(s=0,a=e.byteLength),!n.length)return null;for(r=s;r<a;)l=1<(i=t.readUint32(e,r))?r+i:a,t.bin2str(e.subarray(r+4,r+8))===n[0]&&(1===n.length?u.push({data:e,start:r+8,end:l}):(o=t.findBox({data:e,start:r+8,end:l},n.slice(1))).length&&(u=u.concat(o))),r=l;return u},t.parseSegmentIndex=function(e){var n,r=t.findBox(e,["moov"])[0],i=r?r.end:null,a=0,o=t.findBox(e,["sidx"]);if(!o||!o[0])return null;n=[];var s=(o=o[0]).data[0],l=t.readUint32(o,a=0===s?8:16);a+=4,a+=0===s?8:16,a+=2;var u=o.end+0,c=t.readUint16(o,a);a+=2;for(var h=0;h<c;h++){var d=a,f=t.readUint32(o,d);d+=4;var p=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=t.readUint32(o,d);d+=4,n.push({referenceSize:p,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+p-1}}),u+=p,a=d+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:n,moovEndOffset:i}},t.parseInitSegment=function(e){var n=[];return t.findBox(e,["moov","trak"]).forEach((function(e){var i=t.findBox(e,["tkhd"])[0];if(i){var a=i.data[i.start],o=0===a?12:20,s=t.readUint32(i,o),l=t.findBox(e,["mdia","mdhd"])[0];if(l){a=l.data[l.start];var u=t.readUint32(l,o=0===a?12:20),c=t.findBox(e,["mdia","hdlr"])[0];if(c){var h={soun:"audio",vide:"video"}[t.bin2str(c.data.subarray(c.start+8,c.start+12))];if(h){var d=t.findBox(e,["mdia","minf","stbl","stsd"]);if(d.length){d=d[0];var f=t.bin2str(d.data.subarray(d.start+12,d.start+16));r.logger.log("MP4Demuxer:"+h+":"+f+" found")}n[s]={timescale:u,type:h},n[h]={timescale:u,id:s}}}}}})),n},t.getStartDTS=function(e,n){var r,i,a;return r=t.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map((function(n){return t.findBox(n,["tfhd"]).map((function(r){var i,a;return i=t.readUint32(r,4),a=e[i].timescale||9e4,t.findBox(n,["tfdt"]).map((function(e){var n,r;return n=e.data[e.start],r=t.readUint32(e,4),1===n&&(r*=Math.pow(2,32),r+=t.readUint32(e,8)),r}))[0]/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},t.offsetStartDTS=function(e,n,r){t.findBox(n,["moof","traf"]).map((function(n){return t.findBox(n,["tfhd"]).map((function(i){var o=t.readUint32(i,4),s=e[o].timescale||9e4;t.findBox(n,["tfdt"]).map((function(e){var n=e.data[e.start],i=t.readUint32(e,4);if(0===n)t.writeUint32(e,4,i-r*s);else{i*=Math.pow(2,32),i+=t.readUint32(e,8),i-=r*s,i=Math.max(i,0);var o=Math.floor(i/(1+a)),l=Math.floor(i%(1+a));t.writeUint32(e,4,o),t.writeUint32(e,8,l)}}))}))}))},e.append=function(e,n,r,a){var o=this.initData;o||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=t.getStartDTS(o,e);this.initPTS=l=u-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}t.offsetStartDTS(o,e,l),s=t.getStartDTS(o,e),this.remuxer.remux(o.audio,o.video,null,null,s,r,a,e)},e.destroy=function(){},t}();e.default=o},"./src/errors.ts":function(t,e,n){"use strict";var r,i,a,o;n.r(e),n.d(e,"ErrorTypes",(function(){return r})),n.d(e,"ErrorDetails",(function(){return a})),(i=r||(r={})).NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",(o=a||(a={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",o.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",o.KEY_SYSTEM_NO_SESSION="keySystemNoSession",o.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",o.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",o.MANIFEST_LOAD_ERROR="manifestLoadError",o.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",o.MANIFEST_PARSING_ERROR="manifestParsingError",o.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",o.LEVEL_LOAD_ERROR="levelLoadError",o.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",o.LEVEL_SWITCH_ERROR="levelSwitchError",o.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",o.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",o.FRAG_LOAD_ERROR="fragLoadError",o.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",o.FRAG_DECRYPT_ERROR="fragDecryptError",o.FRAG_PARSING_ERROR="fragParsingError",o.REMUX_ALLOC_ERROR="remuxAllocError",o.KEY_LOAD_ERROR="keyLoadError",o.KEY_LOAD_TIMEOUT="keyLoadTimeOut",o.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",o.BUFFER_APPEND_ERROR="bufferAppendError",o.BUFFER_APPENDING_ERROR="bufferAppendingError",o.BUFFER_STALLED_ERROR="bufferStalledError",o.BUFFER_FULL_ERROR="bufferFullError",o.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",o.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",o.INTERNAL_EXCEPTION="internalException"},"./src/events.js":function(t,e,n){"use strict";n.r(e),e.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"newCue",(function(){return ve}));var i,a,o,s,l=n("./node_modules/url-toolkit/src/url-toolkit.js"),u=n("./src/errors.ts"),c=n("./src/polyfills/number-isFinite.js"),h=n("./src/events.js"),d=n("./src/utils/logger.js"),f={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},p=function(){function t(t){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=t,this.onEvent=this.onEvent.bind(this);for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){},e.onHandlerDestroyed=function(){},e.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){if(f[t])throw new Error("Forbidden event-name: "+t);this.hls.on(t,this.onEvent)}),this)},e.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach((function(t){this.hls.off(t,this.onEvent)}),this)},e.onEvent=function(t,e){this.onEventGeneric(t,e)},e.onEventGeneric=function(t,e){try{(function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)}).call(this,t,e).call()}catch(e){d.logger.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},t}();(a=i||(i={})).MANIFEST="manifest",a.LEVEL="level",a.AUDIO_TRACK="audioTrack",a.SUBTITLE_TRACK="subtitleTrack",(s=o||(o={})).MAIN="main",s.AUDIO="audio",s.SUBTITLE="subtitle";var g=n("./src/demux/mp4demuxer.js");function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v,y,b=function(){function t(t,e){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=t,this.reluri=e}return function(t,e,n){e&&m(t.prototype,e),n&&m(t,n)}(t,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(l.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),t}();function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(y=v||(v={})).AUDIO="audio",y.VIDEO="video";var E=function(){function t(){var t;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((t={})[v.AUDIO]=!1,t[v.VIDEO]=!1,t),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var e=t.prototype;return e.setByteRange=function(t,e){var n=t.split("@",2),r=[];1===n.length?r[0]=e?e.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},e.addElementaryStream=function(t){this._elementaryStreams[t]=!0},e.hasElementaryStream=function(t){return!0===this._elementaryStreams[t]},e.createInitializationVector=function(t){for(var e=new Uint8Array(16),n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e},e.setDecryptDataFromLevelKey=function(t,e){var n=t;return t&&t.method&&t.uri&&!t.iv&&((n=new b(t.baseuri,t.reluri)).method=t.method,n.iv=this.createInitializationVector(e)),n},function(t,e,n){e&&_(t.prototype,e),n&&_(t,n)}(t,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(l.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(t){this._url=t}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var t=this.sn;"number"!=typeof t&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&d.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),t=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,t)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(c.isFiniteNumber)(this.programDateTime))return null;var t=Object(c.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}]),t}();function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var T=function(){function t(t){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=t,this.version=null}return function(t,e,n){e&&A(t.prototype,e),n&&A(t,n)}(t,[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(c.isFiniteNumber)(this.fragments[0].programDateTime))}}]),t}(),w=/^(\d+)x(\d+)$/,S=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,x=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)n[r]=parseInt(e.slice(2*r,2*r+2),16);return n}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.enumeratedString=function(t){return this[t]},e.decimalResolution=function(t){var e=w.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,n={};for(S.lastIndex=0;null!==(e=S.exec(t));){var r=e[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[e[1]]=r}return n},t}(),L={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function M(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var k=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,C=/#EXT-X-MEDIA:(.*)/g,R=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),P=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,O=/\.(mp4|m4s|m4v|m4a)$/i,D=function(){function t(){}return t.findGroup=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.id===e)return r}},t.convertAVC1ToAVCOTI=function(t){var e,n=t.split(".");return 2<n.length?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e},t.resolve=function(t,e){return l.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[];function a(t,e){["video","audio"].forEach((function(n){var r=t.filter((function(t){return function(t,e){var n=L[e];return!!n&&!0===n[t.slice(0,4)]}(t,n)}));if(r.length){var i=r.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[n+"Codec"]=0<i.length?i[0]:r[0],t=t.filter((function(t){return-1===r.indexOf(t)}))}})),e.unknownCodecs=t}for(k.lastIndex=0;null!=(r=k.exec(e));){var o={},s=o.attrs=new x(r[1]);o.url=t.resolve(r[2],n);var l=s.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,a([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=t.convertAVC1ToAVCOTI(o.videoCodec)),i.push(o)}return i},t.parseMasterPlaylistMedia=function(e,n,r,i){var a;void 0===i&&(i=[]);var o=[],s=0;for(C.lastIndex=0;null!==(a=C.exec(e));){var l=new x(a[1]);if(l.TYPE===r){var u={id:s++,groupId:l["GROUP-ID"],name:l.NAME||l.LANGUAGE,type:r,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=t.resolve(l.URI,n)),i.length){var c=t.findGroup(i,u.groupId);u.audioCodec=c?c.codec:i[0].codec}o.push(u)}}return o},t.parseLevelPlaylist=function(t,e,n,r,i){var a,o,s,l=0,u=0,h=new T(e),f=0,p=null,g=new E,m=null;for(R.lastIndex=0;null!==(a=R.exec(t));){var v=a[1];if(v){g.duration=parseFloat(v);var y=(" "+a[2]).slice(1);g.title=y||null,g.tagList.push(y?["INF",v,y]:["INF",v])}else if(a[3]){if(Object(c.isFiniteNumber)(g.duration)){var _=l++;g.type=r,g.start=u,s&&(g.levelkey=s),g.sn=_,g.level=n,g.cc=f,g.urlId=i,g.baseurl=e,g.relurl=(" "+a[3]).slice(1),I(g,p),h.fragments.push(g),u+=(p=g).duration,g=new E}}else if(a[4]){var A=(" "+a[4]).slice(1);p?g.setByteRange(A,p):g.setByteRange(A)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),null===m&&(m=h.fragments.length);else{if(!(a=a[0].match(P))){d.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var w=(" "+a[o+1]).slice(1),S=(" "+a[o+2]).slice(1);switch(a[o]){case"#":g.tagList.push(S?[w,S]:[w]);break;case"PLAYLIST-TYPE":h.type=w.toUpperCase();break;case"MEDIA-SEQUENCE":l=h.startSN=parseInt(w);break;case"TARGETDURATION":h.targetduration=parseFloat(w);break;case"VERSION":h.version=parseInt(w);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"DIS":f++,g.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":f=parseInt(w);break;case"KEY":var L=new x(w),M=L.enumeratedString("METHOD"),k=L.URI,C=L.hexadecimalInteger("IV");M&&(s=new b(e,k),k&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)&&(s.method=M,s.key=null,s.iv=C));break;case"START":var D=new x(w).decimalFloatingPoint("TIME-OFFSET");Object(c.isFiniteNumber)(D)&&(h.startTimeOffset=D);break;case"MAP":var N=new x(w);g.relurl=N.URI,N.BYTERANGE&&g.setByteRange(N.BYTERANGE),g.baseurl=e,g.level=n,g.type=r,g.sn="initSegment",h.initSegment=g,(g=new E).rawProgramDateTime=h.initSegment.rawProgramDateTime;break;default:d.logger.warn("line parsed but not handled: "+a)}}}return(g=p)&&!g.relurl&&(h.fragments.pop(),u-=g.duration),h.totalduration=u,h.averagetargetduration=u/h.fragments.length,h.endSN=l-1,h.startCC=h.fragments[0]?h.fragments[0].cc:0,h.endCC=f,!h.initSegment&&h.fragments.length&&h.fragments.every((function(t){return O.test(t.relurl)}))&&(d.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new E).relurl=h.fragments[0].relurl,g.baseurl=e,g.level=n,g.type=r,g.sn="initSegment",h.initSegment=g,h.needSidxRanges=!0),m&&function(t,e){for(var n=t[e],r=e-1;0<=r;r--){var i=t[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(h.fragments,m),h},t}();function I(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Object(c.isFiniteNumber)(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}var N=window.performance,F=function(t){function e(e){var n;return(n=t.call(this,e,h.default.MANIFEST_LOADING,h.default.LEVEL_LOADING,h.default.AUDIO_TRACK_LOADING,h.default.SUBTITLE_TRACK_LOADING)||this).loaders={},n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t),e.canHaveQualityLevels=function(t){return t!==i.AUDIO_TRACK&&t!==i.SUBTITLE_TRACK},e.mapContextToLevelType=function(t){switch(t.type){case i.AUDIO_TRACK:return o.AUDIO;case i.SUBTITLE_TRACK:return o.SUBTITLE;default:return o.MAIN}},e.getResponseUrl=function(t,e){var n=t.url;return void 0!==n&&0!==n.indexOf("data:")||(n=e.url),n};var n=e.prototype;return n.createInternalLoader=function(t){var e=this.hls.config,n=e.pLoader,r=e.loader,i=new(n||r)(e);return t.loader=i,this.loaders[t.type]=i},n.getInternalLoader=function(t){return this.loaders[t.type]},n.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},n.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},n.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},n.onManifestLoading=function(t){this.load({url:t.url,type:i.MANIFEST,level:0,id:null,responseType:"text"})},n.onLevelLoading=function(t){this.load({url:t.url,type:i.LEVEL,level:t.level,id:t.id,responseType:"text"})},n.onAudioTrackLoading=function(t){this.load({url:t.url,type:i.AUDIO_TRACK,level:null,id:t.id,responseType:"text"})},n.onSubtitleTrackLoading=function(t){this.load({url:t.url,type:i.SUBTITLE_TRACK,level:null,id:t.id,responseType:"text"})},n.load=function(t){var e=this.hls.config;d.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n,r,a,o,s=this.getInternalLoader(t);if(s){var l=s.context;if(l&&l.url===t.url)return d.logger.trace("playlist request ongoing"),!1;d.logger.warn("aborting previous loader for type: "+t.type),s.abort()}switch(t.type){case i.MANIFEST:n=e.manifestLoadingMaxRetry,r=e.manifestLoadingTimeOut,a=e.manifestLoadingRetryDelay,o=e.manifestLoadingMaxRetryTimeout;break;case i.LEVEL:a=o=n=0,r=e.levelLoadingTimeOut;break;default:n=e.levelLoadingMaxRetry,r=e.levelLoadingTimeOut,a=e.levelLoadingRetryDelay,o=e.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(t);var u={timeout:r,maxRetry:n,retryDelay:a,maxRetryDelay:o},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return d.logger.debug("Calling internal loader delegate for URL: "+t.url),s.load(t,u,c),!0},n.loadsuccess=function(t,e,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(t,n),void this._handlePlaylistLoaded(t,e,n,r);if(this.resetInternalLoader(n.type),"string"!=typeof t.data)throw new Error('expected responseType of "text" for PlaylistLoader');var i=t.data;e.tload=N.now(),0===i.indexOf("#EXTM3U")?0<i.indexOf("#EXTINF:")||0<i.indexOf("#EXT-X-TARGETDURATION:")?this._handleTrackOrLevelPlaylist(t,e,n,r):this._handleMasterPlaylist(t,e,n,r):this._handleManifestParsingError(t,n,"no EXTM3U delimiter",r)},n.loaderror=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!1,t)},n.loadtimeout=function(t,e,n){void 0===n&&(n=null),this._handleNetworkError(e,n,!0)},n._handleMasterPlaylist=function(t,n,r,i){var a=this.hls,o=t.data,s=e.getResponseUrl(t,r),l=D.parseMasterPlaylist(o,s);if(l.length){var u=l.map((function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}})),c=D.parseMasterPlaylistMedia(o,s,"AUDIO",u),f=D.parseMasterPlaylistMedia(o,s,"SUBTITLES");if(c.length){var p=!1;c.forEach((function(t){t.url||(p=!0)})),!1===p&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(d.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),c.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}a.trigger(h.default.MANIFEST_LOADED,{levels:l,audioTracks:c,subtitles:f,url:s,stats:n,networkDetails:i})}else this._handleManifestParsingError(t,r,"no level found in manifest",i)},n._handleTrackOrLevelPlaylist=function(t,n,r,a){var o=this.hls,s=r.id,l=r.level,u=r.type,d=e.getResponseUrl(t,r),f=Object(c.isFiniteNumber)(s)?s:0,p=Object(c.isFiniteNumber)(l)?l:f,g=e.mapContextToLevelType(r),m=D.parseLevelPlaylist(t.data,d,p,g,f);if(m.tload=n.tload,u===i.MANIFEST){var v={url:d,details:m};o.trigger(h.default.MANIFEST_LOADED,{levels:[v],audioTracks:[],url:d,stats:n,networkDetails:a})}if(n.tparsed=N.now(),m.needSidxRanges){var y=m.initSegment.url;this.load({url:y,isSidxRequest:!0,type:u,level:l,levelDetails:m,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=m,this._handlePlaylistLoaded(t,n,r,a)},n._handleSidxRequest=function(t,e){if("string"==typeof t.data)throw new Error("sidx request must be made with responseType of array buffer");var n=g.default.parseSegmentIndex(new Uint8Array(t.data));if(n){var r=n.references,i=e.levelDetails;r.forEach((function(t,e){var n=t.info;if(i){var r=i.fragments[e];0===r.byteRange.length&&r.setByteRange(String(1+n.end-n.start)+"@"+String(n.start))}})),i&&i.initSegment.setByteRange(String(n.moovEndOffset)+"@0")}},n._handleManifestParsingError=function(t,e,n,r){this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:t.url,reason:n,networkDetails:r})},n._handleNetworkError=function(t,e,n,r){var a,o;void 0===n&&(n=!1),void 0===r&&(r=null),d.logger.info("A network error occured while loading a "+t.type+"-type playlist");var s=this.getInternalLoader(t);switch(t.type){case i.MANIFEST:a=n?u.ErrorDetails.MANIFEST_LOAD_TIMEOUT:u.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case i.LEVEL:a=n?u.ErrorDetails.LEVEL_LOAD_TIMEOUT:u.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case i.AUDIO_TRACK:a=n?u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}s&&(s.abort(),this.resetInternalLoader(t.type));var l={type:u.ErrorTypes.NETWORK_ERROR,details:a,fatal:o,url:t.url,loader:s,context:t,networkDetails:e};r&&(l.response=r),this.hls.trigger(h.default.ERROR,l)},n._handlePlaylistLoaded=function(t,n,r,a){var o=r.type,s=r.level,l=r.id,u=r.levelDetails;if(u&&u.targetduration)if(e.canHaveQualityLevels(r.type))this.hls.trigger(h.default.LEVEL_LOADED,{details:u,level:s||0,id:l||0,stats:n,networkDetails:a});else switch(o){case i.AUDIO_TRACK:this.hls.trigger(h.default.AUDIO_TRACK_LOADED,{details:u,id:l,stats:n,networkDetails:a});break;case i.SUBTITLE_TRACK:this.hls.trigger(h.default.SUBTITLE_TRACK_LOADED,{details:u,id:l,stats:n,networkDetails:a})}else this._handleManifestParsingError(t,r,"invalid target duration",a)},e}(p),B=function(t){function e(e){var n;return(n=t.call(this,e,h.default.FRAG_LOADING)||this).loaders={},n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){var e=this.loaders;for(var n in e){var r=e[n];r&&r.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onFragLoading=function(t){var e=t.frag,n=e.type,r=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;e.loaded=0;var s,l,u,h=r[n];h&&(d.logger.warn("abort previous fragment loader for type: "+n),h.abort()),h=r[n]=e.loader=i.fLoader?new a(i):new o(i),s={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1};var f=e.byteRangeStartOffset,p=e.byteRangeEndOffset;Object(c.isFiniteNumber)(f)&&Object(c.isFiniteNumber)(p)&&(s.rangeStart=f,s.rangeEnd=p),l={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},h.load(s,l,u)},n.loadsuccess=function(t,e,n,r){void 0===r&&(r=null);var i=t.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(h.default.FRAG_LOADED,{payload:i,frag:a,stats:e,networkDetails:r})},n.loaderror=function(t,e,n){void 0===n&&(n=null);var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:n})},n.loadtimeout=function(t,e,n){void 0===n&&(n=null);var r=e.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:n})},n.loadprogress=function(t,e,n,r){void 0===r&&(r=null);var i=e.frag;i.loaded=t.loaded,this.hls.trigger(h.default.FRAG_LOAD_PROGRESS,{frag:i,stats:t,networkDetails:r})},e}(p),U=function(t){function e(e){var n;return(n=t.call(this,e,h.default.KEY_LOADING)||this).loaders={},n.decryptkey=null,n.decrypturl=null,n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){for(var e in this.loaders){var n=this.loaders[e];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.onKeyLoading=function(t){var e=t.frag,n=e.type,r=this.loaders[n];if(e.decryptdata){var i=e.decryptdata.uri;if(i!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;if(r&&(d.logger.warn("abort previous key loader for type:"+n),r.abort()),!i)return void d.logger.warn("key uri is falsy");e.loader=this.loaders[n]=new a.loader(a),this.decrypturl=i,this.decryptkey=null;var o={url:i,frag:e,responseType:"arraybuffer"},s={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};e.loader.load(o,s,l)}else this.decryptkey&&(e.decryptdata.key=this.decryptkey,this.hls.trigger(h.default.KEY_LOADED,{frag:e}))}else d.logger.warn("Missing decryption data on fragment in onKeyLoading")},n.loadsuccess=function(t,e,n){var r=n.frag;r.decryptdata?(this.decryptkey=r.decryptdata.key=new Uint8Array(t.data),r.loader=void 0,delete this.loaders[r.type],this.hls.trigger(h.default.KEY_LOADED,{frag:r})):d.logger.error("after key load, decryptdata unset")},n.loaderror=function(t,e){var n=e.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:t})},n.loadtimeout=function(t,e){var n=e.frag,r=n.loader;r&&r.abort(),delete this.loaders[n.type],this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.NETWORK_ERROR,details:u.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}(p),j="NOT_LOADED",V="APPENDING",G="PARTIAL",z="OK",Y=function(t){function e(e){var n;return(n=t.call(this,e,h.default.BUFFER_APPENDED,h.default.FRAG_BUFFERED,h.default.FRAG_LOADED)||this).bufferPadding=.2,n.fragments=Object.create(null),n.timeRanges=Object.create(null),n.config=e.config,n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,p.prototype.destroy.call(this),t.prototype.destroy.call(this)},n.getBufferedFrag=function(t,e){var n=this.fragments,r=Object.keys(n).filter((function(r){var i=n[r];if(i.body.type!==e)return!1;if(!i.buffered)return!1;var a=i.body;return a.startPTS<=t&&t<=a.endPTS}));if(0===r.length)return null;var i=r.pop();return n[i].body},n.detectEvictedFragments=function(t,e){var n,r,i=this;Object.keys(this.fragments).forEach((function(a){var o=i.fragments[a];if(!0===o.buffered){var s=o.range[t];if(s){n=s.time;for(var l=0;l<n.length;l++)if(r=n[l],!1===i.isTimeBuffered(r.startPTS,r.endPTS,e)){i.removeFragment(o.body);break}}}}))},n.detectPartialFragments=function(t){var e=this,n=this.getFragmentKey(t),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach((function(n){if(t.hasElementaryStream(n)){var i=e.timeRanges[n];r.range[n]=e.getBufferedTimes(t.startPTS,t.endPTS,i)}})))},n.getBufferedTimes=function(t,e,n){for(var r,i,a=[],o=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,r<=t&&e<=i){a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))});break}if(t<i&&r<e)a.push({startPTS:Math.max(t,n.start(s)),endPTS:Math.min(e,n.end(s))}),o=!0;else if(e<=r)break}return{time:a,partial:o}},n.getFragmentKey=function(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn},n.getPartialFragment=function(t){var e,n,r,i=this,a=null,o=0;return Object.keys(this.fragments).forEach((function(s){var l=i.fragments[s];i.isPartial(l)&&(n=l.body.startPTS-i.bufferPadding,r=l.body.endPTS+i.bufferPadding,n<=t&&t<=r&&(e=Math.min(t-n,r-t),o<=e&&(a=l.body,o=e)))})),a},n.getState=function(t){var e=this.getFragmentKey(t),n=this.fragments[e],r=j;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?G:z:V),r},n.isPartial=function(t){return!0===t.buffered&&(void 0!==t.range.video&&!0===t.range.video.partial||void 0!==t.range.audio&&!0===t.range.audio.partial)},n.isTimeBuffered=function(t,e,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,r<=t&&e<=i)return!0;if(e<=r)return!1}return!1},n.onFragLoaded=function(t){var e=t.frag;Object(c.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.fragments[this.getFragmentKey(e)]={body:e,range:Object.create(null),buffered:!1})},n.onBufferAppended=function(t){var e=this;this.timeRanges=t.timeRanges,Object.keys(this.timeRanges).forEach((function(t){var n=e.timeRanges[t];e.detectEvictedFragments(t,n)}))},n.onFragBuffered=function(t){this.detectPartialFragments(t.frag)},n.hasFragment=function(t){var e=this.getFragmentKey(t);return void 0!==this.fragments[e]},n.removeFragment=function(t){var e=this.getFragmentKey(t);delete this.fragments[e]},n.removeAllFragments=function(){this.fragments=Object.create(null)},e}(p),H={search:function(t,e){for(var n=0,r=t.length-1,i=null,a=null;n<=r;){var o=e(a=t[i=(n+r)/2|0]);if(0<o)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}},$=function(){function t(){}return t.isBuffered=function(t,e){try{if(t)for(var n=t.buffered,r=0;r<n.length;r++)if(e>=n.start(r)&&e<=n.end(r))return!0}catch(t){}return!1},t.bufferInfo=function(t,e,n){try{if(t){var r,i=t.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,e,n)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}},t.bufferedInfo=function(t,e,n){t.sort((function(t,e){var n=t.start-e.start;return n||e.end-t.end}));var r=[];if(n)for(var i=0;i<t.length;i++){var a=r.length;if(a){var o=r[a-1].end;t[i].start-o<n?t[i].end>o&&(r[a-1].end=t[i].end):r.push(t[i])}else r.push(t[i])}else r=t;for(var s,l=0,u=e,c=e,h=0;h<r.length;h++){var d=r[h].start,f=r[h].end;if(d<=e+n&&e<f)u=d,l=(c=f)-e;else if(e+n<d){s=d;break}}return{len:l,start:u,end:c,nextStart:s}},t}(),W=n("./node_modules/eventemitter3/index.js"),K=n("./node_modules/webworkify-webpack/index.js"),X=n("./src/demux/demuxer-inline.js");function q(){return window.MediaSource||window.WebKitMediaSource}var Z=n("./src/utils/get-self-scope.js"),J=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t),e.prototype.trigger=function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.emit.apply(this,[t,t].concat(n))},e}(W.EventEmitter),Q=Object(Z.getSelfScope)(),tt=q()||{isTypeSupported:function(){return!1}},et=function(){function t(t,e){var n=this;function r(e,r){(r=r||{}).frag=n.frag,r.id=n.id,t.trigger(e,r)}this.hls=t,this.id=e;var i=this.observer=new J,a=t.config;i.on(h.default.FRAG_DECRYPTED,r),i.on(h.default.FRAG_PARSING_INIT_SEGMENT,r),i.on(h.default.FRAG_PARSING_DATA,r),i.on(h.default.FRAG_PARSED,r),i.on(h.default.ERROR,r),i.on(h.default.FRAG_PARSING_METADATA,r),i.on(h.default.FRAG_PARSING_USERDATA,r),i.on(h.default.INIT_PTS_FOUND,r);var o={mp4:tt.isTypeSupported("video/mp4"),mpeg:tt.isTypeSupported("audio/mpeg"),mp3:tt.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){var l;d.logger.log("demuxing in webworker");try{l=this.w=K("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(e){t.trigger(h.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:o,vendor:s,id:e,config:JSON.stringify(a)})}catch(e){d.logger.warn("Error in worker:",e),d.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&Q.URL.revokeObjectURL(l.objectURL),this.demuxer=new X.default(i,o,a,s),this.w=void 0}}else this.demuxer=new X.default(i,o,a,s)}var e=t.prototype;return e.destroy=function(){var t=this.w;if(t)t.removeEventListener("message",this.onwmsg),t.terminate(),this.w=null;else{var e=this.demuxer;e&&(e.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.push=function(t,e,n,r,i,a,o,s){var l=this.w,u=Object(c.isFiniteNumber)(i.startPTS)?i.startPTS:i.start,h=i.decryptdata,f=this.frag,p=!(f&&i.cc===f.cc),g=!(f&&i.level===f.level),m=f&&i.sn===f.sn+1,v=!g&&m;if(p&&d.logger.log(this.id+":discontinuity detected"),g&&d.logger.log(this.id+":switch detected"),this.frag=i,l)l.postMessage({cmd:"demux",data:t,decryptdata:h,initSegment:e,audioCodec:n,videoCodec:r,timeOffset:u,discontinuity:p,trackSwitch:g,contiguous:v,duration:a,accurateTimeOffset:o,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,h,e,n,r,u,p,g,v,a,o,s)}},e.onWorkerMessage=function(t){var e=t.data,n=this.hls;switch(e.event){case"init":Q.URL.revokeObjectURL(this.w.objectURL);break;case h.default.FRAG_PARSING_DATA:e.data.data1=new Uint8Array(e.data1),e.data2&&(e.data.data2=new Uint8Array(e.data2));default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,n.trigger(e.event,e.data)}},t}();function nt(t,e,n){switch(e){case"audio":t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds.push(n);break;case"text":t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds.push(n)}}function rt(t,e,n){var r=t[e],i=t[n],a=i.startPTS;Object(c.isFiniteNumber)(a)?e<n?(r.duration=a-r.start,r.duration<0&&d.logger.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-a,i.duration<0&&d.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):i.start=e<n?r.start+r.duration:Math.max(r.start-i.duration,0)}function it(t,e,n,r,i,a){var o=n;if(Object(c.isFiniteNumber)(e.startPTS)){var s=Math.abs(e.startPTS-n);Object(c.isFiniteNumber)(e.deltaPTS)?e.deltaPTS=Math.max(s,e.deltaPTS):e.deltaPTS=s,o=Math.max(n,e.startPTS),n=Math.min(n,e.startPTS),r=Math.max(r,e.endPTS),i=Math.min(i,e.startDTS),a=Math.max(a,e.endDTS)}var l=n-e.start;e.start=e.startPTS=n,e.maxStartPTS=o,e.endPTS=r,e.startDTS=i,e.endDTS=a,e.duration=r-n;var u,h,d,f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;for(u=f-t.startSN,(h=t.fragments)[u]=e,d=u;0<d;d--)rt(h,d,d-1);for(d=u;d<h.length-1;d++)rt(h,d,d+1);return t.PTSKnown=!0,l}function at(t,e){e.initSegment&&t.initSegment&&(e.initSegment=t.initSegment);var n,r=0;if(ot(t,e,(function(t,i){r=t.cc-i.cc,Object(c.isFiniteNumber)(t.startPTS)&&(i.start=i.startPTS=t.startPTS,i.endPTS=t.endPTS,i.duration=t.duration,i.backtracked=t.backtracked,i.dropped=t.dropped,n=i),e.PTSKnown=!0})),e.PTSKnown){if(r){d.logger.log("discontinuity sliding from playlist, take drift into account");for(var i=e.fragments,a=0;a<i.length;a++)i[a].cc+=r}n?it(e,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):function(t,e){var n=e.startSN-t.startSN,r=t.fragments,i=e.fragments;if(!(n<0||n>r.length))for(var a=0;a<i.length;a++)i[a].start+=r[n].start}(t,e),e.PTSKnown=t.PTSKnown}}function ot(t,e,n){if(t&&e)for(var r=Math.max(t.startSN,e.startSN)-e.startSN,i=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,o=r;o<=i;o++){var s=t.fragments[a+o],l=e.fragments[o];if(!s||!l)break;n(s,l,o)}}function st(t,e,n){var r=1e3*(e.averagetargetduration?e.averagetargetduration:e.targetduration),i=r/2;return t&&e.endSN===t.endSN&&(r=i),n&&(r=Math.max(i,r-(window.performance.now()-n))),Math.round(r)}var lt={toString:function(t){for(var e="",n=t.length,r=0;r<n;r++)e+="["+t.start(r).toFixed(3)+","+t.end(r).toFixed(3)+"]";return e}};function ut(t,e){e.fragments.forEach((function(e){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}})),e.PTSKnown=!0}function ct(t,e,n){!function(t,e,n){if(function(t,e,n){var r=!1;return e&&e.details&&n&&(n.endCC>n.startCC||t&&t.cc<n.startCC)&&(r=!0),r}(t,n,e)){var r=function(t,e){var n=t.fragments,r=e.fragments;if(r.length&&n.length){var i=function(t,e){for(var n=null,r=0;r<t.length;r+=1){var i=t[r];if(i&&i.cc===e){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;d.logger.log("No frag in previous level to align on")}else d.logger.log("No fragments to align")}(n.details,e);r&&(d.logger.log("Adjusting PTS using last level due to CC increase within current level"),ut(r.start,e))}}(t,n,e),!n.PTSKnown&&e&&function(t,e){if(e&&e.fragments.length){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;var n=e.fragments[0].programDateTime,r=(t.fragments[0].programDateTime-n)/1e3+e.fragments[0].start;Object(c.isFiniteNumber)(r)&&(d.logger.log("adjusting PTS using programDateTime delta, sliding:"+r.toFixed(3)),ut(r,t))}}(n,e.details)}function ht(t,e,n){if(null===e||!Array.isArray(t)||!t.length||!Object(c.isFiniteNumber)(e))return null;var r,i,a,o,s;if(e<(t[0].programDateTime||0))return null;if((t[t.length-1].endProgramDateTime||0)<=e)return null;n=n||0;for(var l=0;l<t.length;++l){var u=t[l];if(r=e,i=n,a=u,o=1e3*Math.min(i,a.duration+(a.deltaPTS?a.deltaPTS:0)),s=a.endProgramDateTime||0,r<s-o)return u}return null}function dt(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=t?e[t.sn-e[0].sn+1]:null;return i&&!ft(n,r,i)?i:H.search(e,ft.bind(null,n,r))}function ft(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0);var r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}var pt=function(){function t(t,e,n,r){this.config=t,this.media=e,this.fragmentTracker=n,this.hls=r,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var e=t.prototype;return e.poll=function(t){var e=this.config,n=this.media,r=this.stalled,i=n.currentTime,a=n.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,i===t){if((s||o)&&(this.stalled=null),!n.paused&&!n.ended&&0!==n.playbackRate&&n.buffered.length){var l=$.bufferInfo(n,i,0),u=0<l.len,c=l.nextStart||0;if(u||c){if(a){if(2<l.len||!c||2<c-i)return;this.moved=!1}if(!this.moved&&this.stalled){var h=Math.max(c,l.start||0)-i;if(0<h&&h<=2)return void this._trySkipBufferHole(null)}var f=self.performance.now();if(null!==r){var p=f-r;!a&&250<=p&&this._reportStall(l.len);var g=$.bufferInfo(n,i,e.maxBufferHole);this._tryFixBufferStall(g,p)}else this.stalled=f}}}else if(this.moved=!0,null!==r){if(this.stallReported){var m=self.performance.now()-r;d.logger.warn("playback not stuck anymore @"+i+", after "+Math.round(m)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},e._tryFixBufferStall=function(t,e){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,a=r.getPartialFragment(i);a&&this._trySkipBufferHole(a)||t.len>n.maxBufferHole&&e>1e3*n.highBufferWatchdogPeriod&&(d.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},e._reportStall=function(t){var e=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,d.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),e.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:t}))},e._trySkipBufferHole=function(t){for(var e=this.config,n=this.hls,r=this.media,i=r.currentTime,a=0,o=0;o<r.buffered.length;o++){var s=r.buffered.start(o);if(i+e.maxBufferHole>=a&&i<s){var l=Math.max(s+.05,r.currentTime+.1);return d.logger.warn("skipping hole, adjusting currentTime from "+i+" to "+l),this.moved=!0,this.stalled=null,r.currentTime=l,t&&n.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+i+" to "+l,frag:t}),l}a=r.buffered.end(o)}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,n=this.media,r=n.currentTime,i=(this.nudgeRetry||0)+1;if((this.nudgeRetry=i)<t.nudgeMaxRetry){var a=r+i*t.nudgeOffset;d.logger.warn("Nudging 'currentTime' from "+r+" to "+a),n.currentTime=a,e.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else d.logger.error("Playhead still not moving while enough data buffered @"+r+" after "+t.nudgeMaxRetry+" nudges"),e.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},t}(),gt=function(t){function e(e){for(var n,r=arguments.length,i=new Array(1<r?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=t.call.apply(t,[this,e].concat(i))||this)._boundTick=void 0,n._tickTimer=null,n._tickInterval=null,n._tickCallCount=0,n._boundTick=n.tick.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},n.hasInterval=function(){return!!this._tickInterval},n.hasNextTick=function(){return!!this._tickTimer},n.setInterval=function(t){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,t),!0)},n.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),!(this._tickInterval=null))},n.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),!(this._tickTimer=null))},n.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},n.doTick=function(){},e}(p),mt="STOPPED",vt="STARTING",yt="IDLE",bt="PAUSED",_t="KEY_LOADING",Et="FRAG_LOADING",At="FRAG_LOADING_WAITING_RETRY",Tt="WAITING_TRACK",wt="PARSING",St="PARSED",xt="BUFFER_FLUSHING",Lt="ENDED",Mt="ERROR",kt="WAITING_INIT_PTS",Ct="WAITING_LEVEL",Rt=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.doTick=function(){},n.startLoad=function(){},n.stopLoad=function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragmentTracker.removeFragment(t)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=mt},n._streamEnded=function(t,e){var n=this.fragCurrent,r=this.fragmentTracker;if(e.live||!n||n.backtracked||n.sn!==e.endSN||t.nextStart)return!1;var i=r.getState(n);return i===G||i===z},n.onMediaSeeking=function(){var t=this.config,e=this.media,n=this.mediaBuffer,r=this.state,i=e?e.currentTime:null,a=$.bufferInfo(n||e,i,this.config.maxBufferHole);if(Object(c.isFiniteNumber)(i)&&d.logger.log("media seeking to "+i.toFixed(3)),r===Et){var o=this.fragCurrent;if(0===a.len&&o){var s=t.maxFragLookUpTolerance,l=o.start-s,u=o.start+o.duration+s;i<l||u<i?(o.loader&&(d.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=yt):d.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else r===Lt&&(0===a.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=yt);e&&(this.lastCurrentTime=i),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=i),this.tick()},n.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},n.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=function(){this.state=mt,this.fragmentTracker=null},n.computeLivePosition=function(t,e){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;return t+Math.max(0,e.totalduration-n)},e}(gt);function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ot=function(t){function e(e,n){var r;return(r=t.call(this,e,h.default.MEDIA_ATTACHED,h.default.MEDIA_DETACHING,h.default.MANIFEST_LOADING,h.default.MANIFEST_PARSED,h.default.LEVEL_LOADED,h.default.KEY_LOADED,h.default.FRAG_LOADED,h.default.FRAG_LOAD_EMERGENCY_ABORTED,h.default.FRAG_PARSING_INIT_SEGMENT,h.default.FRAG_PARSING_DATA,h.default.FRAG_PARSED,h.default.ERROR,h.default.AUDIO_TRACK_SWITCHING,h.default.AUDIO_TRACK_SWITCHED,h.default.BUFFER_CREATED,h.default.BUFFER_APPENDED,h.default.BUFFER_FLUSHED)||this).fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=mt,r.stallReported=!1,r.gapController=null,r.altAudio=!1,r}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}0<e&&-1===t&&(d.logger.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=yt,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this.forceStartLoad=!0,this.state=mt},n.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case xt:this.fragLoadError=0;break;case yt:this._doTickIdle();break;case Ct:var t=this.levels[this.level];t&&t.details&&(this.state=yt);break;case At:var e=window.performance.now(),n=this.retryDate;(!n||n<=e||this.media&&this.media.seeking)&&(d.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=yt)}this._checkBuffer(),this._checkFragmentChanged()},n._doTickIdle=function(){var t=this.hls,e=t.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&e.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=t.nextLoadLevel,a=this.levels[i];if(a){var o,s=a.bitrate;o=s?Math.max(8*e.maxBufferSize/s,e.maxBufferLength):e.maxBufferLength,o=Math.min(o,e.maxMaxBufferLength);var l=$.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,e.maxBufferHole),u=l.len;if(!(o<=u)){d.logger.trace("buffer length of "+u.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=i;var c=a.details;if(!c||c.live&&this.levelLastLoaded!==i)this.state=Ct;else{if(this._streamEnded(l,c)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(h.default.BUFFER_EOS,f),void(this.state=Lt)}this._fetchPayloadOrEos(r,l,c)}}}}},n._fetchPayloadOrEos=function(t,e,n){var r=this.fragPrevious,i=this.level,a=n.fragments,o=a.length;if(0!==o){var s,l=a[0].start,u=a[o-1].start+a[o-1].duration,c=e.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var h=this.config.initialLiveManifestSize;if(o<h)return void d.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+h);if(null===(s=this._ensureFragmentAtLivePoint(n,c,l,u,r,a,o)))return}else c<l&&(s=a[0]);s||(s=this._findFragment(l,r,o,a,c,u,n)),s&&(s.encrypted?(d.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i),this._loadKey(s)):(d.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i+", currentTime:"+t.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(s)))}},n._ensureFragmentAtLivePoint=function(t,e,n,r,i,a,o){var s,l=this.hls.config,u=this.media,c=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*t.targetduration;if(e<Math.max(n-l.maxFragLookUpTolerance,r-c)){var h=this.liveSyncPosition=this.computeLivePosition(n,t);e=h,u&&!u.paused&&u.readyState&&u.duration>h&&h>u.currentTime&&(d.logger.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+h.toFixed(3)),u.currentTime=h),this.nextLoadPosition=h}if(t.PTSKnown&&r<e&&u&&u.readyState)return null;if(this.startFragRequested&&!t.PTSKnown){if(i)if(t.hasProgramDateTime)d.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),s=ht(a,i.endProgramDateTime,l.maxFragLookUpTolerance);else{var f=i.sn+1;if(f>=t.startSN&&f<=t.endSN){var p=a[f-t.startSN];i.cc===p.cc&&(s=p,d.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=H.search(a,(function(t){return i.cc-t.cc})))&&d.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}s||(s=a[Math.min(o-1,Math.round(o/2))],d.logger.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))}return s},n._findFragment=function(t,e,n,r,i,a,o){var s,l=this.hls.config;if(s=i<a?dt(e,r,i,i>a-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):r[n-1],s){var u=s.sn-o.startSN,c=e&&s.level===e.level,h=r[u-1],f=r[1+u];if(e&&s.sn===e.sn)if(c&&!s.backtracked)if(s.sn<o.endSN){var p=e.deltaPTS;p&&p>l.maxBufferHole&&e.dropped&&u?(s=h,d.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=f,d.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(f&&f.backtracked?(d.logger.warn("Already backtracked from fragment "+f.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+f.sn),s=f):(d.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,h?(s=h).backtracked=!0:u&&(s=null)))}return s},n._loadKey=function(t){this.state=_t,this.hls.trigger(h.default.KEY_LOADING,{frag:t})},n._loadFragment=function(t){var e=this.fragmentTracker.getState(t);"initSegment"!==(this.fragCurrent=t).sn&&(this.startFragRequested=!0),Object(c.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||e===j||e===G?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(h.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new et(this.hls,"main")),this.state=Et):e===V&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},n.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,o.MAIN)},n.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.endPTS+.5):null},n._checkFragmentChanged=function(){var t,e,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((e=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=e),$.isBuffered(n,e)?t=this.getBufferedFrag(e):$.isBuffered(n,e+.1)&&(t=this.getBufferedFrag(e+.1)),t)){var r=t;if(r!==this.fragPlaying){this.hls.trigger(h.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(h.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},n.immediateLevelSwitch=function(){if(d.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t,e=this.media;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},n.immediateLevelSwitchEnd=function(){var t=this.media;t&&t.buffered.length&&(this.immediateSwitch=!1,$.isBuffered(t,t.currentTime)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},n.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var e,n,r;if((n=this.getBufferedFrag(t.currentTime))&&1<n.startPTS&&this.flushMainBuffer(0,n.startPTS-1),t.paused)e=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;e=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if((r=this.getBufferedFrag(t.currentTime+e))&&(r=this.followingBufferedFrag(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},n.flushMainBuffer=function(t,e){this.state=xt;var n={startOffset:t,endOffset:e};this.altAudio&&(n.type="video"),this.hls.trigger(h.default.BUFFER_FLUSHING,n)},n.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new pt(n,e,this.fragmentTracker,this.hls)},n.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach((function(t){t.details&&t.details.fragments.forEach((function(t){t.backtracked=void 0}))})),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:void 0;Object(c.isFiniteNumber)(e)&&d.logger.log("media seeked to "+e.toFixed(3)),this.tick()},n.onManifestLoading=function(){d.logger.log("trigger BUFFER_RESET"),this.hls.trigger(h.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.onManifestParsed=function(t){var e,n=!1,r=!1;t.levels.forEach((function(t){(e=t.audioCodec)&&(-1!==e.indexOf("mp4a.40.2")&&(n=!0),-1!==e.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&d.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=t.altAudio,this.levels=t.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},n.onLevelLoaded=function(t){var e=t.details,n=t.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],a=e.totalduration,o=0;if(d.logger.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live){var s=i.details;s&&0<e.fragments.length?(at(s,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),e.PTSKnown&&Object(c.isFiniteNumber)(o)?d.logger.log("live playlist sliding:"+o.toFixed(3)):(d.logger.log("live playlist - outdated PTS, unknown sliding"),ct(this.fragPrevious,r,e))):(d.logger.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,ct(this.fragPrevious,r,e))}else e.PTSKnown=!1;if(i.details=e,this.levelLastLoaded=n,this.hls.trigger(h.default.LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=e.startTimeOffset;Object(c.isFiniteNumber)(l)?(l<0&&(d.logger.log("negative start time offset "+l+", count from end of last fragment"),l=o+a+l),d.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):e.live?(this.startPosition=this.computeLivePosition(o,e),d.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Ct&&(this.state=yt),this.tick()},n.onKeyLoaded=function(){this.state===_t&&(this.state=yt,this.tick())},n.onFragLoaded=function(t){var e=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,a=t.frag;if(this.state===Et&&e&&"main"===a.type&&a.level===e.level&&a.sn===e.sn){var o=t.stats,s=r[e.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,d.logger.log("Loaded "+e.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+e.level),a.bitrateTest&&n.nextLoadLevel)this.state=yt,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),n.trigger(h.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else if("initSegment"===a.sn)this.state=yt,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=t.payload,n.trigger(h.default.FRAG_BUFFERED,{stats:o,frag:e,id:"main"}),this.tick();else{d.logger.log("Parsing "+e.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+e.level+", cc "+e.cc),this.state=wt,this.pendingBuffering=!0,this.appended=!1,a.bitrateTest&&(a.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:a}));var u=!(i&&i.seeking)&&(l.PTSKnown||!l.live),c=l.initSegment?l.initSegment.data:[],f=this._getAudioCodec(s);(this.demuxer=this.demuxer||new et(this.hls,"main")).push(t.payload,c,f,s.videoCodec,e,l.totalduration,u)}}this.fragLoadError=0},n.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===wt){var r,i,a=t.tracks;if(a.audio&&this.altAudio&&delete a.audio,i=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(d.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==i.container&&(o="mp4a.40.2",d.logger.log("Android: force audio codec to "+o)),i.levelCodec=o,i.id=t.id}for(r in(i=a.video)&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=t.id),this.hls.trigger(h.default.BUFFER_CODECS,a),a){i=a[r],d.logger.log("main track:"+r+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var l=i.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(h.default.BUFFER_APPENDING,{type:r,data:l,parent:"main",content:"initSegment"}))}this.tick()}},n.onFragParsingData=function(t){var e=this,n=this.fragCurrent,r=t.frag;if(n&&"main"===t.id&&r.sn===n.sn&&r.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===wt){var i=this.levels[this.level],a=n;if(Object(c.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&a.addElementaryStream(v.AUDIO),!0===t.hasVideo&&a.addElementaryStream(v.VIDEO),d.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)d.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var o=i.details;if(!o||a.sn!==o.startSN)return d.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=yt,this.fragPrevious=a,void this.tick();d.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var s=it(i.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),l=this.hls;l.trigger(h.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach((function(n){n&&n.length&&e.state===wt&&(e.appended=!0,e.pendingBuffering=!0,l.trigger(h.default.BUFFER_APPENDING,{type:t.type,data:n,parent:"main",content:"data"}))})),this.tick()}},n.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"main"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===wt&&(this.stats.tparsed=window.performance.now(),this.state=St,this._checkAppendedParsed())},n.onAudioTrackSwitching=function(t){var e=!!t.url,n=t.id;if(!e){if(this.mediaBuffer!==this.media){d.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(d.logger.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=yt}var i=this.hls;i.trigger(h.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(h.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},n.onAudioTrackSwitched=function(t){var e=t.id,n=!!this.hls.audioTracks[e].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(d.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},n.onBufferCreated=function(t){var e,n,r=t.tracks,i=!1;for(var a in r){var o=r[a];"main"===o.id?(e=o,"video"===(n=a)&&(this.videoBuffer=r[a].buffer)):i=!0}i&&e?(d.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=e.buffer):this.mediaBuffer=this.media},n.onBufferAppended=function(t){if("main"===t.parent){var e=this.state;e!==wt&&e!==St||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())}},n._checkAppendedParsed=function(){if(!(this.state!==St||this.appended&&this.pendingBuffering)){var t=this.fragCurrent;if(t){var e=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("main buffered : "+lt.toString(e.buffered)),this.fragPrevious=t;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(h.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.state=yt}this.tick()}},n.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var n=!!this.media&&$.isBuffered(this.media,this.media.currentTime)&&$.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);d.logger.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=window.performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=At}else d.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Mt;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Mt&&(t.fatal?(this.state=Mt,d.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==Ct||(this.state=yt));break;case u.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==wt&&this.state!==St||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=yt):(d.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},n._reduceMaxBufferLength=function(t){var e=this.config;return e.maxMaxBufferLength>=t&&(e.maxMaxBufferLength/=2,d.logger.warn("main:reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},n._checkBuffer=function(){var t=this.media;if(t&&0!==t.readyState){var e=(this.mediaBuffer?this.mediaBuffer:t).buffered;!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,e)}},n.onFragLoadEmergencyAborted=function(){this.state=yt,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.onBufferFlushed=function(){var t=this.mediaBuffer?this.mediaBuffer:this.media;t&&this.fragmentTracker.detectEvictedFragments(v.VIDEO,t.buffered),this.state=yt,this.fragPrevious=null},n.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n._seekToStartPos=function(){var t=this.media,e=t.currentTime,n=t.seeking?e:this.startPosition;e!==n&&0<=n&&(d.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+e+" "),t.currentTime=n)},n._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&(d.logger.log("swapping playlist audio codec"),e&&(e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),e},function(t,e,n){e&&Pt(t.prototype,e),n&&Pt(t,n)}(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,d.logger.log("main stream-controller: "+e+"->"+t),this.hls.trigger(h.default.STREAM_STATE_TRANSITION,{previousState:e,nextState:t})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var t=this.media;if(t){var e=this.getBufferedFrag(t.currentTime);if(e)return e.level}return-1}},{key:"nextBufferedFrag",get:function(){var t=this.media;return t?this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),e}(Rt);function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}window.performance;var It,Nt=function(t){function e(e){var n;return(n=t.call(this,e,h.default.MANIFEST_LOADED,h.default.LEVEL_LOADED,h.default.AUDIO_TRACK_SWITCHED,h.default.FRAG_LOADED,h.default.ERROR)||this).canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,It=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},n.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},n.startLoad=function(){var t=this._levels;this.canload=!0,this.levelRetryCount=0,t&&t.forEach((function(t){t.loadError=0;var e=t.details;e&&e.live&&(t.details=void 0)})),null!==this.timer&&this.loadLevel()},n.stopLoad=function(){this.canload=!1},n.onManifestLoaded=function(t){var e,n=[],r=[],i={},a=null,o=!1,s=!1;if(t.levels.forEach((function(t){var e=t.attrs;t.loadError=0,t.fragmentError=!1,o=o||!!t.videoCodec,s=s||!!t.audioCodec,It&&t.audioCodec&&-1!==t.audioCodec.indexOf("mp4a.40.34")&&(t.audioCodec=void 0),(a=i[t.bitrate])?a.url.push(t.url):(t.url=[t.url],t.urlId=0,i[t.bitrate]=t,n.push(t)),e&&(e.AUDIO&&(s=!0,nt(a||t,"audio",e.AUDIO)),e.SUBTITLES&&nt(a||t,"text",e.SUBTITLES))})),o&&s&&(n=n.filter((function(t){return!!t.videoCodec}))),n=n.filter((function(t){var e=t.audioCodec,n=t.videoCodec;return(!e||M(e,"audio"))&&(!n||M(n,"video"))})),t.audioTracks&&(r=t.audioTracks.filter((function(t){return!t.audioCodec||M(t.audioCodec,"audio")}))).forEach((function(t,e){t.id=e})),0<n.length){e=n[0].bitrate,n.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=n;for(var l=0;l<n.length;l++)if(n[l].bitrate===e){this._firstLevel=l,d.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+e);break}this.hls.trigger(h.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:o,altAudio:r.some((function(t){return!!t.url}))})}else this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},n.setLevelInternal=function(t){var e=this._levels,n=this.hls;if(0<=t&&t<e.length){if(this.clearTimer(),this.currentLevelIndex!==t){d.logger.log("switching to level "+t);var r=e[this.currentLevelIndex=t];r.level=t,n.trigger(h.default.LEVEL_SWITCHING,r)}var i=e[t],a=i.details;if(!a||a.live){var o=i.urlId;n.trigger(h.default.LEVEL_LOADING,{url:i.url[o],level:t,id:o})}}else n.trigger(h.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})},n.onError=function(t){if(t.fatal)t.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var e,n=!1,r=!1;switch(t.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:e=t.frag.level,r=!0;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:e=t.context.level,n=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:e=t.level,n=!0}void 0!==e&&this.recoverLevel(t,e,n,r)}},n.recoverLevel=function(t,e,n,r){var i,a,o,s=this,l=this.hls.config,u=t.details,c=this._levels[e];if(c.loadError++,c.fragmentError=r,n){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return d.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(t.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout((function(){return s.loadLevel()}),a),t.levelRetry=!0,this.levelRetryCount++,d.logger.warn("level controller, "+u+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&(1<(i=c.url.length)&&c.loadError<i?(c.urlId=(c.urlId+1)%i,c.details=void 0,d.logger.warn("level controller, "+u+" for level "+e+": switching to redundant URL-id "+c.urlId)):-1===this.manualLevelIndex?(o=0===e?this._levels.length-1:e-1,d.logger.warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):r&&(d.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},n.onFragLoaded=function(t){var e=t.frag;if(void 0!==e&&"main"===e.type){var n=this._levels[e.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},n.onLevelLoaded=function(t){var e=this,n=t.level,r=t.details;if(n===this.currentLevelIndex){var i=this._levels[n];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),r.live){var a=st(i.details,r,t.stats.trequest);d.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout((function(){return e.loadLevel()}),a)}else this.clearTimer()}},n.onAudioTrackSwitched=function(t){var e=this.hls.audioTracks[t.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=0;i<n.audioGroupIds.length;i++)if(n.audioGroupIds[i]===e){r=i;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},n.loadLevel=function(){if(d.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var t=this._levels[this.currentLevelIndex];if("object"==typeof t&&0<t.url.length){var e=this.currentLevelIndex,n=t.urlId,r=t.url[n];d.logger.log("Attempt loading level index "+e+" with URL-id "+n),this.hls.trigger(h.default.LEVEL_LOADING,{url:r,level:e,id:n})}}},function(t,e,n){e&&Dt(t.prototype,e),n&&Dt(t,n)}(e,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;e&&(t=Math.min(t,e.length-1),this.currentLevelIndex===t&&e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(p),Ft=n("./src/demux/id3.js");function Bt(t,e){var n;try{n=new Event("addtrack")}catch(t){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function Ut(t){if(t&&t.cues)for(;0<t.cues.length;)t.removeCue(t.cues[0])}var jt=function(t){function e(e){var n;return(n=t.call(this,e,h.default.MEDIA_ATTACHED,h.default.MEDIA_DETACHING,h.default.FRAG_PARSING_METADATA,h.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,n.media=void 0,n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){p.prototype.destroy.call(this)},n.onMediaAttached=function(t){this.media=t.media,this.media},n.onMediaDetaching=function(){Ut(this.id3Track),this.id3Track=void 0,this.media=void 0},n.getID3Track=function(t){for(var e=0;e<t.length;e++){var n=t[e];if("metadata"===n.kind&&"id3"===n.label)return Bt(n,this.media),n}return this.media.addTextTrack("metadata","id3")},n.onFragParsingMetadata=function(t){var e=t.frag,n=t.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=Ft.default.getID3Frames(n[i].data);if(a){var o=n[i].pts,s=i<n.length-1?n[i+1].pts:e.endPTS;o===s?s+=1e-4:s<o&&(d.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),s=o+.25);for(var l=0;l<a.length;l++){var u=a[l];if(!Ft.default.isTimeStampFrame(u)){var c=new r(o,s,"");c.value=u,this.id3Track.addCue(c)}}}}},n.onLiveBackBufferReached=function(t){var e=t.bufferEnd,n=this.id3Track;if(n&&n.cues&&n.cues.length){var r=function(t,e){if(e<t[0].endTime)return t[0];if(e>t[t.length-1].endTime)return t[t.length-1];for(var n=0,r=t.length-1;n<=r;){var i=Math.floor((r+n)/2);if(e<t[i].endTime)r=i-1;else{if(!(e>t[i].endTime))return t[i];n=i+1}}return t[n].endTime-e<e-t[r].endTime?t[n]:t[r]}(n.cues,e);if(r)for(;n.cues[0]!==r;)n.removeCue(n.cues[0])}},e}(p),Vt=function(){function t(t){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}var e=t.prototype;return e.sample=function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_},t}(),Gt=function(){function t(t,e,n,r){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Vt(e),this.fast_=new Vt(n)}var e=t.prototype;return e.sample=function(t,e){var n=(t=Math.max(t,this.minDelayMs_))/1e3,r=8*e/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.canEstimate=function(){var t=this.fast_;return t&&t.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.destroy=function(){},t}();function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Yt=window.performance,Ht=function(t){function e(e){var n;return(n=t.call(this,e,h.default.FRAG_LOADING,h.default.FRAG_LOADED,h.default.FRAG_BUFFERED,h.default.ERROR)||this).lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){this.clearTimer(),p.prototype.destroy.call(this)},n.onFragLoading=function(t){var e=t.frag;if("main"===e.type&&(this.timer||(this.fragCurrent=e,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n,r,i=this.hls,a=i.config,o=e.level;r=i.levels[o].details.live?(n=a.abrEwmaFastLive,a.abrEwmaSlowLive):(n=a.abrEwmaFastVoD,a.abrEwmaSlowVoD),this._bwEstimator=new Gt(i,r,n,a.abrEwmaDefaultEstimate)}},n._abandonRulesCheck=function(){var t=this.hls,e=t.media,n=this.fragCurrent;if(n){var r=n.loader,i=t.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return d.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(e&&a&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&n.autoLevel&&n.level){var o=Yt.now()-a.trequest,s=Math.abs(e.playbackRate);if(o>500*n.duration/s){var l=t.levels,u=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),c=l[n.level],f=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,p=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*f/8)),g=e.currentTime,m=(p-a.loaded)/u,v=($.bufferInfo(e,g,t.config.maxBufferHole).end-g)/s;if(v<2*n.duration/s&&v<m){var y;for(y=n.level-1;i<y;y--){var b=l[y].realBitrate?Math.max(l[y].realBitrate,l[y].bitrate):l[y].bitrate;if(n.duration*b/(6.4*u)<v)break}void 0<m&&(d.logger.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+m.toFixed(1)+":"+v.toFixed(1)),t.nextLoadLevel=y,this._bwEstimator.sample(o,a.loaded),r.abort(),this.clearTimer(),t.trigger(h.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},n.onFragLoaded=function(t){var e=t.frag;if("main"===e.type&&Object(c.isFiniteNumber)(e.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=e.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[e.level],r=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,i=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},n.onFragBuffered=function(t){var e=t.stats,n=t.frag;if(!0!==e.aborted&&"main"===n.type&&Object(c.isFiniteNumber)(n.sn)&&(!n.bitrateTest||e.tload===e.tbuffered)){var r=e.tparsed-e.trequest;d.logger.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(r,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},n.onError=function(t){switch(t.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.clearTimer=function(){clearInterval(this.timer),this.timer=null},n._findBestLevel=function(t,e,n,r,i,a,o,s,l){for(var u=i;r<=u;u--){var c=l[u];if(c){var h=c.details,f=h?h.totalduration/h.fragments.length:e,p=!!h&&h.live,g=void 0;g=u<=t?o*n:s*n;var m=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,v=m*f/g;if(d.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(g)+"/"+m+"/"+f+"/"+a+"/"+v),m<g&&(!v||p&&!this.bitrateTestDelay||v<a))return u}}return-1},function(t,e,n){e&&zt(t.prototype,e),n&&zt(t,n)}(e,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this._bwEstimator;if(!(-1===t||e&&e.canEstimate()))return t;var n=this._nextABRAutoLevel;return-1!==t&&(n=Math.min(t,n)),n},set:function(t){this._nextAutoLevel=t}},{key:"_nextABRAutoLevel",get:function(){var t=this.hls,e=t.maxAutoLevel,n=t.levels,r=t.config,i=t.minAutoLevel,a=t.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,u=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,h=($.bufferInfo(a,l,r.maxBufferHole).end-l)/u,f=this._findBestLevel(o,s,c,i,e,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(0<=f)return f;d.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,g=r.abrBandWidthFactor,m=r.abrBandWidthUpFactor;if(0==h){var v=this.bitrateTestDelay;v&&(p=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-v,d.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),g=m=1)}return f=this._findBestLevel(o,s,c,i,e,h+p,g,m,n),Math.max(f,0)}}]),e}(p),$t=q(),Wt=function(t){function e(e){var n;return(n=t.call(this,e,h.default.MEDIA_ATTACHING,h.default.MEDIA_DETACHING,h.default.MANIFEST_PARSED,h.default.BUFFER_RESET,h.default.BUFFER_APPENDING,h.default.BUFFER_CODECS,h.default.BUFFER_EOS,h.default.BUFFER_FLUSHING,h.default.LEVEL_PTS_UPDATED,h.default.LEVEL_UPDATED)||this)._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n._needsFlush=!1,n._needsEos=!1,n.config=void 0,n.audioTimestampOffset=void 0,n.bufferCodecEventsExpected=0,n._bufferCodecEventsTotal=0,n.media=null,n.mediaSource=null,n.segments=[],n.parent=void 0,n.appending=!1,n.appended=0,n.appendError=0,n.flushBufferCounter=0,n.tracks={},n.pendingTracks={},n.sourceBuffer={},n.flushRange=[],n._onMediaSourceOpen=function(){d.logger.log("media source opened"),n.hls.trigger(h.default.MEDIA_ATTACHED,{media:n.media});var t=n.mediaSource;t&&t.removeEventListener("sourceopen",n._onMediaSourceOpen),n.checkPendingTracks()},n._onMediaSourceClose=function(){d.logger.log("media source closed")},n._onMediaSourceEnded=function(){d.logger.log("media source ended")},n._onSBUpdateEnd=function(){if(n.audioTimestampOffset&&n.sourceBuffer.audio){var t=n.sourceBuffer.audio;d.logger.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+n.audioTimestampOffset),t.timestampOffset=n.audioTimestampOffset,delete n.audioTimestampOffset}n._needsFlush&&n.doFlush(),n._needsEos&&n.checkEos(),n.appending=!1;var e=n.parent,r=n.segments.reduce((function(t,n){return n.parent===e?t+1:t}),0),i={},a=n.sourceBuffer;for(var o in a){var s=a[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");i[o]=s.buffered}n.hls.trigger(h.default.BUFFER_APPENDED,{parent:e,pending:r,timeRanges:i}),n._needsFlush||n.doAppending(),n.updateMediaElementDuration(),0===r&&n.flushLiveBackBuffer()},n._onSBUpdateError=function(t){d.logger.error("sourceBuffer error:",t),n.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.config=e.config,n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){p.prototype.destroy.call(this)},n.onLevelPtsUpdated=function(t){var e=t.type,n=this.tracks.audio;if("audio"===e&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(!r)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(.1<Math.abs(r.timestampOffset-t.start)){var i=r.updating;try{r.abort()}catch(t){d.logger.warn("can not abort audio buffer: "+t)}i?this.audioTimestampOffset=t.start:(d.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+t.start),r.timestampOffset=t.start)}}},n.onManifestParsed=function(t){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=t.altAudio?2:1,d.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.onMediaAttaching=function(t){var e=this.media=t.media;if(e&&$t){var n=this.mediaSource=new $t;n.addEventListener("sourceopen",this._onMediaSourceOpen),n.addEventListener("sourceended",this._onMediaSourceEnded),n.addEventListener("sourceclose",this._onMediaSourceClose),e.src=window.URL.createObjectURL(n),this._objectUrl=e.src}},n.onMediaDetaching=function(){d.logger.log("media source detaching");var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(t){d.logger.warn("onMediaDetaching:"+t.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):d.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(h.default.MEDIA_DETACHED)},n.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.pendingTracks,n=Object.keys(e).length;(n&&!t||2===n)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},n.onBufferReset=function(){var t=this.sourceBuffer;for(var e in t){var n=t[e];try{n&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this._onSBUpdateEnd),n.removeEventListener("error",this._onSBUpdateError))}catch(t){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.onBufferCodecs=function(t){var e=this;Object.keys(this.sourceBuffer).length||(Object.keys(t).forEach((function(n){e.pendingTracks[n]=t[n]})),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},n.createSourceBuffers=function(t){var e=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(var r in t)if(!e[r]){var i=t[r];if(!i)throw Error("source buffer exists for track "+r+", however track does not");var a=i.levelCodec||i.codec,o=i.container+";codecs="+a;d.logger.log("creating sourceBuffer("+o+")");try{var s=e[r]=n.addSourceBuffer(o);s.addEventListener("updateend",this._onSBUpdateEnd),s.addEventListener("error",this._onSBUpdateError),this.tracks[r]={buffer:s,codec:a,id:i.id,container:i.container,levelCodec:i.levelCodec}}catch(t){d.logger.error("error while trying to add sourceBuffer:"+t.message),this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:t,mimeType:o})}}this.hls.trigger(h.default.BUFFER_CREATED,{tracks:this.tracks})},n.onBufferAppending=function(t){this._needsFlush||(this.segments?this.segments.push(t):this.segments=[t],this.doAppending())},n.onBufferEos=function(t){for(var e in this.sourceBuffer)if(!t.type||t.type===e){var n=this.sourceBuffer[e];n&&!n.ended&&(n.ended=!0,d.logger.log(e+" sourceBuffer now EOS"))}this.checkEos()},n.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var n in t){var r=t[n];if(r){if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}}d.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){d.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},n.onBufferFlushing=function(t){t.type?this.flushRange.push({start:t.startOffset,end:t.endOffset,type:t.type}):(this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"video"}),this.flushRange.push({start:t.startOffset,end:t.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},n.flushLiveBackBuffer=function(){if(this._live){var t=this.config.liveBackBufferLength;if(isFinite(t)&&!(t<0))if(this.media)for(var e=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=e-Math.max(t,this._levelTargetDuration),a=r.length-1;0<=a;a--){var o=r[a],s=n[o];if(s){var l=s.buffered;0<l.length&&i>l.start(0)&&this.removeBufferRange(o,s,0,i)&&this.hls.trigger(h.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i})}}else d.logger.error("flushLiveBackBuffer called without attaching media")}},n.onLevelUpdated=function(t){var e=t.details;0<e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this._levelTargetDuration=e.averagetargetduration||e.targetduration||10,this._live=e.live,this.updateMediaElementDuration())},n.updateMediaElementDuration=function(){var t,e=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer){var r=this.sourceBuffer[n];if(r&&!0===r.updating)return}t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===e.liveDurationInfinity?(d.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!Object(c.isFiniteNumber)(t))&&(d.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.doFlush=function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end,t.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;try{for(var r in n){var i=n[r];i&&(e+=i.buffered.length)}}catch(t){d.logger.error("error while accessing sourceBuffer.buffered")}this.appended=e,this.hls.trigger(h.default.BUFFER_FLUSHED)}},n.doAppending=function(){var t=this.config,e=this.hls,n=this.segments,r=this.sourceBuffer;if(Object.keys(r).length){if(!this.media||this.media.error)return this.segments=[],void d.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var i=n.shift();if(i)try{var a=r[i.type];if(!a)return void this._onSBUpdateEnd();if(a.updating)return void n.unshift(i);a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0}catch(r){d.logger.error("error while trying to append buffer:"+r.message),n.unshift(i);var o={type:u.ErrorTypes.MEDIA_ERROR,parent:i.parent,details:"",fatal:!1};22===r.code?(this.segments=[],o.details=u.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=u.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.appendErrorMaxRetry&&(d.logger.log("fail "+t.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),e.trigger(h.default.ERROR,o)}}}},n.flushBuffer=function(t,e,n){var r=this.sourceBuffer;if(!Object.keys(r).length)return!0;var i="null";if(this.media&&(i=this.media.currentTime.toFixed(3)),d.logger.log("flushBuffer,pos/start/end: "+i+"/"+t+"/"+e),this.flushBufferCounter>=this.appended)return d.logger.warn("abort flushing too many retries"),!0;var a=r[n];if(a){if(a.ended=!1,a.updating)return d.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(n,a,t,e))return this.flushBufferCounter++,!1}return d.logger.log("buffer flushed"),!0},n.removeBufferRange=function(t,e,n,r){try{for(var i=0;i<e.buffered.length;i++){var a=e.buffered.start(i),o=e.buffered.end(i),s=Math.max(a,n),l=Math.min(o,r);if(.5<Math.min(l,o)-s){var u="null";return this.media&&(u=this.media.currentTime.toString()),d.logger.log("sb remove "+t+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+u),e.remove(s,l),!0}}}catch(t){d.logger.warn("removeBufferRange failed",t)}return!1},e}(p);function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xt=function(t){function e(e){var n;return(n=t.call(this,e,h.default.FPS_DROP_LEVEL_CAPPING,h.default.MEDIA_ATTACHING,h.default.MANIFEST_PARSED,h.default.BUFFER_CODECS,h.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},n.onFpsDropLevelCapping=function(t){e.isLevelAllowed(t.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(t.droppedLevel)},n.onMediaAttaching=function(t){this.media=t.media instanceof window.HTMLVideoElement?t.media:null},n.onManifestParsed=function(t){var e=this.hls;this.restrictedLevels=[],this.levels=t.levels,this.firstLevel=t.firstLevel,e.config.capLevelToPlayerSize&&t.video&&this.startCapping()},n.onBufferCodecs=function(t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},n.onLevelsUpdated=function(t){this.levels=t.levels},n.onMediaDetaching=function(){this.stopCapping()},n.detectPlayerSize=function(){if(this.media){var t=this.levels?this.levels.length:0;if(t){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t-1),e.autoLevelCapping>this.autoLevelCapping&&e.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},n.getMaxLevel=function(t){var n=this;if(!this.levels)return-1;var r=this.levels.filter((function(r,i){return e.isLevelAllowed(i,n.restrictedLevels)&&i<=t}));return e.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},n.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},e.isLevelAllowed=function(t,e){return void 0===e&&(e=[]),-1===e.indexOf(t)},e.getMaxLevelByMediaSize=function(t,e,n){if(!t||t&&!t.length)return-1;for(var r,i,a=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=n)&&(r=s,!(i=t[o+1])||r.width!==i.width||r.height!==i.height)){a=o;break}}return a},function(t,e,n){e&&Kt(t.prototype,e),n&&Kt(t,n)}(e,[{key:"mediaWidth",get:function(){var t,n=this.media;return n&&(t=n.width||n.clientWidth||n.offsetWidth,t*=e.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t,n=this.media;return n&&(t=n.height||n.clientHeight||n.offsetHeight,t*=e.contentScaleFactor),t}}],[{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(t){}return t}}]),e}(p),qt=window.performance,Zt=function(t){function e(e){return t.call(this,e,h.default.MEDIA_ATTACHING)||this}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},n.onMediaAttaching=function(t){var e=this.hls.config;e.capLevelOnFPSDrop&&("function"==typeof(this.video=t.media instanceof window.HTMLVideoElement?t.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),e.fpsDroppedMonitoringPeriod))},n.checkFPS=function(t,e,n){var r=qt.now();if(e){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=e-this.lastDecodedFrames,s=1e3*a/i,l=this.hls;if(l.trigger(h.default.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),0<s&&a>l.config.fpsDroppedMonitoringThreshold*o){var u=l.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),0<u&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(h.default.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,l.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=e}},n.checkFPSInterval=function(){var t=this.video;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},e}(p),Jt=window,Qt=Jt.performance,te=Jt.XMLHttpRequest,ee=function(){function t(t){t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}var e=t.prototype;return e.destroy=function(){this.abort(),this.loader=null},e.abort=function(){var t=this.loader;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.load=function(t,e,n){this.context=t,this.config=e,this.callbacks=n,this.stats={trequest:Qt.now(),retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},e.loadInternal=function(){var t,e=this.context;t=this.loader=new te;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(t,e.url)}catch(n){t.open("GET",e.url,!0),r(t,e.url)}t.readyState||t.open("GET",e.url,!0)}catch(n){return void this.callbacks.onError({code:t.status,text:n.message},e,t)}e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},e.readystatechange=function(t){var e=t.currentTarget,n=e.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&2<=n)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(Qt.now(),r.trequest)),4===n){var o=e.status;if(200<=o&&o<300){var s,l;r.tload=Math.max(r.tfirst,Qt.now()),l="arraybuffer"===i.responseType?(s=e.response).byteLength:(s=e.responseText).length,r.loaded=r.total=l;var u={url:e.responseURL,data:s};this.callbacks.onSuccess(u,r,i,e)}else r.retry>=a.maxRetry||400<=o&&o<499?(d.logger.error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:e.statusText},i,e)):(d.logger.warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.loadtimeout=function(){d.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.loadprogress=function(t){var e=t.currentTarget,n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,e)},t}();function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var re=function(t){function e(e){var n;return(n=t.call(this,e,h.default.MANIFEST_LOADING,h.default.MANIFEST_PARSED,h.default.AUDIO_TRACK_LOADED,h.default.AUDIO_TRACK_SWITCHED,h.default.LEVEL_LOADED,h.default.ERROR)||this)._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},n.onManifestParsed=function(t){var e=this.tracks=t.audioTracks||[];this.hls.trigger(h.default.AUDIO_TRACKS_UPDATED,{audioTracks:e}),this._selectAudioGroup(this.hls.nextLoadLevel)},n.onAudioTrackLoaded=function(t){if(t.id>=this.tracks.length)d.logger.warn("Invalid audio track id:",t.id);else{if(d.logger.log("audioTrack "+t.id+" loaded"),this.tracks[t.id].details=t.details,t.details.live&&!this.hasInterval()){var e=1e3*t.details.targetduration;this.setInterval(e)}!t.details.live&&this.hasInterval()&&this.clearInterval()}},n.onAudioTrackSwitched=function(t){var e=this.tracks[t.id].groupId;e&&this.audioGroupId!==e&&(this.audioGroupId=e)},n.onLevelLoaded=function(t){this._selectAudioGroup(t.level)},n.onError=function(t){t.type===u.ErrorTypes.NETWORK_ERROR&&(t.fatal&&this.clearInterval(),t.details===u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(d.logger.warn("Network failure on audio-track id:",t.context.id),this._handleLoadError()))},n._setAudioTrack=function(t){if(this._trackId===t&&this.tracks[this._trackId].details)d.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(t<0||t>=this.tracks.length)d.logger.warn("Invalid id passed to audio-track controller");else{var e=this.tracks[t];d.logger.log("Now switching to audio-track index "+t),this.clearInterval(),this._trackId=t;var n=e.url,r=e.type,i=e.id;this.hls.trigger(h.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(e)}},n.doTick=function(){this._updateTrack(this._trackId)},n._selectAudioGroup=function(t){var e=this.hls.levels[t];if(e&&e.audioGroupIds){var n=e.audioGroupIds[e.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},n._selectInitialAudioTrack=function(){var t=this,e=this.tracks;if(e.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=e.filter((function(t){return t.default}));i.length?e=i:d.logger.warn("No default audio tracks defined")}var a=!1,o=function(){e.forEach((function(e){a||t.audioGroupId&&e.groupId!==t.audioGroupId||r&&r!==e.name||(t._setAudioTrack(e.id),a=!0)}))};o(),a||(r=null,o()),a||(d.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},n._needsTrackLoading=function(t){var e=t.details,n=t.url;return!(e&&!e.live)&&!!n},n._loadTrackDetailsIfNeeded=function(t){if(this._needsTrackLoading(t)){var e=t.url,n=t.id;d.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(h.default.AUDIO_TRACK_LOADING,{url:e,id:n})}},n._updateTrack=function(t){if(!(t<0||t>=this.tracks.length)){this.clearInterval(),this._trackId=t,d.logger.log("trying to update audio-track "+t);var e=this.tracks[t];this._loadTrackDetailsIfNeeded(e)}},n._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var t=this._trackId,e=this.tracks[t],n=e.name,r=e.language,i=e.groupId;d.logger.warn("Loading failed on audio track id: "+t+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var a=t,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===n){a=o;break}a!==t?(d.logger.log("Attempting audio-track fallback id:",a,"group-id:",this.tracks[a].groupId),this._setAudioTrack(a)):d.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},function(t,e,n){e&&ne(t.prototype,e),n&&ne(t,n)}(e,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(t){this._setAudioTrack(t),this._selectDefaultTrack=!1}}]),e}(gt);function ie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ae(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}}var oe=window.performance,se=function(t){function e(e,n){var r;return(r=t.call(this,e,h.default.MEDIA_ATTACHED,h.default.MEDIA_DETACHING,h.default.AUDIO_TRACKS_UPDATED,h.default.AUDIO_TRACK_SWITCHING,h.default.AUDIO_TRACK_LOADED,h.default.KEY_LOADED,h.default.FRAG_LOADED,h.default.FRAG_PARSING_INIT_SEGMENT,h.default.FRAG_PARSING_DATA,h.default.FRAG_PARSED,h.default.ERROR,h.default.BUFFER_RESET,h.default.BUFFER_CREATED,h.default.BUFFER_APPENDED,h.default.BUFFER_FLUSHED,h.default.INIT_PTS_FOUND)||this).fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=mt,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.onInitPtsFound=function(t){var e=t.id,n=t.frag.cc,r=t.initPTS;"main"===e&&(this.initPTS[n]=r,this.videoTrackCC=n,d.logger.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===kt&&this.tick())},n.startLoad=function(t){if(this.tracks){var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<e&&-1===t?(d.logger.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=yt):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=vt),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=t,this.state=mt},n.doTick=function(){var t,e,n,r=this.hls,i=r.config;switch(this.state){case Mt:case bt:case xt:break;case vt:this.state=Tt,this.loadedmetadata=!1;break;case yt:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,l=$.bufferInfo(o,t,i.maxBufferHole),u=$.bufferInfo(s,t,i.maxBufferHole),f=l.len,p=l.end,g=this.fragPrevious,m=Math.min(i.maxBufferLength,i.maxMaxBufferLength),v=Math.max(m,u.len),y=this.audioSwitch,b=this.trackId;if((f<v||y)&&b<a.length){if(void 0===(n=a[b].details)){this.state=Tt;break}if(!y&&this._streamEnded(l,n))return this.hls.trigger(h.default.BUFFER_EOS,{type:"audio"}),void(this.state=Lt);var _,E=n.fragments,A=E.length,T=E[0].start,w=E[A-1].start+E[A-1].duration;if(y)if(n.live&&!n.PTSKnown)d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=t,n.PTSKnown&&t<T){if(!(l.end>T||l.nextStart))return;d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=T+.05}if(n.initSegment&&!n.initSegment.data)_=n.initSegment;else if(p<=T){if(_=E[0],null!==this.videoTrackCC&&_.cc!==this.videoTrackCC&&(_=function(t,e){return H.search(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(E,this.videoTrackCC)),n.live&&_.loadIdx&&_.loadIdx===this.fragLoadIdx){var S=l.nextStart?l.nextStart:T;return d.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var x,L=i.maxFragLookUpTolerance,M=g?E[g.sn-E[0].sn+1]:void 0,k=function(t){var e=Math.min(L,t.duration);return t.start+t.duration-e<=p?1:t.start-e>p&&t.start?-1:0};(x=p<w?(w-L<p&&(L=0),M&&!k(M)?M:H.search(E,k)):E[A-1])&&(T=(_=x).start,g&&_.level===g.level&&_.sn===g.sn&&(_.sn<n.endSN?(_=E[_.sn+1-n.startSN],d.logger.log("SN just loaded, load next one: "+_.sn)):_=null))}_&&(_.encrypted?(d.logger.log("Loading key for "+_.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+b),this.state=_t,r.trigger(h.default.KEY_LOADING,{frag:_})):(d.logger.log("Loading "+_.sn+", cc: "+_.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+b+", currentTime:"+t+",bufferEnd:"+p.toFixed(3)),this.fragCurrent=_,!y&&this.fragmentTracker.getState(_)!==j||("initSegment"!==_.sn&&(this.startFragRequested=!0),Object(c.isFiniteNumber)(_.sn)&&(this.nextLoadPosition=_.start+_.duration),r.trigger(h.default.FRAG_LOADING,{frag:_}),this.state=Et)))}break;case Tt:(e=this.tracks[this.trackId])&&e.details&&(this.state=yt);break;case At:var C=oe.now(),R=this.retryDate,P=(o=this.media)&&o.seeking;(!R||R<=C||P)&&(d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=yt);break;case kt:var O=this.videoTrackCC;if(void 0===this.initPTS[O])break;var D=this.waitingFragment;if(D){var I=D.frag.cc;O!==I?(e=this.tracks[this.trackId]).details&&e.details.live&&(d.logger.warn("Waiting fragment CC ("+I+") does not match video track CC ("+O+")"),this.waitingFragment=null,this.state=yt):(this.state=Et,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=yt}},n.onMediaAttached=function(t){var e=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},n.onMediaDetaching=function(){var t=this.media;t&&t.ended&&(d.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},n.onAudioTracksUpdated=function(t){d.logger.log("audio tracks updated"),this.tracks=t.audioTracks},n.onAudioTrackSwitching=function(t){var e=!!t.url;this.trackId=t.id,this.fragCurrent=null,this.state=bt,this.waitingFragment=null,e?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),e&&(this.audioSwitch=!0,this.state=yt),this.tick()},n.onAudioTrackLoaded=function(t){var e=t.details,n=t.id,r=this.tracks[n],i=e.totalduration,a=0;if(d.logger.log("track "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),e.live){var o=r.details;o&&0<e.fragments.length?(at(o,e),a=e.fragments[0].start,e.PTSKnown?d.logger.log("live audio playlist sliding:"+a.toFixed(3)):d.logger.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,d.logger.log("live audio playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(r.details=e,!this.startFragRequested){if(-1===this.startPosition){var s=e.startTimeOffset;Object(c.isFiniteNumber)(s)?(d.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):e.live?(this.startPosition=this.computeLivePosition(a,e),d.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===Tt&&(this.state=yt),this.tick()},n.onKeyLoaded=function(){this.state===_t&&(this.state=yt,this.tick())},n.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag;if(this.state===Et&&e&&"audio"===n.type&&n.level===e.level&&n.sn===e.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,o=e.level,s=e.sn,l=e.cc,u=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",c=this.stats=t.stats;if("initSegment"===s)this.state=yt,c.tparsed=c.tbuffered=oe.now(),i.initSegment.data=t.payload,this.hls.trigger(h.default.FRAG_BUFFERED,{stats:c,frag:e,id:"audio"}),this.tick();else{this.state=wt,this.appended=!1,this.demuxer||(this.demuxer=new et(this.hls,"audio"));var f=this.initPTS[l],p=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==f?(this.pendingBuffering=!0,d.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.demuxer.push(t.payload,p,u,null,e,a,!1,f)):(d.logger.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=t,this.state=kt)}}this.fragLoadError=0},n.onFragParsingInitSegment=function(t){var e=this.fragCurrent,n=t.frag;if(e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===wt){var r,i=t.tracks;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=t.id,this.hls.trigger(h.default.BUFFER_CODECS,i),d.logger.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(h.default.BUFFER_APPENDING,o))}this.tick()}}},n.onFragParsingData=function(t){var e=this,n=this.fragCurrent,r=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&r.sn===n.sn&&r.level===n.level&&this.state===wt){var i=this.trackId,a=this.tracks[i],o=this.hls;Object(c.isFiniteNumber)(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(v.AUDIO),d.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),it(a.details,n,t.startPTS,t.endPTS);var s=this.audioSwitch,l=this.media,f=!1;if(s)if(l&&l.readyState){var p=l.currentTime;d.logger.log("switching audio track : currentTime:"+p),p>=t.startPTS&&(d.logger.log("switching audio track : flushing all audio"),this.state=xt,o.trigger(h.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),f=!0,this.audioSwitch=!1,o.trigger(h.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(h.default.AUDIO_TRACK_SWITCHED,{id:i});var g=this.pendingData;if(!g)return d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(h.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach((function(e){e&&e.length&&g.push({type:t.type,data:e,parent:"audio",content:"data"})})),!f&&g.length&&(g.forEach((function(t){e.state===wt&&(e.pendingBuffering=!0,e.hls.trigger(h.default.BUFFER_APPENDING,t))})),this.pendingData=[],this.appended=!0)),this.tick()}},n.onFragParsed=function(t){var e=this.fragCurrent,n=t.frag;e&&"audio"===t.id&&n.sn===e.sn&&n.level===e.level&&this.state===wt&&(this.stats.tparsed=oe.now(),this.state=St,this._checkAppendedParsed())},n.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.onBufferCreated=function(t){var e=t.tracks.audio;e&&(this.mediaBuffer=e.buffer,this.loadedmetadata=!0),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},n.onBufferAppended=function(t){if("audio"===t.parent){var e=this.state;e!==wt&&e!==St||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed())}},n._checkAppendedParsed=function(){if(!(this.state!==St||this.appended&&this.pendingBuffering)){var t=this.fragCurrent,e=this.stats,n=this.hls;if(t){this.fragPrevious=t,e.tbuffered=oe.now(),n.trigger(h.default.FRAG_BUFFERED,{stats:e,frag:t,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;r&&d.logger.log("audio buffered : "+lt.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(h.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=yt}this.tick()}},n.onError=function(t){var e=t.frag;if(!e||"audio"===e.type)switch(t.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var r=this.fragLoadError;r?r++:r=1;var i=this.config;if(r<=i.fragLoadingMaxRetry){this.fragLoadError=r;var a=Math.min(Math.pow(2,r-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);d.logger.warn("AudioStreamController: frag loading failed, retry in "+a+" ms"),this.retryDate=oe.now()+a,this.state=At}else d.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Mt}break;case u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Mt&&(this.state=t.fatal?Mt:yt,d.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case u.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===wt||this.state===St)){var o=this.mediaBuffer,s=this.media.currentTime;if(o&&$.isBuffered(o,s)&&$.isBuffered(o,s+.5)){var l=this.config;l.maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,d.logger.warn("AudioStreamController: reduce max buffer length to "+l.maxMaxBufferLength+"s")),this.state=yt}else d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=xt,this.hls.trigger(h.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},n.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),e.forEach((function(e){t.hls.trigger(h.default.BUFFER_APPENDING,e)})),this.appended=!0,this.pendingData=[],this.state=St):(this.state=yt,this.fragPrevious=null,this.tick())},function(t,e,n){e&&ie(t.prototype,e),n&&ie(t,n)}(e,[{key:"state",set:function(t){if(this.state!==t){var e=this.state;this._state=t,d.logger.log("audio stream:"+e+"->"+t)}},get:function(){return this._state}}]),e}(Rt),le=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var t={"":!0,lr:!0,rl:!0},e={start:!0,middle:!0,end:!0,left:!0,right:!0};function n(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function i(e,i,a){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",u=!1,c=e,h=i,d=a,f=null,p="",g=!0,m="auto",v="start",y=50,b="middle",_=50,E="middle";Object.defineProperty(o,"id",r({},s,{get:function(){return l},set:function(t){l=""+t}})),Object.defineProperty(o,"pauseOnExit",r({},s,{get:function(){return u},set:function(t){u=!!t}})),Object.defineProperty(o,"startTime",r({},s,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",r({},s,{get:function(){return h},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",r({},s,{get:function(){return d},set:function(t){d=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",r({},s,{get:function(){return f},set:function(t){f=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",r({},s,{get:function(){return p},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");p=n,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",r({},s,{get:function(){return g},set:function(t){g=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",r({},s,{get:function(){return m},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",r({},s,{get:function(){return v},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",r({},s,{get:function(){return y},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",r({},s,{get:function(){return b},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",r({},s,{get:function(){return _},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",r({},s,{get:function(){return E},set:function(t){var e=n(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");E=e,this.hasBeenReset=!0}})),o.displayState=void 0}return i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i}();function ue(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new ae,this.regionList=[]}function ce(){this.values=Object.create(null)}function he(t,e,n,r){var i=r?t.split(r):[t];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);2===o.length&&e(o[0],o[1])}}ce.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var de=new le(0,0,0),fe="middle"===de.align?"middle":"center";function pe(t,e,n){var r=t;function i(){var e=function(t){function e(t,e,n,r){return 3600*(0|t)+60*(0|e)+(0|n)+(0|r)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),a(),e.endTime=i(),a(),function(t,e){var r=new ce;he(t,(function(t,e){switch(t){case"region":for(var i=n.length-1;0<=i;i--)if(n[i].id===e){r.set(t,n[i].region);break}break;case"vertical":r.alt(t,e,["rl","lr"]);break;case"line":var a=e.split(","),o=a[0];r.integer(t,o),r.percent(t,o)&&r.set("snapToLines",!1),r.alt(t,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start",fe,"end"]);break;case"position":a=e.split(","),r.percent(t,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start",fe,"end","line-left","line-right","auto"]);break;case"size":r.percent(t,e);break;case"align":r.alt(t,e,["start",fe,"end","left","right"])}}),/:/,/\s/),e.region=r.get("region",null),e.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===de.line&&(i=-1),e.line=i,e.lineAlign=r.get("lineAlign","start"),e.snapToLines=r.get("snapToLines",!0),e.size=r.get("size",100),e.align=r.get("align",fe);var a=r.get("position","auto");"auto"===a&&50===de.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function ge(t){return t.replace(/<br(?: \/)?>/gi,"\n")}ue.prototype={parse:function(t){var e=this;function n(){var t=e.buffer,n=0;for(t=ge(t);n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var r=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),r}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var i=(r=n()).match(/^()?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var a=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(a?a=!1:r=n(),e.state){case"HEADER":/:/.test(r)?he(r,(function(t,e){}),/:/):r||(e.state="ID");continue;case"NOTE":r||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){e.state="NOTE";break}if(!r)continue;if(e.cue=new le(0,0,""),e.state="CUE",-1===r.indexOf("--\x3e")){e.cue.id=r;continue}case"CUE":try{pe(r,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var o=-1!==r.indexOf("--\x3e");if(!r||o&&(a=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=r;continue;case"BADCUE":r||(e.state="ID");continue}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(t){throw t}return this.onflush&&this.onflush(),this}};var me=ue;function ve(t,e,n,r){for(var i,a,o,s,l,u=window.VTTCue||TextTrackCue,c=0;c<r.rows.length;c++)if(o=!0,s=0,l="",!(i=r.rows[c]).isEmpty()){for(var h=0;h<i.chars.length;h++)i.chars[h].uchar.match(/\s/)&&o?s++:(l+=i.chars[h].uchar,o=!1);(i.cueStartTime=e)===n&&(n+=1e-4),a=new u(e,n,ge(l.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=7<c?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100)),t.addCue(a)}}function ye(t){var e=t;return Ee.hasOwnProperty(t)&&(e=Ee[t]),String.fromCharCode(e)}var be,_e,Ee={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ae={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Te={17:2,18:4,21:6,22:8,23:10,19:13,20:15},we={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Se={25:2,26:4,29:6,30:8,31:10,27:13,28:15},xe=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function Le(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toString(16));return e}function Me(t,e,n){return t.substr(n||0,e.length)===e}function ke(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()}(_e=be||(be={}))[_e.ERROR=0]="ERROR",_e[_e.TEXT=1]="TEXT",_e[_e.WARNING=2]="WARNING",_e[_e.INFO=2]="INFO",_e[_e.DEBUG=3]="DEBUG",_e[_e.DATA=3]="DATA";var Ce={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(t){this.time=t},log:function(t,e){this.verboseFilter[t],this.verboseLevel}},Re=function(){function t(t,e,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],n=0;n<e.length;n++){var r=e[n];t.hasOwnProperty(r)&&(this[r]=t[r])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Pe=function(){function t(t,e,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Re(e,n,r,i,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Oe=function(){function t(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var t=0;t<100;t++)this.chars.push(new Pe);this.pos=0,this.currPenState=new Re}var e=t.prototype;return e.equals=function(t){for(var e=!0,n=0;n<100;n++)if(!this.chars[n].equals(t.chars[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<100;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<100;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(Ce.log("ERROR","Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(Ce.log("ERROR","Too large cursor position "+this.pos),this.pos=100)},e.moveCursor=function(t){var e=this.pos+t;if(1<t)for(var n=this.pos+1;n<e+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){144<=t&&this.backSpace();var e=ye(t);100<=this.pos?Ce.log("ERROR","Cannot insert "+t.toString(16)+" ("+e+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(e,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<100;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,n=0;n<100;n++){var r=this.chars[n].uchar;" "!==r&&(e=!1),t.push(r)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),De=function(){function t(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var t=0;t<15;t++)this.rows.push(new Oe);this.currRow=14,this.nrRollUpRows=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<15;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,n=0;n<15;n++)if(!this.rows[n].equals(t.rows[n])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<15;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<15;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){Ce.log("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){Ce.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var n=0;n<15;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&Ce.time&&a<Ce.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(i.rows[r+o])}}this.currRow=e;var s=this.rows[this.currRow];if(null!==t.indent){var l=t.indent,u=Math.max(l-1,0);s.setCursor(t.indent),t.color=s.chars[u].penState.foreground}var c={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(c)},e.setBkgData=function(t){Ce.log("INFO","bkgData = "+JSON.stringify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){if(null!==this.nrRollUpRows){Ce.log("TEXT",this.getDisplayText());var t=this.currRow+1-this.nrRollUpRows,e=this.rows.splice(t,1)[0];e.clear(),this.rows.splice(this.currRow,0,e),Ce.log("INFO","Rolling up")}else Ce.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,t?e.push("Row "+r+": '"+a+"'"):e.push(a.trim()))}return 0<e.length&&(n=t?"["+e.join(" | ")+"]":e.join("\n")),n},e.getTextAndFormat=function(){return this.rows},t}(),Ie=function(){function t(t,e){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new De,this.nonDisplayedMemory=new De,this.lastOutputScreen=new De,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,Ce.log("INFO","MODE="+t),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=0;e<t.length;e++)this.writeScreen.insertChar(t[e]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";Ce.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(Ce.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.ccRCL=function(){Ce.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){Ce.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){Ce.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){Ce.log("INFO","RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){Ce.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){Ce.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){Ce.log("INFO","TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){Ce.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){Ce.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){Ce.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){Ce.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){if(Ce.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,Ce.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.ccTO=function(t){Ce.log("INFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=46<=t,e.italics)e.foreground="white";else{var n=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}Ce.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=Ce.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),Ne=function(){function t(t,e,n){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=t||1,this.outputs=[e,n],this.channels=[new Ie(1,e),new Ie(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var n,r,i,a=!1;this.lastTime=t,Ce.setTime(t);for(var o=0;o<e.length;o+=2)r=127&e[o],i=127&e[o+1],0!=r||0!=i?(Ce.log("DATA","["+Le([e[o],e[o+1]])+"] -> ("+Le([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),n||(a=this.parseChars(r,i))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(a):Ce.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,Ce.log("WARNING","Couldn't parse cleaned data "+Le([r,i])+" orig: "+Le([e[o],e[o+1]])))):this.dataCounters.padding+=2},e.parseCmd=function(t,e){var n=null;if(!((20===t||28===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&33<=e&&e<=35))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,Ce.log("DEBUG","Repeated command ("+Le([t,e])+") is dropped"),!0;n=20===t||23===t?1:2;var r=this.channels[n-1];return 20===t||28===t?32===e?r.ccRCL():33===e?r.ccBS():34===e?r.ccAOF():35===e?r.ccAON():36===e?r.ccDER():37===e?r.ccRU(2):38===e?r.ccRU(3):39===e?r.ccRU(4):40===e?r.ccFON():41===e?r.ccRDC():42===e?r.ccTR():43===e?r.ccRTD():44===e?r.ccEDM():45===e?r.ccCR():46===e?r.ccENM():47===e&&r.ccEOC():r.ccTO(e-32),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},e.parseMidrow=function(t,e){var n=null;return(17===t||25===t)&&32<=e&&e<=47&&((n=17===t?1:2)!==this.currChNr?(Ce.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(e),Ce.log("DEBUG","MIDROW ("+Le([t,e])+")"),!0))},e.parsePAC=function(t,e){var n,r=null;if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127)&&!((16===t||24===t)&&64<=e&&e<=95))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);n=t<=23?1:2,r=64<=e&&e<=95?1==n?Ae[t]:we[t]:1==n?Te[t]:Se[t];var i=this.interpretPAC(r,e);return this.channels[n-1].setPAC(i),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=n,!0},e.interpretPAC=function(t,e){var n=e,r={color:null,italics:!1,indent:null,underline:!1,row:t};return n=95<e?e-96:e-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.parseChars=function(t,e){var n=null,r=null,i=null;if(17<=(i=25<=t?(n=2,t-8):(n=1,t))&&i<=19){var a=e;a=17===i?e+80:18===i?e+112:e+144,Ce.log("INFO","Special char '"+ye(a)+"' in channel "+n),r=[a]}else 32<=t&&t<=127&&(r=0===e?[t]:[t,e]);if(r){var o=Le(r);Ce.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},e.parseBackgroundAttributes=function(t,e){var n,r,i;return((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47)&&(n={},16===t||24===t?(r=Math.floor((e-32)/2),n.background=xe[r],e%2==1&&(n.background=n.background+"_semi")):45===e?n.background="transparent":(n.foreground="black",47===e&&(n.underline=!0)),i=t<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,!(this.lastCmdB=null))},e.reset=function(){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].reset();this.lastCmdA=null,this.lastCmdB=null},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].cueSplitAtTime(t)},t}(),Fe=function(){function t(t,e){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=t,this.trackName=e,this.startTime=null,this.endTime=null,this.screen=null}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.newCue=function(t,e,n){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t}(),Be={parse:function(t,e,n,r,i,a){var o,s=Object(Ft.utf8ArrayToStr)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),l="00:00.000",u=0,h=0,d=0,f=[],p=!0,g=!1,m=new me;m.oncue=function(t){var e=n[r],i=n.ccOffset;e&&e.new&&(void 0!==h?i=n.ccOffset=e.start:function(t,e,n){var r=t[e],i=t[r.prevCC];if(!i||!i.new&&r.new)return t.ccOffset=t.presentationOffset=r.start,r.new=!1;for(;i&&i.new;)t.ccOffset+=r.start-i.start,r.new=!1,i=t[(r=i).prevCC];t.presentationOffset=n}(n,r,d)),d&&(i=d-n.presentationOffset),g&&(t.startTime+=i-h,t.endTime+=i-h),t.id=ke(t.startTime.toString())+ke(t.endTime.toString())+ke(t.text),t.text=decodeURIComponent(encodeURIComponent(t.text)),0<t.endTime&&f.push(t)},m.onparsingerror=function(t){o=t},m.onflush=function(){o&&a?a(o):i(f)},s.forEach((function(t){if(p){if(Me(t,"X-TIMESTAMP-MAP=")){g=!(p=!1),t.substr(16).split(",").forEach((function(t){Me(t,"LOCAL:")?l=t.substr(6):Me(t,"MPEGTS:")&&(u=parseInt(t.substr(7)))}));try{e+(9e4*n[r].start||0)<0&&(e+=8589934592),u-=e,h=function(t){var e=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),r=parseInt(t.substr(-9,2)),i=9<t.length?parseInt(t.substr(0,t.indexOf(":"))):0;if(!(Object(c.isFiniteNumber)(e)&&Object(c.isFiniteNumber)(n)&&Object(c.isFiniteNumber)(r)&&Object(c.isFiniteNumber)(i)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*n,e+=6e4*r,e+36e5*i}(l)/1e3,d=u/9e4}catch(t){g=!1,o=t}return}""===t&&(p=!1)}m.parse(t+"\n")})),m.flush()}};function Ue(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var je=function(t){function e(e){var n;if((n=t.call(this,e,h.default.MEDIA_ATTACHING,h.default.MEDIA_DETACHING,h.default.FRAG_PARSING_USERDATA,h.default.FRAG_DECRYPTED,h.default.MANIFEST_LOADING,h.default.MANIFEST_LOADED,h.default.FRAG_LOADED,h.default.INIT_PTS_FOUND)||this).media=null,n.config=void 0,n.enabled=!0,n.Cues=void 0,n.textTracks=[],n.tracks=[],n.initPTS=[],n.unparsedVttFrags=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties=void 0,n.cea608Parser=void 0,n.lastSn=-1,n.prevCC=-1,n.vttCCs=null,n.hls=e,n.config=e.config,n.Cues=e.config.cueHandler,n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var r=new Fe(Ue(n),"textTrack1"),i=new Fe(Ue(n),"textTrack2");n.cea608Parser=new Ne(0,r,i)}return n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.addCues=function(t,e,n,r){for(var i,a,o,s,l=this.cueRanges,u=!1,c=l.length;c--;){var h=l[c],d=(i=h[0],a=h[1],o=e,s=n,Math.min(a,s)-Math.max(i,o));if(0<=d&&(h[0]=Math.min(h[0],e),h[1]=Math.max(h[1],n),u=!0,.5<d/(n-e)))return}u||l.push([e,n]),this.Cues.newCue(this.captionsTracks[t],e,n,r)},n.onInitPtsFound=function(t){var e=this,n=t.frag,r=t.id,i=t.initPTS,a=this.unparsedVttFrags;"main"===r&&(this.initPTS[n.cc]=i),a.length&&(this.unparsedVttFrags=[],a.forEach((function(t){e.onFragLoaded(t)})))},n.getExistingTrack=function(t){var e=this.media;if(e)for(var n=0;n<e.textTracks.length;n++){var r=e.textTracks[n];if(r[t])return r}return null},n.createCaptionsTrack=function(t){var e=this.captionsProperties,n=this.captionsTracks,r=this.media,i=e[t],a=i.label,o=i.languageCode;if(!n[t]){var s=this.getExistingTrack(t);if(s)n[t]=s,Ut(n[t]),Bt(n[t],r);else{var l=this.createTextTrack("captions",a,o);l&&(l[t]=!0,n[t]=l)}}},n.createTextTrack=function(t,e,n){var r=this.media;if(r)return r.addTextTrack(t,e,n)},n.destroy=function(){t.prototype.destroy.call(this)},n.onMediaAttaching=function(t){this.media=t.media,this._cleanTracks()},n.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){Ut(t[e]),delete t[e]}))},n.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},n._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var n=0;n<e.length;n++)Ut(e[n])}},n.onManifestLoaded=function(t){var e=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=t.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach((function(t,r){var i,a,o;if(r<n.length){for(var s=null,l=0;l<n.length;l++)if(a=n[l],o=t,a&&a.label===o.name&&!a.textTrack1&&!a.textTrack2){s=n[l];break}s&&(i=s)}i||(i=e.createTextTrack("subtitles",t.name,t.lang)),t.default?i.mode=e.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",e.textTracks.push(i)}))}},n.onFragLoaded=function(t){var e=t.frag,n=t.payload,r=this.cea608Parser,i=this.initPTS,a=this.lastSn,o=this.unparsedVttFrags;if("main"===e.type){var s=e.sn;e.sn!==a+1&&r&&r.reset(),this.lastSn=s}else if("subtitle"===e.type)if(n.byteLength){if(!Object(c.isFiniteNumber)(i[e.cc]))return o.push(t),void(i.length&&this.hls.trigger(h.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e}));var l=e.decryptdata;null!=l&&null!=l.key&&"AES-128"===l.method||this._parseVTTs(e,n)}else this.hls.trigger(h.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},n._parseVTTs=function(t,e){var n=this.hls,r=this.prevCC,i=this.textTracks,a=this.vttCCs;a[t.cc]||(a[t.cc]={start:t.start,prevCC:r,new:!0},this.prevCC=t.cc),Be.parse(e,this.initPTS[t.cc],a,t.cc,(function(e){var r=i[t.level];"disabled"!==r.mode?(e.forEach((function(t){if(!r.cues.getCueById(t.id))try{if(r.addCue(t),!r.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(e){d.logger.debug("Failed occurred on adding cues: "+e);var n=new window.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,r.addCue(n)}})),n.trigger(h.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})):n.trigger(h.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}),(function(e){d.logger.log("Failed to parse VTT cue: "+e),n.trigger(h.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}))},n.onFragDecrypted=function(t){var e=t.frag,n=t.payload;if("subtitle"===e.type){if(!Object(c.isFiniteNumber)(this.initPTS[e.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(e,n)}},n.onFragParsingUserdata=function(t){if(this.enabled&&this.cea608Parser)for(var e=0;e<t.samples.length;e++){var n=t.samples[e].bytes;if(n){var r=this.extractCea608Data(n);this.cea608Parser.addData(t.samples[e].pts,r)}}},n.extractCea608Data=function(t){for(var e,n,r,i=31&t[0],a=2,o=[],s=0;s<i;s++)e=t[a++],n=127&t[a++],r=127&t[a++],0==n&&0==r||0!=(4&e)&&0==(3&e)&&(o.push(n),o.push(r));return o},e}(p);function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ge(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];"subtitles"===r.kind&&r.label&&e.push(t[n])}return e}var ze,Ye,He=function(t){function e(e){var n;return(n=t.call(this,e,h.default.MEDIA_ATTACHED,h.default.MEDIA_DETACHING,h.default.MANIFEST_LOADED,h.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],n.trackId=-1,n.media=null,n.stopped=!0,n.subtitleDisplay=!0,n.queuedDefaultTrack=null,n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.destroy=function(){p.prototype.destroy.call(this)},n.onMediaAttached=function(t){var e=this;this.media=t.media,this.media&&(Object(c.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval((function(){e.trackChangeListener()}),500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},n.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(c.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Ge(this.media.textTracks).forEach((function(t){Ut(t)})),this.subtitleTrack=-1,this.media=null)},n.onManifestLoaded=function(t){var e=this,n=t.subtitles||[];this.tracks=n,this.hls.trigger(h.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach((function(t){t.default&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)}))},n.onSubtitleTrackLoaded=function(t){var e=this,n=t.id,r=t.details,i=this.trackId,a=this.tracks,o=a[i];if(n>=a.length||n!==i||!o||this.stopped)this._clearReloadTimer();else if(d.logger.log("subtitle track "+n+" loaded"),r.live){var s=st(o.details,r,t.stats.trequest);d.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout((function(){e._loadCurrentTrack()}),s)}else this._clearReloadTimer()},n.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},n.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},n._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},n._loadCurrentTrack=function(){var t=this.trackId,e=this.tracks,n=this.hls,r=e[t];t<0||!r||r.details&&!r.details.live||(d.logger.log("Loading subtitle track "+t),n.trigger(h.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:t}))},n._toggleTrackModes=function(t){var e=this.media,n=this.subtitleDisplay,r=this.trackId;if(e){var i=Ge(e.textTracks);if(-1===t)[].slice.call(i).forEach((function(t){t.mode="disabled"}));else{var a=i[r];a&&(a.mode="disabled")}var o=i[t];o&&(o.mode=n?"showing":"hidden")}},n._setSubtitleTrackInternal=function(t){var e=this.hls,n=this.tracks;!Object(c.isFiniteNumber)(t)||t<-1||t>=n.length||(this.trackId=t,d.logger.log("Switching to subtitle track "+t),e.trigger(h.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},n._onTextTracksChanged=function(){if(this.media){for(var t=-1,e=Ge(this.media.textTracks),n=0;n<e.length;n++)if("hidden"===e[n].mode)t=n;else if("showing"===e[n].mode){t=n;break}this.subtitleTrack=t}},function(t,e,n){e&&Ve(t.prototype,e),n&&Ve(t,n)}(e,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.trackId!==t&&(this._toggleTrackModes(t),this._setSubtitleTrackInternal(t))}}]),e}(p),$e=n("./src/crypt/decrypter.js"),We=window.performance,Ke=function(t){function e(e,n){var r;return(r=t.call(this,e,h.default.MEDIA_ATTACHED,h.default.MEDIA_DETACHING,h.default.ERROR,h.default.KEY_LOADED,h.default.FRAG_LOADED,h.default.SUBTITLE_TRACKS_UPDATED,h.default.SUBTITLE_TRACK_SWITCH,h.default.SUBTITLE_TRACK_LOADED,h.default.SUBTITLE_FRAG_PROCESSED,h.default.LEVEL_UPDATED)||this).fragmentTracker=n,r.config=e.config,r.state=mt,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new $e.default(e,e.config),r.lastAVStart=0,r._onMediaSeeking=r.onMediaSeeking.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.onSubtitleFragProcessed=function(t){var e=t.frag,n=t.success;if(this.fragPrevious=e,this.state=yt,n){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var i,a=e.start,o=0;o<r.length;o++)if(a>=r[o].start&&a<=r[o].end){i=r[o];break}var s=e.start+e.duration;i?i.end=s:(i={start:a,end:s},r.push(i))}}},n.onMediaAttached=function(t){var e=t.media;(this.media=e).addEventListener("seeking",this._onMediaSeeking),this.state=yt},n.onMediaDetaching=function(){var t=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach((function(e){t.tracksBuffered[e.id]=[]})),this.media=null,this.state=mt)},n.onError=function(t){var e=t.frag;e&&"subtitle"===e.type&&(this.state=yt)},n.onSubtitleTracksUpdated=function(t){var e=this;d.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=t.subtitleTracks,this.tracks.forEach((function(t){e.tracksBuffered[t.id]=[]}))},n.onSubtitleTrackSwitch=function(t){if(this.currentTrackId=t.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var e=this.tracks[this.currentTrackId];e&&e.details&&this.setInterval(500)}else this.clearInterval()},n.onSubtitleTrackLoaded=function(t){var e=t.id,n=t.details,r=this.currentTrackId,i=this.tracks,a=i[r];e>=i.length||e!==r||!a||(n.live&&function(t,e,n){void 0===n&&(n=0);var r=-1;ot(t,e,(function(t,e,n){e.start=t.start,r=n}));var i=e.fragments;if(r<0)i.forEach((function(t){t.start+=n}));else for(var a=r+1;a<i.length;a++)i[a].start=i[a-1].start+i[a-1].duration}(a.details,n,this.lastAVStart),a.details=n,this.setInterval(500))},n.onKeyLoaded=function(){this.state===_t&&(this.state=yt)},n.onFragLoaded=function(t){var e=this.fragCurrent,n=t.frag.decryptdata,r=t.frag,i=this.hls;if(this.state===Et&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&0<t.payload.byteLength&&n&&n.key&&"AES-128"===n.method){var a=We.now();this.decrypter.decrypt(t.payload,n.key.buffer,n.iv.buffer,(function(t){var e=We.now();i.trigger(h.default.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:a,tdecrypt:e}})}))}},n.onLevelUpdated=function(t){var e=t.details.fragments;this.lastAVStart=e.length?e[0].start:0},n.doTick=function(){if(this.media)switch(this.state){case yt:var t=this.config,e=this.currentTrackId,n=this.fragmentTracker,r=this.media,i=this.tracks;if(!i||!i[e]||!i[e].details)break;var a,o=t.maxBufferHole,s=t.maxFragLookUpTolerance,l=Math.min(t.maxBufferLength,t.maxMaxBufferLength),u=$.bufferedInfo(this._getBuffered(),r.currentTime,o),c=u.end,f=u.len,p=i[e].details,g=p.fragments,m=g.length,v=g[m-1].start+g[m-1].duration;if(l<f)return;var y=this.fragPrevious;c<v?(y&&p.hasProgramDateTime&&(a=ht(g,y.endProgramDateTime,s)),a||(a=dt(y,g,c,s))):a=g[m-1],a&&a.encrypted?(d.logger.log("Loading key for "+a.sn),this.state=_t,this.hls.trigger(h.default.KEY_LOADING,{frag:a})):a&&n.getState(a)===j&&(this.fragCurrent=a,this.state=Et,this.hls.trigger(h.default.FRAG_LOADING,{frag:a}))}else this.state=yt},n.stopLoad=function(){this.lastAVStart=0,t.prototype.stopLoad.call(this)},n._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},n.onMediaSeeking=function(){this.fragPrevious=null},e}(Rt);(Ye=ze||(ze={})).WIDEVINE="com.widevine.alpha",Ye.PLAYREADY="com.microsoft.playready";var Xe="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ze=function(t){function e(e){var n;return(n=t.call(this,e,h.default.MEDIA_ATTACHED,h.default.MEDIA_DETACHED,h.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,n._licenseXhrSetup=void 0,n._emeEnabled=void 0,n._requestMediaKeySystemAccess=void 0,n._config=void 0,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._requestLicenseFailureCount=0,n._onMediaEncrypted=function(t){d.logger.log('Media is encrypted using "'+t.initDataType+'" init data type'),n._attemptSetMediaKeys(),n._generateRequestWithPreferredKeySession(t.initDataType,t.initData)},n._config=e.config,n._widevineLicenseUrl=n._config.widevineLicenseUrl,n._licenseXhrSetup=n._config.licenseXhrSetup,n._emeEnabled=n._config.emeEnabled,n._requestMediaKeySystemAccess=n._config.requestMediaKeySystemAccessFunc,n}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t);var n=e.prototype;return n.getLicenseServerUrl=function(t){switch(t){case ze.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+t+'"')},n._attemptKeySystemAccess=function(t,e,n){var r=this,i=function(t,e,n){switch(t){case ze.WIDEVINE:return function(t,e){var n={videoCapabilities:[]};return e.forEach((function(t){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+t+'"'})})),[n]}(0,n);default:throw new Error("Unknown key-system: "+t)}}(t,0,n);d.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,i).then((function(e){r._onMediaKeySystemAccessObtained(t,e)})).catch((function(e){d.logger.error('Failed to obtain key-system "'+t+'" access:',e)}))},n._onMediaKeySystemAccessObtained=function(t,e){var n=this;d.logger.log('Access for key-system "'+t+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r),e.createMediaKeys().then((function(e){r.mediaKeys=e,d.logger.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated()})).catch((function(t){d.logger.error("Failed to create media-keys:",t)}))},n._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach((function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))}))},n._onNewMediaKeySession=function(t){var e=this;d.logger.log("New key-system session "+t.sessionId),t.addEventListener("message",(function(n){e._onKeySessionMessage(t,n.message)}),!1)},n._onKeySessionMessage=function(t,e){d.logger.log("Got EME message event, creating license request"),this._requestLicense(e,(function(e){d.logger.log("Received license data (length: "+(e?e.byteLength:e)+"), updating key-session"),t.update(e)}))},n._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return d.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});d.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},n._generateRequestWithPreferredKeySession=function(t,e){var n=this,r=this._mediaKeysList[0];if(!r)return d.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(r.mediaKeysSessionInitialized)d.logger.warn("Key-Session already initialized but requested again");else{var i=r.mediaKeysSession;if(!i)return d.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!e)return d.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});d.logger.log('Generating key-session request for "'+t+'" init data type'),r.mediaKeysSessionInitialized=!0,i.generateRequest(t,e).then((function(){d.logger.debug("Key-session generation succeeded")})).catch((function(t){d.logger.error("Error generating key-session request:",t),n.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},n._createLicenseXhr=function(t,e,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,t)}catch(e){r.open("POST",t,!0),i(r,t)}r.readyState||r.open("POST",t,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,t,e,n),r},n._onLicenseRequestReadyStageChange=function(t,e,n,r){switch(t.readyState){case 4:if(200===t.status)this._requestLicenseFailureCount=0,d.logger.log("License request succeeded"),"arraybuffer"!==t.responseType&&d.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),r(t.response);else{if(d.logger.error("License Request XHR failed ("+e+"). Status: "+t.status+" ("+t.statusText+")"),this._requestLicenseFailureCount++,3<this._requestLicenseFailureCount)return void this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var i=3-this._requestLicenseFailureCount+1;d.logger.warn("Retrying license request, "+i+" attempts left"),this._requestLicense(n,r)}}},n._generateLicenseRequestChallenge=function(t,e){switch(t.mediaKeySystemDomain){case ze.WIDEVINE:return e}throw new Error("unsupported key-system: "+t.mediaKeySystemDomain)},n._requestLicense=function(t,e){d.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return d.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,t,e);d.logger.log("Sending license request to URL: "+r);var a=this._generateLicenseRequestChallenge(n,t);i.send(a)}catch(t){d.logger.error("Failure requesting DRM license: "+t),this.hls.trigger(h.default.ERROR,{type:u.ErrorTypes.KEY_SYSTEM_ERROR,details:u.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},n.onMediaAttached=function(t){if(this._emeEnabled){var e=t.media;(this._media=e).addEventListener("encrypted",this._onMediaEncrypted)}},n.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},n.onManifestParsed=function(t){if(this._emeEnabled){var e=t.levels.map((function(t){return t.audioCodec})),n=t.levels.map((function(t){return t.videoCodec}));this._attemptKeySystemAccess(ze.WIDEVINE,e,n)}},function(t,e,n){e&&qe(t.prototype,e),n&&qe(t,n)}(e,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),e}(p);function Je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Qe=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Je(t,e,n[e])}))}return t}({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:ee,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Ht,bufferController:Wt,capLevelController:Xt,fpsController:Zt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Xe},function(){return{cueHandler:r,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es"}}(),{subtitleStreamController:Ke,subtitleTrackController:He,timelineController:je,audioStreamController:se,audioTrackController:re,emeController:Ze});function tn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function en(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rn(t,e,n){return e&&nn(t.prototype,e),n&&nn(t,n),t}n.d(e,"default",(function(){return an}));var an=function(t){function e(n){var r;void 0===n&&(n={}),(r=t.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var i=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){tn(t,e,n[e])}))}return t}({},i,n);var a=en(r).config;if(void 0!==a.liveMaxLatencyDurationCount&&a.liveMaxLatencyDurationCount<=a.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==a.liveMaxLatencyDuration&&(void 0===a.liveSyncDuration||a.liveMaxLatencyDuration<=a.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(d.enableLogs)(a.debug),r._autoLevelCapping=-1;var o=r.abrController=new a.abrController(en(r)),s=new a.bufferController(en(r)),l=r.capLevelController=new a.capLevelController(en(r)),u=new a.fpsController(en(r)),c=new F(en(r)),h=new B(en(r)),f=new U(en(r)),p=new jt(en(r)),g=r.levelController=new Nt(en(r)),m=new Y(en(r)),v=[g,r.streamController=new Ot(en(r),m)],y=a.audioStreamController;y&&v.push(new y(en(r),m)),r.networkControllers=v;var b=[c,h,f,o,s,l,u,p,m];if(y=a.audioTrackController){var _=new y(en(r));r.audioTrackController=_,b.push(_)}if(y=a.subtitleTrackController){var E=new y(en(r));r.subtitleTrackController=E,v.push(E)}if(y=a.emeController){var A=new y(en(r));r.emeController=A,b.push(A)}return(y=a.subtitleStreamController)&&v.push(new y(en(r),m)),(y=a.timelineController)&&b.push(new y(en(r))),r.coreComponents=b,r}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(e,t),e.isSupported=function(){return function(){var t=q();if(!t)return!1;var e=self.SourceBuffer||self.WebKitSourceBuffer,n=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!n&&!!r}()},rn(e,null,[{key:"version",get:function(){return"0.13.2"}},{key:"Events",get:function(){return h.default}},{key:"ErrorTypes",get:function(){return u.ErrorTypes}},{key:"ErrorDetails",get:function(){return u.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:Qe},set:function(t){e.defaultConfig=t}}]);var n=e.prototype;return n.destroy=function(){d.logger.log("destroy"),this.trigger(h.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach((function(t){t.destroy()})),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},n.attachMedia=function(t){d.logger.log("attachMedia"),this.media=t,this.trigger(h.default.MEDIA_ATTACHING,{media:t})},n.detachMedia=function(){d.logger.log("detachMedia"),this.trigger(h.default.MEDIA_DETACHING),this.media=null},n.loadSource=function(t){t=l.buildAbsoluteURL(window.location.href,t,{alwaysNormalize:!0}),d.logger.log("loadSource:"+t),this.url=t,this.trigger(h.default.MANIFEST_LOADING,{url:t})},n.startLoad=function(t){void 0===t&&(t=-1),d.logger.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},n.stopLoad=function(){d.logger.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},n.swapAudioCodec=function(){d.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},n.recoverMediaError=function(){d.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),t&&this.attachMedia(t)},rn(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){d.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){d.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){d.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){d.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){d.logger.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){d.logger.log("set autoLevelCapping:"+t),this._autoLevelCapping=t}},{key:"bandwidthEstimate",get:function(){var t=this.abrController._bwEstimator;return t?t.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var t=this.levels,e=this.config.minAutoBitrate,n=t?t.length:0,r=0;r<n;r++)if(e<(t[r].realBitrate?Math.max(t[r].realBitrate,t[r].bitrate):t[r].bitrate))return r;return 0}},{key:"maxAutoLevel",get:function(){var t=this.levels,e=this.autoLevelCapping;return-1===e&&t&&t.length?t.length-1:e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),e}(J);an.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":function(t,e,n){"use strict";n.r(e),n.d(e,"isFiniteNumber",(function(){return r}));var r=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)}},"./src/utils/get-self-scope.js":function(t,e,n){"use strict";function r(){return"undefined"==typeof window?self:window}n.r(e),n.d(e,"getSelfScope",(function(){return r}))},"./src/utils/logger.js":function(t,e,n){"use strict";n.r(e),n.d(e,"enableLogs",(function(){return u})),n.d(e,"logger",(function(){return c}));var r=n("./src/utils/get-self-scope.js");function i(){}var a={trace:i,debug:i,log:i,warn:i,info:i,error:i},o=a,s=Object(r.getSelfScope)();function l(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){o[e]=t[e]?t[e].bind(t):function(t){var e=s.console[t];return e?function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r[0]&&(r[0]=function(t,e){return"["+t+"] > "+e}(t,r[0])),e.apply(s.console,r)}:i}(e)}))}var u=function(t){if(s.console&&!0===t||"object"==typeof t){l(t,"debug","log","info","warn","error");try{o.log()}catch(t){o=a}}else o=a},c=o}},t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="/dist/",t(t.s="./src/hls.ts")).default;function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var e,n},t.exports=r())},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(0)),i=u(n(1)),a=u(n(3)),o=u(n(2)),s=u(n(11)),l=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}n(203);var c,h=(c=s.default,(0,o.default)(d,c),d.prototype.getPlaybackType=function(){return s.default.NO_OP},(0,a.default)(d,[{key:"name",get:function(){return"html_img"}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),d.prototype.render=function(){return this.trigger(l.default.PLAYBACK_READY,this.name),this},d.prototype._onLoad=function(){this.trigger(l.default.PLAYBACK_ENDED,this.name)},d.prototype._onError=function(t){var e="error"===t.type?"load error":"loading aborted";this.trigger(l.default.PLAYBACK_ERROR,{message:e},this.name)},d);function d(t){(0,r.default)(this,d);var e=(0,i.default)(this,c.call(this,t));return e.el.src=t.src,e}(e.default=h).canPlay=function(t){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(t)},t.exports=e.default},function(t,e,n){var r=n(204);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,"[data-html-img]{max-width:100%;max-height:100%}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n(0)),i=d(n(1)),a=d(n(3)),o=d(n(2)),s=n(5),l=d(n(11)),u=d(n(7)),c=d(n(4)),h=d(n(206));function d(t){return t&&t.__esModule?t:{default:t}}n(207);var f,p=(f=l.default,(0,o.default)(g,f),(0,a.default)(g,[{key:"name",get:function(){return"no_op"}},{key:"template",get:function(){return(0,u.default)(h.default)}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),g.prototype.render=function(){var t=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported");this.$el.html(this.template({message:t})),this.trigger(c.default.PLAYBACK_READY,this.name);var e=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&e||this._animate(),this},g.prototype._noise=function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height),e=void 0;try{e=new Uint32Array(t.data.buffer)}catch(i){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var n=t.data,r=0;r<n.length;r++)e[r]=n[r]}for(var i=e.length,a=6*Math.random()+4,o=0,s=0,l=0;l<i;)o<0&&(o=a*Math.random(),s=255*Math.pow(Math.random(),.4)<<24),o-=1,e[l++]=s;this.context.putImageData(t,0,0)}},g.prototype._loop=function(){var t=this;this._stop||(this._noise(),this._animationHandle=(0,s.requestAnimationFrame)((function(){return t._loop()})))},g.prototype.destroy=function(){this._animationHandle&&((0,s.cancelAnimationFrame)(this._animationHandle),this._stop=!0)},g.prototype._animate=function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()},g);function g(){(0,r.default)(this,g);for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=(0,i.default)(this,f.call.apply(f,[this].concat(e)));return a._noiseFrameNum=-1,a}(e.default=p).canPlay=function(t){return!0},t.exports=e.default},function(t,e){t.exports="<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%><p>\n"},function(t,e,n){var r=n(208);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,"[data-no-op]{position:absolute;height:100%;width:100%;text-align:center}[data-no-op] p[data-no-op-msg]{position:absolute;text-align:center;font-size:25px;left:0;right:0;color:#fff;padding:10px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);max-height:100%;overflow:auto}[data-no-op] canvas[data-no-op-canvas]{background-color:#777;height:100%;width:100%}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(0)),i=h(n(1)),a=h(n(3)),o=h(n(2)),s=h(n(42)),l=h(n(4)),u=h(n(7)),c=h(n(210));function h(t){return t&&t.__esModule?t:{default:t}}n(211);var d,f=(d=s.default,(0,o.default)(p,d),(0,a.default)(p,[{key:"name",get:function(){return"spinner"}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}}]),p.prototype.onBuffering=function(){this.show()},p.prototype.onBufferFull=function(){this.hide()},p.prototype.onStop=function(){this.hide()},p.prototype.show=function(){var t=this;null===this.showTimeout&&(this.showTimeout=setTimeout((function(){return t.$el.show()}),300))},p.prototype.hide=function(){null!==this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()},p.prototype.render=function(){return this.$el.html(this.template()),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this},p);function p(t){(0,r.default)(this,p);var e=(0,i.default)(this,d.call(this,t));return e.template=(0,u.default)(c.default),e.showTimeout=null,e.listenTo(e.container,l.default.CONTAINER_STATE_BUFFERING,e.onBuffering),e.listenTo(e.container,l.default.CONTAINER_STATE_BUFFERFULL,e.onBufferFull),e.listenTo(e.container,l.default.CONTAINER_STOP,e.onStop),e.listenTo(e.container,l.default.CONTAINER_ENDED,e.onStop),e.listenTo(e.container,l.default.CONTAINER_ERROR,e.onStop),e.render(),e}e.default=f,t.exports=e.default},function(t,e){t.exports="<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n"},function(t,e,n){var r=n(212);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,".spinner-three-bounce[data-spinner]{position:absolute;margin:0 auto;width:70px;text-align:center;z-index:999;left:0;right:0;margin-left:auto;margin-right:auto;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.spinner-three-bounce[data-spinner]>div{width:18px;height:18px;background-color:#fff;border-radius:100%;display:inline-block;-webkit-animation:bouncedelay 1.4s infinite ease-in-out;animation:bouncedelay 1.4s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.spinner-three-bounce[data-spinner] [data-bounce1]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner-three-bounce[data-spinner] [data-bounce2]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(214),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(0)),i=c(n(1)),a=c(n(3)),o=c(n(2)),s=c(n(43)),l=c(n(4)),u=c(n(6));function c(t){return t&&t.__esModule?t:{default:t}}var h,d=(h=s.default,(0,o.default)(f,h),(0,a.default)(f,[{key:"name",get:function(){return"stats"}}]),f.prototype.bindEvents=function(){this.listenTo(this.container.playback,l.default.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,l.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,l.default.CONTAINER_ENDED,this.onStop),this.listenTo(this.container,l.default.CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,l.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,l.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,l.default.CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,l.default.CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,l.default.PLAYBACK_STATS_ADD,this.onStatsAdd)},f.prototype.setInitialAttrs=function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}},f.prototype.onPlay=function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))},f.prototype.onStop=function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"},f.prototype.onBuffering=function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++},f.prototype.onBufferFull=function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"},f.prototype.getRebufferingTime=function(){return Date.now()-this.rebufferingTimeInit},f.prototype.getWatchingTime=function(){return Date.now()-this.watchingTimeInit-this.rebufferingTime},f.prototype.isRebuffering=function(){return!!this.rebufferingTimeInit},f.prototype.onStatsAdd=function(t){u.default.extend(this.externalMetrics,t)},f.prototype.getStats=function(){var t={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return u.default.extend(t,this.externalMetrics),t},f.prototype.report=function(){this.container.statsReport(this.getStats())},f);function f(t){(0,r.default)(this,f);var e=(0,i.default)(this,h.call(this,t));return e.setInitialAttrs(),e.reportInterval=e.options.reportInterval||5e3,e.state="IDLE",e}e.default=d,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(0)),i=h(n(1)),a=h(n(3)),o=h(n(2)),s=h(n(42)),l=h(n(4)),u=h(n(7)),c=h(n(216));function h(t){return t&&t.__esModule?t:{default:t}}n(217);var d,f=(d=s.default,(0,o.default)(p,d),(0,a.default)(p,[{key:"name",get:function(){return"watermark"}},{key:"template",get:function(){return(0,u.default)(c.default)}}]),p.prototype.bindEvents=function(){this.listenTo(this.container,l.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,l.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,l.default.CONTAINER_OPTIONS_CHANGE,this.configure)},p.prototype.configure=function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()},p.prototype.onPlay=function(){this.hidden||this.$el.show()},p.prototype.onStop=function(){this.$el.hide()},p.prototype.render=function(){this.$el.hide();var t={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};return this.$el.html(this.template(t)),this.container.$el.append(this.$el),this},p);function p(t){(0,r.default)(this,p);var e=(0,i.default)(this,d.call(this,t));return e.configure(),e}e.default=f,t.exports=e.default},function(t,e){t.exports='<div class="clappr-watermark" data-watermark data-watermark-<%=position %>>\n<% if(typeof imageLink !== \'undefined\') { %>\n<a target=_blank href="<%= imageLink %>">\n<% } %>\n<img src="<%= imageUrl %>">\n<% if(typeof imageLink !== \'undefined\') { %>\n</a>\n<% } %>\n</div>\n'},function(t,e,n){var r=n(218);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,".clappr-watermark[data-watermark]{position:absolute;min-width:70px;max-width:200px;width:12%;text-align:center;z-index:10}.clappr-watermark[data-watermark] a{outline:none;cursor:pointer}.clappr-watermark[data-watermark] img{max-width:100%}.clappr-watermark[data-watermark-bottom-left]{bottom:10px;left:10px}.clappr-watermark[data-watermark-bottom-right]{bottom:10px;right:42px}.clappr-watermark[data-watermark-top-left]{top:10px;left:10px}.clappr-watermark[data-watermark-top-right]{top:10px;right:37px}",""])},function(t,e,n){"use strict";(function(r){Object.defineProperty(e,"__esModule",{value:!0});var i=g(n(0)),a=g(n(1)),o=g(n(3)),s=g(n(2)),l=g(n(42)),u=g(n(4)),c=g(n(7)),h=g(n(11)),d=g(n(80)),f=g(n(220)),p=n(5);function g(t){return t&&t.__esModule?t:{default:t}}n(221);var m,v=(m=l.default,(0,s.default)(y,m),(0,o.default)(y,[{key:"name",get:function(){return"poster"}},{key:"template",get:function(){return(0,c.default)(f.default)}},{key:"shouldRender",get:function(){var t=!(!this.options.poster||!this.options.poster.showForNoOp);return"html_img"!==this.container.playback.name&&(this.container.playback.getPlaybackType()!==h.default.NO_OP||t)}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"showOnVideoEnd",get:function(){return!this.options.poster||this.options.poster.showOnVideoEnd||void 0===this.options.poster.showOnVideoEnd}}]),y.prototype.bindEvents=function(){this.listenTo(this.container,u.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,u.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,u.default.CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,u.default.CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,u.default.CONTAINER_OPTIONS_CHANGE,this.render),this.listenTo(this.container,u.default.CONTAINER_ERROR,this.onError),this.showOnVideoEnd&&this.listenTo(this.container,u.default.CONTAINER_ENDED,this.onStop)},y.prototype.onError=function(t){this.hasFatalError=t.level===d.default.Levels.FATAL,this.hasFatalError&&(this.hasStartedPlaying=!1,this.playRequested=!1,this.showPlayButton())},y.prototype.onPlay=function(){this.hasStartedPlaying=!0,this.update()},y.prototype.onStop=function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()},y.prototype.updatePlayButton=function(t){!t||this.options.chromeless&&!this.options.allowUserInteraction?this.hidePlayButton():this.showPlayButton()},y.prototype.showPlayButton=function(){this.hasFatalError&&!this.options.disableErrorScreen||(this.$playButton.show(),this.$el.addClass("clickable"))},y.prototype.hidePlayButton=function(){this.$playButton.hide(),this.$el.removeClass("clickable")},y.prototype.clicked=function(){if(!this.hasStartedPlaying)return this.options.chromeless&&!this.options.allowUserInteraction||(this.playRequested=!0,this.update(),this.container.play()),!1},y.prototype.shouldHideOnPlay=function(){return!this.container.playback.isAudioOnly},y.prototype.update=function(){if(this.shouldRender){var t=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.updatePlayButton(t),this.updatePoster()}},y.prototype.updatePoster=function(){this.hasStartedPlaying?this.hidePoster():this.showPoster()},y.prototype.showPoster=function(){this.container.disableMediaControl(),this.$el.show()},y.prototype.hidePoster=function(){this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()},y.prototype.render=function(){if(this.shouldRender){if(this.$el.html(this.template()),this.options.poster&&void 0===this.options.poster.custom){var t=this.options.poster.url||this.options.poster;this.$el.css({"background-image":"url("+t+")"})}else this.options.poster&&this.$el.css({background:this.options.poster.custom});this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(p.SvgIcons.play),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var e=this.options.mediacontrol&&this.options.mediacontrol.buttons;return e&&this.$el.find("svg path").css("fill",e),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(e=this.options.mediacontrol.buttons,this.$playButton.css("color",e)),this.update(),this}},y);function y(t){(0,i.default)(this,y);var e=(0,a.default)(this,m.call(this,t));return e.hasStartedPlaying=!1,e.playRequested=!1,e.render(),r.nextTick((function(){return e.update()})),e}e.default=v,t.exports=e.default}).call(this,n(63))},function(t,e){t.exports='<div class="play-wrapper" data-poster></div>\n'},function(t,e,n){var r=n(222);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,".player-poster[data-poster]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;height:100%;width:100%;z-index:998;top:0;left:0;background-color:#000;background-size:cover;background-repeat:no-repeat;background-position:50% 50%}.player-poster[data-poster].clickable{cursor:pointer}.player-poster[data-poster]:hover .play-wrapper[data-poster]{opacity:1}.player-poster[data-poster] .play-wrapper[data-poster]{width:100%;height:25%;margin:0 auto;opacity:.75;transition:opacity .1s ease}.player-poster[data-poster] .play-wrapper[data-poster] svg{height:100%}.player-poster[data-poster] .play-wrapper[data-poster] svg path{fill:#fff}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(224),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(0)),i=u(n(1)),a=u(n(3)),o=u(n(2)),s=u(n(43)),l=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}var c,h=(c=s.default,(0,o.default)(d,c),(0,a.default)(d,[{key:"name",get:function(){return"google_analytics"}}]),d.prototype.embedScript=function(){var t=this;if(window._gat)this.addEventListeners();else{var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("async","async"),e.setAttribute("src","//www.google-analytics.com/ga.js"),e.onload=function(){return t.addEventListeners()},document.body.appendChild(e)}},d.prototype.addEventListeners=function(){var t=this;this.container&&(this.listenTo(this.container,l.default.CONTAINER_READY,this.onReady),this.listenTo(this.container,l.default.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,l.default.CONTAINER_STOP,this.onStop),this.listenTo(this.container,l.default.CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,l.default.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,l.default.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,l.default.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,l.default.CONTAINER_ERROR,this.onError),this.listenTo(this.container,l.default.CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,l.default.CONTAINER_VOLUME,(function(e){return t.onVolumeChanged(e)})),this.listenTo(this.container,l.default.CONTAINER_SEEK,(function(e){return t.onSeek(e)})),this.listenTo(this.container,l.default.CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,l.default.CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,l.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])},d.prototype.onReady=function(){this.push(["Video","Playback",this.container.playback.name])},d.prototype.onPlay=function(){this.push(["Video","Play",this.container.playback.src])},d.prototype.onStop=function(){this.push(["Video","Stop",this.container.playback.src])},d.prototype.onEnded=function(){this.push(["Video","Ended",this.container.playback.src])},d.prototype.onBuffering=function(){this.push(["Video","Buffering",this.container.playback.src])},d.prototype.onBufferFull=function(){this.push(["Video","Bufferfull",this.container.playback.src])},d.prototype.onError=function(){this.push(["Video","Error",this.container.playback.src])},d.prototype.onHD=function(t){var e=t?"ON":"OFF";e!==this.currentHDState&&(this.currentHDState=e,this.push(["Video","HD - "+e,this.container.playback.src]))},d.prototype.onPlaybackChanged=function(t){null!==t.type&&this.push(["Video","Playback Type - "+t.type,this.container.playback.src])},d.prototype.onDVR=function(t){var e=t?"ON":"OFF";this.push(["Interaction","DVR - "+e,this.container.playback.src])},d.prototype.onPause=function(){this.push(["Video","Pause",this.container.playback.src])},d.prototype.onSeek=function(){this.push(["Video","Seek",this.container.playback.src])},d.prototype.onVolumeChanged=function(){this.push(["Interaction","Volume",this.container.playback.src])},d.prototype.onFullscreen=function(){this.push(["Interaction","Fullscreen",this.container.playback.src])},d.prototype.push=function(t){var e=[this.trackerName+"_trackEvent"].concat(t);_gaq.push(e)},d);function d(t){(0,r.default)(this,d);var e=(0,i.default)(this,c.call(this,t));return e.container.options.gaAccount&&(e.account=e.container.options.gaAccount,e.trackerName=e.container.options.gaTrackerName?e.container.options.gaTrackerName+".":"Clappr.",e.domainName=e.container.options.gaDomainName,e.currentHDState=void 0,e.embedScript()),e}e.default=h,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(0)),i=c(n(1)),a=c(n(3)),o=c(n(2)),s=c(n(43)),l=c(n(4)),u=c(n(11));function c(t){return t&&t.__esModule?t:{default:t}}var h,d=(h=s.default,(0,o.default)(f,h),(0,a.default)(f,[{key:"name",get:function(){return"click_to_pause"}}]),f.prototype.bindEvents=function(){this.listenTo(this.container,l.default.CONTAINER_CLICK,this.click),this.listenTo(this.container,l.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)},f.prototype.click=function(){this.container.getPlaybackType()===u.default.LIVE&&!this.container.isDvrEnabled()||(this.container.isPlaying()?this.container.pause():this.container.play())},f.prototype.settingsUpdate=function(){var t=this.container.getPlaybackType()!==u.default.LIVE||this.container.isDvrEnabled();if(t!==this.pointerEnabled){var e=t?"addClass":"removeClass";this.container.$el[e]("pointer-enabled"),this.pointerEnabled=t}},f);function f(t){return(0,r.default)(this,f),(0,i.default)(this,h.call(this,t))}e.default=d,t.exports=e.default},function(t,e,n){"use strict";(function(r){Object.defineProperty(e,"__esModule",{value:!0});var i=b(n(89)),a=b(n(0)),o=b(n(1)),s=b(n(3)),l=b(n(2)),u=n(5),c=n(61),h=b(n(4)),d=b(n(24)),f=b(n(14)),p=b(n(31)),g=b(n(7)),m=b(n(11)),v=b(n(6));n(227);var y=b(n(229));function b(t){return t&&t.__esModule?t:{default:t}}var _,E=(_=d.default,(0,l.default)(A,_),(0,s.default)(A,[{key:"name",get:function(){return"media_control"}},{key:"disabled",get:function(){var t=this.container&&this.container.getPlaybackType()===m.default.NO_OP;return this.userDisabled||t}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return(0,g.default)(y.default)}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return 0===this.volume}}]),A.prototype.getExternalInterface=function(){var t=this;return{setVolume:this.setVolume,getVolume:function(){return t.volume}}},A.prototype.bindEvents=function(){var t=this;this.stopListening(),this.listenTo(this.core,h.default.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,h.default.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,h.default.CORE_MOUSE_LEAVE,(function(){return t.hide(t.options.hideMediaControlDelay)})),this.listenTo(this.core,h.default.CORE_FULLSCREEN,this.show),this.listenTo(this.core,h.default.CORE_OPTIONS_CHANGE,this.configure),p.default.on(this.options.playerId+":"+h.default.PLAYER_RESIZE,this.playerResize,this),this.bindContainerEvents()},A.prototype.bindContainerEvents=function(){this.container&&(this.listenTo(this.container,h.default.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,h.default.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,h.default.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,h.default.CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,h.default.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,h.default.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,h.default.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,h.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,h.default.CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,h.default.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,h.default.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,h.default.CONTAINER_ENDED,this.ended),this.listenTo(this.container,h.default.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.container,h.default.CONTAINER_OPTIONS_CHANGE,this.setInitialVolume),"video"===this.container.playback.el.nodeName.toLowerCase()&&this.listenToOnce(this.container,h.default.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag))},A.prototype.disable=function(){this.userDisabled=!0,this.hide(),this.unbindKeyEvents(),this.$el.hide()},A.prototype.enable=function(){this.options.chromeless||(this.userDisabled=!1,this.bindKeyEvents(),this.show())},A.prototype.play=function(){this.container&&this.container.play()},A.prototype.pause=function(){this.container&&this.container.pause()},A.prototype.stop=function(){this.container&&this.container.stop()},A.prototype.setInitialVolume=function(){var t=this.persistConfig?u.Config.restore("volume"):100,e=this.container&&this.container.options||this.options;this.setVolume(e.mute?0:t,!0)},A.prototype.onVolumeChanged=function(){this.updateVolumeUI()},A.prototype.onLoadedMetadataOnVideoTag=function(){var t=this.playback&&this.playback.el;!u.Fullscreen.fullscreenEnabled()&&t.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.settingsUpdate())},A.prototype.updateVolumeUI=function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var t=this.$volumeBarContainer.width(),e=this.$volumeBarBackground.width(),n=(t-e)/2,r=e*this.volume/100+n;this.$volumeBarFill.css({width:this.volume+"%"}),this.$volumeBarScrubber.css({left:r}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var i=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,i).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(u.SvgIcons.volumeMute),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(u.SvgIcons.volume),this.applyButtonStyle(this.$volumeIcon)}},A.prototype.changeTogglePlay=function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(u.SvgIcons.pause),this.$playStopToggle.append(u.SvgIcons.stop),this.trigger(h.default.MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(u.SvgIcons.play),this.$playStopToggle.append(u.SvgIcons.play),this.trigger(h.default.MEDIACONTROL_NOTPLAYING),f.default.isMobile&&this.show()),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)},A.prototype.mousemoveOnSeekBar=function(t){if(this.settings.seekEnabled){var e=t.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:e})}this.trigger(h.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,t)},A.prototype.mouseleaveOnSeekBar=function(t){this.trigger(h.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,t)},A.prototype.onVolumeClick=function(t){this.setVolume(this.getVolumeFromUIEvent(t))},A.prototype.mousemoveOnVolumeBar=function(t){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(t))},A.prototype.playerResize=function(t){this.$fullscreenToggle.html("");var e=this.core.isFullscreen()?u.SvgIcons.exitFullscreen:u.SvgIcons.fullscreen;this.$fullscreenToggle.append(e),this.applyButtonStyle(this.$fullscreenToggle),0!==this.$el.find(".media-control").length&&this.$el.removeClass("w320"),(t.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")},A.prototype.togglePlayPause=function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1},A.prototype.togglePlayStop=function(){this.container.isPlaying()?this.container.stop():this.container.play()},A.prototype.startSeekDrag=function(t){this.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),t&&t.preventDefault())},A.prototype.startVolumeDrag=function(t){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),t&&t.preventDefault()},A.prototype.stopDrag=function(t){this.draggingSeekBar&&this.seek(t),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1},A.prototype.updateDrag=function(t){if(this.draggingSeekBar){t.preventDefault();var e=(t.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;e=Math.min(100,Math.max(e,0)),this.setSeekPercentage(e)}else this.draggingVolumeBar&&(t.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(t)))},A.prototype.getVolumeFromUIEvent=function(t){return(t.pageX-this.$volumeBarContainer.offset().left)/this.$volumeBarContainer.width()*100},A.prototype.toggleMute=function(){if(this.muted)return this.setVolume(this._mutedVolume||100),void(this._mutedVolume=null);this._mutedVolume=this.volume,this.setVolume(0)},A.prototype.setVolume=function(t,e){var n=this,r=1<arguments.length&&void 0!==e&&e;function i(){n.container&&n.container.isReady?n.container.setVolume(t):n.listenToOnce(n.container,h.default.CONTAINER_READY,(function(){n.container.setVolume(t)}))}t=Math.min(100,Math.max(t,0)),this.intendedVolume=t,this.persistConfig&&!r&&u.Config.persist("volume",t),this.container?i():this.listenToOnce(this,h.default.MEDIACONTROL_CONTAINERCHANGED,(function(){return i()}))},A.prototype.toggleFullscreen=function(){this.trigger(h.default.MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.core.toggleFullscreen(),this.resetUserKeepVisible()},A.prototype.onActiveContainerChanged=function(){this.fullScreenOnVideoTagSupported=null,p.default.off(this.options.playerId+":"+h.default.PLAYER_RESIZE,this.playerResize,this),this.bindEvents(),this.setInitialVolume(),this.changeTogglePlay(),this.bindContainerEvents(),this.settingsUpdate(),this.container&&this.container.trigger(h.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container&&this.container.mediaControlDisabled&&this.disable(),this.trigger(h.default.MEDIACONTROL_CONTAINERCHANGED)},A.prototype.showVolumeBar=function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")},A.prototype.hideVolumeBar=function(t){var e=this,n=0<arguments.length&&void 0!==t?t:400;this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar()}),n):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){return e.$volumeBarContainer.addClass("volume-bar-hide")}),n)))},A.prototype.ended=function(){this.changeTogglePlay()},A.prototype.updateProgressBar=function(t){var e=t.start/t.total*100,n=t.current/t.total*100;this.$seekBarLoaded.css({left:e+"%",width:n-e+"%"})},A.prototype.onTimeUpdate=function(t){if(!this.draggingSeekBar){var e=t.current<0?t.total:t.current;this.currentPositionValue=e,this.currentDurationValue=t.total,this.renderSeekBar()}},A.prototype.renderSeekBar=function(){if(null!==this.currentPositionValue&&null!==this.currentDurationValue){this.currentSeekBarPercentage=100,this.container&&(this.container.getPlaybackType()!==m.default.LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var t=(0,u.formatTime)(this.currentPositionValue),e=(0,u.formatTime)(this.currentDurationValue);t!==this.displayedPosition&&(this.$position.text(t),this.displayedPosition=t),e!==this.displayedDuration&&(this.$duration.text(e),this.displayedDuration=e)}},A.prototype.seek=function(t){if(this.settings.seekEnabled){var e=(t.pageX-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return e=Math.min(100,Math.max(e,0)),this.container&&this.container.seekPercentage(e),this.setSeekPercentage(e),!1}},A.prototype.setKeepVisible=function(){this.keepVisible=!0},A.prototype.resetKeepVisible=function(){this.keepVisible=!1},A.prototype.setUserKeepVisible=function(){this.userKeepVisible=!0},A.prototype.resetUserKeepVisible=function(){this.userKeepVisible=!1},A.prototype.isVisible=function(){return!this.$el.hasClass("media-control-hide")},A.prototype.show=function(t){var e=this;if(!this.disabled){var n=t&&t.clientX!==this.lastMouseX&&t.clientY!==this.lastMouseY;t&&!n&&!navigator.userAgent.match(/firefox/i)||(clearTimeout(this.hideId),this.$el.show(),this.trigger(h.default.MEDIACONTROL_SHOW,this.name),this.container&&this.container.trigger(h.default.CONTAINER_MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout((function(){return e.hide()}),2e3),t&&(this.lastMouseX=t.clientX,this.lastMouseY=t.clientY)),this.updateCursorStyle(!0)}},A.prototype.hide=function(t){var e=this,n=0<arguments.length&&void 0!==t?t:0;if(this.isVisible()){var r=n||2e3;if(clearTimeout(this.hideId),this.disabled||!1!==this.options.hideMediaControl){var i=this.userKeepVisible||this.keepVisible,a=this.draggingSeekBar||this.draggingVolumeBar;!this.disabled&&(n||i||a)?this.hideId=setTimeout((function(){return e.hide()}),r):(this.trigger(h.default.MEDIACONTROL_HIDE,this.name),this.container&&this.container.trigger(h.default.CONTAINER_MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0),this.updateCursorStyle(!1))}}},A.prototype.updateCursorStyle=function(t){t?this.core.$el.removeClass("nocursor"):this.core.isFullscreen()&&this.core.$el.addClass("nocursor")},A.prototype.settingsUpdate=function(){var t=this.getSettings();!t||this.fullScreenOnVideoTagSupported||u.Fullscreen.fullscreenEnabled()||(t.default&&(0,u.removeArrayItem)(t.default,"fullscreen"),t.left&&(0,u.removeArrayItem)(t.left,"fullscreen"),t.right&&(0,u.removeArrayItem)(t.right,"fullscreen")),(0,i.default)(this.settings)!==(0,i.default)(t)&&(this.settings=t,this.render())},A.prototype.getSettings=function(){return v.default.extend(!0,{},this.container&&this.container.settings)},A.prototype.highDefinitionUpdate=function(t){var e=(this.isHD=t)?"addClass":"removeClass";this.$hdIndicator[e]("enabled")},A.prototype.createCachedElements=function(){var t=this.$el.find(".media-control-layer");this.$duration=t.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=t.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=t.find("button.media-control-button[data-playpause]"),this.$playStopToggle=t.find("button.media-control-button[data-playstop]"),this.$position=t.find(".media-control-indicator[data-position]"),this.$seekBarContainer=t.find(".bar-container[data-seekbar]"),this.$seekBarHover=t.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=t.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=t.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=t.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=t.find(".bar-container[data-volume]"),this.$volumeContainer=t.find(".drawer-container[data-volume]"),this.$volumeIcon=t.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()},A.prototype.resetIndicators=function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()},A.prototype.initializeIcons=function(){var t=this.$el.find(".media-control-layer");t.find("button.media-control-button[data-play]").append(u.SvgIcons.play),t.find("button.media-control-button[data-pause]").append(u.SvgIcons.pause),t.find("button.media-control-button[data-stop]").append(u.SvgIcons.stop),this.$playPauseToggle.append(u.SvgIcons.play),this.$playStopToggle.append(u.SvgIcons.play),this.$volumeIcon.append(u.SvgIcons.volume),this.$fullscreenToggle.append(u.SvgIcons.fullscreen),this.$hdIndicator.append(u.SvgIcons.hd)},A.prototype.setSeekPercentage=function(t){t=Math.max(Math.min(t,100),0),this.displayedSeekBarPercentage!==t&&(this.displayedSeekBarPercentage=t,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:t+"%"}),this.$seekBarScrubber.css({left:t+"%"}))},A.prototype.seekRelative=function(t){if(this.settings.seekEnabled){var e=this.container.getCurrentTime(),n=this.container.getDuration(),r=Math.min(Math.max(e+t,0),n);r=Math.min(100*r/n,100),this.container.seekPercentage(r)}},A.prototype.bindKeyAndShow=function(t,e){var n=this;this.kibo.down(t,(function(){return n.show(),e()}))},A.prototype.bindKeyEvents=function(){var t=this;f.default.isMobile||this.options.disableKeyboardShortcuts||(this.unbindKeyEvents(),this.kibo=new c.Kibo(this.options.focusElement||this.options.parentElement),this.bindKeyAndShow("space",(function(){return t.togglePlayPause()})),this.bindKeyAndShow("left",(function(){return t.seekRelative(-5)})),this.bindKeyAndShow("right",(function(){return t.seekRelative(5)})),this.bindKeyAndShow("shift left",(function(){return t.seekRelative(-10)})),this.bindKeyAndShow("shift right",(function(){return t.seekRelative(10)})),this.bindKeyAndShow("shift ctrl left",(function(){return t.seekRelative(-15)})),this.bindKeyAndShow("shift ctrl right",(function(){return t.seekRelative(15)})),["1","2","3","4","5","6","7","8","9","0"].forEach((function(e){t.bindKeyAndShow(e,(function(){t.settings.seekEnabled&&t.container&&t.container.seekPercentage(10*e)}))})))},A.prototype.unbindKeyEvents=function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off("shift left"),this.kibo.off("shift right"),this.kibo.off("shift ctrl left"),this.kibo.off("shift ctrl right"),this.kibo.off(["1","2","3","4","5","6","7","8","9","0"]))},A.prototype.parseColors=function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var t=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",t),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}},A.prototype.applyButtonStyle=function(t){this.buttonsColor&&t&&(0,v.default)(t).find("svg path").css("fill",this.buttonsColor)},A.prototype.destroy=function(){(0,v.default)(document).unbind("mouseup",this.stopDragHandler),(0,v.default)(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents(),this.stopListening(),_.prototype.destroy.call(this)},A.prototype.configure=function(t){this.options.chromeless||t.source||t.sources?this.disable():this.enable(),this.trigger(h.default.MEDIACONTROL_OPTIONS_CHANGE)},A.prototype.render=function(){var t=this,e=this.options.hideMediaControlDelay||2e3;this.settings&&this.$el.html(this.template({settings:this.settings})),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.container&&(this.hideId=setTimeout((function(){return t.hide()}),e),this.disabled&&this.hide()),f.default.isSafari&&f.default.isMobile&&(f.default.version<10?this.$volumeContainer.css("display","none"):this.$volumeBarContainer.css("display","none")),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var n=0;return this.displayedSeekBarPercentage&&(n=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(n),r.nextTick((function(){t.settings.seekEnabled||t.$seekBarContainer.addClass("seek-disabled"),f.default.isMobile||t.options.disableKeyboardShortcuts||t.bindKeyEvents(),t.playerResize({width:t.options.width,height:t.options.height}),t.hideVolumeBar(0)})),this.parseColors(),this.highDefinitionUpdate(this.isHD),this.core.$el.append(this.el),this.rendered=!0,this.updateVolumeUI(),this.trigger(h.default.MEDIACONTROL_RENDERED),this},A);function A(t){(0,a.default)(this,A);var e=(0,o.default)(this,_.call(this,t));return e.persistConfig=e.options.persistConfig,e.currentPositionValue=null,e.currentDurationValue=null,e.keepVisible=!1,e.fullScreenOnVideoTagSupported=null,e.setInitialVolume(),e.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},e.kibo=new c.Kibo(e.options.focusElement),e.bindKeyEvents(),e.container?v.default.isEmptyObject(e.container.settings)||(e.settings=v.default.extend({},e.container.settings)):e.settings={},e.userDisabled=!1,(e.container&&e.container.mediaControlDisabled||e.options.chromeless)&&e.disable(),e.stopDragHandler=function(t){return e.stopDrag(t)},e.updateDragHandler=function(t){return e.updateDrag(t)},(0,v.default)(document).bind("mouseup",e.stopDragHandler),(0,v.default)(document).bind("mousemove",e.updateDragHandler),e}(e.default=E).extend=function(t){return(0,u.extend)(E,t)},t.exports=e.default}).call(this,n(63))},function(t,e,n){var r=n(228);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){var r=n(82);(t.exports=n(8)(!1)).push([t.i,".media-control-notransition{transition:none!important}.media-control[data-media-control]{position:absolute;width:100%;height:100%;z-index:9999;pointer-events:none}.media-control[data-media-control].dragging{pointer-events:auto;cursor:-webkit-grabbing!important;cursor:grabbing!important;cursor:url("+r(n(97))+"),move}.media-control[data-media-control].dragging *{cursor:-webkit-grabbing!important;cursor:grabbing!important;cursor:url("+r(n(97))+'),move}.media-control[data-media-control] .media-control-background[data-background]{position:absolute;height:40%;width:100%;bottom:0;background:linear-gradient(transparent,rgba(0,0,0,.9));transition:opacity .6s ease-out}.media-control[data-media-control] .media-control-icon{line-height:0;letter-spacing:0;speak:none;color:#fff;opacity:.5;vertical-align:middle;text-align:left;transition:all .1s ease}.media-control[data-media-control] .media-control-icon:hover{color:#fff;opacity:.75;text-shadow:hsla(0,0%,100%,.8) 0 0 5px}.media-control[data-media-control].media-control-hide .media-control-background[data-background]{opacity:0}.media-control[data-media-control].media-control-hide .media-control-layer[data-controls]{bottom:-50px}.media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar]{opacity:0}.media-control[data-media-control] .media-control-layer[data-controls]{position:absolute;bottom:7px;width:100%;height:32px;font-size:0;vertical-align:middle;pointer-events:auto;transition:bottom .4s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control]{position:absolute;top:0;left:4px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control]{height:100%;text-align:center;line-height:32px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control]{position:absolute;top:0;right:4px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button{background-color:transparent;border:0;margin:0 6px;padding:0;cursor:pointer;display:inline-block;width:32px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg{width:100%;height:22px}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path{fill:#fff}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus{outline:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop]{float:left;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen]{float:right;background-color:transparent;border:0;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator]{background-color:transparent;border:0;cursor:default;display:none;float:right;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled{display:block;opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover{opacity:1;text-shadow:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop]{float:left}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration],.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position]{display:inline-block;font-size:10px;color:#fff;cursor:default;line-height:32px;position:relative}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position]{margin:0 6px 0 7px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]{color:hsla(0,0%,100%,.5);margin-right:6px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before{content:"|";margin-right:7px}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]{position:absolute;top:-20px;left:0;display:inline-block;vertical-align:middle;width:100%;height:25px;cursor:pointer}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar]{width:100%;height:1px;position:relative;top:12px;background-color:#666}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#c2c2c2;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#005aff;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:0;position:absolute;top:-3px;width:5px;height:7px;background-color:hsla(0,0%,100%,.5);transition:opacity .1s ease}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled{cursor:default}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:0}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar]{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:2px;left:0;width:20px;height:20px;opacity:1;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar]{position:absolute;left:6px;top:6px;width:8px;height:8px;border-radius:10px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume]{float:right;display:inline-block;height:32px;cursor:pointer;margin:0 6px;box-sizing:border-box}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume]{float:left;bottom:0}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]{background-color:transparent;border:0;box-sizing:content-box;width:32px;height:32px;opacity:.5}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover{opacity:.75}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg{height:24px;position:relative;top:3px}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path{fill:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg{margin-left:2px}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume]{float:left;position:relative;overflow:hidden;top:6px;width:42px;height:18px;padding:3px 0;transition:width .2s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume]{height:1px;position:relative;top:7px;margin:0 3px;background-color:#666}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#c2c2c2;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#005aff;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume]{opacity:0;position:absolute;top:-3px;width:5px;height:7px;background-color:hsla(0,0%,100%,.5);transition:opacity .1s ease}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume]{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:0;left:0;width:20px;height:20px;opacity:1;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume]{position:absolute;left:6px;top:6px;width:8px;height:8px;border-radius:10px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]{float:left;width:4px;padding-left:2px;height:12px;opacity:.5;box-shadow:inset 2px 0 0 #fff;transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill{box-shadow:inset 2px 0 0 #fff;opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:first-of-type{padding-left:0}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover{-webkit-transform:scaleY(1.5);transform:scaleY(1.5)}.media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide{width:0;height:12px;top:9px;padding:0}',""])},function(t,e){t.exports='<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n  <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n  <%  }; %>\n  <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n    <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n    <% } %>\n    </div>\n  <% }; %>\n  <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n        <% renderContent(name); %>\n      </div>\n  <% }; %>\n  <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n  <% }; %>\n  <% var renderButton = function(name) { %>\n    <button type="button" class="media-control-button media-control-icon" data-<%= name %> aria-label="<%= name %>"></button>\n  <% }; %>\n  <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n  <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n    <% render(settings.default); %>\n  </div>\n  <% } %>\n  <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n    <% render(settings.left); %>\n  </div>\n  <% } %>\n  <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n    <% render(settings.right); %>\n  </div>\n  <% } %>\n</div>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n(0)),i=d(n(1)),a=d(n(3)),o=d(n(2)),s=d(n(24)),l=d(n(7)),u=d(n(11)),c=d(n(4)),h=d(n(231));function d(t){return t&&t.__esModule?t:{default:t}}n(232);var f,p=(f=s.default,(0,o.default)(g,f),(0,a.default)(g,[{key:"template",get:function(){return(0,l.default)(h.default)}},{key:"name",get:function(){return"dvr_controls"}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}}]),g.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,c.default.MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,c.default.MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,c.default.CORE_OPTIONS_CHANGE,this.render),this.core.getCurrentContainer()&&(this.listenToOnce(this.core.getCurrentContainer(),c.default.CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.getCurrentContainer(),c.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))},g.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},g.prototype.dvrChanged=function(t){this.core.getPlaybackType()===u.default.LIVE&&(this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),t?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr"))},g.prototype.click=function(){var t=this.core.mediaControl,e=t.container;e.isPlaying()||e.play(),t.$el.hasClass("dvr")&&e.seek(e.getDuration())},g.prototype.settingsUpdate=function(){var t=this;this.stopListening(),this.core.mediaControl.$el.removeClass("live"),this.shouldRender()&&(this.render(),this.$el.click((function(){return t.click()}))),this.bindEvents()},g.prototype.shouldRender=function(){return(void 0===this.core.options.useDvrControls||!!this.core.options.useDvrControls)&&this.core.getPlaybackType()===u.default.LIVE},g.prototype.render=function(){return this.$el.html(this.template({live:this.core.i18n.t("live"),backToLive:this.core.i18n.t("back_to_live")})),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this},g);function g(t){(0,r.default)(this,g);var e=(0,i.default)(this,f.call(this,t));return e.settingsUpdate(),e}e.default=p,t.exports=e.default},function(t,e){t.exports='<div class="live-info"><%= live %></div>\n<button type="button" class="live-button" aria-label="<%= backToLive %>"><%= backToLive %></button>\n'},function(t,e,n){var r=n(233);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,'.dvr-controls[data-dvr-controls]{display:inline-block;float:left;color:#fff;line-height:32px;font-size:10px;font-weight:700;margin-left:6px}.dvr-controls[data-dvr-controls] .live-info{cursor:default;font-family:Roboto,Open Sans,Arial,sans-serif;text-transform:uppercase}.dvr-controls[data-dvr-controls] .live-info:before{content:"";display:inline-block;position:relative;width:7px;height:7px;border-radius:3.5px;margin-right:3.5px;background-color:#ff0101}.dvr-controls[data-dvr-controls] .live-info.disabled{opacity:.3}.dvr-controls[data-dvr-controls] .live-info.disabled:before{background-color:#fff}.dvr-controls[data-dvr-controls] .live-button{cursor:pointer;outline:none;display:none;border:0;color:#fff;background-color:transparent;height:32px;padding:0;opacity:.7;font-family:Roboto,Open Sans,Arial,sans-serif;text-transform:uppercase;transition:all .1s ease}.dvr-controls[data-dvr-controls] .live-button:before{content:"";display:inline-block;position:relative;width:7px;height:7px;border-radius:3.5px;margin-right:3.5px;background-color:#fff}.dvr-controls[data-dvr-controls] .live-button:hover{opacity:1;text-shadow:hsla(0,0%,100%,.75) 0 0 5px}.dvr .dvr-controls[data-dvr-controls] .live-info{display:none}.dvr .dvr-controls[data-dvr-controls] .live-button{display:block}.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{background-color:#005aff}.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{background-color:#ff0101}',""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(235),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(n(0)),i=d(n(1)),a=d(n(3)),o=d(n(2)),s=d(n(24)),l=d(n(7)),u=d(n(4)),c=n(5),h=d(n(236));function d(t){return t&&t.__esModule?t:{default:t}}n(237);var f,p=(f=s.default,(0,o.default)(g,f),(0,a.default)(g,[{key:"name",get:function(){return"closed_captions"}},{key:"template",get:function(){return(0,l.default)(h.default)}},{key:"events",get:function(){return{"click [data-cc-button]":"toggleContextMenu","click [data-cc-select]":"onTrackSelect"}}},{key:"attributes",get:function(){return{class:"cc-controls","data-cc-controls":""}}}]),g.prototype.bindEvents=function(){this.listenTo(this.core,u.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,u.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core.mediaControl,u.default.MEDIACONTROL_HIDE,this.hideContextMenu),this.container=this.core.getCurrentContainer(),this.container&&(this.listenTo(this.container,u.default.CONTAINER_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,u.default.CONTAINER_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,u.default.CONTAINER_STOP,this.onContainerStop))},g.prototype.onContainerStop=function(){this.ccAvailable(!1)},g.prototype.containerChanged=function(){this.ccAvailable(!1),this.stopListening(),this.bindEvents()},g.prototype.onSubtitleAvailable=function(){this.renderCcButton(),this.ccAvailable(!0)},g.prototype.onSubtitleChanged=function(t){this.setCurrentContextMenuElement(t.id)},g.prototype.onTrackSelect=function(t){var e=parseInt(t.target.dataset.ccSelect,10);return this.container.closedCaptionsTrackId=e,this.hideContextMenu(),t.stopPropagation(),!1},g.prototype.ccAvailable=function(t){var e=t?"addClass":"removeClass";this.$el[e]("available")},g.prototype.toggleContextMenu=function(){this.$el.find("ul").toggle()},g.prototype.hideContextMenu=function(){this.$el.find("ul").hide()},g.prototype.contextMenuElement=function(t){return this.$el.find("ul a"+(isNaN(t)?"":'[data-cc-select="'+t+'"]')).parent()},g.prototype.setCurrentContextMenuElement=function(t){if(this._trackId!==t){this.contextMenuElement().removeClass("current"),this.contextMenuElement(t).addClass("current");var e=-1<t?"addClass":"removeClass";this.$ccButton[e]("enabled"),this._trackId=t}},g.prototype.renderCcButton=function(){for(var t=this.container?this.container.closedCaptionsTracks:[],e=0;e<t.length;e++)t[e].label=this._labelCb(t[e]);this.$el.html(this.template({ariaLabel:this._ariaLabel,disabledLabel:this.core.i18n.t("disabled"),title:this._title,tracks:t})),this.$ccButton=this.$el.find("button.cc-button[data-cc-button]"),this.$ccButton.append(c.SvgIcons.cc),this.$el.append(this.style)},g.prototype.render=function(){this.renderCcButton();var t=this.core.mediaControl.$el.find("button[data-fullscreen]");return t[0]?this.$el.insertAfter(t):this.core.mediaControl.$el.find(".media-control-right-panel[data-media-control]").prepend(this.$el),this},g);function g(t){(0,r.default)(this,g);var e=(0,i.default)(this,f.call(this,t)),n=t.options.closedCaptionsConfig;return e._title=n&&n.title?n.title:null,e._ariaLabel=n&&n.ariaLabel?n.ariaLabel:"cc-button",e._labelCb=n&&n.labelCallback&&"function"==typeof n.labelCallback?n.labelCallback:function(t){return t.name},e}e.default=p,t.exports=e.default},function(t,e){t.exports='<button type="button" class="cc-button media-control-button media-control-icon" data-cc-button aria-label="<%= ariaLabel %>"></button>\n<ul>\n  <% if (title) { %>\n  <li data-title><%= title %></li>\n  <% }; %>\n  <li><a href="#" data-cc-select="-1"><%= disabledLabel %></a></li>\n  <% for (var i = 0; i < tracks.length; i++) { %>\n    <li><a href="#" data-cc-select="<%= tracks[i].id %>"><%= tracks[i].label %></a></li>\n  <% }; %>\n</ul>\n'},function(t,e,n){var r=n(238);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,".cc-controls[data-cc-controls]{float:right;position:relative;display:none}.cc-controls[data-cc-controls].available{display:block}.cc-controls[data-cc-controls] .cc-button{padding:6px!important}.cc-controls[data-cc-controls] .cc-button.enabled{display:block;opacity:1}.cc-controls[data-cc-controls] .cc-button.enabled:hover{opacity:1;text-shadow:none}.cc-controls[data-cc-controls]>ul{list-style-type:none;position:absolute;bottom:25px;border:1px solid #000;display:none;background-color:#e6e6e6}.cc-controls[data-cc-controls] li{font-size:10px}.cc-controls[data-cc-controls] li[data-title]{background-color:#c3c2c2;padding:5px}.cc-controls[data-cc-controls] li a{color:#444;padding:2px 10px;display:block;text-decoration:none}.cc-controls[data-cc-controls] li a:hover{background-color:#555;color:#fff}.cc-controls[data-cc-controls] li a:hover a{color:#fff;text-decoration:none}.cc-controls[data-cc-controls] li.current a{color:red}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(n(0)),i=h(n(1)),a=h(n(3)),o=h(n(2)),s=h(n(35)),l=h(n(4)),u=h(n(6)),c=n(5);function h(t){return t&&t.__esModule?t:{default:t}}var d,f=(0,u.default)('link[rel="shortcut icon"]'),p=(d=s.default,(0,o.default)(g,d),(0,a.default)(g,[{key:"name",get:function(){return"favicon"}},{key:"oldIcon",get:function(){return f}}]),g.prototype.configure=function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,l.default.CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,l.default.CORE_OPTIONS_CHANGE,this.configure))},g.prototype.bindEvents=function(){this.listenTo(this.core,l.default.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,l.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.core.activeContainer&&this.containerChanged()},g.prototype.containerChanged=function(){this._container&&this.stopListening(this._container),this._container=this.core.activeContainer,this.listenTo(this._container,l.default.CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this._container,l.default.CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this._container,l.default.CONTAINER_STOP,this.resetIcon),this.listenTo(this._container,l.default.CONTAINER_ENDED,this.resetIcon),this.listenTo(this._container,l.default.CONTAINER_ERROR,this.resetIcon),this.resetIcon()},g.prototype.disable=function(){d.prototype.disable.call(this),this.resetIcon()},g.prototype.destroy=function(){d.prototype.destroy.call(this),this.resetIcon()},g.prototype.createIcon=function(t){var e=(0,u.default)("<canvas/>");e[0].width=16,e[0].height=16;var n=e[0].getContext("2d");n.fillStyle="#000";var r=(0,u.default)(t).find("path").attr("d"),i=new Path2D(r);n.fill(i);var a=(0,u.default)('<link rel="shortcut icon" type="image/png"/>');return a.attr("href",e[0].toDataURL("image/png")),a},g.prototype.setPlayIcon=function(){this.playIcon||(this.playIcon=this.createIcon(c.SvgIcons.play)),this.changeIcon(this.playIcon)},g.prototype.setPauseIcon=function(){this.pauseIcon||(this.pauseIcon=this.createIcon(c.SvgIcons.pause)),this.changeIcon(this.pauseIcon)},g.prototype.resetIcon=function(){(0,u.default)('link[rel="shortcut icon"]').remove(),(0,u.default)("head").append(this.oldIcon)},g.prototype.changeIcon=function(t){t&&((0,u.default)('link[rel="shortcut icon"]').remove(),(0,u.default)("head").append(t))},g);function g(t){(0,r.default)(this,g);var e=(0,i.default)(this,d.call(this,t));return e._container=null,e.configure(),e}e.default=p,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(241),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(0)),i=f(n(1)),a=f(n(3)),o=f(n(2)),s=n(5),l=f(n(24)),u=f(n(7)),c=f(n(4)),h=f(n(11)),d=f(n(242));function f(t){return t&&t.__esModule?t:{default:t}}n(243);var p,g=(p=l.default,(0,o.default)(m,p),(0,a.default)(m,[{key:"name",get:function(){return"seek_time"}},{key:"template",get:function(){return(0,u.default)(d.default)}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===h.default.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}}]),m.prototype.bindEvents=function(){this.listenTo(this.mediaControl,c.default.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,c.default.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,c.default.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,c.default.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,c.default.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,c.default.CONTAINER_TIMEUPDATE,this.updateDuration))},m.prototype.onContainerChanged=function(){this.stopListening(),this.bindEvents()},m.prototype.updateDuration=function(t){this.duration=t.total,this.firstFragDateTime=t.firstFragDateTime,this.update()},m.prototype.showTime=function(t){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(t),this.update()},m.prototype.hideTime=function(){this.hoveringOverSeekBar=!1,this.update()},m.prototype.calculateHoverPosition=function(t){var e=t.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(e/this.mediaControl.$seekBarContainer.width(),0))},m.prototype.getSeekTime=function(){var t=void 0,e=void 0,n=void 0,r=void 0;return this.useActualLiveTime?(t=(e=this.firstFragDateTime?(r=new Date(this.firstFragDateTime),(n=new Date(this.firstFragDateTime)).setHours(0,0,0,0),(r.getTime()-n.getTime())/1e3+this.duration):(n=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),((r=new Date(n))-n.setHours(0,0,0,0))/1e3))-this.duration+this.hoverPosition*this.duration)<0&&(t+=86400):t=this.hoverPosition*this.duration,{seekTime:t,secondsSinceMidnight:e}},m.prototype.update=function(){if(this.rendered)if(this.shouldBeVisible()){var t=this.getSeekTime(),e=(0,s.formatTime)(t.seekTime,this.useActualLiveTime);if(e!==this.displayedSeekTime&&(this.$seekTimeEl.text(e),this.displayedSeekTime=e),this.durationShown){this.$durationEl.show();var n=(0,s.formatTime)(this.actualLiveTime?t.secondsSinceMidnight:this.duration,this.actualLiveTime);n!==this.displayedDuration&&(this.$durationEl.text(n),this.displayedDuration=n)}else this.$durationEl.hide();this.$el.show();var r=this.mediaControl.$seekBarContainer.width(),i=this.$el.width(),a=this.hoverPosition*r;a-=i/2,a=Math.max(0,Math.min(a,r-i)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")},m.prototype.shouldBeVisible=function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration},m.prototype.render=function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()},m);function m(t){(0,r.default)(this,m);var e=(0,i.default)(this,p.call(this,t));return e.hoveringOverSeekBar=!1,e.hoverPosition=null,e.duration=null,e.firstFragDateTime=null,e.actualLiveTime=!!e.mediaControl.options.actualLiveTime,e.actualLiveTime&&(e.mediaControl.options.actualLiveServerTime?e.actualLiveServerTimeDiff=(new Date).getTime()-new Date(e.mediaControl.options.actualLiveServerTime).getTime():e.actualLiveServerTimeDiff=0),e}e.default=g,t.exports=e.default},function(t,e){t.exports="<span data-seek-time></span>\n<span data-duration></span>\n"},function(t,e,n){var r=n(244);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,'.seek-time[data-seek-time]{position:absolute;white-space:nowrap;height:20px;line-height:20px;font-size:0;left:-100%;bottom:55px;background-color:rgba(2,2,2,.5);z-index:9999;transition:opacity .1s ease}.seek-time[data-seek-time].hidden[data-seek-time]{opacity:0}.seek-time[data-seek-time] [data-seek-time]{display:inline-block;color:#fff;font-size:10px;padding-left:7px;padding-right:7px;vertical-align:top}.seek-time[data-seek-time] [data-duration]{display:inline-block;color:hsla(0,0%,100%,.5);font-size:10px;padding-right:7px;vertical-align:top}.seek-time[data-seek-time] [data-duration]:before{content:"|";margin-right:7px}',""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(0)),i=u(n(3)),a=u(n(1)),o=u(n(2)),s=u(n(35)),l=u(n(4));function u(t){return t&&t.__esModule?t:{default:t}}var c,h=(c=s.default,(0,o.default)(d,c),d.prototype.bindEvents=function(){this.listenTo(this.core,l.default.CORE_CONTAINERS_CREATED,this.onContainersCreated)},d.prototype.onContainersCreated=function(){var t=this.core.containers.filter((function(t){return"no_op"!==t.playback.name}))[0]||this.core.containers[0];t&&this.core.containers.forEach((function(e){e!==t&&e.destroy()}))},(0,i.default)(d,[{key:"name",get:function(){return"sources"}}]),d);function d(){return(0,r.default)(this,d),(0,a.default)(this,c.apply(this,arguments))}e.default=h,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(n(0)),i=u(n(3)),a=u(n(1)),o=u(n(2)),s=u(n(4)),l=u(n(35));function u(t){return t&&t.__esModule?t:{default:t}}var c,h=(c=l.default,(0,o.default)(d,c),d.prototype.bindEvents=function(){this.listenTo(this.core,s.default.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged);var t=this.core.activeContainer;t&&(this.listenTo(t,s.default.CONTAINER_ENDED,this.ended),this.listenTo(t,s.default.CONTAINER_STOP,this.ended))},d.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},d.prototype.ended=function(){(void 0===this.core.options.exitFullscreenOnEnd||this.core.options.exitFullscreenOnEnd)&&this.core.isFullscreen()&&this.core.toggleFullscreen()},(0,i.default)(d,[{key:"name",get:function(){return"end_video"}}]),d);function d(){return(0,r.default)(this,d),(0,a.default)(this,c.apply(this,arguments))}e.default=h,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(0)),i=c(n(1)),a=c(n(3)),o=c(n(2)),s=n(5),l=c(n(6)),u=c(n(35));function c(t){return t&&t.__esModule?t:{default:t}}var h,d=(h=u.default,(0,o.default)(f,h),(0,a.default)(f,[{key:"name",get:function(){return"strings"}}]),f.prototype.t=function(t){var e=this._language(),n=this._messages.en;return(e&&this._messages[e]||n)[t]||n[t]||t},f.prototype._language=function(){return this.core.options.language||(0,s.getBrowserLanguage)()},f.prototype._initializeMessages=function(){this._messages=l.default.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente.",default_error_title:"No foi possvel reproduzir o vdeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vdeo."},es:{live:"vivo",back_to_live:"volver en vivo",disabled:"Discapacitado",playback_not_supported:"Su navegador no soporta la reproduccin de un video. Por favor, trate de usar un navegador diferente."},ru:{live:" ",back_to_live:"  ",disabled:"",playback_not_supported:"      . ,   ."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Dsactiv",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vido. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vido.",default_error_message:"Un problme est survenu lors du chargement de la vido."},tr:{live:"canl",back_to_live:"canl yayna dn",disabled:"Engelli",playback_not_supported:"Taraycnz bu videoyu oynatma desteine sahip deil. Ltfen farkl bir tarayc ile deneyin."},et:{live:"Otselekanne",back_to_live:"Tagasi otselekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"",back_to_live:"  ",disabled:"",playback_not_supported:"       .    .",default_error_title:"   .",default_error_message:"    ."}},this.core.options.strings||{}),this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["es-419"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar},f);function f(t){(0,r.default)(this,f);var e=(0,i.default)(this,h.call(this,t));return e._initializeMessages(),e}e.default=d,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(249),a=(r=i)&&r.__esModule?r:{default:r};e.default=a.default,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=f(n(0)),i=f(n(1)),a=f(n(3)),o=f(n(2)),s=f(n(4)),l=f(n(24)),u=f(n(7)),c=f(n(25)),h=n(5),d=f(n(250));function f(t){return t&&t.__esModule?t:{default:t}}n(251);var p,g=(p=l.default,(0,o.default)(m,p),(0,a.default)(m,[{key:"name",get:function(){return"error_screen"}},{key:"template",get:function(){return(0,u.default)(d.default)}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"attributes",get:function(){return{class:"player-error-screen","data-error-screen":""}}}]),m.prototype.bindEvents=function(){this.listenTo(this.core,s.default.ERROR,this.onError),this.listenTo(this.core,s.default.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)},m.prototype.bindReload=function(){this.reloadButton=this.$el.find(".player-error-screen__reload"),this.reloadButton&&this.reloadButton.on("click",this.reload.bind(this))},m.prototype.reload=function(){var t=this;this.listenToOnce(this.core,s.default.CORE_READY,(function(){return t.container.play()})),this.core.load(this.options.sources,this.options.mimeType),this.unbindReload()},m.prototype.unbindReload=function(){this.reloadButton&&this.reloadButton.off("click")},m.prototype.onContainerChanged=function(){this.err=null,this.unbindReload(),this.hide()},m.prototype.onError=function(t){var e=0<arguments.length&&void 0!==t?t:{};e.level===c.default.Levels.FATAL&&(this.err=e,this.container.disableMediaControl(),this.container.stop(),this.show())},m.prototype.show=function(){this.render(),this.$el.show()},m.prototype.hide=function(){this.$el.hide()},m.prototype.render=function(){if(this.err)return this.$el.html(this.template({title:this.err.UI.title,message:this.err.UI.message,code:this.err.code,icon:this.err.UI.icon||"",reloadIcon:h.SvgIcons.reload})),this.core.$el.append(this.el),this.bindReload(),this},m);function m(t){var e;(0,r.default)(this,m);var n=(0,i.default)(this,p.call(this,t));return n.options.disableErrorScreen?(e=n.disable(),(0,i.default)(n,e)):n}e.default=g,t.exports=e.default},function(t,e){t.exports='<div class="player-error-screen__content" data-error-screen>\n  <% if (icon) { %>\n  <div class="player-error-screen__icon" data-error-screen><%= icon %></div>\n  <% } %>\n  <div class="player-error-screen__title" data-error-screen><%= title %></div>\n  <div class="player-error-screen__message" data-error-screen><%= message %></div>\n  <div class="player-error-screen__code" data-error-screen>Error code: <%= code %></div>\n  <div class="player-error-screen__reload" data-error-screen><%= reloadIcon %></div>\n</div>\n'},function(t,e,n){var r=n(252);"string"==typeof r&&(r=[[t.i,r,""]]);var i={singleton:!0,hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(8)(!1)).push([t.i,"div.player-error-screen{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#cccaca;position:absolute;top:0;height:100%;width:100%;background-color:rgba(0,0,0,.7);z-index:2000;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}div.player-error-screen__content[data-error-screen]{font-size:14px;color:#cccaca;margin-top:45px}div.player-error-screen__title[data-error-screen]{font-weight:700;line-height:30px;font-size:18px}div.player-error-screen__message[data-error-screen]{width:90%;margin:0 auto}div.player-error-screen__code[data-error-screen]{font-size:13px;margin-top:15px}div.player-error-screen__reload{cursor:pointer;width:30px;margin:15px auto 0}",""])}],f.c=e,f.d=function(t,e,n){f.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},f.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},f.t=function(t,e){if(1&e&&(t=f(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(f.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)f.d(n,r,function(e){return t[e]}.bind(null,r));return n},f.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return f.d(e,"a",e),e},f.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},f.p="dist/",f(f.s=100);function f(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return d[t].call(n.exports,n,n.exports,f),n.l=!0,n.exports}var d,e}))},"4d64":function(t,e,n){var r=n("fc6a"),i=n("50c4"),a=n("23cb"),o=function(t){return function(e,n,o){var s,l=r(e),u=i(l.length),c=a(o,u);if(t&&n!=n){while(u>c)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,a=n("1dde"),o=n("ae40"),s=a("filter"),l=o("filter");r({target:"Array",proto:!0,forced:!s||!l},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"50c4":function(t,e,n){var r=n("a691"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},5135:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("a4d3"),n("4de4"),n("4160"),n("1d1c"),n("7a82"),n("e439"),n("dbb4"),n("b64b"),n("159b");function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},5692:function(t,e,n){var r=n("c430"),i=n("c6cd");(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var r=n("d066"),i=n("241c"),a=n("7418"),o=n("825a");t.exports=r("Reflect","ownKeys")||function(t){var e=i.f(o(t)),n=a.f;return n?e.concat(n(t)):e}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"60da":function(t,e,n){"use strict";var r=n("83ab"),i=n("d039"),a=n("df75"),o=n("7418"),s=n("d1e7"),l=n("7b0b"),u=n("44ad"),c=Object.assign,h=Object.defineProperty;t.exports=!c||i((function(){if(r&&1!==c({b:1},c(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=c({},t)[n]||a(c({},e)).join("")!=i}))?function(t,e){var n=l(t),i=arguments.length,c=1,h=o.f,d=s.f;while(i>c){var f,p=u(arguments[c++]),g=h?a(p).concat(h(p)):a(p),m=g.length,v=0;while(m>v)f=g[v++],r&&!d.call(p,f)||(n[f]=p[f])}return n}:c},6547:function(t,e,n){var r=n("a691"),i=n("1d80"),a=function(t){return function(e,n){var a,o,s=String(i(e)),l=r(n),u=s.length;return l<0||l>=u?t?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):a:t?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}};t.exports={codeAt:a(!1),charAt:a(!0)}},"65d3":function(t,e,n){},"65f0":function(t,e,n){var r=n("861d"),i=n("e8b5"),a=n("b622"),o=a("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"69f3":function(t,e,n){var r,i,a,o=n("7f9a"),s=n("da84"),l=n("861d"),u=n("9112"),c=n("5135"),h=n("f772"),d=n("d012"),f=s.WeakMap,p=function(t){return a(t)?i(t):r(t,{})},g=function(t){return function(e){var n;if(!l(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(o){var m=new f,v=m.get,y=m.has,b=m.set;r=function(t,e){return b.call(m,t,e),e},i=function(t){return v.call(m,t)||{}},a=function(t){return y.call(m,t)}}else{var _=h("state");d[_]=!0,r=function(t,e){return u(t,_,e),e},i=function(t){return c(t,_)?t[_]:{}},a=function(t){return c(t,_)}}t.exports={set:r,get:i,has:a,enforce:p,getterFor:g}},"6eeb":function(t,e,n){var r=n("da84"),i=n("9112"),a=n("5135"),o=n("ce4e"),s=n("8925"),l=n("69f3"),u=l.get,c=l.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var l=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||a(n,"name")||i(n,"name",e),c(n).source=h.join("string"==typeof e?e:"")),t!==r?(l?!d&&t[e]&&(u=!0):delete t[e],u?t[e]=n:i(t,e,n)):u?t[e]=n:o(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),a=n("e538"),o=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||o(e,t,{value:a.f(t)})}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a82":function(t,e,n){var r=n("23e7"),i=n("83ab"),a=n("9bf2");r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:a.f})},"7b0b":function(t,e,n){var r=n("1d80");t.exports=function(t){return Object(r(t))}},"7c73":function(t,e,n){var r,i=n("825a"),a=n("37e8"),o=n("7839"),s=n("d012"),l=n("1be4"),u=n("cc12"),c=n("f772"),h=">",d="<",f="prototype",p="script",g=c("IE_PROTO"),m=function(){},v=function(t){return d+p+h+t+d+"/"+p+h},y=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=u("iframe"),n="java"+p+":";return e.style.display="none",l.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},_=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}_=r?y(r):b();var t=o.length;while(t--)delete _[f][o[t]];return _()};s[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[f]=i(t),n=new m,m[f]=null,n[g]=t):n=_(),void 0===e?n:a(n,e)}},"7da8":function(t,e,n){},"7dd0":function(t,e,n){"use strict";var r=n("23e7"),i=n("9ed3"),a=n("e163"),o=n("d2bb"),s=n("d44e"),l=n("9112"),u=n("6eeb"),c=n("b622"),h=n("c430"),d=n("3f8c"),f=n("ae93"),p=f.IteratorPrototype,g=f.BUGGY_SAFARI_ITERATORS,m=c("iterator"),v="keys",y="values",b="entries",_=function(){return this};t.exports=function(t,e,n,c,f,E,A){i(n,e,c);var T,w,S,x=function(t){if(t===f&&R)return R;if(!g&&t in k)return k[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case b:return function(){return new n(this,t)}}return function(){return new n(this)}},L=e+" Iterator",M=!1,k=t.prototype,C=k[m]||k["@@iterator"]||f&&k[f],R=!g&&C||x(f),P="Array"==e&&k.entries||C;if(P&&(T=a(P.call(new t)),p!==Object.prototype&&T.next&&(h||a(T)===p||(o?o(T,p):"function"!=typeof T[m]&&l(T,m,_)),s(T,L,!0,!0),h&&(d[L]=_))),f==y&&C&&C.name!==y&&(M=!0,R=function(){return C.call(this)}),h&&!A||k[m]===R||l(k,m,R),d[e]=R,f)if(w={values:x(y),keys:E?R:x(v),entries:x(b)},A)for(S in w)(g||M||!(S in k))&&u(k,S,w[S]);else r({target:e,proto:!0,forced:g||M},w);return w}},"7f9a":function(t,e,n){var r=n("da84"),i=n("8925"),a=r.WeakMap;t.exports="function"===typeof a&&/native code/.test(i(a))},"825a":function(t,e,n){var r=n("861d");t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},"83ab":function(t,e,n){var r=n("d039");t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,n){"use strict";var r=n("c04e"),i=n("9bf2"),a=n("5c6c");t.exports=function(t,e,n){var o=r(e);o in t?i.f(t,o,a(0,n)):t[o]=n}},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8925:function(t,e,n){var r=n("c6cd"),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return i.call(t)}),t.exports=r.inspectSource},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"90e3":function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},9112:function(t,e,n){var r=n("83ab"),i=n("9bf2"),a=n("5c6c");t.exports=r?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},9263:function(t,e,n){"use strict";var r=n("ad6d"),i=n("9f7f"),a=RegExp.prototype.exec,o=String.prototype.replace,s=a,l=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=i.UNSUPPORTED_Y||i.BROKEN_CARET,c=void 0!==/()??/.exec("")[1],h=l||c||u;h&&(s=function(t){var e,n,i,s,h=this,d=u&&h.sticky,f=r.call(h),p=h.source,g=0,m=t;return d&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),m=String(t).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==t[h.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,g++),n=new RegExp("^(?:"+p+")",f)),c&&(n=new RegExp("^"+p+"$(?!\\s)",f)),l&&(e=h.lastIndex),i=a.call(d?n:h,m),d?i?(i.input=i.input.slice(g),i[0]=i[0].slice(g),i.index=h.lastIndex,h.lastIndex+=i[0].length):h.lastIndex=0:l&&i&&(h.lastIndex=h.global?i.index+i[0].length:e),c&&i&&i.length>1&&o.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),t.exports=s},"94ca":function(t,e,n){var r=n("d039"),i=/#|\.prototype\./,a=function(t,e){var n=s[o(t)];return n==u||n!=l&&("function"==typeof e?r(e):!!e)},o=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},s=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";t.exports=a},"96cf":function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(P){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=S(t,n,o),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=u;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function m(){}function v(){}function y(){}var b={};b[a]=function(){return this};var _=Object.getPrototypeOf,E=_&&_(_(C([])));E&&E!==n&&r.call(E,a)&&(b=E);var A=y.prototype=m.prototype=Object.create(b);function T(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function n(i,a,o,s){var l=c(t[i],t,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"===typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(h).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(l.arg)}var i;function a(t,r){function a(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(a,a):a()}this._invoke=a}function S(t,e,n){var r=h;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return R()}n.method=i,n.arg=a;while(1){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=c(t,e,n);if("normal"===l.type){if(r=n.done?p:d,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}function x(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function C(t){if(t){var n=t[a];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){while(++i<t.length)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:e,done:!0}}return v.prototype=A.constructor=y,y.constructor=v,v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(A),t},t.awrap=function(t){return{__await:t}},T(w.prototype),w.prototype[o]=function(){return this},t.AsyncIterator=w,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new w(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(A),l(A,s,"Generator"),A[a]=function(){return this},A.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},"99af":function(t,e,n){"use strict";var r=n("23e7"),i=n("d039"),a=n("e8b5"),o=n("861d"),s=n("7b0b"),l=n("50c4"),u=n("8418"),c=n("65f0"),h=n("1dde"),d=n("b622"),f=n("2d00"),p=d("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",v=f>=51||!i((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),y=h("concat"),b=function(t){if(!o(t))return!1;var e=t[p];return void 0!==e?!!e:a(t)},_=!v||!y;r({target:"Array",proto:!0,forced:_},{concat:function(t){var e,n,r,i,a,o=s(this),h=c(o,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(a=-1===e?o:arguments[e],b(a)){if(i=l(a.length),d+i>g)throw TypeError(m);for(n=0;n<i;n++,d++)n in a&&u(h,d,a[n])}else{if(d>=g)throw TypeError(m);u(h,d++,a)}return h.length=d,h}})},"9bdd":function(t,e,n){var r=n("825a");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&r(a.call(t)),o}}},"9bf2":function(t,e,n){var r=n("83ab"),i=n("0cfb"),a=n("825a"),o=n("c04e"),s=Object.defineProperty;e.f=r?s:function(t,e,n){if(a(t),e=o(e,!0),a(n),i)try{return s(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9ed3":function(t,e,n){"use strict";var r=n("ae93").IteratorPrototype,i=n("7c73"),a=n("5c6c"),o=n("d44e"),s=n("3f8c"),l=function(){return this};t.exports=function(t,e,n){var u=e+" Iterator";return t.prototype=i(r,{next:a(1,n)}),o(t,u,!1,!0),s[u]=l,t}},"9f7f":function(t,e,n){"use strict";var r=n("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,n){"use strict";var r=n("23e7"),i=n("23cb"),a=n("a691"),o=n("50c4"),s=n("7b0b"),l=n("65f0"),u=n("8418"),c=n("1dde"),h=n("ae40"),d=c("splice"),f=h("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,g=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var n,r,c,h,d,f,y=s(this),b=o(y.length),_=i(t,b),E=arguments.length;if(0===E?n=r=0:1===E?(n=0,r=b-_):(n=E-2,r=g(p(a(e),0),b-_)),b+n-r>m)throw TypeError(v);for(c=l(y,r),h=0;h<r;h++)d=_+h,d in y&&u(c,h,y[d]);if(c.length=r,n<r){for(h=_;h<b-r;h++)d=h+r,f=h+n,d in y?y[f]=y[d]:delete y[f];for(h=b;h>b-r+n;h--)delete y[h-1]}else if(n>r)for(h=b-r;h>_;h--)d=h+r-1,f=h+n-1,d in y?y[f]=y[d]:delete y[f];for(h=0;h<n;h++)y[h+_]=arguments[h+2];return y.length=b-r+n,c}})},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("d066"),o=n("c430"),s=n("83ab"),l=n("4930"),u=n("fdbf"),c=n("d039"),h=n("5135"),d=n("e8b5"),f=n("861d"),p=n("825a"),g=n("7b0b"),m=n("fc6a"),v=n("c04e"),y=n("5c6c"),b=n("7c73"),_=n("df75"),E=n("241c"),A=n("057f"),T=n("7418"),w=n("06cf"),S=n("9bf2"),x=n("d1e7"),L=n("9112"),M=n("6eeb"),k=n("5692"),C=n("f772"),R=n("d012"),P=n("90e3"),O=n("b622"),D=n("e538"),I=n("746f"),N=n("d44e"),F=n("69f3"),B=n("b727").forEach,U=C("hidden"),j="Symbol",V="prototype",G=O("toPrimitive"),z=F.set,Y=F.getterFor(j),H=Object[V],$=i.Symbol,W=a("JSON","stringify"),K=w.f,X=S.f,q=A.f,Z=x.f,J=k("symbols"),Q=k("op-symbols"),tt=k("string-to-symbol-registry"),et=k("symbol-to-string-registry"),nt=k("wks"),rt=i.QObject,it=!rt||!rt[V]||!rt[V].findChild,at=s&&c((function(){return 7!=b(X({},"a",{get:function(){return X(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=K(H,e);r&&delete H[e],X(t,e,n),r&&t!==H&&X(H,e,r)}:X,ot=function(t,e){var n=J[t]=b($[V]);return z(n,{type:j,tag:t,description:e}),s||(n.description=e),n},st=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof $},lt=function(t,e,n){t===H&&lt(Q,e,n),p(t);var r=v(e,!0);return p(n),h(J,r)?(n.enumerable?(h(t,U)&&t[U][r]&&(t[U][r]=!1),n=b(n,{enumerable:y(0,!1)})):(h(t,U)||X(t,U,y(1,{})),t[U][r]=!0),at(t,r,n)):X(t,r,n)},ut=function(t,e){p(t);var n=m(e),r=_(n).concat(pt(n));return B(r,(function(e){s&&!ht.call(n,e)||lt(t,e,n[e])})),t},ct=function(t,e){return void 0===e?b(t):ut(b(t),e)},ht=function(t){var e=v(t,!0),n=Z.call(this,e);return!(this===H&&h(J,e)&&!h(Q,e))&&(!(n||!h(this,e)||!h(J,e)||h(this,U)&&this[U][e])||n)},dt=function(t,e){var n=m(t),r=v(e,!0);if(n!==H||!h(J,r)||h(Q,r)){var i=K(n,r);return!i||!h(J,r)||h(n,U)&&n[U][r]||(i.enumerable=!0),i}},ft=function(t){var e=q(m(t)),n=[];return B(e,(function(t){h(J,t)||h(R,t)||n.push(t)})),n},pt=function(t){var e=t===H,n=q(e?Q:m(t)),r=[];return B(n,(function(t){!h(J,t)||e&&!h(H,t)||r.push(J[t])})),r};if(l||($=function(){if(this instanceof $)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=P(t),n=function(t){this===H&&n.call(Q,t),h(this,U)&&h(this[U],e)&&(this[U][e]=!1),at(this,e,y(1,t))};return s&&it&&at(H,e,{configurable:!0,set:n}),ot(e,t)},M($[V],"toString",(function(){return Y(this).tag})),M($,"withoutSetter",(function(t){return ot(P(t),t)})),x.f=ht,S.f=lt,w.f=dt,E.f=A.f=ft,T.f=pt,D.f=function(t){return ot(O(t),t)},s&&(X($[V],"description",{configurable:!0,get:function(){return Y(this).description}}),o||M(H,"propertyIsEnumerable",ht,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:$}),B(_(nt),(function(t){I(t)})),r({target:j,stat:!0,forced:!l},{for:function(t){var e=String(t);if(h(tt,e))return tt[e];var n=$(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(h(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!s},{create:ct,defineProperty:lt,defineProperties:ut,getOwnPropertyDescriptor:dt}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:ft,getOwnPropertySymbols:pt}),r({target:"Object",stat:!0,forced:c((function(){T.f(1)}))},{getOwnPropertySymbols:function(t){return T.f(g(t))}}),W){var gt=!l||c((function(){var t=$();return"[null]"!=W([t])||"{}"!=W({a:t})||"{}"!=W(Object(t))}));r({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,n){var r,i=[t],a=1;while(arguments.length>a)i.push(arguments[a++]);if(r=e,(f(e)||void 0!==t)&&!st(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!st(e))return e}),i[1]=e,W.apply(null,i)}})}$[V][G]||L($[V],G,$[V].valueOf),N($,j),R[U]=!0},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},a79d:function(t,e,n){"use strict";var r=n("23e7"),i=n("c430"),a=n("fea9"),o=n("d039"),s=n("d066"),l=n("4840"),u=n("cdf9"),c=n("6eeb"),h=!!a&&o((function(){a.prototype["finally"].call({then:function(){}},(function(){}))}));r({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(t){var e=l(this,s("Promise")),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then((function(){return n}))}:t,n?function(n){return u(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof a||a.prototype["finally"]||c(a.prototype,"finally",s("Promise").prototype["finally"])},a925:function(t,e,n){"use strict";
/*!
 * vue-i18n v8.20.0 
 * (c) 2020 kazuya kawaguchi
 * Released under the MIT License.
 */var r=["style","currency","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","localeMatcher","formatMatcher","unit"];function i(t,e){"undefined"!==typeof console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}function a(t,e){"undefined"!==typeof console&&(console.error("[vue-i18n] "+t),e&&console.error(e.stack))}var o=Array.isArray;function s(t){return null!==t&&"object"===typeof t}function l(t){return"boolean"===typeof t}function u(t){return"string"===typeof t}var c=Object.prototype.toString,h="[object Object]";function d(t){return c.call(t)===h}function f(t){return null===t||void 0===t}function p(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];var n=null,r=null;return 1===t.length?s(t[0])||Array.isArray(t[0])?r=t[0]:"string"===typeof t[0]&&(n=t[0]):2===t.length&&("string"===typeof t[0]&&(n=t[0]),(s(t[1])||Array.isArray(t[1]))&&(r=t[1])),{locale:n,params:r}}function g(t){return JSON.parse(JSON.stringify(t))}function m(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function v(t,e){return!!~t.indexOf(e)}var y=Object.prototype.hasOwnProperty;function b(t,e){return y.call(t,e)}function _(t){for(var e=arguments,n=Object(t),r=1;r<arguments.length;r++){var i=e[r];if(void 0!==i&&null!==i){var a=void 0;for(a in i)b(i,a)&&(s(i[a])?n[a]=_(n[a],i[a]):n[a]=i[a])}}return n}function E(t,e){if(t===e)return!0;var n=s(t),r=s(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),a=Array.isArray(e);if(i&&a)return t.length===e.length&&t.every((function(t,n){return E(t,e[n])}));if(i||a)return!1;var o=Object.keys(t),l=Object.keys(e);return o.length===l.length&&o.every((function(n){return E(t[n],e[n])}))}catch(u){return!1}}function A(t){t.prototype.hasOwnProperty("$i18n")||Object.defineProperty(t.prototype,"$i18n",{get:function(){return this._i18n}}),t.prototype.$t=function(t){var e=[],n=arguments.length-1;while(n-- >0)e[n]=arguments[n+1];var r=this.$i18n;return r._t.apply(r,[t,r.locale,r._getMessages(),this].concat(e))},t.prototype.$tc=function(t,e){var n=[],r=arguments.length-2;while(r-- >0)n[r]=arguments[r+2];var i=this.$i18n;return i._tc.apply(i,[t,i.locale,i._getMessages(),this,e].concat(n))},t.prototype.$te=function(t,e){var n=this.$i18n;return n._te(t,n.locale,n._getMessages(),e)},t.prototype.$d=function(t){var e,n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return(e=this.$i18n).d.apply(e,[t].concat(n))},t.prototype.$n=function(t){var e,n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return(e=this.$i18n).n.apply(e,[t].concat(n))}}var T={beforeCreate:function(){var t=this.$options;if(t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n)if(t.i18n instanceof Et){if(t.__i18n)try{var e={};t.__i18n.forEach((function(t){e=_(e,JSON.parse(t))})),Object.keys(e).forEach((function(n){t.i18n.mergeLocaleMessage(n,e[n])}))}catch(o){0}this._i18n=t.i18n,this._i18nWatcher=this._i18n.watchI18nData()}else if(d(t.i18n)){var n=this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Et?this.$root.$i18n:null;if(n&&(t.i18n.root=this.$root,t.i18n.formatter=n.formatter,t.i18n.fallbackLocale=n.fallbackLocale,t.i18n.formatFallbackMessages=n.formatFallbackMessages,t.i18n.silentTranslationWarn=n.silentTranslationWarn,t.i18n.silentFallbackWarn=n.silentFallbackWarn,t.i18n.pluralizationRules=n.pluralizationRules,t.i18n.preserveDirectiveContent=n.preserveDirectiveContent),t.__i18n)try{var r={};t.__i18n.forEach((function(t){r=_(r,JSON.parse(t))})),t.i18n.messages=r}catch(o){0}var i=t.i18n,a=i.sharedMessages;a&&d(a)&&(t.i18n.messages=_(t.i18n.messages,a)),this._i18n=new Et(t.i18n),this._i18nWatcher=this._i18n.watchI18nData(),(void 0===t.i18n.sync||t.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale()),n&&n.onComponentInstanceCreated(this._i18n)}else 0;else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Et?this._i18n=this.$root.$i18n:t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof Et&&(this._i18n=t.parent.$i18n)},beforeMount:function(){var t=this.$options;t.i18n=t.i18n||(t.__i18n?{}:null),t.i18n?(t.i18n instanceof Et||d(t.i18n))&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0):(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof Et||t.parent&&t.parent.$i18n&&t.parent.$i18n instanceof Et)&&(this._i18n.subscribeDataChanging(this),this._subscribing=!0)},beforeDestroy:function(){if(this._i18n){var t=this;this.$nextTick((function(){t._subscribing&&(t._i18n.unsubscribeDataChanging(t),delete t._subscribing),t._i18nWatcher&&(t._i18nWatcher(),t._i18n.destroyVM(),delete t._i18nWatcher),t._localeWatcher&&(t._localeWatcher(),delete t._localeWatcher)}))}}},w={name:"i18n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(t,e){var n=e.data,r=e.parent,i=e.props,a=e.slots,o=r.$i18n;if(o){var s=i.path,l=i.locale,u=i.places,c=a(),h=o.i(s,l,S(c)||u?x(c.default,u):c),d=i.tag&&!0!==i.tag||!1===i.tag?i.tag:"span";return d?t(d,n,h):h}}};function S(t){var e;for(e in t)if("default"!==e)return!1;return Boolean(e)}function x(t,e){var n=e?L(e):{};if(!t)return n;t=t.filter((function(t){return t.tag||""!==t.text.trim()}));var r=t.every(C);return t.reduce(r?M:k,n)}function L(t){return Array.isArray(t)?t.reduce(k,{}):Object.assign({},t)}function M(t,e){return e.data&&e.data.attrs&&e.data.attrs.place&&(t[e.data.attrs.place]=e),t}function k(t,e,n){return t[n]=e,t}function C(t){return Boolean(t.data&&t.data.attrs&&t.data.attrs.place)}var R,P={name:"i18n-n",functional:!0,props:{tag:{type:[String,Boolean,Object],default:"span"},value:{type:Number,required:!0},format:{type:[String,Object]},locale:{type:String}},render:function(t,e){var n=e.props,i=e.parent,a=e.data,o=i.$i18n;if(!o)return null;var l=null,c=null;u(n.format)?l=n.format:s(n.format)&&(n.format.key&&(l=n.format.key),c=Object.keys(n.format).reduce((function(t,e){var i;return v(r,e)?Object.assign({},t,(i={},i[e]=n.format[e],i)):t}),null));var h=n.locale||o.locale,d=o._ntp(n.value,h,l,c),f=d.map((function(t,e){var n,r=a.scopedSlots&&a.scopedSlots[t.type];return r?r((n={},n[t.type]=t.value,n.index=e,n.parts=d,n)):t.value})),p=n.tag&&!0!==n.tag||!1===n.tag?n.tag:"span";return p?t(p,{attrs:a.attrs,class:a["class"],staticClass:a.staticClass},f):f}};function O(t,e,n){N(t,n)&&B(t,e,n)}function D(t,e,n,r){if(N(t,n)){var i=n.context.$i18n;F(t,n)&&E(e.value,e.oldValue)&&E(t._localeMessage,i.getLocaleMessage(i.locale))||B(t,e,n)}}function I(t,e,n,r){var a=n.context;if(a){var o=n.context.$i18n||{};e.modifiers.preserve||o.preserveDirectiveContent||(t.textContent=""),t._vt=void 0,delete t["_vt"],t._locale=void 0,delete t["_locale"],t._localeMessage=void 0,delete t["_localeMessage"]}else i("Vue instance does not exists in VNode context")}function N(t,e){var n=e.context;return n?!!n.$i18n||(i("VueI18n instance does not exists in Vue instance"),!1):(i("Vue instance does not exists in VNode context"),!1)}function F(t,e){var n=e.context;return t._locale===n.$i18n.locale}function B(t,e,n){var r,a,o=e.value,s=U(o),l=s.path,u=s.locale,c=s.args,h=s.choice;if(l||u||c)if(l){var d=n.context;t._vt=t.textContent=null!=h?(r=d.$i18n).tc.apply(r,[l,h].concat(j(u,c))):(a=d.$i18n).t.apply(a,[l].concat(j(u,c))),t._locale=d.$i18n.locale,t._localeMessage=d.$i18n.getLocaleMessage(d.$i18n.locale)}else i("`path` is required in v-t directive");else i("value type not supported")}function U(t){var e,n,r,i;return u(t)?e=t:d(t)&&(e=t.path,n=t.locale,r=t.args,i=t.choice),{path:e,locale:n,args:r,choice:i}}function j(t,e){var n=[];return t&&n.push(t),e&&(Array.isArray(e)||d(e))&&n.push(e),n}function V(t){V.installed=!0,R=t;R.version&&Number(R.version.split(".")[0]);A(R),R.mixin(T),R.directive("t",{bind:O,update:D,unbind:I}),R.component(w.name,w),R.component(P.name,P);var e=R.config.optionMergeStrategies;e.i18n=function(t,e){return void 0===e?t:e}}var G=function(){this._caches=Object.create(null)};G.prototype.interpolate=function(t,e){if(!e)return[t];var n=this._caches[t];return n||(n=H(t),this._caches[t]=n),$(n,e)};var z=/^(?:\d)+/,Y=/^(?:\w)+/;function H(t){var e=[],n=0,r="";while(n<t.length){var i=t[n++];if("{"===i){r&&e.push({type:"text",value:r}),r="";var a="";i=t[n++];while(void 0!==i&&"}"!==i)a+=i,i=t[n++];var o="}"===i,s=z.test(a)?"list":o&&Y.test(a)?"named":"unknown";e.push({value:a,type:s})}else"%"===i?"{"!==t[n]&&(r+=i):r+=i}return r&&e.push({type:"text",value:r}),e}function $(t,e){var n=[],r=0,i=Array.isArray(e)?"list":s(e)?"named":"unknown";if("unknown"===i)return n;while(r<t.length){var a=t[r];switch(a.type){case"text":n.push(a.value);break;case"list":n.push(e[parseInt(a.value,10)]);break;case"named":"named"===i&&n.push(e[a.value]);break;case"unknown":0;break}r++}return n}var W=0,K=1,X=2,q=3,Z=0,J=1,Q=2,tt=3,et=4,nt=5,rt=6,it=7,at=8,ot=[];ot[Z]={ws:[Z],ident:[tt,W],"[":[et],eof:[it]},ot[J]={ws:[J],".":[Q],"[":[et],eof:[it]},ot[Q]={ws:[Q],ident:[tt,W],0:[tt,W],number:[tt,W]},ot[tt]={ident:[tt,W],0:[tt,W],number:[tt,W],ws:[J,K],".":[Q,K],"[":[et,K],eof:[it,K]},ot[et]={"'":[nt,W],'"':[rt,W],"[":[et,X],"]":[J,q],eof:at,else:[et,W]},ot[nt]={"'":[et,W],eof:at,else:[nt,W]},ot[rt]={'"':[et,W],eof:at,else:[rt,W]};var st=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function lt(t){return st.test(t)}function ut(t){var e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e!==n||34!==e&&39!==e?t:t.slice(1,-1)}function ct(t){if(void 0===t||null===t)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"ident";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return"ident"}function ht(t){var e=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&(lt(e)?ut(e):"*"+e)}function dt(t){var e,n,r,i,a,o,s,l=[],u=-1,c=Z,h=0,d=[];function f(){var e=t[u+1];if(c===nt&&"'"===e||c===rt&&'"'===e)return u++,r="\\"+e,d[W](),!0}d[K]=function(){void 0!==n&&(l.push(n),n=void 0)},d[W]=function(){void 0===n?n=r:n+=r},d[X]=function(){d[W](),h++},d[q]=function(){if(h>0)h--,c=et,d[W]();else{if(h=0,void 0===n)return!1;if(n=ht(n),!1===n)return!1;d[K]()}};while(null!==c)if(u++,e=t[u],"\\"!==e||!f()){if(i=ct(e),s=ot[c],a=s[i]||s["else"]||at,a===at)return;if(c=a[0],o=d[a[1]],o&&(r=a[2],r=void 0===r?e:r,!1===o()))return;if(c===it)return l}}var ft=function(){this._cache=Object.create(null)};ft.prototype.parsePath=function(t){var e=this._cache[t];return e||(e=dt(t),e&&(this._cache[t]=e)),e||[]},ft.prototype.getPathValue=function(t,e){if(!s(t))return null;var n=this.parsePath(e);if(0===n.length)return null;var r=n.length,i=t,a=0;while(a<r){var o=i[n[a]];if(void 0===o)return null;i=o,a++}return i};var pt,gt=/<\/?[\w\s="/.':;#-\/]+>/,mt=/(?:@(?:\.[a-z]+)?:(?:[\w\-_|.]+|\([\w\-_|.]+\)))/g,vt=/^@(?:\.([a-z]+))?:/,yt=/[()]/g,bt={upper:function(t){return t.toLocaleUpperCase()},lower:function(t){return t.toLocaleLowerCase()},capitalize:function(t){return""+t.charAt(0).toLocaleUpperCase()+t.substr(1)}},_t=new G,Et=function(t){var e=this;void 0===t&&(t={}),!R&&"undefined"!==typeof window&&window.Vue&&V(window.Vue);var n=t.locale||"en-US",r=!1!==t.fallbackLocale&&(t.fallbackLocale||"en-US"),i=t.messages||{},a=t.dateTimeFormats||{},o=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||_t,this._modifiers=t.modifiers||{},this._missing=t.missing||null,this._root=t.root||null,this._sync=void 0===t.sync||!!t.sync,this._fallbackRoot=void 0===t.fallbackRoot||!!t.fallbackRoot,this._formatFallbackMessages=void 0!==t.formatFallbackMessages&&!!t.formatFallbackMessages,this._silentTranslationWarn=void 0!==t.silentTranslationWarn&&t.silentTranslationWarn,this._silentFallbackWarn=void 0!==t.silentFallbackWarn&&!!t.silentFallbackWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new ft,this._dataListeners=[],this._componentInstanceCreatedListener=t.componentInstanceCreatedListener||null,this._preserveDirectiveContent=void 0!==t.preserveDirectiveContent&&!!t.preserveDirectiveContent,this.pluralizationRules=t.pluralizationRules||{},this._warnHtmlInMessage=t.warnHtmlInMessage||"off",this._postTranslation=t.postTranslation||null,this.getChoiceIndex=function(t,n){var r=Object.getPrototypeOf(e);if(r&&r.getChoiceIndex){var i=r.getChoiceIndex;return i.call(e,t,n)}var a=function(t,e){return t=Math.abs(t),2===e?t?t>1?1:0:1:t?Math.min(t,2):0};return e.locale in e.pluralizationRules?e.pluralizationRules[e.locale].apply(e,[t,n]):a(t,n)},this._exist=function(t,n){return!(!t||!n)&&(!f(e._path.getPathValue(t,n))||!!t[n])},"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||Object.keys(i).forEach((function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,i[t])})),this._initVM({locale:n,fallbackLocale:r,messages:i,dateTimeFormats:a,numberFormats:o})},At={vm:{configurable:!0},messages:{configurable:!0},dateTimeFormats:{configurable:!0},numberFormats:{configurable:!0},availableLocales:{configurable:!0},locale:{configurable:!0},fallbackLocale:{configurable:!0},formatFallbackMessages:{configurable:!0},missing:{configurable:!0},formatter:{configurable:!0},silentTranslationWarn:{configurable:!0},silentFallbackWarn:{configurable:!0},preserveDirectiveContent:{configurable:!0},warnHtmlInMessage:{configurable:!0},postTranslation:{configurable:!0}};Et.prototype._checkLocaleMessage=function(t,e,n){var r=[],o=function(t,e,n,r){if(d(n))Object.keys(n).forEach((function(i){var a=n[i];d(a)?(r.push(i),r.push("."),o(t,e,a,r),r.pop(),r.pop()):(r.push(i),o(t,e,a,r),r.pop())}));else if(Array.isArray(n))n.forEach((function(n,i){d(n)?(r.push("["+i+"]"),r.push("."),o(t,e,n,r),r.pop(),r.pop()):(r.push("["+i+"]"),o(t,e,n,r),r.pop())}));else if(u(n)){var s=gt.test(n);if(s){var l="Detected HTML in message '"+n+"' of keypath '"+r.join("")+"' at '"+e+"'. Consider component interpolation with '<i18n>' to avoid XSS. See https://bit.ly/2ZqJzkp";"warn"===t?i(l):"error"===t&&a(l)}}};o(e,t,n,r)},Et.prototype._initVM=function(t){var e=R.config.silent;R.config.silent=!0,this._vm=new R({data:t}),R.config.silent=e},Et.prototype.destroyVM=function(){this._vm.$destroy()},Et.prototype.subscribeDataChanging=function(t){this._dataListeners.push(t)},Et.prototype.unsubscribeDataChanging=function(t){m(this._dataListeners,t)},Et.prototype.watchI18nData=function(){var t=this;return this._vm.$watch("$data",(function(){var e=t._dataListeners.length;while(e--)R.nextTick((function(){t._dataListeners[e]&&t._dataListeners[e].$forceUpdate()}))}),{deep:!0})},Et.prototype.watchLocale=function(){if(!this._sync||!this._root)return null;var t=this._vm;return this._root.$i18n.vm.$watch("locale",(function(e){t.$set(t,"locale",e),t.$forceUpdate()}),{immediate:!0})},Et.prototype.onComponentInstanceCreated=function(t){this._componentInstanceCreatedListener&&this._componentInstanceCreatedListener(t,this)},At.vm.get=function(){return this._vm},At.messages.get=function(){return g(this._getMessages())},At.dateTimeFormats.get=function(){return g(this._getDateTimeFormats())},At.numberFormats.get=function(){return g(this._getNumberFormats())},At.availableLocales.get=function(){return Object.keys(this.messages).sort()},At.locale.get=function(){return this._vm.locale},At.locale.set=function(t){this._vm.$set(this._vm,"locale",t)},At.fallbackLocale.get=function(){return this._vm.fallbackLocale},At.fallbackLocale.set=function(t){this._localeChainCache={},this._vm.$set(this._vm,"fallbackLocale",t)},At.formatFallbackMessages.get=function(){return this._formatFallbackMessages},At.formatFallbackMessages.set=function(t){this._formatFallbackMessages=t},At.missing.get=function(){return this._missing},At.missing.set=function(t){this._missing=t},At.formatter.get=function(){return this._formatter},At.formatter.set=function(t){this._formatter=t},At.silentTranslationWarn.get=function(){return this._silentTranslationWarn},At.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t},At.silentFallbackWarn.get=function(){return this._silentFallbackWarn},At.silentFallbackWarn.set=function(t){this._silentFallbackWarn=t},At.preserveDirectiveContent.get=function(){return this._preserveDirectiveContent},At.preserveDirectiveContent.set=function(t){this._preserveDirectiveContent=t},At.warnHtmlInMessage.get=function(){return this._warnHtmlInMessage},At.warnHtmlInMessage.set=function(t){var e=this,n=this._warnHtmlInMessage;if(this._warnHtmlInMessage=t,n!==t&&("warn"===t||"error"===t)){var r=this._getMessages();Object.keys(r).forEach((function(t){e._checkLocaleMessage(t,e._warnHtmlInMessage,r[t])}))}},At.postTranslation.get=function(){return this._postTranslation},At.postTranslation.set=function(t){this._postTranslation=t},Et.prototype._getMessages=function(){return this._vm.messages},Et.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},Et.prototype._getNumberFormats=function(){return this._vm.numberFormats},Et.prototype._warnDefault=function(t,e,n,r,i,a){if(!f(n))return n;if(this._missing){var o=this._missing.apply(null,[t,e,r,i]);if(u(o))return o}else 0;if(this._formatFallbackMessages){var s=p.apply(void 0,i);return this._render(e,a,s.params,e)}return e},Et.prototype._isFallbackRoot=function(t){return!t&&!f(this._root)&&this._fallbackRoot},Et.prototype._isSilentFallbackWarn=function(t){return this._silentFallbackWarn instanceof RegExp?this._silentFallbackWarn.test(t):this._silentFallbackWarn},Et.prototype._isSilentFallback=function(t,e){return this._isSilentFallbackWarn(e)&&(this._isFallbackRoot()||t!==this.fallbackLocale)},Et.prototype._isSilentTranslationWarn=function(t){return this._silentTranslationWarn instanceof RegExp?this._silentTranslationWarn.test(t):this._silentTranslationWarn},Et.prototype._interpolate=function(t,e,n,r,i,a,o){if(!e)return null;var s,l=this._path.getPathValue(e,n);if(Array.isArray(l)||d(l))return l;if(f(l)){if(!d(e))return null;if(s=e[n],!u(s))return null}else{if(!u(l))return null;s=l}return(s.indexOf("@:")>=0||s.indexOf("@.")>=0)&&(s=this._link(t,e,s,r,"raw",a,o)),this._render(s,i,a,n)},Et.prototype._link=function(t,e,n,r,i,a,o){var s=n,l=s.match(mt);for(var u in l)if(l.hasOwnProperty(u)){var c=l[u],h=c.match(vt),d=h[0],f=h[1],p=c.replace(d,"").replace(yt,"");if(v(o,p))return s;o.push(p);var g=this._interpolate(t,e,p,r,"raw"===i?"string":i,"raw"===i?void 0:a,o);if(this._isFallbackRoot(g)){if(!this._root)throw Error("unexpected error");var m=this._root.$i18n;g=m._translate(m._getMessages(),m.locale,m.fallbackLocale,p,r,i,a)}g=this._warnDefault(t,p,g,r,Array.isArray(a)?a:[a],i),this._modifiers.hasOwnProperty(f)?g=this._modifiers[f](g):bt.hasOwnProperty(f)&&(g=bt[f](g)),o.pop(),s=g?s.replace(c,g):s}return s},Et.prototype._render=function(t,e,n,r){var i=this._formatter.interpolate(t,n,r);return i||(i=_t.interpolate(t,n,r)),"string"!==e||u(i)?i:i.join("")},Et.prototype._appendItemToChain=function(t,e,n){var r=!1;return v(t,e)||(r=!0,e&&(r="!"!==e[e.length-1],e=e.replace(/!/g,""),t.push(e),n&&n[e]&&(r=n[e]))),r},Et.prototype._appendLocaleToChain=function(t,e,n){var r,i=e.split("-");do{var a=i.join("-");r=this._appendItemToChain(t,a,n),i.splice(-1,1)}while(i.length&&!0===r);return r},Et.prototype._appendBlockToChain=function(t,e,n){for(var r=!0,i=0;i<e.length&&l(r);i++){var a=e[i];u(a)&&(r=this._appendLocaleToChain(t,a,n))}return r},Et.prototype._getLocaleChain=function(t,e){if(""===t)return[];this._localeChainCache||(this._localeChainCache={});var n=this._localeChainCache[t];if(!n){e||(e=this.fallbackLocale),n=[];var r,i=[t];while(o(i))i=this._appendBlockToChain(n,i,e);r=o(e)?e:s(e)?e["default"]?e["default"]:null:e,i=u(r)?[r]:r,i&&this._appendBlockToChain(n,i,null),this._localeChainCache[t]=n}return n},Et.prototype._translate=function(t,e,n,r,i,a,o){for(var s,l=this._getLocaleChain(e,n),u=0;u<l.length;u++){var c=l[u];if(s=this._interpolate(c,t[c],r,i,a,o,[r]),!f(s))return s}return null},Et.prototype._t=function(t,e,n,r){var i,a=[],o=arguments.length-4;while(o-- >0)a[o]=arguments[o+4];if(!t)return"";var s=p.apply(void 0,a),l=s.locale||e,u=this._translate(n,l,this.fallbackLocale,t,r,"string",s.params);if(this._isFallbackRoot(u)){if(!this._root)throw Error("unexpected error");return(i=this._root).$t.apply(i,[t].concat(a))}return u=this._warnDefault(l,t,u,r,a,"string"),this._postTranslation&&null!==u&&void 0!==u&&(u=this._postTranslation(u,t)),u},Et.prototype.t=function(t){var e,n=[],r=arguments.length-1;while(r-- >0)n[r]=arguments[r+1];return(e=this)._t.apply(e,[t,this.locale,this._getMessages(),null].concat(n))},Et.prototype._i=function(t,e,n,r,i){var a=this._translate(n,e,this.fallbackLocale,t,r,"raw",i);if(this._isFallbackRoot(a)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.i(t,e,i)}return this._warnDefault(e,t,a,r,[i],"raw")},Et.prototype.i=function(t,e,n){return t?(u(e)||(e=this.locale),this._i(t,e,this._getMessages(),null,n)):""},Et.prototype._tc=function(t,e,n,r,i){var a,o=[],s=arguments.length-5;while(s-- >0)o[s]=arguments[s+5];if(!t)return"";void 0===i&&(i=1);var l={count:i,n:i},u=p.apply(void 0,o);return u.params=Object.assign(l,u.params),o=null===u.locale?[u.params]:[u.locale,u.params],this.fetchChoice((a=this)._t.apply(a,[t,e,n,r].concat(o)),i)},Et.prototype.fetchChoice=function(t,e){if(!t&&!u(t))return null;var n=t.split("|");return e=this.getChoiceIndex(e,n.length),n[e]?n[e].trim():t},Et.prototype.tc=function(t,e){var n,r=[],i=arguments.length-2;while(i-- >0)r[i]=arguments[i+2];return(n=this)._tc.apply(n,[t,this.locale,this._getMessages(),null,e].concat(r))},Et.prototype._te=function(t,e,n){var r=[],i=arguments.length-3;while(i-- >0)r[i]=arguments[i+3];var a=p.apply(void 0,r).locale||e;return this._exist(n[a],t)},Et.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},Et.prototype.getLocaleMessage=function(t){return g(this._vm.messages[t]||{})},Et.prototype.setLocaleMessage=function(t,e){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,e)},Et.prototype.mergeLocaleMessage=function(t,e){"warn"!==this._warnHtmlInMessage&&"error"!==this._warnHtmlInMessage||this._checkLocaleMessage(t,this._warnHtmlInMessage,e),this._vm.$set(this._vm.messages,t,_({},this._vm.messages[t]||{},e))},Et.prototype.getDateTimeFormat=function(t){return g(this._vm.dateTimeFormats[t]||{})},Et.prototype.setDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,e),this._clearDateTimeFormat(t,e)},Et.prototype.mergeDateTimeFormat=function(t,e){this._vm.$set(this._vm.dateTimeFormats,t,_(this._vm.dateTimeFormats[t]||{},e)),this._clearDateTimeFormat(t,e)},Et.prototype._clearDateTimeFormat=function(t,e){for(var n in e){var r=t+"__"+n;this._dateTimeFormatters.hasOwnProperty(r)&&delete this._dateTimeFormatters[r]}},Et.prototype._localizeDateTime=function(t,e,n,r,i){for(var a=e,o=r[a],s=this._getLocaleChain(e,n),l=0;l<s.length;l++){var u=s[l];if(o=r[u],a=u,!f(o)&&!f(o[i]))break}if(f(o)||f(o[i]))return null;var c=o[i],h=a+"__"+i,d=this._dateTimeFormatters[h];return d||(d=this._dateTimeFormatters[h]=new Intl.DateTimeFormat(a,c)),d.format(t)},Et.prototype._d=function(t,e,n){if(!n)return new Intl.DateTimeFormat(e).format(t);var r=this._localizeDateTime(t,e,this.fallbackLocale,this._getDateTimeFormats(),n);if(this._isFallbackRoot(r)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.d(t,n,e)}return r||""},Et.prototype.d=function(t){var e=[],n=arguments.length-1;while(n-- >0)e[n]=arguments[n+1];var r=this.locale,i=null;return 1===e.length?u(e[0])?i=e[0]:s(e[0])&&(e[0].locale&&(r=e[0].locale),e[0].key&&(i=e[0].key)):2===e.length&&(u(e[0])&&(i=e[0]),u(e[1])&&(r=e[1])),this._d(t,r,i)},Et.prototype.getNumberFormat=function(t){return g(this._vm.numberFormats[t]||{})},Et.prototype.setNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,e),this._clearNumberFormat(t,e)},Et.prototype.mergeNumberFormat=function(t,e){this._vm.$set(this._vm.numberFormats,t,_(this._vm.numberFormats[t]||{},e)),this._clearNumberFormat(t,e)},Et.prototype._clearNumberFormat=function(t,e){for(var n in e){var r=t+"__"+n;this._numberFormatters.hasOwnProperty(r)&&delete this._numberFormatters[r]}},Et.prototype._getNumberFormatter=function(t,e,n,r,i,a){for(var o=e,s=r[o],l=this._getLocaleChain(e,n),u=0;u<l.length;u++){var c=l[u];if(s=r[c],o=c,!f(s)&&!f(s[i]))break}if(f(s)||f(s[i]))return null;var h,d=s[i];if(a)h=new Intl.NumberFormat(o,Object.assign({},d,a));else{var p=o+"__"+i;h=this._numberFormatters[p],h||(h=this._numberFormatters[p]=new Intl.NumberFormat(o,d))}return h},Et.prototype._n=function(t,e,n,r){if(!Et.availabilities.numberFormat)return"";if(!n){var i=r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e);return i.format(t)}var a=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),n,r),o=a&&a.format(t);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n.n(t,Object.assign({},{key:n,locale:e},r))}return o||""},Et.prototype.n=function(t){var e=[],n=arguments.length-1;while(n-- >0)e[n]=arguments[n+1];var i=this.locale,a=null,o=null;return 1===e.length?u(e[0])?a=e[0]:s(e[0])&&(e[0].locale&&(i=e[0].locale),e[0].key&&(a=e[0].key),o=Object.keys(e[0]).reduce((function(t,n){var i;return v(r,n)?Object.assign({},t,(i={},i[n]=e[0][n],i)):t}),null)):2===e.length&&(u(e[0])&&(a=e[0]),u(e[1])&&(i=e[1])),this._n(t,i,a,o)},Et.prototype._ntp=function(t,e,n,r){if(!Et.availabilities.numberFormat)return[];if(!n){var i=r?new Intl.NumberFormat(e,r):new Intl.NumberFormat(e);return i.formatToParts(t)}var a=this._getNumberFormatter(t,e,this.fallbackLocale,this._getNumberFormats(),n,r),o=a&&a.formatToParts(t);if(this._isFallbackRoot(o)){if(!this._root)throw Error("unexpected error");return this._root.$i18n._ntp(t,e,n,r)}return o||[]},Object.defineProperties(Et.prototype,At),Object.defineProperty(Et,"availabilities",{get:function(){if(!pt){var t="undefined"!==typeof Intl;pt={dateTimeFormat:t&&"undefined"!==typeof Intl.DateTimeFormat,numberFormat:t&&"undefined"!==typeof Intl.NumberFormat}}return pt}}),Et.install=V,Et.version="8.20.0",e["a"]=Et},ac1f:function(t,e,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae40:function(t,e,n){var r=n("83ab"),i=n("d039"),a=n("5135"),o=Object.defineProperty,s={},l=function(t){throw t};t.exports=function(t,e){if(a(s,t))return s[t];e||(e={});var n=[][t],u=!!a(e,"ACCESSORS")&&e.ACCESSORS,c=a(e,0)?e[0]:l,h=a(e,1)?e[1]:void 0;return s[t]=!!n&&!i((function(){if(u&&!r)return!0;var t={length:-1};u?o(t,1,{enumerable:!0,get:l}):t[1]=1,n.call(t,c,h)}))}},ae93:function(t,e,n){"use strict";var r,i,a,o=n("e163"),s=n("9112"),l=n("5135"),u=n("b622"),c=n("c430"),h=u("iterator"),d=!1,f=function(){return this};[].keys&&(a=[].keys(),"next"in a?(i=o(o(a)),i!==Object.prototype&&(r=i)):d=!0),void 0==r&&(r={}),c||l(r,h)||s(r,h,f),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},aff4:function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="<%=baseUrl%>/",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(100),a=r(i),o=n(3),s=r(o),l=n(1),u=r(l),c=n(7),h=r(c),d=n(18),f=r(d),p=n(19),g=r(p),m=n(23),v=r(m),y=n(20),b=r(y),_=n(13),E=r(_),A=n(14),T=r(A),w=n(11),S=r(w),x=n(35),L=r(x),M=n(36),k=r(M),C=n(37),R=r(C),P=n(16),O=r(P),D=n(38),I=r(D),N=n(21),F=r(N),B=n(24),U=r(B),j=n(39),V=r(j),G=n(40),z=r(G),Y=n(41),H=r(Y),$=n(42),W=r($),K=n(22),X=r(K),q=n(43),Z=r(q),J=n(44),Q=r(J),tt=n(45),et=r(tt),nt=n(25),rt=r(nt),it=n(8),at=r(it),ot=n(26),st=r(ot),lt=n(9),ut=r(lt),ct=n(6),ht=r(ct),dt="0.2.57";e["default"]={Player:a["default"],Mediator:O["default"],Events:u["default"],Browser:S["default"],PlayerInfo:F["default"],MediaControl:I["default"],ContainerPlugin:f["default"],UIContainerPlugin:b["default"],CorePlugin:g["default"],UICorePlugin:v["default"],Playback:h["default"],Container:L["default"],Core:k["default"],Loader:R["default"],BaseObject:E["default"],UIObject:T["default"],Utils:s["default"],BaseFlashPlayback:U["default"],Flash:V["default"],FlasHLS:z["default"],HLS:H["default"],HTML5Audio:W["default"],HTML5Video:X["default"],HTMLImg:Z["default"],NoOp:Q["default"],Poster:et["default"],Log:rt["default"],Styler:at["default"],Vendor:st["default"],version:dt,template:ut["default"],$:ht["default"]},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=n(25),s=r(o),l=n(3),u=n(88),c=r(u),h=Array.prototype.slice,d=/\s+/,f=function(t,e,n,r){if(!n)return!0;if("object"===("undefined"==typeof n?"undefined":a(n))){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(d.test(n)){for(var o=n.split(d),s=0,l=o.length;s<l;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},p=function(t,e){var n,r=-1,i=t.length,a=e[0],o=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a,o);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a,o,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},g=function(){function t(){i(this,t)}return t.prototype.on=function(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},t.prototype.once=function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var r=this,i=(0,c["default"])((function(){r.off(t,i),e.apply(this,arguments)}));return i._callback=e,this.on(t,i,n)},t.prototype.off=function(t,e,n){var r,i,a,o,s,l,u,c;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:Object.keys(this._events),s=0,l=o.length;s<l;s++)if(t=o[s],a=this._events[t]){if(this._events[t]=r=[],e||n)for(u=0,c=a.length;u<c;u++)i=a[u],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},t.prototype.trigger=function(t){var e=this.name||this.constructor.name;try{if(s["default"].debug.apply(s["default"],[e].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=h.call(arguments,1);if(!f(this,"trigger",t,n))return this;var r=this._events[t],i=this._events.all;r&&p(r,n),i&&p(i,arguments)}catch(a){s["default"].error.apply(s["default"],[e,"error on event",t,"trigger","-",a])}return this},t.prototype.stopListening=function(t,e,n){var r=this._listeningTo;if(!r)return this;var i=!e&&!n;for(var o in n||"object"!==("undefined"==typeof e?"undefined":a(e))||(n=this),t&&((r={})[t._listenId]=t),r)t=r[o],t.off(e,n,this),(i||0===Object.keys(t._events).length)&&delete this._listeningTo[o];return this},t}();e["default"]=g;var m={listenTo:"on",listenToOnce:"once"};Object.keys(m).forEach((function(t){g.prototype[t]=function(e,n,r){var i=this._listeningTo||(this._listeningTo={}),o=e._listenId||(e._listenId=(0,l.uniqueId)("l"));return i[o]=e,r||"object"!==("undefined"==typeof n?"undefined":a(n))||(r=this),e[m[t]](n,r,this),this}})),g.PLAYER_READY="ready",g.PLAYER_RESIZE="resize",g.PLAYER_FULLSCREEN="fullscreen",g.PLAYER_PLAY="play",g.PLAYER_PAUSE="pause",g.PLAYER_STOP="stop",g.PLAYER_ENDED="ended",g.PLAYER_SEEK="seek",g.PLAYER_ERROR="error",g.PLAYER_TIMEUPDATE="timeupdate",g.PLAYER_VOLUMEUPDATE="volumeupdate",g.PLAYBACK_PROGRESS="playback:progress",g.PLAYBACK_TIMEUPDATE="playback:timeupdate",g.PLAYBACK_READY="playback:ready",g.PLAYBACK_BUFFERING="playback:buffering",g.PLAYBACK_BUFFERFULL="playback:bufferfull",g.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",g.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",g.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",g.PLAYBACK_BITRATE="playback:bitrate",g.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",g.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",g.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",g.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",g.PLAYBACK_DVR="playback:dvr",g.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",g.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",g.PLAYBACK_ENDED="playback:ended",g.PLAYBACK_PLAY_INTENT="playback:play:intent",g.PLAYBACK_PLAY="playback:play",g.PLAYBACK_PAUSE="playback:pause",g.PLAYBACK_STOP="playback:stop",g.PLAYBACK_ERROR="playback:error",g.PLAYBACK_STATS_ADD="playback:stats:add",g.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",g.PLAYBACK_LEVEL_SWITCH="playback:level:switch",g.CORE_OPTIONS_CHANGE="core:options:change",g.CORE_READY="core:ready",g.CORE_FULLSCREEN="core:fullscreen",g.CONTAINER_PLAYBACKSTATE="container:playbackstate",g.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",g.CONTAINER_BITRATE="container:bitrate",g.CONTAINER_STATS_REPORT="container:stats:report",g.CONTAINER_DESTROYED="container:destroyed",g.CONTAINER_READY="container:ready",g.CONTAINER_ERROR="container:error",g.CONTAINER_LOADEDMETADATA="container:loadedmetadata",g.CONTAINER_TIMEUPDATE="container:timeupdate",g.CONTAINER_PROGRESS="container:progress",g.CONTAINER_PLAY="container:play",g.CONTAINER_STOP="container:stop",g.CONTAINER_PAUSE="container:pause",g.CONTAINER_ENDED="container:ended",g.CONTAINER_CLICK="container:click",g.CONTAINER_DBLCLICK="container:dblclick",g.CONTAINER_CONTEXTMENU="container:contextmenu",g.CONTAINER_MOUSE_ENTER="container:mouseenter",g.CONTAINER_MOUSE_LEAVE="container:mouseleave",g.CONTAINER_SEEK="container:seek",g.CONTAINER_VOLUME="container:volume",g.CONTAINER_FULLSCREEN="container:fullscreen",g.CONTAINER_STATE_BUFFERING="container:state:buffering",g.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",g.CONTAINER_SETTINGSUPDATE="container:settingsupdate",g.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",g.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",g.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",g.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",g.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",g.CONTAINER_STATS_ADD="container:stats:add",g.CONTAINER_OPTIONS_CHANGE="container:options:change",g.MEDIACONTROL_RENDERED="mediacontrol:rendered",g.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",g.MEDIACONTROL_SHOW="mediacontrol:show",g.MEDIACONTROL_HIDE="mediacontrol:hide",g.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",g.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",g.MEDIACONTROL_PLAYING="mediacontrol:playing",g.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",g.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",g.CORE_CONTAINERS_CREATED="core:containers:created",t.exports=e["default"]},function(t,e){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",LEVEL_SWITCH:"hlsLevelSwitch",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(e)for(var n in e){var r=Object.getOwnPropertyDescriptor(e,n);r?Object.defineProperty(t,n,r):t[n]=e[n]}return t}function l(t,e){var n=function(t){function n(){i(this,n);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];var l=a(this,t.call.apply(t,[this].concat(o)));return e.initialize&&e.initialize.apply(l,o),l}return o(n,t),n}(t);return s(n.prototype,e),n}function u(t,e){if(!isFinite(t))return"--:--";t*=1e3,t=parseInt(t/1e3);var n=t%60;t=parseInt(t/60);var r=t%60;t=parseInt(t/60);var i=t%24,a=parseInt(t/24),o="";return a&&a>0&&(o+=a+":",i<1&&(o+="00:")),(i&&i>0||e)&&(o+=("0"+i).slice(-2)+":"),o+=("0"+r).slice(-2)+":",o+=("0"+n).slice(-2),o.trim()}function c(){var t=arguments.length<=0||void 0===arguments[0]?"t":arguments[0],e=0,n=_.params[t]||_.hashParams[t]||"",r=n.match(/[0-9]+[hms]+/g)||[];if(r.length>0){var i={h:3600,m:60,s:1};r.forEach((function(t){if(t){var n=t[t.length-1],r=parseInt(t.slice(0,t.length-1),10);e+=r*i[n]}}))}else n&&(e=parseInt(n,10));return e}function h(t){E[t]||(E[t]=0);var e=++E[t];return t+e}function d(t){return t-parseFloat(t)+1>=0}function f(){var t=document.getElementsByTagName("script");return t[t.length-1].src}function p(){return window.navigator&&window.navigator.language?window.navigator.language.toLowerCase():null}Object.defineProperty(e,"__esModule",{value:!0}),e.cancelAnimationFrame=e.requestAnimationFrame=e.QueryString=e.Config=e.Fullscreen=void 0;var g=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.extend=l,e.formatTime=u,e.seekStringToSeconds=c,e.uniqueId=h,e.isNumber=d,e.currentScriptUrl=f,e.getBrowserLanguage=p;var m=n(11),v=r(m),y=e.Fullscreen={isFullscreen:function(){return!!(document.webkitFullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)},requestFullscreen:function(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.querySelector&&t.querySelector("video")&&t.querySelector("video").webkitEnterFullScreen&&t.querySelector("video").webkitEnterFullScreen()},cancelFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},b=e.Config=function(){function t(){i(this,t)}return t._defaultConfig=function(){return{volume:{value:100,parse:parseInt}}},t._defaultValueFor=function(t){try{return this._defaultConfig()[t].parse(this._defaultConfig()[t].value)}catch(e){return}},t._createKeyspace=function(t){return"clappr."+document.domain+"."+t},t.restore=function(t){return v["default"].hasLocalstorage&&localStorage[this._createKeyspace(t)]?this._defaultConfig()[t].parse(localStorage[this._createKeyspace(t)]):this._defaultValueFor(t)},t.persist=function(t,e){if(v["default"].hasLocalstorage)try{return localStorage[this._createKeyspace(t)]=e,!0}catch(n){return!1}},t}(),_=e.QueryString=function(){function t(){i(this,t)}return t.parse=function(t){for(var e,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,i=function(t){return decodeURIComponent(t.replace(n," "))},a={};e=r.exec(t);)a[i(e[1]).toLowerCase()]=i(e[2]);return a},g(t,null,[{key:"params",get:function(){var t=window.location.search.substring(1);return t!==this.query&&(this._urlParams=this.parse(t),this.query=t),this._urlParams}},{key:"hashParams",get:function(){var t=window.location.hash.substring(1);return t!==this.hash&&(this._hashParams=this.parse(t),this.hash=t),this._hashParams}}]),t}(),E={},A=e.requestAnimationFrame=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window),T=e.cancelAnimationFrame=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);e["default"]={Config:b,Fullscreen:y,QueryString:_,extend:l,formatTime:u,seekStringToSeconds:c,uniqueId:h,currentScriptUrl:f,isNumber:d,requestAnimationFrame:A,cancelAnimationFrame:T,getBrowserLanguage:p}},function(t,e){"use strict";function n(){}function r(t,e){return"["+t+"] > "+e}function i(t){var e=window.console[t];return e?function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];i[0]&&(i[0]=r(t,i[0])),e.apply(window.console,i)}:n}function a(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach((function(e){u[e]=t[e]?t[e].bind(t):i(e)}))}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":o(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":"undefined"==typeof t?"undefined":o(t)},l={trace:n,debug:n,log:n,warn:n,info:n,error:n},u=l;e.enableLogs=function(t){if(!0===t||"object"===("undefined"==typeof t?"undefined":s(t))){a(t,"debug","log","info","warn","error");try{u.log()}catch(e){u=l}}else u=l},e.logger=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",OTHER_ERROR:"otherError"},e.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",INTERNAL_EXCEPTION:"internalException"}},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=function(){function t(t){return null==t?String(t):X[q.call(t)]||"object"}function e(e){return"function"==t(e)}function r(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function a(e){return"object"==t(e)}function o(t){return a(t)&&!r(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){return"number"==typeof t.length}function l(t){return R.call(t,(function(t){return null!=t}))}function u(t){return t.length>0?S.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function h(t){return t in I?I[t]:I[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function d(t,e){return"number"!=typeof e||N[c(t)]?e:e+"px"}function f(t){var e,n;return D[t]||(e=O.createElement(t),O.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),D[t]=n),D[t]}function p(t){return"children"in t?P.call(t.children):S.map(t.childNodes,(function(t){return 1==t.nodeType?t:void 0}))}function g(t,e){var n,r=t?t.length:0;for(n=0;r>n;n++)this[n]=t[n];this.length=r,this.selector=e||""}function m(t,e,n){for(w in e)n&&(o(e[w])||tt(e[w]))?(o(e[w])&&!o(t[w])&&(t[w]={}),tt(e[w])&&!tt(t[w])&&(t[w]=[]),m(t[w],e[w],n)):e[w]!==T&&(t[w]=e[w])}function v(t,e){return null==e?S(t):S(t).filter(e)}function y(t,n,r,i){return e(n)?n.call(t,r,i):n}function b(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function _(t,e){var n=t.className||"",r=n&&n.baseVal!==T;return e===T?r?n.baseVal:n:void(r?n.baseVal=e:t.className=e)}function E(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?S.parseJSON(t):t):t}catch(e){return t}}function A(t,e){e(t);for(var n=0,r=t.childNodes.length;r>n;n++)A(t.childNodes[n],e)}var T,w,S,x,L,M,k=[],C=k.concat,R=k.filter,P=k.slice,O=window.document,D={},I={},N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},F=/^\s*<(\w+|!)[^>]*>/,B=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,U=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,j=/^(?:body|html)$/i,V=/([A-Z])/g,G=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],Y=O.createElement("table"),H=O.createElement("tr"),$={tr:O.createElement("tbody"),tbody:Y,thead:Y,tfoot:Y,td:H,th:H,"*":O.createElement("div")},W=/complete|loaded|interactive/,K=/^[\w-]*$/,X={},q=X.toString,Z={},J=O.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},tt=Array.isArray||function(t){return t instanceof Array};return Z.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,a=!i;return a&&(i=J).appendChild(t),r=~Z.qsa(i,e).indexOf(t),a&&J.removeChild(t),r},L=function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},M=function(t){return R.call(t,(function(e,n){return t.indexOf(e)==n}))},Z.fragment=function(t,e,n){var r,i,a;return B.test(t)&&(r=S(O.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(U,"<$1></$2>")),e===T&&(e=F.test(t)&&RegExp.$1),e in $||(e="*"),a=$[e],a.innerHTML=""+t,r=S.each(P.call(a.childNodes),(function(){a.removeChild(this)}))),o(n)&&(i=S(r),S.each(n,(function(t,e){G.indexOf(t)>-1?i[t](e):i.attr(t,e)}))),r},Z.Z=function(t,e){return new g(t,e)},Z.isZ=function(t){return t instanceof Z.Z},Z.init=function(t,n){var r;if(!t)return Z.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&F.test(t))r=Z.fragment(t,RegExp.$1,n),t=null;else{if(n!==T)return S(n).find(t);r=Z.qsa(O,t)}else{if(e(t))return S(O).ready(t);if(Z.isZ(t))return t;if(tt(t))r=l(t);else if(a(t))r=[t],t=null;else if(F.test(t))r=Z.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==T)return S(n).find(t);r=Z.qsa(O,t)}}return Z.Z(r,t)},S=function(t,e){return Z.init(t,e)},S.extend=function(t){var e,n=P.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach((function(n){m(t,n,e)})),t},Z.qsa=function(t,e){var n,r="#"==e[0],i=!r&&"."==e[0],a=r||i?e.slice(1):e,o=K.test(a);return t.getElementById&&o&&r?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:P.call(o&&!r&&t.getElementsByClassName?i?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},S.contains=O.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},S.type=t,S.isFunction=e,S.isWindow=r,S.isArray=tt,S.isPlainObject=o,S.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},S.inArray=function(t,e,n){return k.indexOf.call(e,t,n)},S.camelCase=L,S.trim=function(t){return null==t?"":String.prototype.trim.call(t)},S.uuid=0,S.support={},S.expr={},S.noop=function(){},S.map=function(t,e){var n,r,i,a=[];if(s(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&a.push(n);else for(i in t)n=e(t[i],i),null!=n&&a.push(n);return u(a)},S.each=function(t,e){var n,r;if(s(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(r in t)if(!1===e.call(t[r],r,t[r]))return t;return t},S.grep=function(t,e){return R.call(t,e)},window.JSON&&(S.parseJSON=JSON.parse),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){X["[object "+e+"]"]=e.toLowerCase()})),S.fn={constructor:Z.Z,length:0,forEach:k.forEach,reduce:k.reduce,push:k.push,sort:k.sort,splice:k.splice,indexOf:k.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=Z.isZ(e)?e.toArray():e;return C.apply(Z.isZ(this)?this.toArray():this,n)},map:function(t){return S(S.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return S(P.apply(this,arguments))},ready:function(t){return W.test(O.readyState)&&O.body?t(S):O.addEventListener("DOMContentLoaded",(function(){t(S)}),!1),this},get:function(t){return t===T?P.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(t){return k.every.call(this,(function(e,n){return!1!==t.call(e,n,e)})),this},filter:function(t){return e(t)?this.not(this.not(t)):S(R.call(this,(function(e){return Z.matches(e,t)})))},add:function(t,e){return S(M(this.concat(S(t,e))))},is:function(t){return this.length>0&&Z.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==T)this.each((function(e){t.call(this,e)||n.push(this)}));else{var r="string"==typeof t?this.filter(t):s(t)&&e(t.item)?P.call(t):S(t);this.forEach((function(t){r.indexOf(t)<0&&n.push(t)}))}return S(n)},has:function(t){return this.filter((function(){return a(t)?S.contains(this,t):S(this).find(t).size()}))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!a(t)?t:S(t)},last:function(){var t=this[this.length-1];return t&&!a(t)?t:S(t)},find:function(t){var e=this;return t?"object"==("undefined"==typeof t?"undefined":n(t))?S(t).filter((function(){var t=this;return k.some.call(e,(function(e){return S.contains(e,t)}))})):1==this.length?S(Z.qsa(this[0],t)):this.map((function(){return Z.qsa(this,t)})):S()},closest:function(t,e){var r=this[0],a=!1;for("object"==("undefined"==typeof t?"undefined":n(t))&&(a=S(t));r&&!(a?a.indexOf(r)>=0:Z.matches(r,t));)r=r!==e&&!i(r)&&r.parentNode;return S(r)},parents:function(t){for(var e=[],n=this;n.length>0;)n=S.map(n,(function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0}));return v(e,t)},parent:function(t){return v(M(this.pluck("parentNode")),t)},children:function(t){return v(this.map((function(){return p(this)})),t)},contents:function(){return this.map((function(){return this.contentDocument||P.call(this.childNodes)}))},siblings:function(t){return v(this.map((function(t,e){return R.call(p(e.parentNode),(function(t){return t!==e}))})),t)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return S.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))}))},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var r=S(t).get(0),i=r.parentNode||this.length>1;return this.each((function(e){S(this).wrapAll(n?t.call(this,e):i?r.cloneNode(!0):r)}))},wrapAll:function(t){if(this[0]){S(this[0]).before(t=S(t));for(var e;(e=t.children()).length;)t=e.first();S(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each((function(e){var r=S(this),i=r.contents(),a=n?t.call(this,e):t;i.length?i.wrapAll(a):r.append(a)}))},unwrap:function(){return this.parent().each((function(){S(this).replaceWith(S(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var e=S(this);(t===T?"none"==e.css("display"):t)?e.show():e.hide()}))},prev:function(t){return S(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return S(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each((function(e){var n=this.innerHTML;S(this).empty().append(y(this,t,e,n))})):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each((function(e){var n=y(this,t,e,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this[0].textContent:null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each((function(n){if(1===this.nodeType)if(a(t))for(w in t)b(this,w,t[w]);else b(this,t,y(this,e,n,this.getAttribute(t)))})):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:T},removeAttr:function(t){return this.each((function(){1===this.nodeType&&t.split(" ").forEach((function(t){b(this,t)}),this)}))},prop:function(t,e){return t=Q[t]||t,1 in arguments?this.each((function(n){this[t]=y(this,e,n,this[t])})):this[0]&&this[0][t]},data:function(t,e){var n="data-"+t.replace(V,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,e):this.attr(n);return null!==r?E(r):T},val:function(t){return 0 in arguments?this.each((function(e){this.value=y(this,t,e,this.value)})):this[0]&&(this[0].multiple?S(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each((function(e){var n=S(this),r=y(this,t,e,n.offset()),i=n.offsetParent().offset(),a={top:r.top-i.top,left:r.left-i.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)}));if(!this.length)return null;if(!S.contains(O.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var r,i=this[0];if(!i)return;if(r=getComputedStyle(i,""),"string"==typeof e)return i.style[L(e)]||r.getPropertyValue(e);if(tt(e)){var a={};return S.each(e,(function(t,e){a[e]=i.style[L(e)]||r.getPropertyValue(e)})),a}}var o="";if("string"==t(e))n||0===n?o=c(e)+":"+d(e,n):this.each((function(){this.style.removeProperty(c(e))}));else for(w in e)e[w]||0===e[w]?o+=c(w)+":"+d(w,e[w])+";":this.each((function(){this.style.removeProperty(c(w))}));return this.each((function(){this.style.cssText+=";"+o}))},index:function(t){return t?this.indexOf(S(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&k.some.call(this,(function(t){return this.test(_(t))}),h(t))},addClass:function(t){return t?this.each((function(e){if("className"in this){x=[];var n=_(this),r=y(this,t,e,n);r.split(/\s+/g).forEach((function(t){S(this).hasClass(t)||x.push(t)}),this),x.length&&_(this,n+(n?" ":"")+x.join(" "))}})):this},removeClass:function(t){return this.each((function(e){if("className"in this){if(t===T)return _(this,"");x=_(this),y(this,t,e,x).split(/\s+/g).forEach((function(t){x=x.replace(h(t)," ")})),_(this,x.trim())}}))},toggleClass:function(t,e){return t?this.each((function(n){var r=S(this),i=y(this,t,n,_(this));i.split(/\s+/g).forEach((function(t){(e===T?!r.hasClass(t):e)?r.addClass(t):r.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===T?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===T?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),r=j.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(S(t).css("margin-top"))||0,n.left-=parseFloat(S(t).css("margin-left"))||0,r.top+=parseFloat(S(e[0]).css("border-top-width"))||0,r.left+=parseFloat(S(e[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||O.body;t&&!j.test(t.nodeName)&&"static"==S(t).css("position");)t=t.offsetParent;return t}))}},S.fn.detach=S.fn.remove,["width","height"].forEach((function(t){var e=t.replace(/./,(function(t){return t[0].toUpperCase()}));S.fn[t]=function(n){var a,o=this[0];return n===T?r(o)?o["inner"+e]:i(o)?o.documentElement["scroll"+e]:(a=this.offset())&&a[t]:this.each((function(e){o=S(this),o.css(t,y(this,n,e,o[t]()))}))}})),z.forEach((function(e,n){var r=n%2;S.fn[e]=function(){var e,i,a=S.map(arguments,(function(n){return e=t(n),"object"==e||"array"==e||null==n?n:Z.fragment(n)})),o=this.length>1;return a.length<1?this:this.each((function(t,e){i=r?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null;var s=S.contains(O.documentElement,i);a.forEach((function(t){if(o)t=t.cloneNode(!0);else if(!i)return S(t).remove();i.insertBefore(t,e),s&&A(t,(function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)}))}))}))},S.fn[r?e+"To":"insert"+(n?"Before":"After")]=function(t){return S(t)[e](this),this}})),Z.Z.prototype=g.prototype=S.fn,Z.uniq=M,Z.deserializeValue=E,S.zepto=Z,S}();window.Zepto=r,void 0===window.$&&(window.$=r),function(t){function e(t){return t._zid||(t._zid=d++)}function n(t,n,a,o){if(n=r(n),n.ns)var s=i(n.ns);return(m[e(t)]||[]).filter((function(t){return!(!t||n.e&&t.e!=n.e||n.ns&&!s.test(t.ns)||a&&e(t.fn)!==e(a)||o&&t.sel!=o)}))}function r(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function i(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function a(t,e){return t.del&&!y&&t.e in b||!!e}function o(t){return _[t]||y&&b[t]||t}function s(n,i,s,l,c,d,f){var p=e(n),g=m[p]||(m[p]=[]);i.split(/\s/).forEach((function(e){if("ready"==e)return t(document).ready(s);var i=r(e);i.fn=s,i.sel=c,i.e in _&&(s=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?i.fn.apply(this,arguments):void 0}),i.del=d;var p=d||s;i.proxy=function(t){if(t=u(t),!t.isImmediatePropagationStopped()){t.data=l;var e=p.apply(n,t._args==h?[t]:[t].concat(t._args));return!1===e&&(t.preventDefault(),t.stopPropagation()),e}},i.i=g.length,g.push(i),"addEventListener"in n&&n.addEventListener(o(i.e),i.proxy,a(i,f))}))}function l(t,r,i,s,l){var u=e(t);(r||"").split(/\s/).forEach((function(e){n(t,e,i,s).forEach((function(e){delete m[u][e.i],"removeEventListener"in t&&t.removeEventListener(o(e.e),e.proxy,a(e,l))}))}))}function u(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(w,(function(t,r){var i=n[t];e[t]=function(){return this[r]=E,i&&i.apply(n,arguments)},e[r]=A})),(n.defaultPrevented!==h?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=E)),e}function c(t){var e,n={originalEvent:t};for(e in t)T.test(e)||t[e]===h||(n[e]=t[e]);return u(n,t)}var h,d=1,f=Array.prototype.slice,p=t.isFunction,g=function(t){return"string"==typeof t},m={},v={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},_={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:s,remove:l},t.proxy=function(n,r){var i=2 in arguments&&f.call(arguments,2);if(p(n)){var a=function(){return n.apply(r,i?i.concat(f.call(arguments)):arguments)};return a._zid=e(n),a}if(g(r))return i?(i.unshift(n[r],n),t.proxy.apply(null,i)):t.proxy(n[r],n);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var E=function(){return!0},A=function(){return!1},T=/^([A-Z]|returnValue$|layer[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,r,i,a){var o,u,d=this;return e&&!g(e)?(t.each(e,(function(t,e){d.on(t,n,r,e,a)})),d):(g(n)||p(i)||!1===i||(i=r,r=n,n=h),(i===h||!1===r)&&(i=r,r=h),!1===i&&(i=A),d.each((function(h,d){a&&(o=function(t){return l(d,t.type,i),i.apply(this,arguments)}),n&&(u=function(e){var r,a=t(e.target).closest(n,d).get(0);return a&&a!==d?(r=t.extend(c(e),{currentTarget:a,liveFired:d}),(o||i).apply(a,[r].concat(f.call(arguments,1)))):void 0}),s(d,e,i,r,n,u||o)})))},t.fn.off=function(e,n,r){var i=this;return e&&!g(e)?(t.each(e,(function(t,e){i.off(t,n,e)})),i):(g(n)||p(r)||!1===r||(r=n,n=h),!1===r&&(r=A),i.each((function(){l(this,e,r,n)})))},t.fn.trigger=function(e,n){return e=g(e)||t.isPlainObject(e)?t.Event(e):u(e),e._args=n,this.each((function(){e.type in b&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)}))},t.fn.triggerHandler=function(e,r){var i,a;return this.each((function(o,s){i=c(g(e)?t.Event(e):e),i._args=r,i.target=s,t.each(n(s,e.type||e),(function(t,e){return a=e.proxy(i),!i.isImmediatePropagationStopped()&&void 0}))})),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}})),t.Event=function(t,e){g(t)||(e=t,t=e.type);var n=document.createEvent(v[t]||"Events"),r=!0;if(e)for(var i in e)"bubbles"==i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),u(n)}}(r),function(t){function e(e,n,r){var i=t.Event(n);return t(e).trigger(i,r),!i.isDefaultPrevented()}function n(t,n,r,i){return t.global?e(n||y,r,i):void 0}function r(e){e.global&&0===t.active++&&n(e,null,"ajaxStart")}function i(e){e.global&&!--t.active&&n(e,null,"ajaxStop")}function a(t,e){var r=e.context;return!1!==e.beforeSend.call(r,t,e)&&!1!==n(e,r,"ajaxBeforeSend",[t,e])&&void n(e,r,"ajaxSend",[t,e])}function o(t,e,r,i){var a=r.context,o="success";r.success.call(a,t,o,e),i&&i.resolveWith(a,[t,o,e]),n(r,a,"ajaxSuccess",[e,r,t]),l(o,e,r)}function s(t,e,r,i,a){var o=i.context;i.error.call(o,r,e,t),a&&a.rejectWith(o,[r,e,t]),n(i,o,"ajaxError",[r,i,t||e]),l(e,r,i)}function l(t,e,r){var a=r.context;r.complete.call(a,e,t),n(r,a,"ajaxComplete",[e,r]),i(r)}function u(){}function c(t){return t&&(t=t.split(";",2)[0]),t&&(t==T?"html":t==A?"json":_.test(t)?"script":E.test(t)&&"xml")||"text"}function h(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function d(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=h(e.url,e.data),e.data=void 0)}function f(e,n,r,i){return t.isFunction(n)&&(i=r,r=n,n=void 0),t.isFunction(r)||(i=r,r=void 0),{url:e,data:n,success:r,dataType:i}}function p(e,n,r,i){var a,o=t.isArray(n),s=t.isPlainObject(n);t.each(n,(function(n,l){a=t.type(l),i&&(n=r?i:i+"["+(s||"object"==a||"array"==a?n:"")+"]"),!i&&o?e.add(l.name,l.value):"array"==a||!r&&"object"==a?p(e,l,r,n):e.add(n,l)}))}var g,m,v=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,E=/^(?:text|application)\/xml/i,A="application/json",T="text/html",w=/^\s*$/,S=y.createElement("a");S.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,n){if(!("type"in e))return t.ajax(e);var r,i,l=e.jsonpCallback,u=(t.isFunction(l)?l():l)||"jsonp"+ ++v,c=y.createElement("script"),h=window[u],d=function(e){t(c).triggerHandler("error",e||"abort")},f={abort:d};return n&&n.promise(f),t(c).on("load error",(function(a,l){clearTimeout(i),t(c).off().remove(),"error"!=a.type&&r?o(r[0],f,e,n):s(null,l||"error",f,e,n),window[u]=h,r&&t.isFunction(h)&&h(r[0]),h=r=void 0})),!1===a(f,e)?(d("abort"),f):(window[u]=function(){r=arguments},c.src=e.url.replace(/\?(.+)=\?/,"?$1="+u),y.head.appendChild(c),e.timeout>0&&(i=setTimeout((function(){d("timeout")}),e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:A,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n,i,l=t.extend({},e||{}),f=t.Deferred&&t.Deferred();for(g in t.ajaxSettings)void 0===l[g]&&(l[g]=t.ajaxSettings[g]);r(l),l.crossDomain||(n=y.createElement("a"),n.href=l.url,n.href=n.href,l.crossDomain=S.protocol+"//"+S.host!=n.protocol+"//"+n.host),l.url||(l.url=window.location.toString()),(i=l.url.indexOf("#"))>-1&&(l.url=l.url.slice(0,i)),d(l);var p=l.dataType,v=/\?.+=\?/.test(l.url);if(v&&(p="jsonp"),!1!==l.cache&&(e&&!0===e.cache||"script"!=p&&"jsonp"!=p)||(l.url=h(l.url,"_="+Date.now())),"jsonp"==p)return v||(l.url=h(l.url,l.jsonp?l.jsonp+"=?":!1===l.jsonp?"":"callback=?")),t.ajaxJSONP(l,f);var b,_=l.accepts[p],E={},A=function(t,e){E[t.toLowerCase()]=[t,e]},T=/^([\w-]+:)\/\//.test(l.url)?RegExp.$1:window.location.protocol,x=l.xhr(),L=x.setRequestHeader;if(f&&f.promise(x),l.crossDomain||A("X-Requested-With","XMLHttpRequest"),A("Accept",_||"*/*"),(_=l.mimeType||_)&&(_.indexOf(",")>-1&&(_=_.split(",",2)[0]),x.overrideMimeType&&x.overrideMimeType(_)),(l.contentType||!1!==l.contentType&&l.data&&"GET"!=l.type.toUpperCase())&&A("Content-Type",l.contentType||"application/x-www-form-urlencoded"),l.headers)for(m in l.headers)A(m,l.headers[m]);if(x.setRequestHeader=A,x.onreadystatechange=function(){if(4==x.readyState){x.onreadystatechange=u,clearTimeout(b);var e,n=!1;if(x.status>=200&&x.status<300||304==x.status||0==x.status&&"file:"==T){p=p||c(l.mimeType||x.getResponseHeader("content-type")),e=x.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=x.responseXML:"json"==p&&(e=w.test(e)?null:t.parseJSON(e))}catch(r){n=r}n?s(n,"parsererror",x,l,f):o(e,x,l,f)}else s(x.statusText||null,x.status?"error":"abort",x,l,f)}},!1===a(x,l))return x.abort(),s(null,"abort",x,l,f),x;if(l.xhrFields)for(m in l.xhrFields)x[m]=l.xhrFields[m];var M=!("async"in l)||l.async;for(m in x.open(l.type,l.url,M,l.username,l.password),E)L.apply(x,E[m]);return l.timeout>0&&(b=setTimeout((function(){x.onreadystatechange=u,x.abort(),s(null,"timeout",x,l,f)}),l.timeout)),x.send(l.data?l.data:null),x},t.get=function(){return t.ajax(f.apply(null,arguments))},t.post=function(){var e=f.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=f.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,r){if(!this.length)return this;var i,a=this,o=e.split(/\s/),s=f(e,n,r),l=s.success;return o.length>1&&(s.url=o[0],i=o[1]),s.success=function(e){a.html(i?t("<div>").html(e.replace(b,"")).find(i):e),l&&l.apply(a,arguments)},t.ajax(s),this};var x=encodeURIComponent;t.param=function(e,n){var r=[];return r.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(x(e)+"="+x(n))},p(r,e,n),r.join("&").replace(/%20/g,"+")}}(r),function(t){t.Callbacks=function(e){e=t.extend({},e);var n,r,i,a,o,s,l=[],u=!e.once&&[],c=function t(c){for(n=e.memory&&c,r=!0,s=a||0,a=0,o=l.length,i=!0;l&&o>s;++s)if(!1===l[s].apply(c[0],c[1])&&e.stopOnFalse){n=!1;break}i=!1,l&&(u?u.length&&t(u.shift()):n?l.length=0:h.disable())},h={add:function(){if(l){var r=l.length,s=function n(r){t.each(r,(function(t,r){"function"==typeof r?e.unique&&h.has(r)||l.push(r):r&&r.length&&"string"!=typeof r&&n(r)}))};s(arguments),i?o=l.length:n&&(a=r,c(n))}return this},remove:function(){return l&&t.each(arguments,(function(e,n){for(var r;(r=t.inArray(n,l,r))>-1;)l.splice(r,1),i&&(o>=r&&--o,s>=r&&--s)})),this},has:function(e){return!(!l||!(e?t.inArray(e,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||h.disable(),this},locked:function(){return!u},fireWith:function(t,e){return!l||r&&!u||(e=e||[],e=[t,e.slice?e.slice():e],i?u.push(e):c(e)),this},fire:function(){return h.fireWith(this,arguments)},fired:function(){return!!r}};return h}}(r),function(t){function e(n){var r=[["resolve","done",t.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",t.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",t.Callbacks({memory:1})]],i="pending",a={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var n=arguments;return e((function(e){t.each(r,(function(r,i){var s=t.isFunction(n[r])&&n[r];o[i[1]]((function(){var n=s&&s.apply(this,arguments);if(n&&t.isFunction(n.promise))n.promise().done(e.resolve).fail(e.reject).progress(e.notify);else{var r=this===a?e.promise():this,o=s?[n]:arguments;e[i[0]+"With"](r,o)}}))})),n=null})).promise()},promise:function(e){return null!=e?t.extend(e,a):a}},o={};return t.each(r,(function(t,e){var n=e[2],s=e[3];a[e[1]]=n.add,s&&n.add((function(){i=s}),r[1^t][2].disable,r[2][2].lock),o[e[0]]=function(){return o[e[0]+"With"](this===o?a:this,arguments),this},o[e[0]+"With"]=n.fireWith})),a.promise(o),n&&n.call(o,o),o}var n=Array.prototype.slice;t.when=function(r){var i,a,o,s=n.call(arguments),l=s.length,u=0,c=1!==l||r&&t.isFunction(r.promise)?l:0,h=1===c?r:e(),d=function(t,e,r){return function(a){e[t]=this,r[t]=arguments.length>1?n.call(arguments):a,r===i?h.notifyWith(e,r):--c||h.resolveWith(e,r)}};if(l>1)for(i=new Array(l),a=new Array(l),o=new Array(l);l>u;++u)s[u]&&t.isFunction(s[u].promise)?s[u].promise().done(d(u,o,s)).fail(h.reject).progress(d(u,a,i)):--c;return c||h.resolveWith(o,s),h.promise()},t.Deferred=e}(r),function(t){function e(t,e,n,r){return Math.abs(t-e)>=Math.abs(n-r)?t-e>0?"Left":"Right":n-r>0?"Up":"Down"}function n(){c=null,d.last&&(d.el.trigger("longTap"),d={})}function r(){c&&clearTimeout(c),c=null}function i(){s&&clearTimeout(s),l&&clearTimeout(l),u&&clearTimeout(u),c&&clearTimeout(c),s=l=u=c=null,d={}}function a(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function o(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var s,l,u,c,h,d={},f=750;t(document).ready((function(){var p,g,m,v,y=0,b=0;"MSGesture"in window&&(h=new MSGesture,h.target=document.body),t(document).bind("MSGestureEnd",(function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(d.el.trigger("swipe"),d.el.trigger("swipe"+e))})).on("touchstart MSPointerDown pointerdown",(function(e){(!(v=o(e,"down"))||a(e))&&(m=v?e:e.touches[0],e.touches&&1===e.touches.length&&d.x2&&(d.x2=void 0,d.y2=void 0),p=Date.now(),g=p-(d.last||p),d.el=t("tagName"in m.target?m.target:m.target.parentNode),s&&clearTimeout(s),d.x1=m.pageX,d.y1=m.pageY,g>0&&250>=g&&(d.isDoubleTap=!0),d.last=p,c=setTimeout(n,f),h&&v&&h.addPointer(e.pointerId))})).on("touchmove MSPointerMove pointermove",(function(t){(!(v=o(t,"move"))||a(t))&&(m=v?t:t.touches[0],r(),d.x2=m.pageX,d.y2=m.pageY,y+=Math.abs(d.x1-d.x2),b+=Math.abs(d.y1-d.y2))})).on("touchend MSPointerUp pointerup",(function(n){(!(v=o(n,"up"))||a(n))&&(r(),d.x2&&Math.abs(d.x1-d.x2)>30||d.y2&&Math.abs(d.y1-d.y2)>30?u=setTimeout((function(){d.el.trigger("swipe"),d.el.trigger("swipe"+e(d.x1,d.x2,d.y1,d.y2)),d={}}),0):"last"in d&&(30>y&&30>b?l=setTimeout((function(){var e=t.Event("tap");e.cancelTouch=i,d.el.trigger(e),d.isDoubleTap?(d.el&&d.el.trigger("doubleTap"),d={}):s=setTimeout((function(){s=null,d.el&&d.el.trigger("singleTap"),d={}}),250)}),0):d={}),y=b=0)})).on("touchcancel MSPointerCancel pointercancel",i),t(window).on("scroll",i)})),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach((function(e){t.fn[e]=function(t){return this.on(e,t)}}))}(r),function(t){function e(e){return e=t(e),!(!e.width()&&!e.height())&&"none"!==e.css("display")}function n(t,e){t=t.replace(/=#\]/g,'="#"]');var n,r,i=s.exec(t);if(i&&i[2]in o&&(n=o[i[2]],r=i[3],t=i[1],r)){var a=Number(r);r=isNaN(a)?r.replace(/^["']|["']$/g,""):a}return e(t,n,r)}var r=t.zepto,i=r.qsa,a=r.matches,o=t.expr[":"]={visible:function(){return e(this)?this:void 0},hidden:function(){return e(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(t){return 0===t?this:void 0},last:function(t,e){return t===e.length-1?this:void 0},eq:function(t,e,n){return t===n?this:void 0},contains:function(e,n,r){return t(this).text().indexOf(r)>-1?this:void 0},has:function(t,e,n){return r.qsa(this,n).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),l=/^\s*>/,u="Zepto"+ +new Date;r.qsa=function(e,a){return n(a,(function(n,o,s){try{var c;!n&&o?n="*":l.test(n)&&(c=t(e).addClass(u),n="."+u+" "+n);var h=i(e,n)}catch(d){throw console.error("error performing selector: %o",a),d}finally{c&&c.removeClass(u)}return o?r.uniq(t.map(h,(function(t,e){return o.call(t,e,h,s)}))):h}))},r.matches=function(t,e){return n(e,(function(e,n,r){return!(e&&!a(t,e)||n&&n.call(t,null,r)!==t)}))}}(r),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(n){return null}}}}(),t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(14),c=r(u),h=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.settings={},r}return o(e,t),s(e,[{key:"ended",get:function(){return!1}},{key:"buffering",get:function(){return!1}}]),e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.stop=function(){},e.prototype.seek=function(t){},e.prototype.seekPercentage=function(t){},e.prototype.getStartTimeOffset=function(){return 0},e.prototype.getDuration=function(){return 0},e.prototype.isPlaying=function(){return!1},e.prototype.getPlaybackType=function(){return e.NO_OP},e.prototype.isHighDefinitionInUse=function(){return!1},e.prototype.volume=function(t){},e.prototype.destroy=function(){this.$el.remove()},s(e,[{key:"isReady",get:function(){return!1}}]),e}(c["default"]);e["default"]=h,h.extend=function(t){return(0,l.extend)(h,t)},h.canPlay=function(t,e){return!1},h.VOD="vod",h.AOD="aod",h.LIVE="live",h.NO_OP="no_op",h.type="playback",t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),a=r(i),o=n(9),s=r(o),l={getStyleFor:function(t){var e=arguments.length<=1||void 0===arguments[1]?{baseUrl:""}:arguments[1];return(0,a["default"])('<style class="clappr-style"></style>').html((0,s["default"])(t.toString())(e))}};e["default"]=l,t.exports=e["default"]},function(t,e){"use strict";var n={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},r=/(.)^/,i={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\t|\u2028|\u2029/g,o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},s=new RegExp("[&<>\"']","g"),l=function(t){return null===t?"":(""+t).replace(s,(function(t){return o[t]}))},u=0,c=function(t,e){var o,s=new RegExp([(n.escape||r).source,(n.interpolate||r).source,(n.evaluate||r).source].join("|")+"|$","g"),c=0,h="__p+='";t.replace(s,(function(e,n,r,o,s){return h+=t.slice(c,s).replace(a,(function(t){return"\\"+i[t]})),n&&(h+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),r&&(h+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(h+="';\n"+o+"\n__p+='"),c=s+e.length,e})),h+="';\n",n.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n//# sourceURL=/microtemplates/source["+u+++"]";try{o=new Function(n.variable||"obj","escapeExpr",h)}catch(f){throw f.source=h,f}if(e)return o(e,l);var d=function(t){return o.call(this,t,l)};return d.source="function("+(n.variable||"obj")+"){\n"+h+"}",d};c.settings=n,t.exports=c},function(t,e){"use strict";t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<e.length;i++){var o=e[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={},r=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(t){return!1}},i=function(){try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!!t}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}},a=function(){var t,e=navigator.userAgent,n=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")}):"Chrome"===n[1]&&(t=e.match(/\bOPR\/(\d+)/),null!=t)?{name:"Opera",version:parseInt(t[1])}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),{name:n[0],version:parseInt(n[1])})},o=a();n.isSafari=/safari/i.test(navigator.userAgent)&&-1===navigator.userAgent.indexOf("Chrome"),n.isChrome=/chrome/i.test(navigator.userAgent),n.isFirefox=/firefox/i.test(navigator.userAgent),n.isLegacyIE=!!window.ActiveXObject,n.isIE=n.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),n.isIE11=/trident.*rv:11/i.test(navigator.userAgent),n.isChromecast=n.isChrome&&/CrKey/i.test(navigator.userAgent),n.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Opera Mini/i.test(navigator.userAgent),n.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),n.isAndroid=/Android/i.test(navigator.userAgent),n.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),n.isWin8App=/MSAppHost/i.test(navigator.userAgent),n.isWiiU=/WiiU/i.test(navigator.userAgent),n.isPS4=/PlayStation 4/i.test(navigator.userAgent),n.hasLocalstorage=r(),n.hasFlash=i(),n.name=o.name,n.version=o.version,e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":"undefined"==typeof t?"undefined":a(t)},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(4),u=n(5),c=n(2),h=r(c),d=function(){function t(e){i(this,t),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return s(t,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===o(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){if("hlsEventGeneric"===t)throw new Error("Forbidden event name: "+t);this.hls.on(t,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(t){this.hls.off(t,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(t,e){this.onEventGeneric(t,e)}},{key:"onEventGeneric",value:function(t,e){var n=function(t,e){var n="on"+t.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+t+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,e)};try{n.call(this,t,e).call()}catch(r){l.logger.error("internal error happened while processing "+t+":"+r.message),this.hls.trigger(h["default"].ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:t,err:r})}}}]),t}();e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),l=n(1),u=r(l),c=function(t){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e);var r=a(this,t.call(this,n));return r.uniqueId=(0,s.uniqueId)("o"),r}return o(e,t),e}(u["default"]);e["default"]=c,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(6),c=r(u),h=n(89),d=r(h),f=n(13),p=r(f),g=/^(\S+)\s*(.*)$/,m=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.cid=(0,l.uniqueId)("c"),r._ensureElement(),r.delegateEvents(),r}return o(e,t),s(e,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}}]),e.prototype.$=function(t){return this.$el.find(t)},e.prototype.render=function(){return this},e.prototype.remove=function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this},e.prototype.setElement=function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof c["default"]?t:(0,c["default"])(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},e.prototype.delegateEvents=function(t){if(!t&&!(t=(0,d["default"])(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(n&&n.constructor!==Function&&(n=this[t[e]]),n){var r=e.match(g),i=r[1],a=r[2];i+=".delegateEvents"+this.cid,""===a?this.$el.on(i,n.bind(this)):this.$el.on(i,a,n.bind(this))}}return this},e.prototype.undelegateEvents=function(){return this.$el.off(".delegateEvents"+this.cid),this},e.prototype._ensureElement=function(){if(this.el)this.setElement((0,d["default"])(this,"el"),!1);else{var t=c["default"].extend({},(0,d["default"])(this,"attributes"));this.id&&(t.id=(0,d["default"])(this,"id")),this.className&&(t["class"]=(0,d["default"])(this,"className"));var e=(0,c["default"])("<"+(0,d["default"])(this,"tagName")+">").attr(t);this.setElement(e,!1)}},e}(p["default"]);e["default"]=m,t.exports=e["default"]},function(t,e,n){"use strict";function r(t,e){if(e=s(e,3),l(t)){var n=o(t,e);return n>-1?t[n]:void 0}return a(t,e,i)}var i=n(79),a=n(80),o=n(81),s=n(32),l=Array.isArray;t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=r(a),s=new o["default"],l=function t(){i(this,t)};e["default"]=l,l.on=function(t,e,n){s.on(t,e,n)},l.once=function(t,e,n){s.once(t,e,n)},l.off=function(t,e,n){s.off(t,e,n)},l.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];s.trigger.apply(s,[t].concat(n))},l.stopListening=function(t,e,n){s.stopListening(t,e,n)},t.exports=e["default"]},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(13),u=r(l),c=n(3),h=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n.options));return r.container=n,r.enabled=!0,r.bindEvents(),r}return o(e,t),e.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},e.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},e.prototype.bindEvents=function(){},e.prototype.destroy=function(){this.stopListening()},s(e,[{key:"options",get:function(){return this.container&&this.container.options||{}}}]),e}(u["default"]);e["default"]=h,h.extend=function(t){return(0,c.extend)(h,t)},h.type="container",t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),l=n(13),u=r(l),c=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.core=n,r.enabled=!0,r.bindEvents(),r}return o(e,t),e.prototype.bindEvents=function(){},e.prototype.enable=function(){this.enabled||(this.bindEvents(),this.enabled=!0)},e.prototype.disable=function(){this.enabled&&(this.stopListening(),this.enabled=!1)},e.prototype.getExternalInterface=function(){return{}},e.prototype.destroy=function(){this.stopListening()},e}(u["default"]);e["default"]=c,c.extend=function(t){return(0,s.extend)(c,t)},c.type="core",t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(14),c=r(u),h=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n.options));return r.container=n,r.enabled=!0,r.bindEvents(),r}return o(e,t),e.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},e.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},e.prototype.bindEvents=function(){},e.prototype.destroy=function(){this.remove()},s(e,[{key:"options",get:function(){return this.container&&this.container.options||{}}}]),e}(c["default"]);e["default"]=h,h.extend=function(t){return(0,l.extend)(h,t)},h.type="container",t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(){n(this,t),this.options={},this.playbackPlugins=[],this.currentSize={width:0,height:0}};r._players={},r.getInstance=function(t){return r._players[t]||(r._players[t]=new r)},e["default"]=r,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(107)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),l=n(14),u=r(l),c=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.core=n,r.enabled=!0,r.bindEvents(),r.render(),r}return o(e,t),e.prototype.bindEvents=function(){},e.prototype.getExternalInterface=function(){return{}},e.prototype.enable=function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)},e.prototype.disable=function(){this.stopListening(),this.$el.hide(),this.enabled=!1},e.prototype.destroy=function(){this.remove()},e.prototype.render=function(){return this},e}(u["default"]);e["default"]=c,c.extend=function(t){return(0,s.extend)(c,t)},c.type="core",t.exports=e["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n(101),t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(119)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(130),a=r(i);e["default"]={Kibo:a["default"]},t.exports=e["default"]},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M1.425.35L14.575 8l-13.15 7.65V.35z"></path></svg>'},function(t,e){"use strict";function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function a(t){return"object"===("undefined"==typeof t?"undefined":s(t))&&null!==t}function o(t){return void 0===t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,l,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,o,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),o=n(5),s=function(){function t(){r(this,t)}return i(t,null,[{key:"getAudioConfig",value:function(t,e,n,r){var i,s,l,u,c,h=navigator.userAgent.toLowerCase(),d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=1+((192&e[n+2])>>>6),s=(60&e[n+2])>>>2,s>d.length-1?void t.trigger(Event.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(u=(1&e[n+2])<<2,u|=(192&e[n+3])>>>6,a.logger.log("manifest codec:"+r+",ADTS data:type:"+i+",sampleingIndex:"+s+"["+d[s]+"Hz],channelConfig:"+u),-1!==h.indexOf("firefox")?s>=6?(i=5,c=new Array(4),l=s-3):(i=2,c=new Array(2),l=s):-1!==h.indexOf("android")?(i=2,c=new Array(2),l=s):(i=5,c=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&s>=6?l=s-3:((r&&-1!==r.indexOf("mp4a.40.2")&&s>=6&&1===u||!r&&1===u)&&(i=2,c=new Array(2)),l=s)),c[0]=i<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=u<<3,5===i&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:d[s],channelCount:u,codec:"mp4a.40."+i})}}]),t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),s=r(o),l=n(5),u=n(58),c=r(u),h=n(63),d=r(h),f=n(71),p=r(f),g=n(72),m=r(g),v=function(){function t(e,n){i(this,t),this.hls=e,this.typeSupported=n}return a(t,[{key:"destroy",value:function(){var t=this.demuxer;t&&t.destroy()}},{key:"push",value:function(t,e,n,r,i,a,o,u){var h=this.demuxer;if(!h){var f=this.hls;if(d["default"].probe(t))h=!0===this.typeSupported.mp2t?new d["default"](f,m["default"]):new d["default"](f,p["default"]);else{if(!c["default"].probe(t))return void f.trigger(s["default"].ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});h=new c["default"](f,p["default"])}this.demuxer=h}h.push(t,e,n,r,i,a,o,u)}}]),t}();e["default"]=v},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){n(this,t)}return r(t,null,[{key:"bufferInfo",value:function(t,e,n){if(t){var r,i=t.buffered,a=[];for(r=0;r<i.length;r++)a.push({start:i.start(r),end:i.end(r)});return this.bufferedInfo(a,e,n)}return{len:0,start:0,end:0,nextStart:void 0}}},{key:"bufferedInfo",value:function(t,e,n){var r,i,a,o,s,l=[];for(t.sort((function(t,e){var n=t.start-e.start;return n||e.end-t.end})),s=0;s<t.length;s++){var u=l.length;if(u){var c=l[u-1].end;t[s].start-c<n?t[s].end>c&&(l[u-1].end=t[s].end):l.push(t[s])}else l.push(t[s])}for(s=0,r=0,i=a=e;s<l.length;s++){var h=l[s].start,d=l[s].end;if(e+n>=h&&e<d)i=h,a=d,r=a-e;else if(e+n<h){o=h;break}}return{len:r,start:i,end:a,nextStart:o}}}]),t}();e["default"]=i},function(t,e,n){(function(t,r){"use strict";function i(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function a(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function o(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function s(t,e){return i(e,(function(e){return[e,t[e]]}))}function l(t){return t&&t.Object===Object?t:null}function u(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function c(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function h(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function d(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function f(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function p(){this.__data__=Ke?Ke(null):{}}function g(t){return this.has(t)&&delete this.__data__[t]}function m(t){var e=this.__data__;if(Ke){var n=e[t];return n===Ut?void 0:n}return De.call(e,t)?e[t]:void 0}function v(t){var e=this.__data__;return Ke?void 0!==e[t]:De.call(e,t)}function y(t,e){var n=this.__data__;return n[t]=Ke&&void 0===e?Ut:e,this}function b(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _(){this.__data__=[]}function E(t){var e=this.__data__,n=j(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():je.call(e,n,1),!0}function A(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]}function T(t){return j(this.__data__,t)>-1}function w(t,e){var n=this.__data__,r=j(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function S(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function x(){this.__data__={hash:new f,map:new(Ye||b),string:new f}}function L(t){return it(this,t)["delete"](t)}function M(t){return it(this,t).get(t)}function k(t){return it(this,t).has(t)}function C(t,e){return it(this,t).set(t,e),this}function R(t){var e=-1,n=t?t.length:0;for(this.__data__=new S;++e<n;)this.add(t[e])}function P(t){return this.__data__.set(t,Ut),this}function O(t){return this.__data__.has(t)}function D(t){this.__data__=new b(t)}function I(){this.__data__=new b}function N(t){return this.__data__["delete"](t)}function F(t){return this.__data__.get(t)}function B(t){return this.__data__.has(t)}function U(t,e){var n=this.__data__;return n instanceof b&&n.__data__.length==Bt&&(n=this.__data__=new S(n.__data__)),n.set(t,e),this}function j(t,e){for(var n=t.length;n--;)if(bt(t[n][0],e))return n;return-1}function V(t,e){e=dt(e,t)?[e]:Q(e);for(var n=0,r=e.length;null!=t&&n<r;)t=t[vt(e[n++])];return n&&n==r?t:void 0}function G(t,e){return De.call(t,e)||"object"==("undefined"==typeof t?"undefined":Nt(t))&&e in t&&null===st(t)}function z(t,e){return e in Object(t)}function Y(t,e,n,r,i){return t===e||(null==t||null==e||!St(t)&&!xt(e)?t!==t&&e!==e:H(t,e,Y,n,r,i))}function H(t,e,n,r,i,a){var o=rn(t),s=rn(e),l=Ht,c=Ht;o||(l=lt(t),l=l==Yt?Qt:l),s||(c=lt(e),c=c==Yt?Qt:c);var h=l==Qt&&!u(t),d=c==Qt&&!u(e),f=l==c;if(f&&!h)return a||(a=new D),o||Ct(t)?et(t,e,n,r,i,a):nt(t,e,l,n,r,i,a);if(!(i&Vt)){var p=h&&De.call(t,"__wrapped__"),g=d&&De.call(e,"__wrapped__");if(p||g){var m=p?t.value():t,v=g?e.value():e;return a||(a=new D),n(m,v,r,i,a)}}return!!f&&(a||(a=new D),rt(t,e,n,r,i,a))}function $(t,e,n,r){var i=n.length,a=i,o=!r;if(null==t)return!a;for(t=Object(t);i--;){var s=n[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=n[i];var l=s[0],u=t[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in t))return!1}else{var h=new D;if(r)var d=r(u,c,l,t,e,h);if(!(void 0===d?Y(c,u,r,jt|Vt,h):d))return!1}}return!0}function W(t){return"function"==typeof t?t:null==t?Dt:"object"==("undefined"==typeof t?"undefined":Nt(t))?rn(t)?q(t[0],t[1]):X(t):It(t)}function K(t){return Ge(Object(t))}function X(t){var e=at(t);return 1==e.length&&e[0][2]?mt(e[0][0],e[0][1]):function(n){return n===t||$(n,t,e)}}function q(t,e){return dt(t)&&gt(e)?mt(vt(t),e):function(n){var r=Rt(n,t);return void 0===r&&r===e?Pt(n,t):Y(e,r,void 0,jt|Vt)}}function Z(t){return function(e){return null==e?void 0:e[t]}}function J(t){return function(e){return V(e,t)}}function Q(t){return rn(t)?t:Ft(t)}function tt(t){return function(e){var n=lt(e);return n==Zt?c(e):n==ne?d(e):s(e,t(e))}}function et(t,e,n,r,i,o){var s=i&Vt,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var c=o.get(t);if(c)return c==e;var h=-1,d=!0,f=i&jt?new R:void 0;for(o.set(t,e);++h<l;){var p=t[h],g=e[h];if(r)var m=s?r(g,p,h,e,t,o):r(p,g,h,t,e,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!a(e,(function(t,e){if(!f.has(e)&&(p===t||n(p,t,r,i,o)))return f.add(e)}))){d=!1;break}}else if(p!==g&&!n(p,g,r,i,o)){d=!1;break}}return o["delete"](t),d}function nt(t,e,n,r,i,a,o){switch(n){case se:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case oe:return!(t.byteLength!=e.byteLength||!r(new Be(t),new Be(e)));case $t:case Wt:return+t==+e;case Kt:return t.name==e.name&&t.message==e.message;case Jt:return t!=+t?e!=+e:t==+e;case ee:case re:return t==e+"";case Zt:var s=c;case ne:var l=a&Vt;if(s||(s=h),t.size!=e.size&&!l)return!1;var u=o.get(t);return u?u==e:(a|=jt,o.set(t,e),et(s(t),s(e),r,i,a,o));case ie:if(en)return en.call(t)==en.call(e)}return!1}function rt(t,e,n,r,i,a){var o=i&Vt,s=Ot(t),l=s.length,u=Ot(e),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var d=s[h];if(!(o?d in e:G(e,d)))return!1}var f=a.get(t);if(f)return f==e;var p=!0;a.set(t,e);for(var g=o;++h<l;){d=s[h];var m=t[d],v=e[d];if(r)var y=o?r(v,m,d,e,t,a):r(m,v,d,t,e,a);if(!(void 0===y?m===v||n(m,v,r,i,a):y)){p=!1;break}g||(g="constructor"==d)}if(p&&!g){var b=t.constructor,_=e.constructor;b!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return a["delete"](t),p}function it(t,e){var n=t.__data__;return ft(e)?n["string"==typeof e?"string":"hash"]:n.map}function at(t){for(var e=an(t),n=e.length;n--;)e[n][2]=gt(e[n][1]);return e}function ot(t,e){var n=t[e];return Lt(n)?n:void 0}function st(t){return Ve(Object(t))}function lt(t){return Ie.call(t)}function ut(t,e,n){e=dt(e,t)?[e]:Q(e);for(var r,i=-1,a=e.length;++i<a;){var o=vt(e[i]);if(!(r=null!=t&&n(t,o)))break;t=t[o]}if(r)return r;a=t?t.length:0;return!!a&&wt(a)&&ht(o,a)&&(rn(t)||Mt(t)||_t(t))}function ct(t){var e=t?t.length:void 0;return wt(e)&&(rn(t)||Mt(t)||_t(t))?o(e,String):null}function ht(t,e){return e=null==e?zt:e,!!e&&("number"==typeof t||Ee.test(t))&&t>-1&&t%1==0&&t<e}function dt(t,e){if(rn(t))return!1;var n="undefined"==typeof t?"undefined":Nt(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!kt(t))||ye.test(t)||!ve.test(t)||null!=e&&t in Object(e)}function ft(t){var e="undefined"==typeof t?"undefined":Nt(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function pt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Pe;return t===n}function gt(t){return t===t&&!St(t)}function mt(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}function vt(t){if("string"==typeof t||kt(t))return t;var e=t+"";return"0"==e&&1/t==-Gt?"-0":e}function yt(t){if(null!=t){try{return Oe.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function bt(t,e){return t===e||t!==t&&e!==e}function _t(t){return At(t)&&De.call(t,"callee")&&(!Ue.call(t,"callee")||Ie.call(t)==Yt)}function Et(t){return null!=t&&wt(nn(t))&&!Tt(t)}function At(t){return xt(t)&&Et(t)}function Tt(t){var e=St(t)?Ie.call(t):"";return e==Xt||e==qt}function wt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=zt}function St(t){var e="undefined"==typeof t?"undefined":Nt(t);return!!t&&("object"==e||"function"==e)}function xt(t){return!!t&&"object"==("undefined"==typeof t?"undefined":Nt(t))}function Lt(t){if(!St(t))return!1;var e=Tt(t)||u(t)?Ne:_e;return e.test(yt(t))}function Mt(t){return"string"==typeof t||!rn(t)&&xt(t)&&Ie.call(t)==re}function kt(t){return"symbol"==("undefined"==typeof t?"undefined":Nt(t))||xt(t)&&Ie.call(t)==ie}function Ct(t){return xt(t)&&wt(t.length)&&!!Ae[Ie.call(t)]}function Rt(t,e,n){var r=null==t?void 0:V(t,e);return void 0===r?n:r}function Pt(t,e){return null!=t&&ut(t,e,z)}function Ot(t){var e=pt(t);if(!e&&!Et(t))return K(t);var n=ct(t),r=!!n,i=n||[],a=i.length;for(var o in t)!G(t,o)||r&&("length"==o||ht(o,a))||e&&"constructor"==o||i.push(o);return i}function Dt(t){return t}function It(t){return dt(t)?Z(vt(t)):J(t)}var Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},Ft=n(33),Bt=200,Ut="__lodash_hash_undefined__",jt=1,Vt=2,Gt=1/0,zt=9007199254740991,Yt="[object Arguments]",Ht="[object Array]",$t="[object Boolean]",Wt="[object Date]",Kt="[object Error]",Xt="[object Function]",qt="[object GeneratorFunction]",Zt="[object Map]",Jt="[object Number]",Qt="[object Object]",te="[object Promise]",ee="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",ae="[object WeakMap]",oe="[object ArrayBuffer]",se="[object DataView]",le="[object Float32Array]",ue="[object Float64Array]",ce="[object Int8Array]",he="[object Int16Array]",de="[object Int32Array]",fe="[object Uint8Array]",pe="[object Uint8ClampedArray]",ge="[object Uint16Array]",me="[object Uint32Array]",ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ye=/^\w*$/,be=/[\\^$.*+?()[\]{}|]/g,_e=/^\[object .+?Constructor\]$/,Ee=/^(?:0|[1-9]\d*)$/,Ae={};Ae[le]=Ae[ue]=Ae[ce]=Ae[he]=Ae[de]=Ae[fe]=Ae[pe]=Ae[ge]=Ae[me]=!0,Ae[Yt]=Ae[Ht]=Ae[oe]=Ae[$t]=Ae[se]=Ae[Wt]=Ae[Kt]=Ae[Xt]=Ae[Zt]=Ae[Jt]=Ae[Qt]=Ae[ee]=Ae[ne]=Ae[re]=Ae[ae]=!1;var Te={function:!0,object:!0},we=Te[Nt(e)]&&e&&!e.nodeType?e:void 0,Se=Te[Nt(t)]&&t&&!t.nodeType?t:void 0,xe=l(we&&Se&&"object"==("undefined"==typeof r?"undefined":Nt(r))&&r),Le=l(Te["undefined"==typeof self?"undefined":Nt(self)]&&self),Me=l(Te["undefined"==typeof window?"undefined":Nt(window)]&&window),ke=l(Te[Nt(void 0)]&&void 0),Ce=xe||Me!==(ke&&ke.window)&&Me||Le||ke||Function("return this")(),Re=Array.prototype,Pe=Object.prototype,Oe=Function.prototype.toString,De=Pe.hasOwnProperty,Ie=Pe.toString,Ne=RegExp("^"+Oe.call(De).replace(be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fe=Ce.Symbol,Be=Ce.Uint8Array,Ue=Pe.propertyIsEnumerable,je=Re.splice,Ve=Object.getPrototypeOf,Ge=Object.keys,ze=ot(Ce,"DataView"),Ye=ot(Ce,"Map"),He=ot(Ce,"Promise"),$e=ot(Ce,"Set"),We=ot(Ce,"WeakMap"),Ke=ot(Object,"create"),Xe=yt(ze),qe=yt(Ye),Ze=yt(He),Je=yt($e),Qe=yt(We),tn=Fe?Fe.prototype:void 0,en=tn?tn.valueOf:void 0;f.prototype.clear=p,f.prototype["delete"]=g,f.prototype.get=m,f.prototype.has=v,f.prototype.set=y,b.prototype.clear=_,b.prototype["delete"]=E,b.prototype.get=A,b.prototype.has=T,b.prototype.set=w,S.prototype.clear=x,S.prototype["delete"]=L,S.prototype.get=M,S.prototype.has=k,S.prototype.set=C,R.prototype.add=R.prototype.push=P,R.prototype.has=O,D.prototype.clear=I,D.prototype["delete"]=N,D.prototype.get=F,D.prototype.has=B,D.prototype.set=U;var nn=Z("length");(ze&&lt(new ze(new ArrayBuffer(1)))!=se||Ye&&lt(new Ye)!=Zt||He&&lt(He.resolve())!=te||$e&&lt(new $e)!=ne||We&&lt(new We)!=ae)&&(lt=function(t){var e=Ie.call(t),n=e==Qt?t.constructor:void 0,r=n?yt(n):void 0;if(r)switch(r){case Xe:return se;case qe:return Zt;case Ze:return te;case Je:return ne;case Qe:return ae}return e});var rn=Array.isArray,an=tt(Ot);t.exports=W}).call(e,n(17)(t),function(){return this}())},function(t,e,n){(function(t,r){"use strict";function i(t){return t&&t.Object===Object?t:null}function a(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function o(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function s(){this.__data__=st?st(null):{}}function l(t){return this.has(t)&&delete this.__data__[t]}function u(t){var e=this.__data__;if(st){var n=e[t];return n===B?void 0:n}return nt.call(e,t)?e[t]:void 0}function c(t){var e=this.__data__;return st?void 0!==e[t]:nt.call(e,t)}function h(t,e){var n=this.__data__;return n[t]=st&&void 0===e?B:e,this}function d(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function f(){this.__data__=[]}function p(t){var e=this.__data__,n=w(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():at.call(e,n,1),!0}function g(t){var e=this.__data__,n=w(e,t);return n<0?void 0:e[n][1]}function m(t){return w(this.__data__,t)>-1}function v(t,e){var n=this.__data__,r=w(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function y(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function b(){this.__data__={hash:new o,map:new(ot||d),string:new o}}function _(t){return S(this,t)["delete"](t)}function E(t){return S(this,t).get(t)}function A(t){return S(this,t).has(t)}function T(t,e){return S(this,t).set(t,e),this}function w(t,e){for(var n=t.length;n--;)if(C(t[n][0],e))return n;return-1}function S(t,e){var n=t.__data__;return L(e)?n["string"==typeof e?"string":"hash"]:n.map}function x(t,e){var n=t[e];return O(n)?n:void 0}function L(t){var e="undefined"==typeof t?"undefined":I(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function M(t){if(null!=t){try{return et.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function k(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(F);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new(k.Cache||y),n}function C(t,e){return t===e||t!==t&&e!==e}function R(t){var e=P(t)?rt.call(t):"";return e==U||e==j}function P(t){var e="undefined"==typeof t?"undefined":I(t);return!!t&&("object"==e||"function"==e)}function O(t){if(!P(t))return!1;var e=R(t)||a(t)?it:Y;return e.test(M(t))}function D(t){return null==t?"":N(t)}var I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},N=n(85),F="Expected a function",B="__lodash_hash_undefined__",U="[object Function]",j="[object GeneratorFunction]",V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,G=/[\\^$.*+?()[\]{}|]/g,z=/\\(\\)?/g,Y=/^\[object .+?Constructor\]$/,H={function:!0,object:!0},$=H[I(e)]&&e&&!e.nodeType?e:void 0,W=H[I(t)]&&t&&!t.nodeType?t:void 0,K=i($&&W&&"object"==("undefined"==typeof r?"undefined":I(r))&&r),X=i(H["undefined"==typeof self?"undefined":I(self)]&&self),q=i(H["undefined"==typeof window?"undefined":I(window)]&&window),Z=i(H[I(void 0)]&&void 0),J=K||q!==(Z&&Z.window)&&q||X||Z||Function("return this")(),Q=Array.prototype,tt=Object.prototype,et=Function.prototype.toString,nt=tt.hasOwnProperty,rt=tt.toString,it=RegExp("^"+et.call(nt).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),at=Q.splice,ot=x(J,"Map"),st=x(Object,"create");o.prototype.clear=s,o.prototype["delete"]=l,o.prototype.get=u,o.prototype.has=c,o.prototype.set=h,d.prototype.clear=f,d.prototype["delete"]=p,d.prototype.get=g,d.prototype.has=m,d.prototype.set=v,y.prototype.clear=b,y.prototype["delete"]=_,y.prototype.get=E,y.prototype.has=A,y.prototype.set=T;var lt=k((function(t){var e=[];return D(t).replace(V,(function(t,n,r,i){e.push(r?i.replace(z,"$1"):n||t)})),e}));k.Cache=y,t.exports=lt}).call(e,n(17)(t),function(){return this}())},function(t,e){"use strict";function n(){h&&u&&(h=!1,u.length?c=u.concat(c):d=-1,c.length&&r())}function r(){if(!h){var t=o(n);h=!0;for(var e=c.length;e;){for(u=c,c=[];++d<e;)u&&u[d].run();d=-1,e=c.length}u=null,h=!1,s(t)}}function i(t,e){this.fun=t,this.array=e}function a(){}var o,s,l=t.exports={};!function(){try{o=setTimeout}catch(t){o=function(){throw new Error("setTimeout is not defined")}}try{s=clearTimeout}catch(t){s=function(){throw new Error("clearTimeout is not defined")}}}();var u,c=[],h=!1,d=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new i(t,e)),1!==c.length||h||o(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){"use strict";t.exports=n(92)},function(t,e,n){"use strict";t.exports=n(95)},function(t,e,n){"use strict";t.exports=n(98)},function(t,e,n){"use strict";t.exports=n(99)},function(t,e,n){"use strict";t.exports=n(102)},function(t,e,n){"use strict";t.exports=n(103)},function(t,e,n){"use strict";t.exports=n(105)},function(t,e,n){"use strict";t.exports=n(106)},function(t,e,n){"use strict";t.exports=n(108)},function(t,e,n){"use strict";t.exports=n(109)},function(t,e,n){"use strict";t.exports=n(120)},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 14.76H6.43V1.24H1.71v13.52zm7.86-13.52v13.52h4.716V1.24H9.573z"></path></svg>'},function(t,e,n){t.exports=n.p+"a8c874b93b3d848f39a71260c57e3863.cur"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),c=r(u),h=n(12),d=r(h),f=n(31),p=r(f),g=n(5),m=n(4),v=n(51),y=r(v),b=function(t){function e(t){i(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,c["default"].FRAG_LOADING,c["default"].FRAG_LOADED,c["default"].ERROR));return n.lastLoadedFragLevel=0,n._autoLevelCapping=-1,n._nextAutoLevel=-1,n.hls=t,n.onCheck=n.abandonRulesCheck.bind(n),n}return o(e,t),l(e,[{key:"destroy",value:function(){this.clearTimer(),d["default"].prototype.destroy.call(this)}},{key:"onFragLoading",value:function(t){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this.bwEstimator){var e=this.hls,n=t.frag.level,r=e.levels[n].details.live,i=e.config,a=void 0,o=void 0;r?(a=i.abrEwmaFastLive,o=i.abrEwmaSlowLive):(a=i.abrEwmaFastVoD,o=i.abrEwmaSlowVoD),this.bwEstimator=new y["default"](e,o,a)}var s=t.frag;s.trequest=performance.now(),this.fragCurrent=s}},{key:"abandonRulesCheck",value:function(){var t=this.hls,e=t.media,n=this.fragCurrent;if(!n.loader||n.loader.stats&&n.loader.stats.aborted)return m.logger.warn("frag loader destroy or aborted, disarm abandonRulesCheck"),void this.clearTimer();if(e&&(!e.paused||!e.readyState)&&n.autoLevel&&n.level){var r=performance.now()-n.trequest;if(r>500*n.duration){var i=t.levels,a=Math.max(1,1e3*n.loaded/r),o=Math.max(n.loaded,Math.round(n.duration*i[n.level].bitrate/8)),s=e.currentTime,l=(o-n.loaded)/a,u=p["default"].bufferInfo(e,s,t.config.maxBufferHole).end-s;if(u<2*n.duration&&l>u){var h=void 0,d=void 0;for(d=n.level-1;d>=0&&(h=n.duration*i[d].bitrate/(6.4*a),m.logger.log("fragLoadedDelay/bufferStarvationDelay/fragLevelNextLoadedDelay["+d+"] :"+l.toFixed(1)+"/"+u.toFixed(1)+"/"+h.toFixed(1)),!(h<u));d--);h<l&&(d=Math.max(0,d),t.nextLoadLevel=d,this.bwEstimator.sample(r,n.loaded),m.logger.warn("loading too slow, abort fragment loading and switch to level "+d),n.loader.abort(),this.clearTimer(),t.trigger(c["default"].FRAG_LOAD_EMERGENCY_ABORTED,{frag:n}))}}}}},{key:"onFragLoaded",value:function(t){var e=t.stats;void 0===e.aborted&&1===t.frag.loadCounter&&this.bwEstimator.sample(performance.now()-e.trequest,e.loaded),this.clearTimer(),this.lastLoadedFragLevel=t.frag.level,this._nextAutoLevel=-1}},{key:"onError",value:function(t){switch(t.details){case g.ErrorDetails.FRAG_LOAD_ERROR:case g.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping=t}},{key:"nextAutoLevel",get:function(){var t,e,n=this.hls,r=n.levels,i=n.config;if(e=-1===this._autoLevelCapping&&r&&r.length?r.length-1:this._autoLevelCapping,-1!==this._nextAutoLevel)return Math.min(this._nextAutoLevel,e);var a=this.bwEstimator.getEstimate(),o=void 0;for(t=0;t<=e;t++)if(o=t<=this.lastLoadedFragLevel?i.abrBandWidthFactor*a:i.abrBandWidthUpFactor*a,o<r[t].bitrate)return Math.max(0,t-1);return t-1},set:function(t){this._nextAutoLevel=t}}]),e}(d["default"]);e["default"]=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),c=r(u),h=n(12),d=r(h),f=n(4),p=n(5),g=function(t){function e(t){i(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,c["default"].MEDIA_ATTACHING,c["default"].MEDIA_DETACHING,c["default"].BUFFER_RESET,c["default"].BUFFER_APPENDING,c["default"].BUFFER_CODECS,c["default"].BUFFER_EOS,c["default"].BUFFER_FLUSHING,c["default"].LEVEL_UPDATED));return n._msDuration=null,n._levelDuration=null,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n}return o(e,t),l(e,[{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(t){var e=this.media=t.media;if(e){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectURL(n)}}},{key:"onMediaDetaching",value:function(){var t=this.mediaSource;if(t){if("open"===t.readyState)try{t.endOfStream()}catch(e){f.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}t.removeEventListener("sourceopen",this.onmso),t.removeEventListener("sourceended",this.onmse),t.removeEventListener("sourceclose",this.onmsc);try{this.media.src="",this.media.removeAttribute("src")}catch(e){f.logger.warn("onMediaDetaching:"+e.message+" while unlinking video.src")}this.mediaSource=null,this.media=null,this.pendingTracks=null,this.sourceBuffer=null}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(c["default"].MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){f.logger.log("media source opened"),this.hls.trigger(c["default"].MEDIA_ATTACHED,{media:this.media}),this.mediaSource.removeEventListener("sourceopen",this.onmso);var t=this.pendingTracks;t&&(this.onBufferCodecs(t),this.pendingTracks=null,this.doAppending())}},{key:"onMediaSourceClose",value:function(){f.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){f.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){this._needsFlush&&this.doFlush(),this._needsEos&&this.onBufferEos(),this.hls.trigger(c["default"].BUFFER_APPENDED),this.doAppending()}},{key:"onSBUpdateError",value:function(t){f.logger.error("sourceBuffer error:"+t),this.hls.trigger(c["default"].ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var t=this.sourceBuffer;if(t){for(var e in t){var n=t[e];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(r){}}this.sourceBuffer=null}this.flushRange=[],this.appended=0}},{key:"onBufferCodecs",value:function(t){var e=this.mediaSource;if(e&&"open"===e.readyState){if(!this.sourceBuffer){var n={};for(var r in t){var i=t[r],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;f.logger.log("creating sourceBuffer with mimeType:"+o);var s=n[r]=e.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe)}this.sourceBuffer=n}}else this.pendingTracks=t}},{key:"onBufferAppending",value:function(t){this.segments?this.segments.push(t):this.segments=[t],this.doAppending()}},{key:"onBufferAppendFail",value:function(t){f.logger.error("sourceBuffer error:"+t.event),this.hls.trigger(c["default"].ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1,frag:this.fragCurrent})}},{key:"onBufferEos",value:function(){var t=this.sourceBuffer,e=this.mediaSource;e&&"open"===e.readyState&&(t.audio&&t.audio.updating||t.video&&t.video.updating?this._needsEos=!0:(f.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment"),e.endOfStream(),this._needsEos=!1))}},{key:"onBufferFlushing",value:function(t){this.flushRange.push({start:t.startOffset,end:t.endOffset}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(t){var e=t.details;0!==e.fragments.length&&(this._levelDuration=e.totalduration+e.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){if(null!==this._levelDuration){var t=this.media,e=this.mediaSource;if(t&&e&&0!==t.readyState&&"open"===e.readyState){for(var n in e.sourceBuffers)if(e.sourceBuffers[n].updating)return;null===this._msDuration&&(this._msDuration=e.duration),this._levelDuration>this._msDuration&&(f.logger.log("Updating mediasource duration to "+this._levelDuration),e.duration=this._levelDuration,this._msDuration=this._levelDuration)}}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var t=this.flushRange[0];if(!this.flushBuffer(t.start,t.end))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var e=0,n=this.sourceBuffer;if(n)for(var r in n)e+=n[r].buffered.length;this.appended=e,this.hls.trigger(c["default"].BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var t=this.hls,e=this.sourceBuffer,n=this.segments;if(e){if(this.media.error)return n=[],void f.logger.error("trying to append although a media error occured, flush segment and abort");for(var r in e)if(e[r].updating)return;if(n.length){var i=n.shift();try{e[i.type].appendBuffer(i.data),this.appendError=0,this.appended++}catch(a){f.logger.error("error while trying to append buffer:"+a.message),n.unshift(i);var o={type:p.ErrorTypes.MEDIA_ERROR};if(22===a.code)return this.segments=[],o.details=p.ErrorDetails.BUFFER_FULL_ERROR,void t.trigger(c["default"].ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=p.ErrorDetails.BUFFER_APPEND_ERROR,o.frag=this.fragCurrent,this.appendError>t.config.appendErrorMaxRetry)return f.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],o.fatal=!0,void t.trigger(c["default"].ERROR,o);o.fatal=!1,t.trigger(c["default"].ERROR,o)}}}}},{key:"flushBuffer",value:function(t,e){var n,r,i,a,o,s;if(this.flushBufferCounter<this.appended&&this.sourceBuffer)for(var l in this.sourceBuffer){if(n=this.sourceBuffer[l],n.updating)return f.logger.warn("cannot flush, sb updating in progress"),!1;for(r=0;r<n.buffered.length;r++)if(i=n.buffered.start(r),a=n.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&e===Number.POSITIVE_INFINITY?(o=t,s=e):(o=Math.max(i,t),s=Math.min(a,e)),Math.min(s,a)-o>.5)return this.flushBufferCounter++,f.logger.log("flush "+l+" ["+o+","+s+"], of ["+i+","+a+"], pos:"+this.media.currentTime),n.remove(o,s),!1}else f.logger.warn("abort flushing too many retries");return f.logger.log("buffer flushed"),!0}}]),e}(d["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),c=r(u),h=n(12),d=r(h),f=function(t){function e(t){return i(this,e),a(this,Object.getPrototypeOf(e).call(this,t,c["default"].MEDIA_ATTACHING,c["default"].MANIFEST_PARSED))}return o(e,t),l(e,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onMediaAttaching",value:function(t){this.media=t.media instanceof HTMLVideoElement?t.media:null}},{key:"onManifestParsed",value:function(t){this.hls.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=t.levels,this.hls.firstLevel=this.getMaxLevel(t.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var t=this.levels?this.levels.length:0;t&&(this.hls.autoLevelCapping=this.getMaxLevel(t-1),this.hls.autoLevelCapping>this.autoLevelCapping&&this.hls.streamController.nextLevelSwitch(),this.autoLevelCapping=this.hls.autoLevelCapping)}}},{key:"getMaxLevel",value:function(t){var e=void 0,n=void 0,r=void 0,i=this.mediaWidth,a=this.mediaHeight,o=0,s=0;for(n=0;n<=t&&(r=this.levels[n],e=n,o=r.width,s=r.height,!(i<=o||a<=s));n++);return e}},{key:"contentScaleFactor",get:function(){var t=1;try{t=window.devicePixelRatio}catch(e){}return t}},{key:"mediaWidth",get:function(){var t=void 0;return this.media&&(t=this.media.width||this.media.clientWidth||this.media.offsetWidth,t*=this.contentScaleFactor),t}},{key:"mediaHeight",get:function(){var t=void 0;return this.media&&(t=this.media.height||this.media.clientHeight||this.media.offsetHeight,t*=this.contentScaleFactor),t}}]),e}(d["default"]);e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(76),s=r(o),l=function(){function t(e,n,r){i(this,t),this.hls=e,this.defaultEstimate_=5e5,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s["default"](n),this.fast_=new s["default"](r)}return a(t,[{key:"sample",value:function(t,e){t=Math.max(t,this.minDelayMs_);var n=8e3*e/t,r=t/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)}},{key:"getEstimate",value:function(){return!this.fast_||this.fast_.getTotalWeight()<this.minWeight_?this.defaultEstimate_:Math.min(this.fast_.getEstimate(),this.slow_.getEstimate())}},{key:"destroy",value:function(){}}]),t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),c=r(u),h=n(12),d=r(h),f=n(4),p=n(5),g=function(t){function e(t){i(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,c["default"].MANIFEST_LOADED,c["default"].LEVEL_LOADED,c["default"].ERROR));return n.ontick=n.tick.bind(n),n._manualLevel=n._autoLevelCapping=-1,n}return o(e,t),l(e,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0,this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(t){var e,n,r=[],i=[],a={},o=!1,s=!1,l=this.hls;if(t.levels.forEach((function(t){t.videoCodec&&(o=!0),t.audioCodec&&(s=!0);var e=a[t.bitrate];void 0===e?(a[t.bitrate]=r.length,t.url=[t.url],t.urlId=0,r.push(t)):r[e].url.push(t.url)})),o&&s?r.forEach((function(t){t.videoCodec&&i.push(t)})):i=r,i=i.filter((function(t){var e=function(t){return MediaSource.isTypeSupported("audio/mp4;codecs="+t)},n=function(t){return MediaSource.isTypeSupported("video/mp4;codecs="+t)},r=t.audioCodec,i=t.videoCodec;return(!r||e(r))&&(!i||n(i))})),i.length){for(e=i[0].bitrate,i.sort((function(t,e){return t.bitrate-e.bitrate})),this._levels=i,n=0;n<i.length;n++)if(i[n].bitrate===e){this._firstLevel=n,f.logger.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+e);break}l.trigger(c["default"].MANIFEST_PARSED,{levels:this._levels,firstLevel:this._firstLevel,stats:t.stats})}else l.trigger(c["default"].ERROR,{type:p.ErrorTypes.MEDIA_ERROR,details:p.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:l.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(t){var e=this._levels;if(t>=0&&t<e.length){this.timer&&(clearTimeout(this.timer),this.timer=null),this._level=t,f.logger.log("switching to level "+t),this.hls.trigger(c["default"].LEVEL_SWITCH,{level:t});var n=e[t];if(void 0===n.details||!0===n.details.live){f.logger.log("(re)loading playlist for level "+t);var r=n.urlId;this.hls.trigger(c["default"].LEVEL_LOADING,{url:n.url[r],level:t,id:r})}}else this.hls.trigger(c["default"].ERROR,{type:p.ErrorTypes.OTHER_ERROR,details:p.ErrorDetails.LEVEL_SWITCH_ERROR,level:t,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(t){if(!t.fatal){var e=t.details,n=this.hls,r=void 0,i=void 0,a=!1;switch(e){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:r=t.frag.level;break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:r=t.level,a=!0}if(void 0!==r)if(i=this._levels[r],i.urlId<i.url.length-1)i.urlId++,i.details=void 0,f.logger.warn("level controller,"+e+" for level "+r+": switching to redundant stream id "+i.urlId);else{var o=-1===this._manualLevel&&r;o?(f.logger.warn("level controller,"+e+": emergency switch-down for next fragment"),n.abrController.nextAutoLevel=0):i&&i.details&&i.details.live?(f.logger.warn("level controller,"+e+" on live stream, discard"),a&&(this._level=void 0)):e!==p.ErrorDetails.FRAG_LOAD_ERROR&&e!==p.ErrorDetails.FRAG_LOAD_TIMEOUT&&(f.logger.error("cannot recover "+e+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),t.fatal=!0,n.trigger(c["default"].ERROR,t))}}}},{key:"onLevelLoaded",value:function(t){if(t.level===this._level){var e=t.details;if(e.live){var n=1e3*e.targetduration,r=this._levels[t.level],i=r.details;i&&e.endSN===i.endSN&&(n/=2,f.logger.log("same live playlist, reload twice faster")),n-=performance.now()-t.stats.trequest,n=Math.max(1e3,Math.round(n)),f.logger.log("live playlist, reload in "+n+" ms"),this.timer=setTimeout(this.ontick,n)}else this.timer=null}}},{key:"tick",value:function(){var t=this._level;if(void 0!==t&&this.canload){var e=this._levels[t],n=e.urlId;this.hls.trigger(c["default"].LEVEL_LOADING,{url:e.url[n],level:t,id:n})}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(t){var e=this._levels;e&&e.length>t&&(this._level===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(t){this._manualLevel=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){return void 0===this._startLevel?this._firstLevel:this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.abrController.nextAutoLevel},set:function(t){this.level=t,-1===this._manualLevel&&(this.hls.abrController.nextAutoLevel=t)}}]),e}(d["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(60),c=r(u),h=n(2),d=r(h),f=n(12),p=r(f),g=n(4),m=n(74),v=r(m),y=n(31),b=r(y),_=n(64),E=r(_),A=n(5),T={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR"},w=function(t){function e(t){i(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,d["default"].MEDIA_ATTACHED,d["default"].MEDIA_DETACHING,d["default"].MANIFEST_LOADING,d["default"].MANIFEST_PARSED,d["default"].LEVEL_LOADED,d["default"].KEY_LOADED,d["default"].FRAG_LOADED,d["default"].FRAG_LOAD_EMERGENCY_ABORTED,d["default"].FRAG_PARSING_INIT_SEGMENT,d["default"].FRAG_PARSING_DATA,d["default"].FRAG_PARSED,d["default"].ERROR,d["default"].BUFFER_APPENDED,d["default"].BUFFER_FLUSHED));return n.config=t.config,n.audioCodecSwap=!1,n.ticks=0,n.ontick=n.tick.bind(n),n}return o(e,t),l(e,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),p["default"].prototype.destroy.call(this),this.state=T.STOPPED}},{key:"startLoad",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];if(this.levels){var e=this.media,n=this.lastCurrentTime;this.stopLoad(),this.demuxer=new c["default"](this.hls),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,e&&n?(g.logger.log("configure startPosition @"+n),this.lastPaused||(g.logger.log("resuming video"),e.play()),this.state=T.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:t,this.state=T.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else g.logger.warn("cannot start loading as manifest not parsed yet"),this.state=T.STOPPED}},{key:"stopLoad",value:function(){var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=T.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var t,e,n,r=this.hls,i=r.config,a=this.media,o=a&&a.seeking;switch(this.state){case T.ERROR:case T.PAUSED:break;case T.STARTING:var s=r.startLevel;-1===s&&(s=0,this.fragBitrateTest=!0),this.level=r.nextLoadLevel=s,this.state=T.WAITING_LEVEL,this.loadedmetadata=!1;break;case T.IDLE:if(!a&&(this.startFragRequested||!i.startFragPrefetch))break;t=this.loadedmetadata?a.currentTime:this.nextLoadPosition,e=r.nextLoadLevel;var l,u=b["default"].bufferInfo(a,t,i.maxBufferHole),c=u.len,h=u.end,f=this.fragPrevious;if(this.levels[e].hasOwnProperty("bitrate")?(l=Math.max(8*i.maxBufferSize/this.levels[e].bitrate,i.maxBufferLength),l=Math.min(l,i.maxMaxBufferLength)):l=i.maxBufferLength,c<l){if(r.nextLoadLevel=e,this.level=e,n=this.levels[e].details,"undefined"==typeof n||n.live&&this.levelLastLoaded!==e){this.state=T.WAITING_LEVEL;break}var p=n.fragments,m=p.length,y=p[0].start,_=p[m-1].start+p[m-1].duration,E=void 0;if(n.live){var w=void 0!==i.liveMaxLatencyDuration?i.liveMaxLatencyDuration:i.liveMaxLatencyDurationCount*n.targetduration;if(h<Math.max(y,_-w)){var S=void 0!==i.liveSyncDuration?i.liveSyncDuration:i.liveSyncDurationCount*n.targetduration,x=y+Math.max(0,n.totalduration-S);g.logger.log("buffer end: "+h+" is located too far from the end of live sliding playlist, reset currentTime to : "+x.toFixed(3)),h=x,a&&a.readyState&&a.duration>x&&(a.currentTime=x)}if(n.PTSKnown&&h>_)break;if(this.startFragRequested&&!n.PTSKnown){if(f){var L=f.sn+1;L>=n.startSN&&L<=n.endSN&&(E=p[L-n.startSN],g.logger.log("live playlist, switching playlist, load frag with next SN: "+E.sn))}E||(E=p[Math.min(m-1,Math.round(m/2))],g.logger.log("live playlist, switching playlist, unknown, load middle frag : "+E.sn))}}else h<y&&(E=p[0]);if(E||function(){var t=i.maxFragLookUpTolerance;h<_?((h>_-t||o)&&(t=0),E=v["default"].search(p,(function(e){return e.start+e.duration-t<=h?1:e.start-t>h?-1:0}))):E=p[m-1]}(),E){if(y=E.start,f&&E.level===f.level&&E.sn===f.sn){if(!(E.sn<n.endSN)){n.live||(this.hls.trigger(d["default"].BUFFER_EOS),o||(this.state=T.ENDED));break}var M=f.deltaPTS,k=E.sn-n.startSN;M&&M>i.maxBufferHole?(E=p[k-1],g.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),f.loadCounter--):(E=p[k+1],g.logger.log("SN just loaded, load next one: "+E.sn))}if(null!=E.decryptdata.uri&&null==E.decryptdata.key)g.logger.log("Loading key for "+E.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e),this.state=T.KEY_LOADING,r.trigger(d["default"].KEY_LOADING,{frag:E});else{if(g.logger.log("Loading "+E.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+e+", currentTime:"+t+",bufferEnd:"+h.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,E.loadCounter){E.loadCounter++;var C=i.fragLoadingLoopThreshold;if(E.loadCounter>C&&Math.abs(this.fragLoadIdx-E.loadIdx)<C)return void r.trigger(d["default"].ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:E})}else E.loadCounter=1;E.loadIdx=this.fragLoadIdx,this.fragCurrent=E,this.startFragRequested=!0,E.autoLevel=r.autoLevelEnabled,r.trigger(d["default"].FRAG_LOADING,{frag:E}),this.state=T.FRAG_LOADING}}}break;case T.WAITING_LEVEL:e=this.levels[this.level],e&&e.details&&(this.state=T.IDLE);break;case T.FRAG_LOADING_WAITING_RETRY:var R=performance.now(),P=this.retryDate;(!P||R>=P||o)&&(g.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=T.IDLE);break;case T.STOPPED:case T.FRAG_LOADING:case T.PARSING:case T.PARSED:case T.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"getBufferRange",value:function(t){var e,n,r=this.bufferRange;if(r)for(e=r.length-1;e>=0;e--)if(n=r[e],t>=n.start&&t<=n.end)return n;return null}},{key:"followingBufferRange",value:function(t){return t?this.getBufferRange(t.end+.5):null}},{key:"isBuffered",value:function(t){var e=this.media;if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0;return!1}},{key:"_checkFragmentChanged",value:function(){var t,e,n=this.media;if(n&&!1===n.seeking&&(e=n.currentTime,e>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),this.isBuffered(e)?t=this.getBufferRange(e):this.isBuffered(e+.1)&&(t=this.getBufferRange(e+.1)),t)){var r=t.frag;r!==this.fragPlaying&&(this.fragPlaying=r,this.hls.trigger(d["default"].FRAG_CHANGED,{frag:r}))}}},{key:"immediateLevelSwitch",value:function(){g.logger.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,this.previouslyPaused=this.media.paused,this.media.pause());var t=this.fragCurrent;t&&t.loader&&t.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=T.PAUSED,this.hls.trigger(d["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY})}},{key:"immediateLevelSwitchEnd",value:function(){this.immediateSwitch=!1;var t=this.media;t&&t.readyState&&(t.currentTime-=1e-4,this.previouslyPaused||t.play())}},{key:"nextLevelSwitch",value:function(){var t=this.media;if(t&&t.readyState){var e=void 0,n=void 0,r=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,n=this.getBufferRange(t.currentTime),n&&n.start>1&&(this.state=T.PAUSED,this.hls.trigger(d["default"].BUFFER_FLUSHING,{startOffset:0,endOffset:n.start-1})),t.paused)e=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;e=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if(r=this.getBufferRange(t.currentTime+e),r&&(r=this.followingBufferRange(r))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.state=T.PAUSED,this.hls.trigger(d["default"].BUFFER_FLUSHING,{startOffset:r.start,endOffset:Number.POSITIVE_INFINITY})}}}},{key:"onMediaAttached",value:function(t){var e=this.media=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),e.addEventListener("seeking",this.onvseeking),e.addEventListener("seeked",this.onvseeked),e.addEventListener("ended",this.onvended),this.levels&&this.config.autoStartLoad&&this.hls.startLoad()}},{key:"onMediaDetaching",value:function(){var t=this.media;t&&t.ended&&(g.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var e=this.levels;e&&e.forEach((function(t){t.details&&t.details.fragments.forEach((function(t){t.loadCounter=void 0}))})),t&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("seeked",this.onvseeked),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){if(this.state===T.FRAG_LOADING){if(0===b["default"].bufferInfo(this.media,this.media.currentTime,this.config.maxBufferHole).len){g.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load");var t=this.fragCurrent;t&&(t.loader&&t.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.state=T.IDLE}}else this.state===T.ENDED&&(this.state=T.IDLE);this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaSeeked",value:function(){this.tick()}},{key:"onMediaEnded",value:function(){g.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){g.logger.log("trigger BUFFER_RESET"),this.hls.trigger(d["default"].BUFFER_RESET),this.bufferRange=[],this.stalled=!1}},{key:"onManifestParsed",value:function(t){var e,n=!1,r=!1;t.levels.forEach((function(t){e=t.audioCodec,e&&(-1!==e.indexOf("mp4a.40.2")&&(n=!0),-1!==e.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&g.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startLevelLoaded=!1,this.startFragRequested=!1,this.config.autoStartLoad&&this.hls.startLoad()}},{key:"onLevelLoaded",value:function(t){var e=t.details,n=t.level,r=this.levels[n],i=e.totalduration,a=0;if(g.logger.log("level "+n+" loaded ["+e.startSN+","+e.endSN+"],duration:"+i),this.levelLastLoaded=n,e.live){var o=r.details;o?(E["default"].mergeDetails(o,e),a=e.fragments[0].start,e.PTSKnown?g.logger.log("live playlist sliding:"+a.toFixed(3)):g.logger.log("live playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,g.logger.log("live playlist - first load, unknown sliding"))}else e.PTSKnown=!1;if(r.details=e,this.hls.trigger(d["default"].LEVEL_UPDATED,{details:e,level:n}),!1===this.startFragRequested){if(e.live){var s=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*e.targetduration;this.startPosition=Math.max(0,a+i-s)}this.nextLoadPosition=this.startPosition}this.state===T.WAITING_LEVEL&&(this.state=T.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===T.KEY_LOADING&&(this.state=T.IDLE,this.tick())}},{key:"onFragLoaded",value:function(t){var e=this.fragCurrent;if(this.state===T.FRAG_LOADING&&e&&t.frag.level===e.level&&t.frag.sn===e.sn)if(g.logger.log("Loaded  "+e.sn+" of level "+e.level),!0===this.fragBitrateTest)this.state=T.IDLE,this.fragBitrateTest=!1,this.startFragRequested=!1,t.stats.tparsed=t.stats.tbuffered=performance.now(),this.hls.trigger(d["default"].FRAG_BUFFERED,{stats:t.stats,frag:e});else{this.state=T.PARSING,this.stats=t.stats;var n=this.levels[this.level],r=n.details,i=r.totalduration,a=void 0!==e.startDTS?e.startDTS:e.start,o=e.level,s=e.sn,l=n.audioCodec||this.config.defaultAudioCodec;this.audioCodecSwap&&(g.logger.log("swapping playlist audio codec"),void 0===l&&(l=this.lastAudioCodec),l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingAppending=0,g.logger.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],level "+o);var u=this.demuxer;u&&u.push(t.payload,l,n.videoCodec,a,e.cc,o,s,i,e.decryptdata)}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(t){if(this.state===T.PARSING){var e,n,r=t.tracks;if(n=r.audio){var i=this.levels[this.level].audioCodec,a=navigator.userAgent.toLowerCase();i&&this.audioCodecSwap&&(g.logger.log("swapping playlist audio codec"),i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==n.metadata.channelCount&&-1===a.indexOf("firefox")&&(i="mp4a.40.5"),-1!==a.indexOf("android")&&(i="mp4a.40.2",g.logger.log("Android: force audio codec to"+i)),n.levelCodec=i}if(n=r.video,n&&(n.levelCodec=this.levels[this.level].videoCodec),t.unique){var o={codec:"",levelCodec:""};for(e in t.tracks)n=r[e],o.container=n.container,o.codec&&(o.codec+=",",o.levelCodec+=","),n.codec&&(o.codec+=n.codec),n.levelCodec&&(o.levelCodec+=n.levelCodec);r={audiovideo:o}}for(e in this.hls.trigger(d["default"].BUFFER_CODECS,r),r){n=r[e],g.logger.log("track:"+e+",container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var s=n.initSegment;s&&(this.pendingAppending++,this.hls.trigger(d["default"].BUFFER_APPENDING,{type:e,data:s}))}this.tick()}}},{key:"onFragParsingData",value:function(t){var e=this;if(this.state===T.PARSING){this.tparse2=Date.now();var n=this.levels[this.level],r=this.fragCurrent;g.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb);var i=E["default"].updateFragPTSDTS(n.details,r.sn,t.startPTS,t.endPTS,t.startDTS,t.endDTS),a=this.hls;a.trigger(d["default"].LEVEL_PTS_UPDATED,{details:n.details,level:this.level,drift:i}),[t.data1,t.data2].forEach((function(n){n&&(e.pendingAppending++,a.trigger(d["default"].BUFFER_APPENDING,{type:t.type,data:n}))})),this.nextLoadPosition=t.endPTS,this.bufferRange.push({type:t.type,start:t.startPTS,end:t.endPTS,frag:r}),this.tick()}else g.logger.warn("not in PARSING state but "+this.state+", ignoring FRAG_PARSING_DATA event")}},{key:"onFragParsed",value:function(){this.state===T.PARSING&&(this.stats.tparsed=performance.now(),this.state=T.PARSED,this._checkAppendedParsed())}},{key:"onBufferAppended",value:function(){switch(this.state){case T.PARSING:case T.PARSED:this.pendingAppending--,this._checkAppendedParsed()}}},{key:"_checkAppendedParsed",value:function(){if(this.state===T.PARSED&&0===this.pendingAppending){var t=this.fragCurrent,e=this.stats;t&&(this.fragPrevious=t,e.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*e.length/(e.tbuffered-e.tfirst)),this.hls.trigger(d["default"].FRAG_BUFFERED,{stats:e,frag:t}),g.logger.log("media buffered : "+this.timeRangesToString(this.media.buffered)),this.state=T.IDLE),this.tick()}}},{key:"onError",value:function(t){switch(t.details){case A.ErrorDetails.FRAG_LOAD_ERROR:case A.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!t.fatal){var e=this.fragLoadError;if(e?e++:e=1,e<=this.config.fragLoadingMaxRetry){this.fragLoadError=e,t.frag.loadCounter=0;var n=Math.min(Math.pow(2,e-1)*this.config.fragLoadingRetryDelay,64e3);g.logger.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.state=T.FRAG_LOADING_WAITING_RETRY}else g.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.trigger(d["default"].ERROR,t),this.state=T.ERROR}break;case A.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case A.ErrorDetails.LEVEL_LOAD_ERROR:case A.ErrorDetails.LEVEL_LOAD_TIMEOUT:case A.ErrorDetails.KEY_LOAD_ERROR:case A.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==T.ERROR&&(this.state=t.fatal?T.ERROR:T.IDLE,g.logger.warn("mediaController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case A.ErrorDetails.BUFFER_FULL_ERROR:this.state!==T.PARSING&&this.state!==T.PARSED||(this.config.maxMaxBufferLength/=2,g.logger.warn("reduce max buffer length to "+this.config.maxMaxBufferLength+"s and switch to IDLE state"),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=T.IDLE)}}},{key:"_checkBuffer",value:function(){var t=this.media;if(t&&t.readyState){var e=t.currentTime,n=t.buffered;if(!this.loadedmetadata&&n.length){this.loadedmetadata=!0;var r=this.startPosition;if(!e&&e!==r&&r){g.logger.log("target start position:"+r);var i=n.start(0),a=n.end(0);(r<i||r>a)&&(r=i,g.logger.log("target start position not buffered, seek to buffered.start(0) "+i)),g.logger.log("adjust currentTime from "+e+" to "+r),t.currentTime=r}}else{var o=b["default"].bufferInfo(t,e,0),s=!(t.paused||t.ended||0===t.buffered.length),l=.4,u=e>t.playbackRate*this.lastCurrentTime;if(this.stalled&&u&&(this.stalled=!1,g.logger.log("playback not stuck anymore @"+e)),s&&o.len<=l&&(u?(l=0,this.seekHoleNudgeDuration=0):this.stalled?this.seekHoleNudgeDuration+=this.config.seekHoleNudgeDuration:(this.seekHoleNudgeDuration=0,g.logger.log("playback seems stuck @"+e),this.hls.trigger(d["default"].ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1}),this.stalled=!0),o.len<=l)){var c=o.nextStart,h=c-e;if(c&&h<this.config.maxSeekHole&&h>0){g.logger.log("adjust currentTime from "+t.currentTime+" to next buffered @ "+c+" + nudge "+this.seekHoleNudgeDuration);var f=c+this.seekHoleNudgeDuration-t.currentTime;t.currentTime=c+this.seekHoleNudgeDuration,this.hls.trigger(d["default"].ERROR,{type:A.ErrorTypes.MEDIA_ERROR,details:A.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:f})}}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=T.IDLE,this.tick()}},{key:"onBufferFlushed",value:function(){var t,e,n=[];for(e=0;e<this.bufferRange.length;e++)t=this.bufferRange[e],this.isBuffered((t.start+t.end)/2)&&n.push(t);this.bufferRange=n,this.immediateSwitch&&this.immediateLevelSwitchEnd(),this.state=T.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"timeRangesToString",value:function(t){for(var e="",n=t.length,r=0;r<n;r++)e+="["+t.start(r)+","+t.end(r)+"]";return e}},{key:"currentLevel",get:function(){if(this.media){var t=this.getBufferRange(this.media.currentTime);if(t)return t.frag.level}return-1}},{key:"nextBufferRange",get:function(){return this.media?this.followingBufferRange(this.getBufferRange(this.media.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferRange;return t?t.frag.level:-1}}]),e}(p["default"]);e["default"]=w},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),c=r(u),h=n(12),d=r(h),f=n(75),p=r(f),g=function(t){function e(t){i(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,c["default"].MEDIA_ATTACHING,c["default"].MEDIA_DETACHING,c["default"].FRAG_PARSING_USERDATA,c["default"].MANIFEST_LOADING,c["default"].FRAG_LOADED));return n.hls=t,n.config=t.config,n.config.enableCEA708Captions&&(n.cea708Interpreter=new p["default"]),n}return o(e,t),l(e,[{key:"destroy",value:function(){d["default"].prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(t){var e=this.media=t.media;this.cea708Interpreter.attach(e)}},{key:"onMediaDetaching",value:function(){this.cea708Interpreter.detach()}},{key:"onManifestLoading",value:function(){this.lastPts=Number.POSITIVE_INFINITY}},{key:"onFragLoaded",value:function(t){var e=t.frag.start;e<=this.lastPts&&this.cea708Interpreter.clear(),this.lastPts=e}},{key:"onFragParsingUserdata",value:function(t){for(var e=0;e<t.samples.length;e++)this.cea708Interpreter.push(t.samples[e].pts,t.samples[e].bytes)}}]),e}(d["default"]);e["default"]=g},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t),this._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],this._precompute();var r,i,a,o,s,l=this._tables[0][4],u=this._tables[1],c=e.length,h=1;if(4!==c&&6!==c&&8!==c)throw new Error("Invalid aes key size="+c);for(o=e.slice(0),s=[],this._key=[o,s],r=c;r<4*c+28;r++)a=o[r-1],(r%c===0||8===c&&r%c===4)&&(a=l[a>>>24]<<24^l[a>>16&255]<<16^l[a>>8&255]<<8^l[255&a],r%c===0&&(a=a<<8^a>>>24^h<<24,h=h<<1^283*(h>>7))),o[r]=o[r-c]^a;for(i=0;r;i++,r--)a=o[3&i?r:r-4],s[i]=r<=4||i<4?a:u[0][l[a>>>24]]^u[1][l[a>>16&255]]^u[2][l[a>>8&255]]^u[3][l[255&a]]}return r(t,[{key:"_precompute",value:function(){var t,e,n,r,i,a,o,s,l,u=this._tables[0],c=this._tables[1],h=u[4],d=c[4],f=[],p=[];for(t=0;t<256;t++)p[(f[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!h[e];e^=r||1,n=p[n]||1)for(o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^255&o^99,h[e]=o,d[o]=e,a=f[i=f[r=f[e]]],l=16843009*a^65537*i^257*r^16843008*e,s=257*f[o]^16843008*o,t=0;t<4;t++)u[t][e]=s=s<<24^s>>>8,c[t][o]=l=l<<24^l>>>8;for(t=0;t<5;t++)u[t]=u[t].slice(0),c[t]=c[t].slice(0)}},{key:"decrypt",value:function(t,e,n,r,i,a){var o,s,l,u,c=this._key[1],h=t^c[0],d=r^c[1],f=n^c[2],p=e^c[3],g=c.length/4-2,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],E=v[3],A=v[4];for(u=0;u<g;u++)o=y[h>>>24]^b[d>>16&255]^_[f>>8&255]^E[255&p]^c[m],s=y[d>>>24]^b[f>>16&255]^_[p>>8&255]^E[255&h]^c[m+1],l=y[f>>>24]^b[p>>16&255]^_[h>>8&255]^E[255&d]^c[m+2],p=y[p>>>24]^b[h>>16&255]^_[d>>8&255]^E[255&f]^c[m+3],m+=4,h=o,d=s,f=l;for(u=0;u<4;u++)i[(3&-u)+a]=A[h>>>24]<<24^A[d>>16&255]<<16^A[f>>8&255]<<8^A[255&p]^c[m++],o=h,h=d,d=f,f=p,p=o}}]),t}();e["default"]=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(55),s=r(o),l=function(){function t(e,n){i(this,t),this.key=e,this.iv=n}return a(t,[{key:"ntoh",value:function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24}},{key:"doDecrypt",value:function(t,e,n){var r,i,a,o,l,u,c,h,d,f=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),p=new s["default"](Array.prototype.slice.call(e)),g=new Uint8Array(t.byteLength),m=new Int32Array(g.buffer);for(r=~~n[0],i=~~n[1],a=~~n[2],o=~~n[3],d=0;d<f.length;d+=4)l=~~this.ntoh(f[d]),u=~~this.ntoh(f[d+1]),c=~~this.ntoh(f[d+2]),h=~~this.ntoh(f[d+3]),p.decrypt(l,u,c,h,m,d),m[d]=this.ntoh(m[d]^r),m[d+1]=this.ntoh(m[d+1]^i),m[d+2]=this.ntoh(m[d+2]^a),m[d+3]=this.ntoh(m[d+3]^o),r=l,i=u,a=c,o=h;return g}},{key:"localDecrypt",value:function(t,e,n,r){var i=this.doDecrypt(t,e,n);r.set(i,t.byteOffset)}},{key:"decrypt",value:function(t){var e=32e3,n=new Int32Array(t),r=new Uint8Array(t.byteLength),i=0,a=this.key,o=this.iv;for(this.localDecrypt(n.subarray(i,i+e),a,o,r),i=e;i<n.length;i+=e)o=new Uint32Array([this.ntoh(n[i-4]),this.ntoh(n[i-3]),this.ntoh(n[i-2]),this.ntoh(n[i-1])]),this.localDecrypt(n.subarray(i,i+e),a,o,r);return r}}]),t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(56),s=r(o),l=n(5),u=n(4),c=function(){function t(e){i(this,t),this.hls=e;try{var n=window?window.crypto:crypto;this.subtle=n.subtle||n.webkitSubtle,this.disableWebCrypto=!this.subtle}catch(r){this.disableWebCrypto=!0}}return a(t,[{key:"destroy",value:function(){}},{key:"decrypt",value:function(t,e,n,r){this.disableWebCrypto&&this.hls.config.enableSoftwareAES?this.decryptBySoftware(t,e,n,r):this.decryptByWebCrypto(t,e,n,r)}},{key:"decryptByWebCrypto",value:function(t,e,n,r){var i=this;u.logger.log("decrypting by WebCrypto API"),this.subtle.importKey("raw",e,{name:"AES-CBC",length:128},!1,["decrypt"]).then((function(a){i.subtle.decrypt({name:"AES-CBC",iv:n.buffer},a,t).then(r)["catch"]((function(a){i.onWebCryptoError(a,t,e,n,r)}))}))["catch"]((function(a){i.onWebCryptoError(a,t,e,n,r)}))}},{key:"decryptBySoftware",value:function(t,e,n,r){u.logger.log("decrypting by JavaScript Implementation");var i=new DataView(e.buffer),a=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]);i=new DataView(n.buffer);var o=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),l=new s["default"](a,o);r(l.decrypt(t).buffer)}},{key:"onWebCryptoError",value:function(t,e,n,r,i){this.hls.config.enableSoftwareAES?(u.logger.log("disabling to use WebCrypto API"),this.disableWebCrypto=!0,this.decryptBySoftware(e,n,r,i)):(u.logger.error("decrypting error : "+t.message),this.hls.trigger(Event.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:t.message}))}}]),t}();e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(29),s=r(o),l=n(4),u=n(62),c=r(u),h=function(){function t(e,n){i(this,t),this.observer=e,this.remuxerClass=n,this.remuxer=new this.remuxerClass(e),this._aacTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0}}return a(t,[{key:"push",value:function(t,e,n,r,i,a,o,u){var h,d,f,p,g,m,v,y,b,_=this._aacTrack,E=new c["default"](t),A=90*E.timeStamp;for(g=E.length,y=t.length;g<y-1&&(255!==t[g]||240!==(240&t[g+1]));g++);for(_.audiosamplerate||(h=s["default"].getAudioConfig(this.observer,t,g,e),_.config=h.config,_.audiosamplerate=h.samplerate,_.channelCount=h.channelCount,_.codec=h.codec,_.duration=u,l.logger.log("parsed codec:"+_.codec+",rate:"+h.samplerate+",nb channel:"+h.channelCount)),p=0,f=9216e4/_.audiosamplerate;g+5<y&&(m=1&t[g+1]?7:9,d=(3&t[g+3])<<11|t[g+4]<<3|(224&t[g+5])>>>5,d-=m,d>0&&g+m+d<=y);)for(v=A+p*f,b={unit:t.subarray(g+m,g+m+d),pts:v,dts:v},_.samples.push(b),_.len+=d,g+=d+m,p++;g<y-1&&(255!==t[g]||240!==(240&t[g+1]));g++);this.remuxer.remux(this._aacTrack,{samples:[]},{samples:[{pts:A,dts:A,unit:E.payload}]},{samples:[]},r)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){var e,n,r=new c["default"](t);if(r.hasTimeStamp)for(e=r.length,n=t.length;e<n-1;e++)if(255===t[e]&&240===(240&t[e+1]))return!0;return!1}}]),t}();e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(30),a=r(i),o=n(2),s=r(o),l=n(28),u=r(l),c=function(t){var e=new u["default"];e.trigger=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit.apply(e,[t,t].concat(r))},e.off=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.removeListener.apply(e,[t].concat(r))},t.addEventListener("message",(function(n){var r=n.data;switch(r.cmd){case"init":t.demuxer=new a["default"](e,r.typeSupported);break;case"demux":t.demuxer.push(new Uint8Array(r.data),r.audioCodec,r.videoCodec,r.timeOffset,r.cc,r.level,r.sn,r.duration)}})),e.on(s["default"].FRAG_PARSING_INIT_SEGMENT,(function(e,n){t.postMessage({event:e,tracks:n.tracks,unique:n.unique})})),e.on(s["default"].FRAG_PARSING_DATA,(function(e,n){var r={event:e,type:n.type,startPTS:n.startPTS,endPTS:n.endPTS,startDTS:n.startDTS,endDTS:n.endDTS,data1:n.data1.buffer,data2:n.data2.buffer,nb:n.nb};t.postMessage(r,[r.data1,r.data2])})),e.on(s["default"].FRAG_PARSED,(function(e){t.postMessage({event:e})})),e.on(s["default"].ERROR,(function(e,n){t.postMessage({event:e,data:n})})),e.on(s["default"].FRAG_PARSING_METADATA,(function(e,n){var r={event:e,samples:n.samples};t.postMessage(r)})),e.on(s["default"].FRAG_PARSING_USERDATA,(function(e,n){var r={event:e,samples:n.samples};t.postMessage(r)}))};e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),s=r(o),l=n(30),u=r(l),c=n(59),h=r(c),d=n(4),f=n(57),p=r(f),g=function(){function t(e){i(this,t),this.hls=e;var r={mp4:MediaSource.isTypeSupported("video/mp4"),mp2t:e.config.enableMP2TPassThrough&&MediaSource.isTypeSupported("video/mp2t")};if(e.config.enableWorker&&"undefined"!=typeof Worker){d.logger.log("demuxing in webworker");try{var a=n(91);this.w=a(h["default"]),this.onwmsg=this.onWorkerMessage.bind(this),this.w.addEventListener("message",this.onwmsg),this.w.postMessage({cmd:"init",typeSupported:r})}catch(o){d.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),this.demuxer=new u["default"](e,r)}}else this.demuxer=new u["default"](e,r);this.demuxInitialized=!0}return a(t,[{key:"destroy",value:function(){this.w?(this.w.removeEventListener("message",this.onwmsg),this.w.terminate(),this.w=null):(this.demuxer.destroy(),this.demuxer=null),this.decrypter&&(this.decrypter.destroy(),this.decrypter=null)}},{key:"pushDecrypted",value:function(t,e,n,r,i,a,o,s){this.w?this.w.postMessage({cmd:"demux",data:t,audioCodec:e,videoCodec:n,timeOffset:r,cc:i,level:a,sn:o,duration:s},[t]):this.demuxer.push(new Uint8Array(t),e,n,r,i,a,o,s)}},{key:"push",value:function(t,e,n,r,i,a,o,s,l){if(t.byteLength>0&&null!=l&&null!=l.key&&"AES-128"===l.method){null==this.decrypter&&(this.decrypter=new p["default"](this.hls));var u=this;this.decrypter.decrypt(t,l.key,l.iv,(function(t){u.pushDecrypted(t,e,n,r,i,a,o,s)}))}else this.pushDecrypted(t,e,n,r,i,a,o,s)}},{key:"onWorkerMessage",value:function(t){var e=t.data;switch(e.event){case s["default"].FRAG_PARSING_INIT_SEGMENT:var n={};n.tracks=e.tracks,n.unique=e.unique,this.hls.trigger(s["default"].FRAG_PARSING_INIT_SEGMENT,n);break;case s["default"].FRAG_PARSING_DATA:this.hls.trigger(s["default"].FRAG_PARSING_DATA,{data1:new Uint8Array(e.data1),data2:new Uint8Array(e.data2),startPTS:e.startPTS,endPTS:e.endPTS,startDTS:e.startDTS,endDTS:e.endDTS,type:e.type,nb:e.nb});break;case s["default"].FRAG_PARSING_METADATA:this.hls.trigger(s["default"].FRAG_PARSING_METADATA,{samples:e.samples});break;case s["default"].FRAG_PARSING_USERDATA:this.hls.trigger(s["default"].FRAG_PARSING_USERDATA,{samples:e.samples});break;default:this.hls.trigger(e.event,e.data)}}}]),t}();e["default"]=g},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),o=function(){function t(e){r(this,t),this.data=e,this.bytesAvailable=this.data.byteLength,this.word=0,this.bitsAvailable=0}return i(t,[{key:"loadWord",value:function(){var t=this.data.byteLength-this.bytesAvailable,e=new Uint8Array(4),n=Math.min(4,this.bytesAvailable);if(0===n)throw new Error("no bytes available");e.set(this.data.subarray(t,t+n)),this.word=new DataView(e.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n}},{key:"skipBits",value:function(t){var e;this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,e=t>>3,t-=e>>3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}},{key:"readBits",value:function(t){var e=Math.min(this.bitsAvailable,t),n=this.word>>>32-e;return t>32&&a.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0?this.word<<=e:this.bytesAvailable>0&&this.loadWord(),e=t-e,e>0?n<<e|this.readBits(e):n}},{key:"skipLZ",value:function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!==(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var t=this.skipLZ();return this.readBits(t+1)-1}},{key:"readEG",value:function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(t){var e,n,r=8,i=8;for(e=0;e<t;e++)0!==i&&(n=this.readEG(),i=(r+n+256)%256),r=0===i?r:i}},{key:"readSPS",value:function(){var t,e,n,r,i,a,o,s=0,l=0,u=0,c=0,h=1;if(this.readUByte(),t=this.readUByte(),this.readBits(5),this.skipBits(3),this.readUByte(),this.skipUEG(),100===t||110===t||122===t||244===t||44===t||83===t||86===t||118===t||128===t){var d=this.readUEG();if(3===d&&this.skipBits(1),this.skipUEG(),this.skipUEG(),this.skipBits(1),this.readBoolean())for(a=3!==d?8:12,o=0;o<a;o++)this.readBoolean()&&(o<6?this.skipScalingList(16):this.skipScalingList(64))}this.skipUEG();var f=this.readUEG();if(0===f)this.readUEG();else if(1===f)for(this.skipBits(1),this.skipEG(),this.skipEG(),e=this.readUEG(),o=0;o<e;o++)this.skipEG();if(this.skipUEG(),this.skipBits(1),n=this.readUEG(),r=this.readUEG(),i=this.readBits(1),0===i&&this.skipBits(1),this.skipBits(1),this.readBoolean()&&(s=this.readUEG(),l=this.readUEG(),u=this.readUEG(),c=this.readUEG()),this.readBoolean()&&this.readBoolean()){var p=void 0,g=this.readUByte();switch(g){case 1:p=[1,1];break;case 2:p=[12,11];break;case 3:p=[10,11];break;case 4:p=[16,11];break;case 5:p=[40,33];break;case 6:p=[24,11];break;case 7:p=[20,11];break;case 8:p=[32,11];break;case 9:p=[80,33];break;case 10:p=[18,11];break;case 11:p=[15,11];break;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[this.readUByte()<<8|this.readUByte(),this.readUByte()<<8|this.readUByte()]}p&&(h=p[0]/p[1])}return{width:Math.ceil((16*(n+1)-2*s-2*l)*h),height:(2-i)*(r+1)*16-(i?2:4)*(u+c)}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),t}();e["default"]=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),o=function(){function t(e){r(this,t),this._hasTimeStamp=!1;for(var n,i,o,s,l,u,c,h,d=0;;)if(c=this.readUTF(e,d,3),d+=3,"ID3"===c)d+=3,n=127&e[d++],i=127&e[d++],o=127&e[d++],s=127&e[d++],l=(n<<21)+(i<<14)+(o<<7)+s,u=d+l,this._parseID3Frames(e,d,u),d=u;else{if("3DI"!==c)return d-=3,h=d,void(h&&(this.hasTimeStamp||a.logger.warn("ID3 tag found, but no timestamp"),this._length=h,this._payload=e.subarray(0,h)));d+=7,a.logger.log("3DI footer found, end: "+d)}}return i(t,[{key:"readUTF",value:function(t,e,n){var r="",i=e,a=e+n;do{r+=String.fromCharCode(t[i++])}while(i<a);return r}},{key:"_parseID3Frames",value:function(t,e,n){for(var r,i;e+8<=n;)switch(r=this.readUTF(t,e,4),e+=4,t[e++]<<24+t[e++]<<16+t[e++]<<8+t[e++],t[e++]<<8+t[e++],e,r){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(t,e,44)){e+=44,e+=4;var o=1&t[e++];this._hasTimeStamp=!0,i=((t[e++]<<23)+(t[e++]<<15)+(t[e++]<<7)+t[e++])/45,o&&(i+=47721858.84),i=Math.round(i),a.logger.trace("ID3 timestamp found: "+i),this._timeStamp=i}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),t}();e["default"]=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(29),s=r(o),l=n(2),u=r(l),c=n(61),h=r(c),d=n(4),f=n(5),p=function(){function t(e,n){i(this,t),this.observer=e,this.remuxerClass=n,this.lastCC=0,this.remuxer=new this.remuxerClass(e)}return a(t,[{key:"switchLevel",value:function(){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,sequenceNumber:0,samples:[],len:0,nbNalu:0},this._aacTrack={container:"video/mp2t",type:"audio",id:-1,sequenceNumber:0,samples:[],len:0},this._id3Track={type:"id3",id:-1,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcNaluState=0,this.remuxer.switchLevel()}},{key:"insertDiscontinuity",value:function(){this.switchLevel(),this.remuxer.insertDiscontinuity()}},{key:"push",value:function(t,e,n,r,i,a,o,s){var l,c,h,p,g,m,v,y,b=t.length,_=this.remuxer.passthrough,E=!1;this.audioCodec=e,this.videoCodec=n,this.timeOffset=r,this._duration=s,this.contiguous=!1,i!==this.lastCC&&(d.logger.log("discontinuity detected"),this.insertDiscontinuity(),this.lastCC=i),a!==this.lastLevel?(d.logger.log("level switch detected"),this.switchLevel(),this.lastLevel=a):o===this.lastSN+1&&(this.contiguous=!0),this.lastSN=o;var A=this.pmtParsed,T=this._avcTrack.id,w=this._aacTrack.id,S=this._id3Track.id;for(b-=b%188,p=0;p<b;p+=188)if(71===t[p]){if(g=!!(64&t[p+1]),m=((31&t[p+1])<<8)+t[p+2],v=(48&t[p+3])>>4,v>1){if(y=p+5+t[p+4],y===p+188)continue}else y=p+4;if(A)if(m===T){if(g){if(l&&(this._parseAVCPES(this._parsePES(l)),_&&this._avcTrack.codec&&(-1===w||this._aacTrack.codec)))return void this.remux(t);l={data:[],size:0}}l&&(l.data.push(t.subarray(y,p+188)),l.size+=p+188-y)}else if(m===w){if(g){if(c&&(this._parseAACPES(this._parsePES(c)),_&&this._aacTrack.codec&&(-1===T||this._avcTrack.codec)))return void this.remux(t);c={data:[],size:0}}c&&(c.data.push(t.subarray(y,p+188)),c.size+=p+188-y)}else m===S&&(g&&(h&&this._parseID3PES(this._parsePES(h)),h={data:[],size:0}),h&&(h.data.push(t.subarray(y,p+188)),h.size+=p+188-y));else g&&(y+=t[y]+1),0===m?this._parsePAT(t,y):m===this._pmtId?(this._parsePMT(t,y),A=this.pmtParsed=!0,T=this._avcTrack.id,w=this._aacTrack.id,S=this._id3Track.id,E&&(d.logger.log("reparse from beginning"),E=!1,p=-188)):(d.logger.log("unknown PID found before PAT/PMT"),E=!0)}else this.observer.trigger(u["default"].ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});l&&this._parseAVCPES(this._parsePES(l)),c&&this._parseAACPES(this._parsePES(c)),h&&this._parseID3PES(this._parsePES(h)),this.remux(null)}},{key:"remux",value:function(t){this.remuxer.remux(this._aacTrack,this._avcTrack,this._id3Track,this._txtTrack,this.timeOffset,this.contiguous,t)}},{key:"destroy",value:function(){this.switchLevel(),this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(t,e){this._pmtId=(31&t[e+10])<<8|t[e+11]}},{key:"_parsePMT",value:function(t,e){var n,r,i,a;for(n=(15&t[e+1])<<8|t[e+2],r=e+3+n-4,i=(15&t[e+10])<<8|t[e+11],e+=12+i;e<r;){switch(a=(31&t[e+1])<<8|t[e+2],t[e]){case 15:this._aacTrack.id=a;break;case 21:this._id3Track.id=a;break;case 27:this._avcTrack.id=a;break;default:d.logger.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}}},{key:"_parsePES",value:function(t){var e,n,r,i,a,o,s,l,u,c=0,h=t.data;if(e=h[0],r=(e[0]<<16)+(e[1]<<8)+e[2],1===r){for(i=(e[4]<<8)+e[5],n=e[7],192&n&&(s=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,s>4294967295&&(s-=8589934592),64&n?(l=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2,l>4294967295&&(l-=8589934592)):l=s),a=e[8],u=a+9,t.size-=u,o=new Uint8Array(t.size);h.length;){e=h.shift();var d=e.byteLength;if(u){if(u>d){u-=d;continue}e=e.subarray(u),d-=u,u=0}o.set(e,c),c+=d}return{data:o,pts:s,dts:l,len:i}}return null}},{key:"_parseAVCPES",value:function(t){var e,n,r,i,a=this,o=this._avcTrack,s=o.samples,l=this._parseAVCNALu(t.data),u=[],c=!1,f=!1,p=0;if(0===l.length&&s.length>0){var g=s[s.length-1],m=g.units.units[g.units.units.length-1],v=new Uint8Array(m.data.byteLength+t.data.byteLength);v.set(m.data,0),v.set(t.data,m.data.byteLength),m.data=v,g.units.length+=t.data.byteLength,o.len+=t.data.byteLength}t.data=null;var y="",b=function(){u.length&&((!0===f||o.sps&&(s.length||this.contiguous))&&(n={units:{units:u,length:p},pts:t.pts,dts:t.dts,key:f},s.push(n),o.len+=p,o.nbNalu+=u.length),u=[],p=0)}.bind(this);l.forEach((function(n){switch(n.type){case 1:r=!0,c&&(y+="NDR ");break;case 5:r=!0,c&&(y+="IDR "),f=!0;break;case 6:r=!0,c&&(y+="SEI "),e=new h["default"](n.data),e.readUByte();var s=e.readUByte();if(4===s){var l=0;do{l=e.readUByte()}while(255===l);var d=e.readUByte();if(181===d){var g=e.readUShort();if(49===g){var m=e.readUInt();if(1195456820===m){var v=e.readUByte();if(3===v){var _=e.readUByte(),E=e.readUByte(),A=31&_,T=[_,E];for(i=0;i<A;i++)T.push(e.readUByte()),T.push(e.readUByte()),T.push(e.readUByte());a._txtTrack.samples.push({type:3,pts:t.pts,bytes:T})}}}}}break;case 7:if(r=!0,c&&(y+="SPS "),!o.sps){e=new h["default"](n.data);var w=e.readSPS();o.width=w.width,o.height=w.height,o.sps=[n.data],o.duration=a._duration;var S=n.data.subarray(1,4),x="avc1.";for(i=0;i<3;i++){var L=S[i].toString(16);L.length<2&&(L="0"+L),x+=L}o.codec=x}break;case 8:r=!0,c&&(y+="PPS "),o.pps||(o.pps=[n.data]);break;case 9:r=!1,c&&(y+="AUD "),b();break;default:r=!1,y+="unknown NAL "+n.type+" "}r&&(u.push(n),p+=n.data.byteLength)})),(c||y.length)&&d.logger.log(y),b()}},{key:"_parseAVCNALu",value:function(t){for(var e,n,r,i,a,o,s=0,l=t.byteLength,u=this.avcNaluState,c=[];s<l;)switch(e=t[s++],u){case 0:0===e&&(u=1);break;case 1:u=0===e?2:0;break;case 2:case 3:if(0===e)u=3;else if(1===e&&s<l){if(i=31&t[s],a)r={data:t.subarray(a,s-u-1),type:o},c.push(r);else{var h=this.avcNaluState;if(h&&s<=4-h){var d=this._avcTrack,f=d.samples;if(f.length){var p=f[f.length-1],g=p.units.units,m=g[g.length-1];m.state&&(m.data=m.data.subarray(0,m.data.byteLength-h),p.units.length-=h,d.len-=h)}}if(n=s-u-1,n>0){var v=this._avcTrack,y=v.samples;if(y.length){var b=y[y.length-1],_=b.units.units,E=_[_.length-1],A=new Uint8Array(E.data.byteLength+n);A.set(E.data,0),A.set(t.subarray(0,n),E.data.byteLength),E.data=A,b.units.length+=n,v.len+=n}}}a=s,o=i,u=0}else u=0}return a&&(r={data:t.subarray(a,l),type:o,state:u},c.push(r),this.avcNaluState=u),c}},{key:"_parseAACPES",value:function(t){var e,n,r,i,a,o,l,c,h,p,g,m=this._aacTrack,v=t.data,y=t.pts,b=0,_=this._duration,E=this.audioCodec,A=this.aacOverFlow,T=this.aacLastPTS;if(A){var w=new Uint8Array(A.byteLength+v.byteLength);w.set(A,0),w.set(v,A.byteLength),v=w}for(a=b,c=v.length;a<c-1&&(255!==v[a]||240!==(240&v[a+1]));a++);if(a&&(a<c-1?(p="AAC PES did not start with ADTS header,offset:"+a,g=!1):(p="no ADTS header found in AAC PES",g=!0),this.observer.trigger(u["default"].ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_PARSING_ERROR,fatal:g,reason:p}),g))return;if(m.audiosamplerate||(e=s["default"].getAudioConfig(this.observer,v,a,E),m.config=e.config,m.audiosamplerate=e.samplerate,m.channelCount=e.channelCount,m.codec=e.codec,m.duration=_,d.logger.log("parsed codec:"+m.codec+",rate:"+e.samplerate+",nb channel:"+e.channelCount)),i=0,r=9216e4/m.audiosamplerate,A&&T){var S=T+r;Math.abs(S-y)>1&&(d.logger.log("AAC: align PTS for overlapping frames by "+Math.round((S-y)/90)),y=S)}for(;a+5<c&&(o=1&v[a+1]?7:9,n=(3&v[a+3])<<11|v[a+4]<<3|(224&v[a+5])>>>5,n-=o,n>0&&a+o+n<=c);)for(l=y+i*r,h={unit:v.subarray(a+o,a+o+n),pts:l,dts:l},m.samples.push(h),m.len+=n,a+=n+o,i++;a<c-1&&(255!==v[a]||240!==(240&v[a+1]));a++);A=a<c?v.subarray(a,c):null,this.aacOverFlow=A,this.aacLastPTS=l}},{key:"_parseID3PES",value:function(t){this._id3Track.samples.push(t)}}],[{key:"probe",value:function(t){return t.length>=564&&71===t[0]&&71===t[188]&&71===t[376]}}]),t}();e["default"]=p},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),o=function(){function t(){r(this,t)}return i(t,null,[{key:"mergeDetails",value:function(e,n){var r,i=Math.max(e.startSN,n.startSN)-n.startSN,o=Math.min(e.endSN,n.endSN)-n.startSN,s=n.startSN-e.startSN,l=e.fragments,u=n.fragments,c=0;if(o<i)n.PTSKnown=!1;else{for(var h=i;h<=o;h++){var d=l[s+h],f=u[h];c=d.cc-f.cc,isNaN(d.startPTS)||(f.start=f.startPTS=d.startPTS,f.endPTS=d.endPTS,f.duration=d.duration,r=f)}if(c)for(a.logger.log("discontinuity sliding from playlist, take drift into account"),h=0;h<u.length;h++)u[h].cc+=c;if(r)t.updateFragPTSDTS(n,r.sn,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(s>=0&&s<l.length){var p=l[s].start;for(h=0;h<u.length;h++)u[h].start+=p}n.PTSKnown=e.PTSKnown}}},{key:"updateFragPTSDTS",value:function(e,n,r,i,a,o){var s,l,u,c;if(n<e.startSN||n>e.endSN)return 0;if(s=n-e.startSN,l=e.fragments,u=l[s],!isNaN(u.startPTS)){var h=Math.abs(u.startPTS-r);isNaN(u.deltaPTS)?u.deltaPTS=h:u.deltaPTS=Math.max(h,u.deltaPTS),r=Math.min(r,u.startPTS),i=Math.max(i,u.endPTS),a=Math.min(a,u.startDTS),o=Math.max(o,u.endDTS)}var d=r-u.start;for(u.start=u.startPTS=r,u.endPTS=i,u.startDTS=a,u.endDTS=o,u.duration=i-r,c=s;c>0;c--)t.updatePTS(l,c,c-1);for(c=s;c<l.length-1;c++)t.updatePTS(l,c,c+1);return e.PTSKnown=!0,d}},{key:"updatePTS",value:function(t,e,n){var r=t[e],i=t[n],o=i.startPTS;isNaN(o)?i.start=n>e?r.start+r.duration:r.start-i.duration:n>e?(r.duration=o-r.start,r.duration<0&&a.logger.error("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-o,i.duration<0&&a.logger.error("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}}]),t}();e["default"]=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),s=r(o),l=n(5),u=n(69),c=r(u),h=n(67),d=r(h),f=n(48),p=r(f),g=n(49),m=r(g),v=n(50),y=r(v),b=n(53),_=r(b),E=n(52),A=r(E),T=n(54),w=r(T),S=n(4),x=n(78),L=r(x),M=n(28),k=r(M),C=n(68),R=r(C),P=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t);var n=t.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in n)r in e||(e[r]=n[r]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,S.enableLogs)(e.debug),this.config=e;var a=this.observer=new k["default"];a.trigger=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];a.emit.apply(a,[t,t].concat(n))},a.off=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[t].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a),this.playlistLoader=new c["default"](this),this.fragmentLoader=new d["default"](this),this.levelController=new A["default"](this),this.abrController=new e.abrController(this),this.bufferController=new e.bufferController(this),this.capLevelController=new e.capLevelController(this),this.streamController=new e.streamController(this),this.timelineController=new e.timelineController(this),this.keyLoader=new R["default"](this)}return a(t,null,[{key:"isSupported",value:function(){return window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"Events",get:function(){return s["default"]}},{key:"ErrorTypes",get:function(){return l.ErrorTypes}},{key:"ErrorDetails",get:function(){return l.ErrorDetails}},{key:"DefaultConfig",get:function(){return t.defaultConfig||(t.defaultConfig={autoStartLoad:!0,debug:!1,capLevelToPlayerSize:!1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,seekHoleNudgeDuration:.01,stalledInBufferedNudgeThreshold:10,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,appendErrorMaxRetry:3,loader:L["default"],fLoader:void 0,pLoader:void 0,abrController:p["default"],bufferController:m["default"],capLevelController:y["default"],streamController:_["default"],timelineController:w["default"],enableCEA708Captions:!0,enableMP2TPassThrough:!1,abrEwmaFastLive:5,abrEwmaSlowLive:9,abrEwmaFastVoD:4,abrEwmaSlowVoD:15,abrBandWidthFactor:.8,abrBandWidthUpFactor:.7}),t.defaultConfig},set:function(e){t.defaultConfig=e}}]),a(t,[{key:"destroy",value:function(){S.logger.log("destroy"),this.trigger(s["default"].DESTROYING),this.detachMedia(),this.playlistLoader.destroy(),this.fragmentLoader.destroy(),this.levelController.destroy(),this.abrController.destroy(),this.bufferController.destroy(),this.capLevelController.destroy(),this.streamController.destroy(),this.timelineController.destroy(),this.keyLoader.destroy(),this.url=null,this.observer.removeAllListeners()}},{key:"attachMedia",value:function(t){S.logger.log("attachMedia"),this.media=t,this.trigger(s["default"].MEDIA_ATTACHING,{media:t})}},{key:"detachMedia",value:function(){S.logger.log("detachMedia"),this.trigger(s["default"].MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(t){S.logger.log("loadSource:"+t),this.url=t,this.trigger(s["default"].MANIFEST_LOADING,{url:t})}},{key:"startLoad",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];S.logger.log("startLoad"),this.levelController.startLoad(),this.streamController.startLoad(t)}},{key:"stopLoad",value:function(){S.logger.log("stopLoad"),this.levelController.stopLoad(),this.streamController.stopLoad()}},{key:"swapAudioCodec",value:function(){S.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){S.logger.log("recoverMediaError");var t=this.media;this.detachMedia(),this.attachMedia(t)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){S.logger.log("set currentLevel:"+t),this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){S.logger.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){S.logger.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return this.levelController.firstLevel},set:function(t){S.logger.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){S.logger.log("set startLevel:"+t),this.levelController.startLevel=t}},{key:"autoLevelCapping",get:function(){return this.abrController.autoLevelCapping},set:function(t){S.logger.log("set autoLevelCapping:"+t),this.abrController.autoLevelCapping=t}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}}]),t}();e["default"]=P},function(t,e,n){"use strict";t.exports=n(65)["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),c=r(u),h=n(12),d=r(h),f=n(5),p=function(t){function e(t){return i(this,e),a(this,Object.getPrototypeOf(e).call(this,t,c["default"].FRAG_LOADING))}return o(e,t),l(e,[{key:"destroy",value:function(){this.loader&&(this.loader.destroy(),this.loader=null),d["default"].prototype.destroy.call(this)}},{key:"onFragLoading",value:function(t){var e=t.frag;this.frag=e,this.frag.loaded=0;var n=this.hls.config;e.loader=this.loader="undefined"!=typeof n.fLoader?new n.fLoader(n):new n.loader(n),this.loader.load(e.url,"arraybuffer",this.loadsuccess.bind(this),this.loaderror.bind(this),this.loadtimeout.bind(this),n.fragLoadingTimeOut,1,0,this.loadprogress.bind(this),e)}},{key:"loadsuccess",value:function(t,e){var n=t.currentTarget.response;e.length=n.byteLength,this.frag.loader=void 0,this.hls.trigger(c["default"].FRAG_LOADED,{payload:n,frag:this.frag,stats:e})}},{key:"loaderror",value:function(t){this.loader&&this.loader.abort(),this.hls.trigger(c["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:this.frag,response:t})}},{key:"loadtimeout",value:function(){this.loader&&this.loader.abort(),this.hls.trigger(c["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:this.frag})}},{key:"loadprogress",value:function(t,e){this.frag.loaded=e.loaded,this.hls.trigger(c["default"].FRAG_LOAD_PROGRESS,{frag:this.frag,stats:e})}}]),e}(d["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),c=r(u),h=n(12),d=r(h),f=n(5),p=function(t){function e(t){i(this,e);var n=a(this,Object.getPrototypeOf(e).call(this,t,c["default"].KEY_LOADING));return n.decryptkey=null,n.decrypturl=null,n}return o(e,t),l(e,[{key:"destroy",value:function(){this.loader&&(this.loader.destroy(),this.loader=null),d["default"].prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(t){var e=this.frag=t.frag,n=e.decryptdata,r=n.uri;if(r!==this.decrypturl||null===this.decryptkey){var i=this.hls.config;e.loader=this.loader=new i.loader(i),this.decrypturl=r,this.decryptkey=null,e.loader.load(r,"arraybuffer",this.loadsuccess.bind(this),this.loaderror.bind(this),this.loadtimeout.bind(this),i.fragLoadingTimeOut,i.fragLoadingMaxRetry,i.fragLoadingRetryDelay,this.loadprogress.bind(this),e)}else this.decryptkey&&(n.key=this.decryptkey,this.hls.trigger(c["default"].KEY_LOADED,{frag:e}))}},{key:"loadsuccess",value:function(t){var e=this.frag;this.decryptkey=e.decryptdata.key=new Uint8Array(t.currentTarget.response),e.loader=void 0,this.hls.trigger(c["default"].KEY_LOADED,{frag:e})}},{key:"loaderror",value:function(t){this.loader&&this.loader.abort(),this.hls.trigger(c["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:this.frag,response:t})}},{key:"loadtimeout",value:function(){this.loader&&this.loader.abort(),this.hls.trigger(c["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:this.frag})}},{key:"loadprogress",value:function(){}}]),e}(d["default"]);e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":s(e))&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":s(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(2),c=r(u),h=n(12),d=r(h),f=n(5),p=n(77),g=r(p),m=n(73),v=r(m),y=function(t){function e(t){return i(this,e),a(this,Object.getPrototypeOf(e).call(this,t,c["default"].MANIFEST_LOADING,c["default"].LEVEL_LOADING))}return o(e,t),l(e,[{key:"destroy",value:function(){this.loader&&(this.loader.destroy(),this.loader=null),this.url=this.id=null,d["default"].prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(t){this.load(t.url,null)}},{key:"onLevelLoading",value:function(t){this.load(t.url,t.level,t.id)}},{key:"load",value:function(t,e,n){var r,i,a,o=this.hls.config;if(this.loading&&this.loader){if(this.url===t&&this.id===e&&this.id2===n)return;this.loader.abort()}this.url=t,this.id=e,this.id2=n,null===this.id?(r=o.manifestLoadingMaxRetry,i=o.manifestLoadingTimeOut,a=o.manifestLoadingRetryDelay):(r=o.levelLoadingMaxRetry,i=o.levelLoadingTimeOut,a=o.levelLoadingRetryDelay),this.loader="undefined"!=typeof o.pLoader?new o.pLoader(o):new o.loader(o),this.loading=!0,this.loader.load(t,"",this.loadsuccess.bind(this),this.loaderror.bind(this),this.loadtimeout.bind(this),i,r,a)}},{key:"resolve",value:function(t,e){return g["default"].buildAbsoluteURL(e,t)}},{key:"parseMasterPlaylist",value:function(t,e){for(var n=[],r=void 0,i=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g;null!=(r=i.exec(t));){var a={},o=a.attrs=new v["default"](r[1]);a.url=this.resolve(r[2],e);var s=o.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),a.name=o.NAME;var l=o.CODECS;if(l){l=l.split(",");for(var u=0;u<l.length;u++){var c=l[u];-1!==c.indexOf("avc1")?a.videoCodec=this.avc1toavcoti(c):a.audioCodec=c}}n.push(a)}return n}},{key:"avc1toavcoti",value:function(t){var e,n=t.split(".");return n.length>2?(e=n.shift()+".",e+=parseInt(n.shift()).toString(16),e+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):e=t,e}},{key:"cloneObj",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"parseLevelPlaylist",value:function(t,e,n){var r,i,a,o,s=0,l=0,u={url:e,fragments:[],live:!0,startSN:0},c={method:null,key:null,iv:null,uri:null},h=0,d=null,f=null;for(i=/(?:#EXT-X-(MEDIA-SEQUENCE):(\d+))|(?:#EXT-X-(TARGETDURATION):(\d+))|(?:#EXT-X-(KEY):(.*))|(?:#EXT(INF):([\d\.]+)[^\r\n]*([\r\n]+[^#|\r\n]+)?)|(?:#EXT-X-(BYTERANGE):([\d]+[@[\d]*)]*[\r\n]+([^#|\r\n]+)?|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.*)[\r\n]+([^#|\r\n]+)?)/g;null!==(r=i.exec(t));)switch(r.shift(),r=r.filter((function(t){return void 0!==t})),r[0]){case"MEDIA-SEQUENCE":s=u.startSN=parseInt(r[1]);break;case"TARGETDURATION":u.targetduration=parseFloat(r[1]);break;case"ENDLIST":u.live=!1;break;case"DIS":h++;break;case"BYTERANGE":var p=r[1].split("@");o=1===p.length?a:parseInt(p[1]),a=parseInt(p[0])+o,f&&!f.url&&(f.byteRangeStartOffset=o,f.byteRangeEndOffset=a,f.url=this.resolve(r[2],e));break;case"INF":var g=parseFloat(r[1]);if(!isNaN(g)){var m,y=s++;if(c.method&&c.uri&&!c.iv){m=this.cloneObj(c);for(var b=new Uint8Array(16),_=12;_<16;_++)b[_]=y>>8*(15-_)&255;m.iv=b}else m=c;var E=r[2]?this.resolve(r[2],e):null;f={url:E,duration:g,start:l,sn:y,level:n,cc:h,byteRangeStartOffset:o,byteRangeEndOffset:a,decryptdata:m,programDateTime:d},u.fragments.push(f),l+=g,o=null,d=null}break;case"KEY":var A=r[1],T=new v["default"](A),w=T.enumeratedString("METHOD"),S=T.URI,x=T.hexadecimalInteger("IV");w&&(c={method:null,key:null,iv:null,uri:null},S&&"AES-128"===w&&(c.method=w,c.uri=this.resolve(S,e),c.key=null,c.iv=x));break;case"PROGRAM-DATE-TIME":d=new Date(Date.parse(r[1])),f&&!f.url&&r.length>=3&&(f.url=this.resolve(r[2],e),f.programDateTime=d)}return f&&!f.url&&(u.fragments.pop(),l-=f.duration),u.totalduration=l,u.endSN=s-1,u}},{key:"loadsuccess",value:function(t,e){var n,r=t.currentTarget,i=r.responseText,a=r.responseURL,o=this.id,s=this.id2,l=this.hls;if(this.loading=!1,void 0===a&&(a=this.url),e.tload=performance.now(),e.mtime=new Date(r.getResponseHeader("Last-Modified")),0===i.indexOf("#EXTM3U"))if(i.indexOf("#EXTINF:")>0)if(null===this.id)l.trigger(c["default"].MANIFEST_LOADED,{levels:[{url:a}],url:a,stats:e});else{var u=this.parseLevelPlaylist(i,a,o);e.tparsed=performance.now(),l.trigger(c["default"].LEVEL_LOADED,{details:u,level:o,id:s,stats:e})}else n=this.parseMasterPlaylist(i,a),n.length?l.trigger(c["default"].MANIFEST_LOADED,{levels:n,url:a,stats:e}):l.trigger(c["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest"});else l.trigger(c["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(t){var e,n;null===this.id?(e=f.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0):(e=f.ErrorDetails.LEVEL_LOAD_ERROR,n=!1),this.loader&&this.loader.abort(),this.loading=!1,this.hls.trigger(c["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:e,fatal:n,url:this.url,loader:this.loader,response:t.currentTarget,level:this.id,id:this.id2})}},{key:"loadtimeout",value:function(){var t,e;null===this.id?(t=f.ErrorDetails.MANIFEST_LOAD_TIMEOUT,e=!0):(t=f.ErrorDetails.LEVEL_LOAD_TIMEOUT,e=!1),this.loader&&this.loader.abort(),this.loading=!1,this.hls.trigger(c["default"].ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:t,fatal:e,url:this.url,loader:this.loader,level:this.id,id:this.id2})}}]),e}(d["default"]);e["default"]=y},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){n(this,t)}return r(t,null,[{key:"init",value:function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,o,l,o,s),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,i))}},{key:"box",value:function(t){for(var e,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,a=i;i--;)r+=n[i].byteLength;for(e=new Uint8Array(r),e[0]=r>>24&255,e[1]=r>>16&255,e[2]=r>>8&255,e[3]=255&r,e.set(t,4),i=0,r=8;i<a;i++)e.set(n[i],r),r+=n[i].byteLength;return e}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,n){return n*=e,t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))}},{key:"moof",value:function(e,n,r){return t.box(t.types.moof,t.mfhd(e),t.traf(r,n))}},{key:"moov",value:function(e){for(var n=e.length,r=[];n--;)r[n]=t.trak(e[n]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var n=e.length,r=[];n--;)r[n]=t.trex(e[n]);return t.box.apply(null,[t.types.mvex].concat(r))}},{key:"mvhd",value:function(e,n){n*=e;var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,r)}},{key:"sdtp",value:function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t.box(t.types.sdtp,a)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"avc1",value:function(e){var n,r,i,a=[],o=[];for(n=0;n<e.sps.length;n++)r=e.sps[n],i=r.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<e.pps.length;n++)r=e.pps[n],i=r.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));var s=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(o))),l=e.width,u=e.height;return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))}},{key:"mp4a",value:function(e){var n=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"stsd",value:function(e){return"audio"===e.type?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var n=e.id,r=e.duration*e.timescale,i=e.width,a=e.height;return t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))}},{key:"traf",value:function(e,n){var r=t.sdtp(e),i=e.id;return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.box(t.types.tfdt,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.trun(e,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var n=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,n){var r,i,a,o,s,l,u=e.samples||[],c=u.length,h=12+16*c,d=new Uint8Array(h);for(n+=8+h,d.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)i=u[r],a=i.duration,o=i.size,s=i.flags,l=i.cts,d.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return t.box(t.types.trun,d)}},{key:"initSegment",value:function(e){t.types||t.init();var n,r=t.moov(e);return n=new Uint8Array(t.FTYP.byteLength+r.byteLength),n.set(t.FTYP),n.set(r,t.FTYP.byteLength),n}}]),t}();e["default"]=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),s=r(o),l=n(4),u=n(70),c=r(u),h=n(5),d=function(){function t(e){i(this,t),this.observer=e,this.ISGenerated=!1,this.PES2MP4SCALEFACTOR=4,this.PES_TIMESCALE=9e4,this.MP4_TIMESCALE=this.PES_TIMESCALE/this.PES2MP4SCALEFACTOR}return a(t,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){this._initPTS=this._initDTS=void 0}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(t,e,n,r,i,a){this.ISGenerated||this.generateIS(t,e,i),this.ISGenerated&&(e.samples.length&&this.remuxVideo(e,i,a),t.samples.length&&this.remuxAudio(t,i,a)),n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(s["default"].FRAG_PARSED)}},{key:"generateIS",value:function(t,e,n){var r,i,a=this.observer,o=t.samples,u=e.samples,d=this.PES_TIMESCALE,f={},p={tracks:f,unique:!1},g=void 0===this._initPTS;g&&(r=i=1/0),t.config&&o.length&&(t.timescale=t.audiosamplerate,t.timescale*t.duration>Math.pow(2,32)&&function(){var e=function t(e,n){return n?t(n,e%n):e};t.timescale=t.audiosamplerate/e(t.audiosamplerate,1024)}(),l.logger.log("audio mp4 timescale :"+t.timescale),f.audio={container:"audio/mp4",codec:t.codec,initSegment:c["default"].initSegment([t]),metadata:{channelCount:t.channelCount}},g&&(r=i=o[0].pts-d*n)),e.sps&&e.pps&&u.length&&(e.timescale=this.MP4_TIMESCALE,f.video={container:"video/mp4",codec:e.codec,initSegment:c["default"].initSegment([e]),metadata:{width:e.width,height:e.height}},g&&(r=Math.min(r,u[0].pts-d*n),i=Math.min(i,u[0].dts-d*n))),Object.keys(f).length?(a.trigger(s["default"].FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,g&&(this._initPTS=r,this._initDTS=i)):a.trigger(s["default"].ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(t,e,n){var r,i,a,o,u,h,d,f,p,g,m,v,y,b,_,E=8,A=this.PES_TIMESCALE,T=this.PES2MP4SCALEFACTOR,w=[],S=t.samples.reduce((function(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)}),0);for(S<0&&l.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(S/90)+" ms to overcome this issue"),h=new Uint8Array(t.len+4*t.nbNalu+8),r=new DataView(h.buffer),r.setUint32(0,h.byteLength),h.set(c["default"].types.mdat,4);t.samples.length;){for(i=t.samples.shift(),o=0;i.units.units.length;)u=i.units.units.shift(),r.setUint32(E,u.data.byteLength),E+=4,h.set(u.data,E),E+=u.data.byteLength,o+=4+u.data.byteLength;if(m=i.pts-this._initDTS,v=i.dts-this._initDTS+S,v=Math.min(m,v),void 0!==g){y=this._PTSNormalize(m,g),b=this._PTSNormalize(v,g);var x=(b-g)/T;x<=0&&(l.logger.log("invalid sample duration at PTS/DTS: "+i.pts+"/"+i.dts+":"+x),x=1),a.duration=x}else{var L=void 0,M=void 0;L=n?this.nextAvcDts:e*A,y=this._PTSNormalize(m,L),b=this._PTSNormalize(v,L),M=Math.round((b-L)/90),n&&M&&(M>1?l.logger.log("AVC:"+M+" ms hole between fragments detected,filling it"):M<-1&&l.logger.log("AVC:"+-M+" ms overlapping between fragments detected"),b=L,y=Math.max(y-M,b),l.logger.log("Video/PTS/DTS adjusted: "+y+"/"+b+",delta:"+M)),f=Math.max(0,y),p=Math.max(0,b)}a={size:o,duration:0,cts:(y-b)/T,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0}},_=a.flags,!0===i.key?(_.dependsOn=2,_.isNonSync=0):(_.dependsOn=1,_.isNonSync=1),w.push(a),g=b}var k=0;w.length>=2&&(k=w[w.length-2].duration,a.duration=k),this.nextAvcDts=b+k*T,t.len=0,t.nbNalu=0,w.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_=w[0].flags,_.dependsOn=2,_.isNonSync=0),t.samples=w,d=c["default"].moof(t.sequenceNumber++,p/T,t),t.samples=[],this.observer.trigger(s["default"].FRAG_PARSING_DATA,{data1:d,data2:h,startPTS:f/A,endPTS:(y+T*k)/A,startDTS:p/A,endDTS:this.nextAvcDts/A,type:"video",nb:w.length})}},{key:"remuxAudio",value:function(t,e,n){var r,i,a,o,u,h,d,f,p,g,m,v,y,b=8,_=this.PES_TIMESCALE,E=t.timescale,A=_/E,T=1024*t.timescale/t.audiosamplerate,w=[],S=[];for(t.samples.sort((function(t,e){return t.pts-e.pts})),S=t.samples;S.length;){if(i=S.shift(),o=i.unit,g=i.pts-this._initDTS,m=i.dts-this._initDTS,void 0!==p)v=this._PTSNormalize(g,p),y=this._PTSNormalize(m,p),a.duration=(y-p)/A,Math.abs(a.duration-T)>T/10&&l.logger.log("invalid AAC sample duration at PTS "+Math.round(g/90)+",should be 1024,found :"+Math.round(a.duration*t.audiosamplerate/t.timescale)),a.duration=T,v=y=T*A+p;else{var x=void 0,L=void 0;if(x=n?this.nextAacPts:e*_,v=this._PTSNormalize(g,x),y=this._PTSNormalize(m,x),L=Math.round(1e3*(v-x)/_),n&&L){if(L>0)l.logger.log(L+" ms hole between AAC samples detected,filling it");else if(L<-12){l.logger.log(-L+" ms overlapping between AAC samples detected, drop frame"),t.len-=o.byteLength;continue}v=y=x}if(d=Math.max(0,v),f=Math.max(0,y),!(t.len>0))return;u=new Uint8Array(t.len+8),r=new DataView(u.buffer),r.setUint32(0,u.byteLength),u.set(c["default"].types.mdat,4)}u.set(o,b),b+=o.byteLength,a={size:o.byteLength,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},w.push(a),p=y}var M=0,k=w.length;k>=2&&(M=w[k-2].duration,a.duration=M),k&&(this.nextAacPts=v+A*M,t.len=0,t.samples=w,h=c["default"].moof(t.sequenceNumber++,f/A,t),t.samples=[],this.observer.trigger(s["default"].FRAG_PARSING_DATA,{data1:h,data2:u,startPTS:d/_,endPTS:this.nextAacPts/_,startDTS:f/_,endDTS:(y+A*M)/_,type:"audio",nb:k}))}},{key:"remuxID3",value:function(t,e){var n,r=t.samples.length;if(r){for(var i=0;i<r;i++)n=t.samples[i],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE,n.dts=(n.dts-this._initDTS)/this.PES_TIMESCALE;this.observer.trigger(s["default"].FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[],e=e}},{key:"remuxText",value:function(t,e){t.samples.sort((function(t,e){return t.pts-e.pts}));var n,r=t.samples.length;if(r){for(var i=0;i<r;i++)n=t.samples[i],n.pts=(n.pts-this._initPTS)/this.PES_TIMESCALE;this.observer.trigger(s["default"].FRAG_PARSING_USERDATA,{samples:t.samples})}t.samples=[],e=e}},{key:"_PTSNormalize",value:function(t,e){var n;if(void 0===e)return t;for(n=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}},{key:"passthrough",get:function(){return!1}}]),t}();e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),s=r(o),l=function(){function t(e){i(this,t),this.observer=e,this.ISGenerated=!1}return a(t,[{key:"destroy",value:function(){}},{key:"insertDiscontinuity",value:function(){}},{key:"switchLevel",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(t,e,n,r,i,a){var o=this.observer;if(!this.ISGenerated){var l={},u={tracks:l,unique:!0},c=e,h=c.codec;h&&(u.tracks.video={container:c.container,codec:h,metadata:{width:c.width,height:c.height}}),c=t,h=c.codec,h&&(u.tracks.audio={container:c.container,codec:h,metadata:{channelCount:c.channelCount}}),this.ISGenerated=!0,o.trigger(s["default"].FRAG_PARSING_INIT_SEGMENT,u)}o.trigger(s["default"].FRAG_PARSING_DATA,{data1:a,startPTS:i,startDTS:i,type:"audiovideo",nb:1})}},{key:"passthrough",get:function(){return!0}}]),t}();e["default"]=l},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){for(var r in n(this,t),"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&(this[r]=e[r])}return r(t,[{key:"decimalInteger",value:function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"hexadecimalInteger",value:function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var n=new Uint8Array(e.length/2),r=0;r<e.length/2;r++)n[r]=parseInt(e.slice(2*r,2*r+2),16);return n}return null}},{key:"hexadecimalIntegerAsNumber",value:function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e}},{key:"decimalFloatingPoint",value:function(t){return parseFloat(this[t])}},{key:"enumeratedString",value:function(t){return this[t]}},{key:"decimalResolution",value:function(t){var e=/^(\d+)x(\d+)$/.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}}}],[{key:"parseAttrList",value:function(t){for(var e,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,r={};null!==(e=n.exec(t));){var i=e[2],a='"';0===i.indexOf(a)&&i.lastIndexOf(a)===i.length-1&&(i=i.slice(1,-1)),r[e[1]]=i}return r}}]),t}();e["default"]=i},function(t,e){"use strict";var n={search:function(t,e){for(var n=0,r=t.length-1,i=null,a=null;n<=r;){i=(n+r)/2|0,a=t[i];var o=e(a);if(o>0)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}};t.exports=n},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){n(this,t)}return r(t,[{key:"attach",value:function(t){this.media=t,this.display=[],this.memory=[]}},{key:"detach",value:function(){this.clear()}},{key:"destroy",value:function(){}},{key:"_createCue",value:function(){var t=window.VTTCue||window.TextTrackCue,e=this.cue=new t(-1,-1,"");e.text="",e.pauseOnExit=!1,e.startTime=Number.MAX_VALUE,e.endTime=Number.MAX_VALUE,this.memory.push(e)}},{key:"clear",value:function(){var t=this._textTrack;if(t&&t.cues)for(;t.cues.length>0;)t.removeCue(t.cues[0])}},{key:"push",value:function(t,e){this.cue||this._createCue();for(var n,r,i,a,o,s=31&e[0],l=2,u=0;u<s;u++)if(n=e[l++],r=127&e[l++],i=127&e[l++],a=0!==(4&n),o=3&n,(0!==r||0!==i)&&a&&0===o){if(32&r||64&r)this.cue.text+=this._fromCharCode(r)+this._fromCharCode(i);else if((17===r||25===r)&&i>=48&&i<=63)switch(i){case 48:this.cue.text+="";break;case 49:this.cue.text+="";break;case 50:this.cue.text+="";break;case 51:this.cue.text+="";break;case 52:this.cue.text+="";break;case 53:this.cue.text+="";break;case 54:this.cue.text+="";break;case 55:this.cue.text+="";break;case 56:this.cue.text+="";break;case 57:this.cue.text+=" ";break;case 58:this.cue.text+="";break;case 59:this.cue.text+="";break;case 60:this.cue.text+="";break;case 61:this.cue.text+="";break;case 62:this.cue.text+="";break;case 63:this.cue.text+=""}if((17===r||25===r)&&i>=32&&i<=47)switch(i){case 32:break;case 33:break;case 34:break;case 35:break;case 36:break;case 37:break;case 38:break;case 39:break;case 40:break;case 41:break;case 42:break;case 43:break;case 44:break;case 45:break;case 46:break;case 47:}if((20===r||28===r)&&i>=32&&i<=47)switch(i){case 32:this._clearActiveCues(t);break;case 33:this.cue.text=this.cue.text.substr(0,this.cue.text.length-1);break;case 34:break;case 35:break;case 36:break;case 37:break;case 38:break;case 39:break;case 40:break;case 41:this._clearActiveCues(t);break;case 42:break;case 43:break;case 44:this._clearActiveCues(t);break;case 45:break;case 46:this._text="";break;case 47:this._flipMemory(t)}if((23===r||31===r)&&i>=33&&i<=35)switch(i){case 33:break;case 34:break;case 35:}}}},{key:"_fromCharCode",value:function(t){switch(t){case 42:return"";case 2:return"";case 2:return"";case 4:return"";case 5:return"";case 6:return"";case 3:return"";case 4:return"";case 5:return"";case 6:return"";case 7:return"";default:return String.fromCharCode(t)}}},{key:"_flipMemory",value:function(t){this._clearActiveCues(t),this._flushCaptions(t)}},{key:"_flushCaptions",value:function(t){this._has708||(this._textTrack=this.media.addTextTrack("captions","English","en"),this._has708=!0);var e=!0,n=!1,r=void 0;try{for(var i,a=this.memory[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;o.startTime=t,this._textTrack.addCue(o),this.display.push(o)}}catch(s){n=!0,r=s}finally{try{!e&&a["return"]&&a["return"]()}finally{if(n)throw r}}this.memory=[],this.cue=null}},{key:"_clearActiveCues",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.display[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;o.endTime=t}}catch(s){n=!0,r=s}finally{try{!e&&a["return"]&&a["return"]()}finally{if(n)throw r}}this.display=[]}},{key:"_clearBufferedCues",value:function(){}}]),t}();e["default"]=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return r(t,[{key:"sample",value:function(t,e){var n=Math.pow(this.alpha_,t);this.estimate_=e*(1-n)+n*this.estimate_,this.totalWeight_+=t}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/t}return this.estimate_}}]),t}();e["default"]=i},function(t,e){"use strict";var n={buildAbsoluteURL:function(t,e){if(e=e.trim(),/^[a-z]+:/i.test(e))return e;var r=null,i=null,a=/^([^#]*)(.*)$/.exec(e);a&&(i=a[2],e=a[1]);var o=/^([^\?]*)(.*)$/.exec(e);o&&(r=o[2],e=o[1]);var s=/^([^#]*)(.*)$/.exec(t);s&&(t=s[1]);var l=/^([^\?]*)(.*)$/.exec(t);l&&(t=l[1]);var u=/^(([a-z]+:)?\/\/[a-z0-9\.\-_~]+(:[0-9]+)?)?(\/.*)$/i.exec(t);if(!u)throw new Error("Error trying to parse base URL.");var c=u[2]||"",h=u[1]||"",d=u[4],f=null;return f=/^\/\//.test(e)?c+"//"+n.buildAbsolutePath("",e.substring(2)):/^\//.test(e)?h+"/"+n.buildAbsolutePath("",e.substring(1)):n.buildAbsolutePath(h+d,e),r&&(f+=r),i&&(f+=i),f},buildAbsolutePath:function(t,e){for(var n,r,i=e,a="",o=t.replace(/[^\/]*$/,i.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),s=0;r=o.indexOf("/../",s),r>-1;s=r+n)n=/^\/(?:\.\.\/)*/.exec(o.slice(r))[0].length,a=(a+o.substring(s,r)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(n-1)/3+"}$"),"/");return a+o.substr(s)}};t.exports=n},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(4),o=function(){function t(e){r(this,t),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return i(t,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var t=this.loader,e=this.timeoutHandle;t&&4!==t.readyState&&(this.stats.aborted=!0,t.abort()),e&&window.clearTimeout(e)}},{key:"load",value:function(t,e,n,r,i,a,o,s){var l=arguments.length<=8||void 0===arguments[8]?null:arguments[8],u=arguments.length<=9||void 0===arguments[9]?null:arguments[9];this.url=t,!u||isNaN(u.byteRangeStartOffset)||isNaN(u.byteRangeEndOffset)||(this.byteRange=u.byteRangeStartOffset+"-"+(u.byteRangeEndOffset-1)),this.responseType=e,this.onSuccess=n,this.onProgress=l,this.onTimeout=i,this.onError=r,this.stats={trequest:performance.now(),retry:0},this.timeout=a,this.maxRetry=o,this.retryDelay=s,this.loadInternal()}},{key:"loadInternal",value:function(){var t;t="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest,t.onloadend=this.loadend.bind(this),t.onprogress=this.loadprogress.bind(this),t.open("GET",this.url,!0),this.byteRange&&t.setRequestHeader("Range","bytes="+this.byteRange),t.responseType=this.responseType;var e=this.stats;e.tfirst=0,e.loaded=0,this.xhrSetup&&this.xhrSetup(t,this.url),this.timeoutHandle=window.setTimeout(this.loadtimeout.bind(this),this.timeout),t.send()}},{key:"loadend",value:function(t){var e=t.currentTarget,n=e.status,r=this.stats;r.aborted||(n>=200&&n<300?(window.clearTimeout(this.timeoutHandle),r.tload=Math.max(r.tfirst,performance.now()),this.onSuccess(t,r)):r.retry<this.maxRetry?(a.logger.warn(n+" while loading "+this.url+", retrying in "+this.retryDelay+"..."),this.destroy(),window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,64e3),r.retry++):(window.clearTimeout(this.timeoutHandle),a.logger.error(n+" while loading "+this.url),this.onError(t)))}},{key:"loadtimeout",value:function(t){a.logger.warn("timeout while loading "+this.url),this.onTimeout(t,this.stats)}},{key:"loadprogress",value:function(t){var e=this.stats;0===e.tfirst&&(e.tfirst=Math.max(performance.now(),e.trequest)),e.loaded=t.loaded,this.onProgress&&this.onProgress(t,e)}}]),t}();e["default"]=o},function(t,e){"use strict";function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function r(t,e){return t&&N(t,e,E)}function i(t,e){return C.call(t,e)||"object"==("undefined"==typeof t?"undefined":A(t))&&e in t&&null===u(t)}function a(t){return D(Object(t))}function o(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){return function(n,r){if(null==n)return n;if(!p(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Object(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function l(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var l=o[t?s:++i];if(!1===n(a[l],l,a))break}return e}}function u(t){return O(Object(t))}function c(t){var e=t?t.length:void 0;return v(e)&&(B(t)||_(t)||f(t))?n(e,String):null}function h(t,e){return e=null==e?T:e,!!e&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}function d(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||k;return t===n}function f(t){return g(t)&&C.call(t,"callee")&&(!P.call(t,"callee")||R.call(t)==w)}function p(t){return null!=t&&v(F(t))&&!m(t)}function g(t){return b(t)&&p(t)}function m(t){var e=y(t)?R.call(t):"";return e==S||e==x}function v(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=T}function y(t){var e="undefined"==typeof t?"undefined":A(t);return!!t&&("object"==e||"function"==e)}function b(t){return!!t&&"object"==("undefined"==typeof t?"undefined":A(t))}function _(t){return"string"==typeof t||!B(t)&&b(t)&&R.call(t)==L}function E(t){var e=d(t);if(!e&&!p(t))return a(t);var n=c(t),r=!!n,o=n||[],s=o.length;for(var l in t)!i(t,l)||r&&("length"==l||h(l,s))||e&&"constructor"==l||o.push(l);return o}var A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},T=9007199254740991,w="[object Arguments]",S="[object Function]",x="[object GeneratorFunction]",L="[object String]",M=/^(?:0|[1-9]\d*)$/,k=Object.prototype,C=k.hasOwnProperty,R=k.toString,P=k.propertyIsEnumerable,O=Object.getPrototypeOf,D=Object.keys,I=s(r),N=l(),F=o("length"),B=Array.isArray;t.exports=I},function(t,e){"use strict";function n(t,e,n,r){var i;return n(t,(function(t,n,a){if(e(t,n,a))return i=r?n:t,!1})),i}t.exports=n},function(t,e){"use strict";function n(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}t.exports=n},function(t,e,n){"use strict";function r(t,e){return!!t.length&&a(t,e,0)>-1}function i(t,e,n){for(var r=-1,i=t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function a(t,e,n){if(e!==e)return s(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function o(t,e){return t.has(e)}function s(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var a=t[i];if(a!==a)return i}return-1}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function u(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function c(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function h(){this.__data__=it?it(null):{}}function d(t){return this.has(t)&&delete this.__data__[t]}function f(t){var e=this.__data__;if(it){var n=e[t];return n===H?void 0:n}return Q.call(e,t)?e[t]:void 0}function p(t){var e=this.__data__;return it?void 0!==e[t]:Q.call(e,t)}function g(t,e){var n=this.__data__;return n[t]=it&&void 0===e?H:e,this}function m(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function v(){this.__data__=[]}function y(t){var e=this.__data__,n=R(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():nt.call(e,n,1),!0}function b(t){var e=this.__data__,n=R(e,t);return n<0?void 0:e[n][1]}function _(t){return R(this.__data__,t)>-1}function E(t,e){var n=this.__data__,r=R(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}function A(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function T(){this.__data__={hash:new c,map:new(rt||m),string:new c}}function w(t){return O(this,t)["delete"](t)}function S(t){return O(this,t).get(t)}function x(t){return O(this,t).has(t)}function L(t,e){return O(this,t).set(t,e),this}function M(t){var e=-1,n=t?t.length:0;for(this.__data__=new A;++e<n;)this.add(t[e])}function k(t){return this.__data__.set(t,H),this}function C(t){return this.__data__.has(t)}function R(t,e){for(var n=t.length;n--;)if(F(t[n][0],e))return n;return-1}function P(t,e,n){var a=-1,s=r,l=t.length,c=!0,h=[],d=h;if(n)c=!1,s=i;else if(l>=Y){var f=e?null:G(t);if(f)return u(f);c=!1,s=o,d=new M}else d=e?[]:h;t:for(;++a<l;){var p=t[a],g=e?e(p):p;if(p=n||0!==p?p:0,c&&g===g){for(var m=d.length;m--;)if(d[m]===g)continue t;e&&d.push(g),h.push(p)}else s(d,g,n)||(d!==h&&d.push(g),h.push(p))}return h}function O(t,e){var n=t.__data__;return I(e)?n["string"==typeof e?"string":"hash"]:n.map}function D(t,e){var n=t[e];return j(n)?n:void 0}function I(t){var e="undefined"==typeof t?"undefined":V(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function N(t){if(null!=t){try{return J.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function F(t,e){return t===e||t!==t&&e!==e}function B(t){var e=U(t)?tt.call(t):"";return e==$||e==W}function U(t){var e="undefined"==typeof t?"undefined":V(t);return!!t&&("object"==e||"function"==e)}function j(t){if(!U(t))return!1;var e=B(t)||l(t)?et:X;return e.test(N(t))}var V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},G=n(83),z=n(84),Y=200,H="__lodash_hash_undefined__",$="[object Function]",W="[object GeneratorFunction]",K=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,q=Array.prototype,Z=Object.prototype,J=Function.prototype.toString,Q=Z.hasOwnProperty,tt=Z.toString,et=RegExp("^"+J.call(Q).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=q.splice,rt=D(z,"Map"),it=D(Object,"create");c.prototype.clear=h,c.prototype["delete"]=d,c.prototype.get=f,c.prototype.has=p,c.prototype.set=g,m.prototype.clear=v,m.prototype["delete"]=y,m.prototype.get=b,m.prototype.has=_,m.prototype.set=E,A.prototype.clear=T,A.prototype["delete"]=w,A.prototype.get=S,A.prototype.has=x,A.prototype.set=L,M.prototype.add=M.prototype.push=k,M.prototype.has=C,t.exports=P},function(t,e,n){(function(t,n){"use strict";function r(t){return t&&t.Object===Object?t:null}function i(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function a(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function o(t,e){var n=t[e];return c(n)?n:void 0}function s(t){if(null!=t){try{return L.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function l(t){var e=u(t)?k.call(t):"";return e==p||e==g}function u(t){var e="undefined"==typeof t?"undefined":d(t);return!!t&&("object"==e||"function"==e)}function c(t){if(!u(t))return!1;var e=l(t)||i(t)?C:v;return e.test(s(t))}function h(){}var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},f=1/0,p="[object Function]",g="[object GeneratorFunction]",m=/[\\^$.*+?()[\]{}|]/g,v=/^\[object .+?Constructor\]$/,y={function:!0,object:!0},b=y[d(e)]&&e&&!e.nodeType?e:void 0,_=y[d(t)]&&t&&!t.nodeType?t:void 0,E=r(b&&_&&"object"==("undefined"==typeof n?"undefined":d(n))&&n),A=r(y["undefined"==typeof self?"undefined":d(self)]&&self),T=r(y["undefined"==typeof window?"undefined":d(window)]&&window),w=r(y[d(void 0)]&&void 0),S=E||T!==(w&&w.window)&&T||A||w||Function("return this")(),x=Object.prototype,L=Function.prototype.toString,M=x.hasOwnProperty,k=x.toString,C=RegExp("^"+L.call(M).replace(m,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=o(S,"Set"),P=R&&1/a(new R([,-0]))[1]==f?function(t){return new R(t)}:h;t.exports=P}).call(e,n(17)(t),function(){return this}())},function(t,e,n){(function(t,n){"use strict";function r(t){return t&&t.Object===Object?t:null}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a={function:!0,object:!0},o=a[i(e)]&&e&&!e.nodeType?e:void 0,s=a[i(t)]&&t&&!t.nodeType?t:void 0,l=r(o&&s&&"object"==("undefined"==typeof n?"undefined":i(n))&&n),u=r(a["undefined"==typeof self?"undefined":i(self)]&&self),c=r(a["undefined"==typeof window?"undefined":i(window)]&&window),h=r(a[i(void 0)]&&void 0),d=l||c!==(h&&h.window)&&c||u||h||Function("return this")();t.exports=d}).call(e,n(17)(t),function(){return this}())},function(t,e,n){(function(t,n){"use strict";function r(t){return t&&t.Object===Object?t:null}function i(t){if("string"==typeof t)return t;if(o(t))return A?A.call(t):"";var e=t+"";return"0"==e&&1/t==-l?"-0":e}function a(t){return!!t&&"object"==("undefined"==typeof t?"undefined":s(t))}function o(t){return"symbol"==("undefined"==typeof t?"undefined":s(t))||a(t)&&b.call(t)==u}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},l=1/0,u="[object Symbol]",c={function:!0,object:!0},h=c[s(e)]&&e&&!e.nodeType?e:void 0,d=c[s(t)]&&t&&!t.nodeType?t:void 0,f=r(h&&d&&"object"==("undefined"==typeof n?"undefined":s(n))&&n),p=r(c["undefined"==typeof self?"undefined":s(self)]&&self),g=r(c["undefined"==typeof window?"undefined":s(window)]&&window),m=r(c[s(void 0)]&&void 0),v=f||g!==(m&&m.window)&&g||p||m||Function("return this")(),y=Object.prototype,b=y.toString,_=v.Symbol,E=_?_.prototype:void 0,A=E?E.toString:void 0;t.exports=i}).call(e,n(17)(t),function(){return this}())},function(t,e){"use strict";function n(t,e){var n;if("function"!=typeof e)throw new TypeError(h);return t=l(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=void 0),n}}function r(t){var e=i(t)?w.call(t):"";return e==g||e==m}function i(t){var e="undefined"==typeof t?"undefined":c(t);return!!t&&("object"==e||"function"==e)}function a(t){return!!t&&"object"==("undefined"==typeof t?"undefined":c(t))}function o(t){return"symbol"==("undefined"==typeof t?"undefined":c(t))||a(t)&&w.call(t)==v}function s(t){if(!t)return 0===t?t:0;if(t=u(t),t===d||t===-d){var e=t<0?-1:1;return e*f}return t===t?t:0}function l(t){var e=s(t),n=e%1;return e===e?n?e-n:e:0}function u(t){if("number"==typeof t)return t;if(o(t))return p;if(i(t)){var e=r(t.valueOf)?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(y,"");var n=_.test(t);return n||E.test(t)?A(t.slice(2),n?2:8):b.test(t)?p:+t}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},h="Expected a function",d=1/0,f=17976931348623157e292,p=NaN,g="[object Function]",m="[object GeneratorFunction]",v="[object Symbol]",y=/^\s+|\s+$/g,b=/^[-+]0x[0-9a-f]+$/i,_=/^0b[01]+$/i,E=/^0o[0-7]+$/i,A=parseInt,T=Object.prototype,w=T.toString;t.exports=n},function(t,e){"use strict";function n(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function r(t){return f(Object(t))}function i(t){return!!t&&"object"==("undefined"==typeof t?"undefined":o(t))}function a(t){if(!i(t)||d.call(t)!=s||n(t))return!1;var e=r(t);if(null===e)return!0;var a=c.call(e,"constructor")&&e.constructor;return"function"==typeof a&&a instanceof a&&u.call(a)==h}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s="[object Object]",l=Object.prototype,u=Function.prototype.toString,c=l.hasOwnProperty,h=u.call(Object),d=l.toString,f=Object.getPrototypeOf;t.exports=a},function(t,e,n){"use strict";function r(t){return i(2,t)}var i=n(86);t.exports=r},function(t,e,n){"use strict";function r(t){return E(t)?t:d(t)}function i(t,e){if(E(t))return!1;var n="undefined"==typeof t?"undefined":h(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!u(t))||y.test(t)||!v.test(t)||null!=e&&t in Object(e)}function a(t){if("string"==typeof t||u(t))return t;var e=t+"";return"0"==e&&1/t==-f?"-0":e}function o(t){var e=s(t)?_.call(t):"";return e==p||e==g}function s(t){var e="undefined"==typeof t?"undefined":h(t);return!!t&&("object"==e||"function"==e)}function l(t){return!!t&&"object"==("undefined"==typeof t?"undefined":h(t))}function u(t){return"symbol"==("undefined"==typeof t?"undefined":h(t))||l(t)&&_.call(t)==m}function c(t,e,n){e=i(e,t)?[e]:r(e);var s=-1,l=e.length;for(l||(t=void 0,l=1);++s<l;){var u=null==t?void 0:t[a(e[s])];void 0===u&&(s=l,u=n),t=o(u)?u.call(t):u}return t}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},d=n(33),f=1/0,p="[object Function]",g="[object GeneratorFunction]",m="[object Symbol]",v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,y=/^\w*$/,b=Object.prototype,_=b.toString,E=Array.isArray;t.exports=c},function(t,e,n){"use strict";function r(t,e){return t&&t.length?a(t,i(e)):[]}var i=n(32),a=n(82);t.exports=r},function(t,e){"use strict";var n=arguments[2],r=n.m,i=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};e.m=t,e.c=n,e.oe=function(t){throw t},e.p="";var r=e(e.s=entryModule);return r["default"]||r};t.exports=function(t){for(var e,a=0,o=r.length;a<o;a++)if(r[a]){var s=r[a].toString(),l=t.toString(),u=n(a);if(u&&(u===t||u["default"]===t)){e=a;break}if(s.indexOf(l)>-1){r[a]=s.substring(0,s.length-1)+"\n"+l.match(/function\s?(.+?)\s?\(.*/)[1]+"();\n}",e=a;break}}var c="window = {};\nvar fn = ("+i.toString().replace("entryModule",e)+")(["+r.map((function(t){return t.toString()})).join(",")+']);\n(typeof fn === "function") && fn(self);',h=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(h.createObjectURL(new Blob([c],{type:"text/javascript"})))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),u=r(l),c=n(14),h=r(c),d=n(8),f=r(d),p=n(131),g=r(p),m=n(15),v=r(m),y=n(6),b=r(y),_=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.currentTime=0,r.volume=100,r.options=n,r.playback=n.playback,r.settings=b["default"].extend({},r.playback.settings),r.isReady=!1,r.mediaControlDisabled=!1,r.plugins=[r.playback],r.bindEvents(),r}return o(e,t),s(e,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",doubleTap:"dblClicked",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}}]),e.prototype.bindEvents=function(){this.listenTo(this.playback,u["default"].PLAYBACK_PROGRESS,this.progress),this.listenTo(this.playback,u["default"].PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,u["default"].PLAYBACK_READY,this.ready),this.listenTo(this.playback,u["default"].PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,u["default"].PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,u["default"].PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,u["default"].PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,u["default"].PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,u["default"].PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,u["default"].PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,u["default"].PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,u["default"].PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,u["default"].PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,u["default"].PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,u["default"].PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,u["default"].PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,u["default"].PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,u["default"].PLAYBACK_ERROR,this.error)},e.prototype.playbackStateChanged=function(t){this.trigger(u["default"].CONTAINER_PLAYBACKSTATE,t)},e.prototype.playbackDvrStateChanged=function(t){this.settings=this.playback.settings,this.dvrInUse=t,this.trigger(u["default"].CONTAINER_PLAYBACKDVRSTATECHANGED,t)},e.prototype.updateBitrate=function(t){this.trigger(u["default"].CONTAINER_BITRATE,t)},e.prototype.statsReport=function(t){this.trigger(u["default"].CONTAINER_STATS_REPORT,t)},e.prototype.getPlaybackType=function(){return this.playback.getPlaybackType()},e.prototype.isDvrEnabled=function(){return!!this.playback.dvrEnabled},e.prototype.isDvrInUse=function(){return!!this.dvrInUse},e.prototype.destroy=function(){this.trigger(u["default"].CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.playback.destroy(),this.plugins.forEach((function(t){return t.destroy()})),this.$el.remove()},e.prototype.setStyle=function(t){this.$el.css(t)},e.prototype.animate=function(t,e){return this.$el.animate(t,e).promise()},e.prototype.ready=function(){this.isReady=!0,this.trigger(u["default"].CONTAINER_READY,this.name)},e.prototype.isPlaying=function(){return this.playback.isPlaying()},e.prototype.getStartTimeOffset=function(){return this.playback.getStartTimeOffset()},e.prototype.getCurrentTime=function(){return this.currentTime},e.prototype.getDuration=function(){return this.playback.getDuration()},e.prototype.error=function(t){this.isReady||this.ready(),this.trigger(u["default"].CONTAINER_ERROR,{error:t,container:this},this.name)},e.prototype.loadedMetadata=function(t){this.trigger(u["default"].CONTAINER_LOADEDMETADATA,t)},e.prototype.timeUpdated=function(t){this.currentTime=t.current,this.trigger(u["default"].CONTAINER_TIMEUPDATE,t,this.name)},e.prototype.progress=function(t){this.trigger(u["default"].CONTAINER_PROGRESS,t,this.name)},e.prototype.playing=function(){this.trigger(u["default"].CONTAINER_PLAY,this.name)},e.prototype.paused=function(){this.trigger(u["default"].CONTAINER_PAUSE,this.name)},e.prototype.play=function(){this.playback.play()},e.prototype.stop=function(){this.playback.stop(),this.currentTime=0},e.prototype.pause=function(){this.playback.pause()},e.prototype.onEnded=function(){this.trigger(u["default"].CONTAINER_ENDED,this,this.name),this.currentTime=0},e.prototype.stopped=function(){this.trigger(u["default"].CONTAINER_STOP)},e.prototype.clicked=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(u["default"].CONTAINER_CLICK,this,this.name)},e.prototype.dblClicked=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(u["default"].CONTAINER_DBLCLICK,this,this.name)},e.prototype.onContextMenu=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(u["default"].CONTAINER_CONTEXTMENU,this,this.name)},e.prototype.seek=function(t){this.trigger(u["default"].CONTAINER_SEEK,t,this.name),this.playback.seek(t)},e.prototype.seekPercentage=function(t){var e=this.getDuration();if(t>=0&&t<=100){var n=e*(t/100);this.seek(n)}},e.prototype.setVolume=function(t){this.volume=parseInt(t,10),this.trigger(u["default"].CONTAINER_VOLUME,t,this.name),this.playback.volume(t)},e.prototype.fullscreen=function(){this.trigger(u["default"].CONTAINER_FULLSCREEN,this.name)},e.prototype.onBuffering=function(){this.trigger(u["default"].CONTAINER_STATE_BUFFERING,this.name)},e.prototype.bufferfull=function(){this.trigger(u["default"].CONTAINER_STATE_BUFFERFULL,this.name)},e.prototype.addPlugin=function(t){this.plugins.push(t)},e.prototype.hasPlugin=function(t){return!!this.getPlugin(t)},e.prototype.getPlugin=function(t){return(0,v["default"])(this.plugins,(function(e){return e.name===t}))},e.prototype.mouseEnter=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(u["default"].CONTAINER_MOUSE_ENTER)},e.prototype.mouseLeave=function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(u["default"].CONTAINER_MOUSE_LEAVE)},e.prototype.settingsUpdate=function(){this.settings=this.playback.settings,this.trigger(u["default"].CONTAINER_SETTINGSUPDATE)},e.prototype.highDefinitionUpdate=function(t){this.trigger(u["default"].CONTAINER_HIGHDEFINITIONUPDATE,t)},e.prototype.isHighDefinitionInUse=function(){return this.playback.isHighDefinitionInUse()},e.prototype.disableMediaControl=function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(u["default"].CONTAINER_MEDIACONTROL_DISABLE))},e.prototype.enableMediaControl=function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(u["default"].CONTAINER_MEDIACONTROL_ENABLE))},e.prototype.updateStyle=function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")},e.prototype.configure=function(t){this.options=b["default"].extend(this.options,t),this.updateStyle(),this.trigger(u["default"].CONTAINER_OPTIONS_CHANGE)},e.prototype.render=function(){var t=f["default"].getStyleFor(g["default"]);return this.$el.append(t),this.$el.append(this.playback.render().el),this.updateStyle(),this},e}(h["default"]);e["default"]=_,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(13),l=r(s),u=n(1),c=r(u),h=n(35),d=r(h),f=n(6),p=r(f),g=n(15),m=r(g),v=n(87),y=r(v),b=function(t){function e(n,r){i(this,e);var o=a(this,t.call(this,n));return o.options=n,o.loader=r,o}return o(e,t),e.prototype.createContainers=function(){var t=this;return p["default"].Deferred((function(e){e.resolve(t.options.sources.map((function(e){return t.createContainer(e)})))}))},e.prototype.findPlaybackPlugin=function(t,e){return(0,m["default"])(this.loader.playbackPlugins,(function(n){return n.canPlay(t,e)}))},e.prototype.createContainer=function(t){var e=null,n=this.options.mimeType;(0,y["default"])(t)?(e=t.source.toString(),t.mimeType&&(n=t.mimeType)):e=t.toString(),e.match(/^\/\//)&&(e=window.location.protocol+e);var r=p["default"].extend({},this.options,{src:e,mimeType:n}),i=this.findPlaybackPlugin(e,n),a=new i(r);r=p["default"].extend(r,{playback:a});var o=new d["default"](r),s=p["default"].Deferred();return s.promise(o),this.addContainerPlugins(o),this.listenToOnce(o,c["default"].CONTAINER_READY,(function(){return s.resolve(o)})),o},e.prototype.addContainerPlugins=function(t){this.loader.containerPlugins.forEach((function(e){t.addPlugin(new e(t))}))},e}(l["default"]);e["default"]=b,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(93)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(1),c=r(u),h=n(8),d=r(h),f=n(14),p=r(f),g=n(11),m=r(g),v=n(94),y=r(v),b=n(38),_=r(b),E=n(16),A=r(E),T=n(21),w=r(T),S=n(15),x=r(S),L=n(6),M=r(L),k=n(132),C=r(k),R=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.playerInfo=w["default"].getInstance(n.playerId),r.firstResize=!0,r.options=n,r.plugins=[],r.containers=[],r.setupMediaControl(null),r._boundFullscreenHandler=function(){return r.handleFullscreenChange()},(0,M["default"])(document).bind("fullscreenchange",r._boundFullscreenHandler),(0,M["default"])(document).bind("MSFullscreenChange",r._boundFullscreenHandler),(0,M["default"])(document).bind("mozfullscreenchange",r._boundFullscreenHandler),r}return o(e,t),s(e,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"showMediaControl",mouseleave:"hideMediaControl"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}}]),e.prototype.createContainers=function(t){var e=this;this.defer=M["default"].Deferred(),this.defer.promise(this),this.containerFactory=new y["default"](t,t.loader),this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))},e.prototype.updateSize=function(){l.Fullscreen.isFullscreen()?this.setFullscreen():this.setPlayerSize()},e.prototype.setFullscreen=function(){m["default"].isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.playerInfo.currentSize={width:(0,M["default"])(window).width(),height:(0,M["default"])(window).height()})},e.prototype.setPlayerSize=function(){this.$el.removeClass("fullscreen"),this.playerInfo.currentSize=this.playerInfo.previousSize,this.playerInfo.previousSize={width:(0,M["default"])(window).width(),height:(0,M["default"])(window).height()},this.resize(this.playerInfo.currentSize)},e.prototype.resize=function(t){(0,l.isNumber)(t.height)||(0,l.isNumber)(t.width)?(this.el.style.height=t.height+"px",this.el.style.width=t.width+"px"):(this.el.style.height=""+t.height,this.el.style.width=""+t.width),this.playerInfo.previousSize={width:this.options.width,height:this.options.height},this.options.width=t.width,this.options.height=t.height,this.playerInfo.currentSize=t,this.triggerResize(this.playerInfo.currentSize)},e.prototype.enableResizeObserver=function(){var t=this,e=function(){t.playerInfo.computedSize.width==t.el.clientWidth&&t.playerInfo.computedSize.height==t.el.clientHeight||(t.playerInfo.computedSize={width:t.el.clientWidth,height:t.el.clientHeight},t.triggerResize(t.playerInfo.computedSize))};this.resizeObserverInterval=setInterval(e,500)},e.prototype.triggerResize=function(t){var e=this.firstResize||this.oldHeight!==t.height||this.oldWidth!==t.width;e&&(A["default"].trigger(this.options.playerId+":"+c["default"].PLAYER_RESIZE,t),this.oldHeight=t.height,this.oldWidth=t.width,this.firstResize=!1)},e.prototype.disableResizeObserver=function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)},e.prototype.resolveOnContainersReady=function(t){var e=this;M["default"].when.apply(M["default"],t).done((function(){e.defer.resolve(e),e.ready=!0,e.trigger(c["default"].CORE_READY)}))},e.prototype.addPlugin=function(t){this.plugins.push(t)},e.prototype.hasPlugin=function(t){return!!this.getPlugin(t)},e.prototype.getPlugin=function(t){return(0,x["default"])(this.plugins,(function(e){return e.name===t}))},e.prototype.load=function(t,e){var n=this;this.options.mimeType=e,t=t&&t.constructor===Array?t:[t],this.containers.forEach((function(t){return t.destroy()})),this.mediaControl.container=null,this.containerFactory.options=M["default"].extend(this.options,{sources:t}),this.containerFactory.createContainers().then((function(t){n.setupContainers(t)}))},e.prototype.destroy=function(){this.disableResizeObserver(),this.containers.forEach((function(t){return t.destroy()})),this.plugins.forEach((function(t){return t.destroy()})),this.$el.remove(),this.mediaControl.destroy(),(0,M["default"])(document).unbind("fullscreenchange",this._boundFullscreenHandler),(0,M["default"])(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),(0,M["default"])(document).unbind("mozfullscreenchange",this._boundFullscreenHandler)},e.prototype.handleFullscreenChange=function(){this.trigger(c["default"].CORE_FULLSCREEN,l.Fullscreen.isFullscreen()),this.updateSize(),this.mediaControl.show()},e.prototype.setMediaControlContainer=function(t){this.mediaControl.setContainer(t),this.mediaControl.render()},e.prototype.disableMediaControl=function(){this.mediaControl.disable(),this.$el.removeClass("nocursor")},e.prototype.enableMediaControl=function(){this.mediaControl.enable()},e.prototype.removeContainer=function(t){this.stopListening(t),this.containers=this.containers.filter((function(e){return e!==t}))},e.prototype.appendContainer=function(t){this.listenTo(t,c["default"].CONTAINER_DESTROYED,this.removeContainer),this.containers.push(t)},e.prototype.setupContainers=function(t){return t.map(this.appendContainer.bind(this)),this.trigger(c["default"].CORE_CONTAINERS_CREATED),this.renderContainers(),this.setupMediaControl(this.getCurrentContainer()),this.render(),this.$el.appendTo(this.options.parentElement),this.containers},e.prototype.renderContainers=function(){var t=this;this.containers.map((function(e){return t.el.appendChild(e.render().el)}))},e.prototype.createContainer=function(t,e){var n=this.containerFactory.createContainer(t,e);return this.appendContainer(n),this.el.appendChild(n.render().el),n},e.prototype.setupMediaControl=function(t){this.mediaControl?this.mediaControl.setContainer(t):(this.mediaControl=this.createMediaControl(M["default"].extend({container:t,focusElement:this.el},this.options)),this.listenTo(this.mediaControl,c["default"].MEDIACONTROL_FULLSCREEN,this.toggleFullscreen),this.listenTo(this.mediaControl,c["default"].MEDIACONTROL_SHOW,this.onMediaControlShow.bind(this,!0)),this.listenTo(this.mediaControl,c["default"].MEDIACONTROL_HIDE,this.onMediaControlShow.bind(this,!1)))},e.prototype.createMediaControl=function(t){return t.mediacontrol&&t.mediacontrol.external?new t.mediacontrol.external(t).render():new _["default"](t).render()},e.prototype.getCurrentContainer=function(){return this.mediaControl&&this.mediaControl.container?this.mediaControl.container:this.containers[0]},e.prototype.getCurrentPlayback=function(){var t=this.getCurrentContainer();return t&&t.playback},e.prototype.getPlaybackType=function(){var t=this.getCurrentContainer();return t&&t.getPlaybackType()},e.prototype.toggleFullscreen=function(){l.Fullscreen.isFullscreen()?(l.Fullscreen.cancelFullscreen(),m["default"].isiOS||this.$el.removeClass("fullscreen nocursor")):(l.Fullscreen.requestFullscreen(this.el),m["default"].isiOS||this.$el.addClass("fullscreen")),this.mediaControl.show()},e.prototype.showMediaControl=function(t){this.mediaControl.show(t)},e.prototype.hideMediaControl=function(){this.mediaControl.hide(this.options.hideMediaControlDelay)},e.prototype.onMediaControlShow=function(t){this.getCurrentContainer().trigger(t?c["default"].CONTAINER_MEDIACONTROL_SHOW:c["default"].CONTAINER_MEDIACONTROL_HIDE),t?this.$el.removeClass("nocursor"):l.Fullscreen.isFullscreen()&&this.$el.addClass("nocursor")},e.prototype.configure=function(t){var e=this;this.options=M["default"].extend(this.options,t);var n=t.source||t.sources;n?this.load(n,t.mimeType||this.options.mimeType):(this.trigger(c["default"].CORE_OPTIONS_CHANGE),this.containers.forEach((function(t){t.configure(e.options)})))},e.prototype.render=function(){var t=d["default"].getStyleFor(C["default"],{baseUrl:this.options.baseUrl});this.$el.append(t),this.$el.append(this.mediaControl.render().el),this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.playerInfo.previousSize=this.playerInfo.currentSize=this.playerInfo.computedSize=e,this.updateSize(),this.previousSize={width:this.$el.width(),height:this.$el.height()},this.enableResizeObserver(),this},e}(p["default"]);e["default"]=R,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(13),u=r(l),c=n(36),h=r(c),d=function(t){function e(n){i(this,e);var r=a(this,t.call(this));return r.player=n,r.options=n.options,r}return o(e,t),s(e,[{key:"loader",get:function(){return this.player.loader}}]),e.prototype.create=function(){return this.options.loader=this.loader,this.core=new h["default"](this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core},e.prototype.addCorePlugins=function(){var t=this;return this.loader.corePlugins.forEach((function(e){var n=new e(t.core);t.core.addPlugin(n),t.setupExternalInterface(n)})),this.core},e.prototype.setupExternalInterface=function(t){var e=t.getExternalInterface();for(var n in e)this.player[n]=e[n].bind(t)},e}(u["default"]);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(96)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(13),l=r(s),u=n(21),c=r(u),h=n(90),d=r(h),f=n(22),p=r(f),g=n(39),m=r(g),v=n(42),y=r(v),b=n(40),_=r(b),E=n(41),A=r(E),T=n(43),w=r(T),S=n(44),x=r(S),L=n(124),M=r(L),k=n(126),C=r(k),R=n(128),P=r(R),O=n(45),D=r(O),I=n(118),N=r(I),F=n(111),B=r(F),U=n(113),j=r(U),V=n(116),G=r(V),z=n(121),Y=r(z),H=n(123),$=r(H),W=n(114),K=r(W),X=function(t){function e(n,r){i(this,e);var o=a(this,t.call(this));return o.playerId=r,o.playbackPlugins=[A["default"],p["default"],y["default"],m["default"],_["default"],w["default"],x["default"]],o.containerPlugins=[M["default"],P["default"],D["default"],C["default"],N["default"],B["default"]],o.corePlugins=[j["default"],G["default"],Y["default"],$["default"],K["default"]],n&&(Array.isArray(n)||o.validateExternalPluginsType(n),o.addExternalPlugins(n)),o}return o(e,t),e.prototype.groupPluginsByType=function(t){return Array.isArray(t)&&(t=t.reduce((function(t,e){return t[e.type]||(t[e.type]=[]),t[e.type].push(e),t}),{})),t},e.prototype.addExternalPlugins=function(t){t=this.groupPluginsByType(t);var e=function(t){return t.prototype.name};t.playback&&(this.playbackPlugins=(0,d["default"])(t.playback.concat(this.playbackPlugins),e)),t.container&&(this.containerPlugins=(0,d["default"])(t.container.concat(this.containerPlugins),e)),t.core&&(this.corePlugins=(0,d["default"])(t.core.concat(this.corePlugins),e)),c["default"].getInstance(this.playerId).playbackPlugins=this.playbackPlugins},e.prototype.validateExternalPluginsType=function(t){var e=["playback","container","core"];e.forEach((function(e){(t[e]||[]).forEach((function(t){var n="external "+t.type+" plugin on "+e+" array";if(t.type!==e)throw new ReferenceError(n)}))}))},e}(l["default"]);e["default"]=X,t.exports=e["default"]},function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),c=n(26),h=n(1),d=i(h),f=n(8),p=i(f),g=n(14),m=i(g),v=n(11),y=i(v),b=n(16),_=i(b),E=n(9),A=i(E),T=n(7),w=i(T),S=n(6),x=i(S),L=n(133),M=i(L),k=n(143),C=i(k),R=n(27),P=i(R),O=n(46),D=i(O),I=n(152),N=i(I),F=n(153),B=i(F),U=n(154),j=i(U),V=n(155),G=i(V),z=n(156),Y=i(z),H=n(157),$=i(H),W=function(t){function e(n){a(this,e);var r=o(this,t.call(this,n));r.options=n,r.persistConfig=r.options.persistConfig,r.container=n.container,r.currentPositionValue=null,r.currentDurationValue=null;var i=r.persistConfig?u.Config.restore("volume"):100;return r.setVolume(r.options.mute?0:i),r.keepVisible=!1,r.addEventListeners(),r.settings={left:["play","stop","pause"],right:["volume"],default:["position","seekbar","duration"]},r.container?x["default"].isEmptyObject(r.container.settings)||(r.settings=x["default"].extend({},r.container.settings)):r.settings={},r.disabled=!1,(r.container&&r.container.mediaControlDisabled||r.options.chromeless)&&r.disable(),r.stopDragHandler=function(t){return r.stopDrag(t)},r.updateDragHandler=function(t){return r.updateDrag(t)},(0,x["default"])(document).bind("mouseup",r.stopDragHandler),(0,x["default"])(document).bind("mousemove",r.updateDragHandler),r}return s(e,t),l(e,[{key:"name",get:function(){return"MediaControl"}},{key:"attributes",get:function(){return{class:"media-control","data-media-control":""}}},{key:"events",get:function(){return{"click [data-play]":"play","click [data-pause]":"pause","click [data-playpause]":"togglePlayPause","click [data-stop]":"stop","click [data-playstop]":"togglePlayStop","click [data-fullscreen]":"toggleFullscreen","click .bar-container[data-seekbar]":"seek","click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mouseenter .drawer-container[data-volume]":"showVolumeBar","mouseleave .drawer-container[data-volume]":"hideVolumeBar","mousedown .bar-container[data-volume]":"startVolumeDrag","mousemove .bar-container[data-volume]":"mousemoveOnVolumeBar","mousedown .bar-scrubber[data-seekbar]":"startSeekDrag","mousemove .bar-container[data-seekbar]":"mousemoveOnSeekBar","mouseleave .bar-container[data-seekbar]":"mouseleaveOnSeekBar","mouseenter .media-control-layer[data-controls]":"setUserKeepVisible","mouseleave .media-control-layer[data-controls]":"resetUserKeepVisible"}}},{key:"template",get:function(){return(0,A["default"])(C["default"])}},{key:"stylesheet",get:function(){return p["default"].getStyleFor(M["default"],{baseUrl:this.options.baseUrl})}},{key:"volume",get:function(){return this.container&&this.container.isReady?this.container.volume:this.intendedVolume}},{key:"muted",get:function(){return 0===this.volume}}]),e.prototype.addEventListeners=function(){this.container&&(_["default"].on(this.options.playerId+":"+d["default"].PLAYER_RESIZE,this.playerResize,this),this.listenTo(this.container,d["default"].CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,d["default"].CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,d["default"].CONTAINER_DBLCLICK,this.toggleFullscreen),this.listenTo(this.container,d["default"].CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,d["default"].CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,d["default"].CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container,d["default"].CONTAINER_PLAYBACKDVRSTATECHANGED,this.settingsUpdate),this.listenTo(this.container,d["default"].CONTAINER_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.container,d["default"].CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,d["default"].CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,d["default"].CONTAINER_ENDED,this.ended),this.listenTo(this.container,d["default"].CONTAINER_VOLUME,this.onVolumeChanged))},e.prototype.disable=function(){this.disabled=!0,this.hide(),this.$el.hide()},e.prototype.enable=function(){this.options.chromeless||(this.disabled=!1,this.show())},e.prototype.play=function(){this.container.play()},e.prototype.pause=function(){this.container.pause()},e.prototype.stop=function(){this.container.stop()},e.prototype.onVolumeChanged=function(){this.updateVolumeUI()},e.prototype.updateVolumeUI=function(){if(this.rendered){this.$volumeBarContainer.find(".bar-fill-2").css({});var t=this.$volumeBarContainer.width(),e=this.$volumeBarBackground.width(),n=(t-e)/2,r=e*this.volume/100+n;this.$volumeBarFill.css({width:this.volume+"%"}),this.$volumeBarScrubber.css({left:r}),this.$volumeBarContainer.find(".segmented-bar-element").removeClass("fill");var i=Math.ceil(this.volume/10);this.$volumeBarContainer.find(".segmented-bar-element").slice(0,i).addClass("fill"),this.$volumeIcon.html(""),this.$volumeIcon.removeClass("muted"),this.muted?(this.$volumeIcon.append(j["default"]),this.$volumeIcon.addClass("muted")):this.$volumeIcon.append(B["default"]),this.applyButtonStyle(this.$volumeIcon)}},e.prototype.changeTogglePlay=function(){this.$playPauseToggle.html(""),this.$playStopToggle.html(""),this.container&&this.container.isPlaying()?(this.$playPauseToggle.append(D["default"]),this.$playStopToggle.append(N["default"]),this.trigger(d["default"].MEDIACONTROL_PLAYING)):(this.$playPauseToggle.append(P["default"]),this.$playStopToggle.append(P["default"]),this.trigger(d["default"].MEDIACONTROL_NOTPLAYING)),this.applyButtonStyle(this.$playPauseToggle),this.applyButtonStyle(this.$playStopToggle)},e.prototype.mousemoveOnSeekBar=function(t){if(this.container.settings.seekEnabled){var e=t.pageX-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:e})}this.trigger(d["default"].MEDIACONTROL_MOUSEMOVE_SEEKBAR,t)},e.prototype.mouseleaveOnSeekBar=function(t){this.trigger(d["default"].MEDIACONTROL_MOUSELEAVE_SEEKBAR,t)},e.prototype.onVolumeClick=function(t){this.setVolume(this.getVolumeFromUIEvent(t))},e.prototype.mousemoveOnVolumeBar=function(t){this.draggingVolumeBar&&this.setVolume(this.getVolumeFromUIEvent(t))},e.prototype.playerResize=function(t){this.$fullscreenToggle.html(""),u.Fullscreen.isFullscreen()?this.$fullscreenToggle.append(Y["default"]):this.$fullscreenToggle.append(G["default"]),this.applyButtonStyle(this.$fullscreenToggle),this.$el.removeClass("w320"),(t.width<=320||this.options.hideVolumeBar)&&this.$el.addClass("w320")},e.prototype.togglePlayPause=function(){return this.container.isPlaying()?this.container.pause():this.container.play(),!1},e.prototype.togglePlayStop=function(){this.container.isPlaying()?this.container.stop():this.container.play()},e.prototype.startSeekDrag=function(t){this.container.settings.seekEnabled&&(this.draggingSeekBar=!0,this.$el.addClass("dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),t&&t.preventDefault())},e.prototype.startVolumeDrag=function(t){this.draggingVolumeBar=!0,this.$el.addClass("dragging"),t&&t.preventDefault()},e.prototype.stopDrag=function(t){this.draggingSeekBar&&this.seek(t),this.$el.removeClass("dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition dragging"),this.draggingSeekBar=!1,this.draggingVolumeBar=!1},e.prototype.updateDrag=function(t){if(this.draggingSeekBar){t.preventDefault();var e=t.pageX-this.$seekBarContainer.offset().left,n=e/this.$seekBarContainer.width()*100;n=Math.min(100,Math.max(n,0)),this.setSeekPercentage(n)}else this.draggingVolumeBar&&(t.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(t)))},e.prototype.getVolumeFromUIEvent=function(t){var e=t.pageX-this.$volumeBarContainer.offset().left,n=e/this.$volumeBarContainer.width()*100;return n},e.prototype.toggleMute=function(){this.setVolume(this.muted?100:0)},e.prototype.setVolume=function(t){var e=this;t=Math.min(100,Math.max(t,0)),this.intendedVolume=t,this.persistConfig&&u.Config.persist("volume",t);var n=function(){e.container.isReady?e.container.setVolume(t):e.listenToOnce(e.container,d["default"].CONTAINER_READY,(function(){e.container.setVolume(t)}))};this.container?n():this.listenToOnce(this,d["default"].MEDIACONTROL_CONTAINERCHANGED,(function(){n()}))},e.prototype.toggleFullscreen=function(){this.trigger(d["default"].MEDIACONTROL_FULLSCREEN,this.name),this.container.fullscreen(),this.resetUserKeepVisible()},e.prototype.setContainer=function(t){this.container&&this.stopListening(this.container),_["default"].off(this.options.playerId+":"+d["default"].PLAYER_RESIZE,this.playerResize,this),this.container=t,this.setVolume(this.intendedVolume),this.changeTogglePlay(),this.addEventListeners(),this.settingsUpdate(),this.container.trigger(d["default"].CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.container.mediaControlDisabled&&this.disable(),this.trigger(d["default"].MEDIACONTROL_CONTAINERCHANGED)},e.prototype.showVolumeBar=function(){this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.$volumeBarContainer.removeClass("volume-bar-hide")},e.prototype.hideVolumeBar=function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?400:arguments[0];this.$volumeBarContainer&&(this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return t.hideVolumeBar()}),e):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){return t.$volumeBarContainer.addClass("volume-bar-hide")}),e)))},e.prototype.ended=function(){this.changeTogglePlay()},e.prototype.updateProgressBar=function(t){var e=t.start/t.total*100,n=t.current/t.total*100;this.$seekBarLoaded.css({left:e+"%",width:n-e+"%"})},e.prototype.onTimeUpdate=function(t){if(!this.draggingSeekBar){var e=t.current<0?t.total:t.current;this.currentPositionValue=e,this.currentDurationValue=t.total,this.renderSeekBar()}},e.prototype.renderSeekBar=function(){if(null!==this.currentPositionValue&&null!==this.currentDurationValue){this.currentSeekBarPercentage=100,(this.container.getPlaybackType()!==w["default"].LIVE||this.container.isDvrInUse())&&(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage);var t=(0,u.formatTime)(this.currentPositionValue),e=(0,u.formatTime)(this.currentDurationValue);t!==this.displayedPosition&&(this.$position.text(t),this.displayedPosition=t),e!==this.displayedDuration&&(this.$duration.text(e),this.displayedDuration=e)}},e.prototype.seek=function(t){if(this.container.settings.seekEnabled){var e=t.pageX-this.$seekBarContainer.offset().left,n=e/this.$seekBarContainer.width()*100;return n=Math.min(100,Math.max(n,0)),this.container.seekPercentage(n),this.setSeekPercentage(n),!1}},e.prototype.setKeepVisible=function(){this.keepVisible=!0},e.prototype.resetKeepVisible=function(){this.keepVisible=!1},e.prototype.setUserKeepVisible=function(){this.userKeepVisible=!0},e.prototype.resetUserKeepVisible=function(){this.userKeepVisible=!1},e.prototype.isVisible=function(){return!this.$el.hasClass("media-control-hide")},e.prototype.show=function(t){var e=this;if(!this.disabled){var n=2e3;(!t||t.clientX!==this.lastMouseX&&t.clientY!==this.lastMouseY||navigator.userAgent.match(/firefox/i))&&(clearTimeout(this.hideId),this.$el.show(),this.trigger(d["default"].MEDIACONTROL_SHOW,this.name),this.$el.removeClass("media-control-hide"),this.hideId=setTimeout((function(){return e.hide()}),n),t&&(this.lastMouseX=t.clientX,this.lastMouseY=t.clientY))}},e.prototype.hide=function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],n=e||2e3;clearTimeout(this.hideId),this.isVisible()&&!1!==this.options.hideMediaControl&&(e||this.userKeepVisible||this.keepVisible||this.draggingSeekBar||this.draggingVolumeBar?this.hideId=setTimeout((function(){return t.hide()}),n):(this.trigger(d["default"].MEDIACONTROL_HIDE,this.name),this.$el.addClass("media-control-hide"),this.hideVolumeBar(0)))},e.prototype.settingsUpdate=function(){var t=JSON.stringify(this.settings)!==JSON.stringify(this.container.settings);this.container.getPlaybackType()&&t&&(this.settings=x["default"].extend({},this.container.settings),this.render())},e.prototype.highDefinitionUpdate=function(t){var e=t?"addClass":"removeClass";this.$hdIndicator[e]("enabled")},e.prototype.createCachedElements=function(){var t=this.$el.find(".media-control-layer");this.$duration=t.find(".media-control-indicator[data-duration]"),this.$fullscreenToggle=t.find("button.media-control-button[data-fullscreen]"),this.$playPauseToggle=t.find("button.media-control-button[data-playpause]"),this.$playStopToggle=t.find("button.media-control-button[data-playstop]"),this.$position=t.find(".media-control-indicator[data-position]"),this.$seekBarContainer=t.find(".bar-container[data-seekbar]"),this.$seekBarHover=t.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=t.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=t.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=t.find(".bar-scrubber[data-seekbar]"),this.$volumeBarContainer=t.find(".bar-container[data-volume]"),this.$volumeContainer=t.find(".drawer-container[data-volume]"),this.$volumeIcon=t.find(".drawer-icon[data-volume]"),this.$volumeBarBackground=this.$el.find(".bar-background[data-volume]"),this.$volumeBarFill=this.$el.find(".bar-fill-1[data-volume]"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber[data-volume]"),this.$hdIndicator=this.$el.find("button.media-control-button[data-hd-indicator]"),this.resetIndicators(),this.initializeIcons()},e.prototype.resetIndicators=function(){this.displayedPosition=this.$position.text(),this.displayedDuration=this.$duration.text()},e.prototype.initializeIcons=function(){var t=this.$el.find(".media-control-layer");t.find("button.media-control-button[data-play]").append(P["default"]),t.find("button.media-control-button[data-pause]").append(D["default"]),t.find("button.media-control-button[data-stop]").append(N["default"]),this.$playPauseToggle.append(P["default"]),this.$playStopToggle.append(P["default"]),this.$volumeIcon.append(B["default"]),this.$fullscreenToggle.append(G["default"]),this.$hdIndicator.append($["default"])},e.prototype.setSeekPercentage=function(t){t=Math.max(Math.min(t,100),0),this.displayedSeekBarPercentage!==t&&(this.displayedSeekBarPercentage=t,this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition"),this.$seekBarPosition.css({width:t+"%"}),this.$seekBarScrubber.css({left:t+"%"}))},e.prototype.seekRelative=function(t){if(this.container.settings.seekEnabled){var e=this.container.getCurrentTime(),n=this.container.getDuration(),r=Math.min(Math.max(e+t,0),n);r=Math.min(100*r/n,100),this.container.seekPercentage(r)}},e.prototype.bindKeyEvents=function(){var t=this;this.unbindKeyEvents(),this.kibo=new c.Kibo(this.options.focusElement),this.kibo.down(["space"],(function(){return t.togglePlayPause()})),this.kibo.down(["left"],(function(){return t.seekRelative(-15)})),this.kibo.down(["right"],(function(){return t.seekRelative(15)}));var e=[1,2,3,4,5,6,7,8,9,0];e.forEach((function(e){t.kibo.down(e.toString(),(function(){return t.container.settings.seekEnabled&&t.container.seekPercentage(10*e)}))}))},e.prototype.unbindKeyEvents=function(){this.kibo&&(this.kibo.off("space"),this.kibo.off("left"),this.kibo.off("right"),this.kibo.off([1,2,3,4,5,6,7,8,9,0]))},e.prototype.parseColors=function(){if(this.options.mediacontrol){this.buttonsColor=this.options.mediacontrol.buttons;var t=this.options.mediacontrol.seekbar;this.$el.find(".bar-fill-2[data-seekbar]").css("background-color",t),this.$el.find(".media-control-icon svg path").css("fill",this.buttonsColor),this.$el.find(".segmented-bar-element[data-volume]").css("boxShadow","inset 2px 0 0 "+this.buttonsColor)}},e.prototype.applyButtonStyle=function(t){this.buttonsColor&&t&&(0,x["default"])(t).find("svg path").css("fill",this.buttonsColor)},e.prototype.destroy=function(){this.remove(),(0,x["default"])(document).unbind("mouseup",this.stopDragHandler),(0,x["default"])(document).unbind("mousemove",this.updateDragHandler),this.unbindKeyEvents()},e.prototype.render=function(){var t=this,e=1e3;this.$el.html(this.template({settings:this.settings})),this.$el.append(this.stylesheet),this.createCachedElements(),this.$playPauseToggle.addClass("paused"),this.$playStopToggle.addClass("stopped"),this.changeTogglePlay(),this.hideId=setTimeout((function(){return t.hide()}),e),this.disabled&&this.hide(),y["default"].isSafari&&y["default"].isMobile&&this.$volumeContainer.css("display","none"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition");var n=0;return this.displayedSeekBarPercentage&&(n=this.displayedSeekBarPercentage),this.displayedSeekBarPercentage=null,this.setSeekPercentage(n),r.nextTick((function(){t.container.settings.seekEnabled||t.$seekBarContainer.addClass("seek-disabled"),t.options.disableKeyboardShortcuts||t.bindKeyEvents(),t.playerResize({width:t.options.width,height:t.options.height}),t.hideVolumeBar(0)})),this.parseColors(),this.highDefinitionUpdate(),this.rendered=!0,this.updateVolumeUI(),this.trigger(d["default"].MEDIACONTROL_RENDERED),this},e}(m["default"]);e["default"]=W,W.extend=function(t){return(0,u.extend)(W,t)},t.exports=e["default"]}).call(e,n(34))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(13),c=r(u),h=n(1),d=r(h),f=n(11),p=r(f),g=n(97),m=r(g),v=n(37),y=r(v),b=n(21),_=r(b),E=n(6),A=r(E),T=n(15),w=r(T),S=(0,l.currentScriptUrl)().replace(/\/[^\/]+$/,""),x=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n)),o={playerId:(0,l.uniqueId)(""),persistConfig:!0,width:640,height:360,baseUrl:S,allowUserInteraction:p["default"].isMobile};return r.options=A["default"].extend(o,n),r.options.sources=r._normalizeSources(n),r.options.chromeless||(r.options.allowUserInteraction=!0),r.options.allowUserInteraction||(r.options.disableKeyboardShortcuts=!0),r._registerOptionEventListeners(),r._coreFactory=new m["default"](r),r.playerInfo=_["default"].getInstance(r.options.playerId),r.playerInfo.currentSize={width:n.width,height:n.height},r.playerInfo.options=r.options,r.options.parentId?r.setParentId(r.options.parentId):r.options.parent&&r.attachTo(r.options.parent),r}return o(e,t),s(e,[{key:"loader",set:function(t){this._loader=t},get:function(){return this._loader||(this._loader=new y["default"](this.options.plugins||{},this.options.playerId)),this._loader}},{key:"ended",get:function(){return this.core.mediaControl.container.ended}},{key:"buffering",get:function(){return this.core.mediaControl.container.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:d["default"].PLAYER_READY,onResize:d["default"].PLAYER_RESIZE,onPlay:d["default"].PLAYER_PLAY,onPause:d["default"].PLAYER_PAUSE,onStop:d["default"].PLAYER_STOP,onEnded:d["default"].PLAYER_ENDED,onSeek:d["default"].PLAYER_SEEK,onError:d["default"].PLAYER_ERROR,onTimeUpdate:d["default"].PLAYER_TIMEUPDATE,onVolumeUpdate:d["default"].PLAYER_VOLUMEUPDATE}}}]),e.prototype.setParentId=function(t){var e=document.querySelector(t);return e&&this.attachTo(e),this},e.prototype.attachTo=function(t){return this.options.parentElement=t,this.core=this._coreFactory.create(),this._addEventListeners(),this},e.prototype._addEventListeners=function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,d["default"].CORE_READY,this._onReady),this.listenTo(this.core.mediaControl,d["default"].MEDIACONTROL_CONTAINERCHANGED,this._containerChanged),this.listenTo(this.core,d["default"].CORE_FULLSCREEN,this._onFullscreenChange),this},e.prototype._addContainerEventListeners=function(){var t=this.core.mediaControl.container;return t&&(this.listenTo(t,d["default"].CONTAINER_PLAY,this._onPlay),this.listenTo(t,d["default"].CONTAINER_PAUSE,this._onPause),this.listenTo(t,d["default"].CONTAINER_STOP,this._onStop),this.listenTo(t,d["default"].CONTAINER_ENDED,this._onEnded),this.listenTo(t,d["default"].CONTAINER_SEEK,this._onSeek),this.listenTo(t,d["default"].CONTAINER_ERROR,this._onError),this.listenTo(t,d["default"].CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(t,d["default"].CONTAINER_VOLUME,this._onVolumeUpdate)),this},e.prototype._registerOptionEventListeners=function(){var t=this,e=this.options.events||{};return Object.keys(e).forEach((function(n){var r=t.eventsMapping[n];if(r){var i=e[n];i="function"==typeof i&&i,i&&t.on(r,i)}})),this},e.prototype._containerChanged=function(){this.stopListening(),this._addEventListeners()},e.prototype._onReady=function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(d["default"].PLAYER_READY)},e.prototype._onFullscreenChange=function(t){this.trigger(d["default"].PLAYER_FULLSCREEN,t)},e.prototype._onVolumeUpdate=function(t){this.trigger(d["default"].PLAYER_VOLUMEUPDATE,t)},e.prototype._onPlay=function(){this.trigger(d["default"].PLAYER_PLAY)},e.prototype._onPause=function(){this.trigger(d["default"].PLAYER_PAUSE)},e.prototype._onStop=function(){this.trigger(d["default"].PLAYER_STOP,this.getCurrentTime())},e.prototype._onEnded=function(){this.trigger(d["default"].PLAYER_ENDED)},e.prototype._onSeek=function(t){this.trigger(d["default"].PLAYER_SEEK,t)},e.prototype._onTimeUpdate=function(t){this.trigger(d["default"].PLAYER_TIMEUPDATE,t)},e.prototype._onError=function(t){this.trigger(d["default"].PLAYER_ERROR,t)},e.prototype.is=function(t,e){return t.constructor===e},e.prototype._normalizeSources=function(t){var e=t.sources||(void 0!==t.source?[t.source]:[]);return 0===e.length?[{source:"",mimeType:""}]:e},e.prototype.resize=function(t){return this.core.resize(t),this},e.prototype.load=function(t,e,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(t,e),this},e.prototype.destroy=function(){return this.core.destroy(),this},e.prototype.play=function(){return this.core.mediaControl.container.play(),this},e.prototype.pause=function(){return this.core.mediaControl.container.pause(),this},e.prototype.stop=function(){return this.core.mediaControl.container.stop(),this},e.prototype.seek=function(t){return this.core.mediaControl.container.seek(t),this},e.prototype.seekPercentage=function(t){return this.core.mediaControl.container.seekPercentage(t),this},e.prototype.setVolume=function(t){return this.core&&this.core.mediaControl&&this.core.mediaControl.setVolume(t),this},e.prototype.getVolume=function(){return this.core&&this.core.mediaControl?this.core.mediaControl.volume:0},e.prototype.mute=function(){return this._mutedVolume=this.getVolume(),this.setVolume(0),this},e.prototype.unmute=function(){return this.setVolume("number"==typeof this._mutedVolume?this._mutedVolume:100),this._mutedVolume=null,this},e.prototype.isPlaying=function(){return this.core.mediaControl.container.isPlaying()},e.prototype.isDvrEnabled=function(){return this.core.mediaControl.container.isDvrEnabled()},e.prototype.isDvrInUse=function(){return this.core.mediaControl.container.isDvrInUse()},e.prototype.configure=function(t){return this.core.configure(t),this},e.prototype.getPlugin=function(t){var e=this.core.plugins.concat(this.core.mediaControl.container.plugins);return(0,w["default"])(e,(function(e){return e.name===t}))},e.prototype.getCurrentTime=function(){return this.core.mediaControl.container.getCurrentTime()},e.prototype.getStartTimeOffset=function(){return this.core.mediaControl.container.getStartTimeOffset()},e.prototype.getDuration=function(){return this.core.mediaControl.container.getDuration()},e}(c["default"]);e["default"]=x,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(7),u=r(l),c=n(8),h=r(c),d=n(9),f=r(d),p=n(11),g=r(p),m=n(144),v=r(m),y=n(134),b=r(y),_="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",E=function(t){function e(){return i(this,e),a(this,t.apply(this,arguments))}return o(e,t),e.prototype.setElement=function(t){this.$el=t,this.el=t[0]},e.prototype._setupFirefox=function(){var t=this.$("embed");t.attr("data-flash-playback",this.name),t.addClass(this.attributes["class"]),this.setElement(t)},e.prototype.render=function(){return this.$el.html(this.template({cid:this.cid,swfPath:this.swfPath,baseUrl:this.baseUrl,playbackId:this.uniqueId,wmode:this.wmode,callbackName:"window.Clappr.flashlsCallbacks."+this.cid})),g["default"].isIE&&(this.$("embed").remove(),g["default"].isLegacyIE&&this.$el.attr("classid",_)),g["default"].isFirefox&&this._setupFirefox(),this.el.id=this.cid,this.$el.append(h["default"].getStyleFor(b["default"])),this},s(e,[{key:"tagName",get:function(){return"object"}},{key:"swfPath",get:function(){return""}},{key:"wmode",get:function(){return"transparent"}},{key:"template",get:function(){return(0,f["default"])(v["default"])}},{key:"attributes",get:function(){var t="application/x-shockwave-flash";return g["default"].isLegacyIE&&(t=""),{class:"clappr-flash-playback",type:t,width:"100%",height:"100%","data-flash-playback":this.name}}}]),e}(u["default"]);e["default"]=E,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(24),c=r(u),h=n(11),d=r(h),f=n(16),p=r(f),g=n(9),m=r(g),v=n(6),y=r(v),b=n(1),_=r(b),E=n(7),A=r(E),T=n(159),w=r(T),S=60,x=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r._src=n.src,r._baseUrl=n.baseUrl,r._autoPlay=n.autoPlay,r.settings={default:["seekbar"]},r.settings.left=["playpause","position","duration"],r.settings.right=["fullscreen","volume"],r.settings.seekEnabled=!0,r._isReadyState=!1,r._addListeners(),r}return o(e,t),s(e,[{key:"name",get:function(){return"flash"}},{key:"swfPath",get:function(){return(0,m["default"])(w["default"])({baseUrl:this._baseUrl})}},{key:"ended",get:function(){return"ENDED"===this._currentState}},{key:"buffering",get:function(){return!!this._bufferingState&&"ENDED"!==this._currentState}}]),e.prototype._bootstrap=function(){var t=this;this.el.playerPlay?(this.el.width="100%",this.el.height="100%","PLAYING"===this._currentState?this._firstPlay():(this._currentState="IDLE",this._autoPlay&&this.play()),(0,y["default"])('<div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" />').insertAfter(this.$el),this.getDuration()>0?this._metadataLoaded():p["default"].once(this.uniqueId+":timeupdate",this._metadataLoaded,this)):(this._attempts=this._attempts||0,++this._attempts<=S?setTimeout((function(){return t._bootstrap()}),50):this.trigger(_["default"].PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},e.prototype._metadataLoaded=function(){this._isReadyState=!0,this.trigger(_["default"].PLAYBACK_READY,this.name),this.trigger(_["default"].PLAYBACK_SETTINGSUPDATE,this.name)},e.prototype.getPlaybackType=function(){return A["default"].VOD},e.prototype.isHighDefinitionInUse=function(){return!1},e.prototype._updateTime=function(){this.trigger(_["default"].PLAYBACK_TIMEUPDATE,{current:this.el.getPosition(),total:this.el.getDuration()},this.name)},e.prototype._addListeners=function(){p["default"].on(this.uniqueId+":progress",this._progress,this),p["default"].on(this.uniqueId+":timeupdate",this._updateTime,this),p["default"].on(this.uniqueId+":statechanged",this._checkState,this),p["default"].on(this.uniqueId+":flashready",this._bootstrap,this)},e.prototype.stopListening=function(){t.prototype.stopListening.call(this),p["default"].off(this.uniqueId+":progress"),p["default"].off(this.uniqueId+":timeupdate"),p["default"].off(this.uniqueId+":statechanged"),p["default"].off(this.uniqueId+":flashready")},e.prototype._checkState=function(){this._isIdle||"PAUSED"===this._currentState||("PLAYING_BUFFERING"!==this._currentState&&"PLAYING_BUFFERING"===this.el.getState()?(this._bufferingState=!0,this.trigger(_["default"].PLAYBACK_BUFFERING,this.name),this._currentState="PLAYING_BUFFERING"):"PLAYING"===this.el.getState()?(this._bufferingState=!1,this.trigger(_["default"].PLAYBACK_BUFFERFULL,this.name),this._currentState="PLAYING"):"IDLE"===this.el.getState()?this._currentState="IDLE":"ENDED"===this.el.getState()&&(this.trigger(_["default"].PLAYBACK_ENDED,this.name),this.trigger(_["default"].PLAYBACK_TIMEUPDATE,{current:0,total:this.el.getDuration()},this.name),this._currentState="ENDED",this._isIdle=!0))},e.prototype._progress=function(){"IDLE"!==this._currentState&&"ENDED"!==this._currentState&&this.trigger(_["default"].PLAYBACK_PROGRESS,{start:0,current:this.el.getBytesLoaded(),total:this.el.getBytesTotal()})},e.prototype._firstPlay=function(){var t=this;this.el.playerPlay?(this._isIdle=!1,this.el.playerPlay(this._src),this.listenToOnce(this,_["default"].PLAYBACK_BUFFERFULL,(function(){return t._checkInitialSeek()})),this._currentState="PLAYING"):this.listenToOnce(this,_["default"].PLAYBACK_READY,this._firstPlay)},e.prototype._checkInitialSeek=function(){var t=(0,l.seekStringToSeconds)(window.location.href);0!==t&&this.seekSeconds(t)},e.prototype.play=function(){this.trigger(_["default"].PLAYBACK_PLAY_INTENT),"PAUSED"===this._currentState||"PLAYING_BUFFERING"===this._currentState?(this._currentState="PLAYING",this.el.playerResume(),this.trigger(_["default"].PLAYBACK_PLAY,this.name)):"PLAYING"!==this._currentState&&(this._firstPlay(),this.trigger(_["default"].PLAYBACK_PLAY,this.name))},e.prototype.volume=function(t){var e=this;this.isReady?this.el.playerVolume(t):this.listenToOnce(this,_["default"].PLAYBACK_BUFFERFULL,(function(){return e.volume(t)}))},e.prototype.pause=function(){this._currentState="PAUSED",this.el.playerPause(),this.trigger(_["default"].PLAYBACK_PAUSE,this.name)},e.prototype.stop=function(){this.el.playerStop(),this.trigger(_["default"].PLAYBACK_STOP),this.trigger(_["default"].PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},e.prototype.isPlaying=function(){return!!(this.isReady&&this._currentState.indexOf("PLAYING")>-1)},e.prototype.getDuration=function(){return this.el.getDuration()},e.prototype.seekPercentage=function(t){var e=this;if(this.el.getDuration()>0){var n=this.el.getDuration()*(t/100);this.seek(n)}else this.listenToOnce(this,_["default"].PLAYBACK_BUFFERFULL,(function(){return e.seekPercentage(t)}))},e.prototype.seek=function(t){var e=this;this.isReady&&this.el.playerSeek?(this.el.playerSeek(t),this.trigger(_["default"].PLAYBACK_TIMEUPDATE,{current:t,total:this.el.getDuration()},this.name),"PAUSED"===this._currentState&&this.el.playerPause()):this.listenToOnce(this,_["default"].PLAYBACK_BUFFERFULL,(function(){return e.seek(t)}))},e.prototype.destroy=function(){clearInterval(this.bootstrapId),t.prototype.stopListening.call(this),this.$el.remove()},s(e,[{key:"isReady",get:function(){return this._isReadyState}}]),e}(c["default"]);e["default"]=x,x.canPlay=function(t){if(d["default"].hasFlash&&t&&t.constructor===String){var e=t.split("?")[0].match(/.*\.(.*)$/)||[];return e.length>1&&!d["default"].isMobile&&e[1].match(/^(mp4|mov|f4v|3gpp|3gp)$/)}return!1},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(24),u=r(l),c=n(1),h=r(c),d=n(9),f=r(d),p=n(7),g=r(p),m=n(16),v=r(m),y=n(11),b=r(y),_=n(104),E=r(_),A=n(160),T=r(A),w=n(6),S=r(w),x=60,L=-1,M=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r._src=n.src,r._baseUrl=n.baseUrl,r._initHlsParameters(n),r.highDefinition=!1,r._autoPlay=n.autoPlay,r._loop=n.loop,r._defaultSettings={left:["playstop"],default:["seekbar"],right:["fullscreen","volume","hd-indicator"],seekEnabled:!1},r.settings=S["default"].extend({},r._defaultSettings),r._playbackType=g["default"].LIVE,r._hasEnded=!1,r._addListeners(),r}return o(e,t),s(e,[{key:"name",get:function(){return"flashls"}},{key:"swfPath",get:function(){return(0,f["default"])(T["default"])({baseUrl:this._baseUrl})}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?L:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(h["default"].PLAYBACK_LEVEL_SWITCH_START),this.el.playerSetCurrentLevel(t)}},{key:"ended",get:function(){return this._hasEnded}},{key:"buffering",get:function(){return!!this._bufferingState&&!this._hasEnded}}]),e.prototype._initHlsParameters=function(t){this._autoStartLoad=void 0===t.autoStartLoad||t.autoStartLoad,this._capLevelToStage=void 0!==t.capLevelToStage&&t.capLevelToStage,this._maxLevelCappingMode=void 0===t.maxLevelCappingMode?"downscale":t.maxLevelCappingMode,this._minBufferLength=void 0===t.minBufferLength?-1:t.minBufferLength,this._minBufferLengthCapping=void 0===t.minBufferLengthCapping?-1:t.minBufferLengthCapping,this._maxBufferLength=void 0===t.maxBufferLength?120:t.maxBufferLength,this._maxBackBufferLength=void 0===t.maxBackBufferLength?30:t.maxBackBufferLength,this._lowBufferLength=void 0===t.lowBufferLength?3:t.lowBufferLength,this._mediaTimePeriod=void 0===t.mediaTimePeriod?100:t.mediaTimePeriod,this._fpsDroppedMonitoringPeriod=void 0===t.fpsDroppedMonitoringPeriod?5e3:t.fpsDroppedMonitoringPeriod,this._fpsDroppedMonitoringThreshold=void 0===t.fpsDroppedMonitoringThreshold?.2:t.fpsDroppedMonitoringThreshold,this._capLevelonFPSDrop=void 0!==t.capLevelonFPSDrop&&t.capLevelonFPSDrop,this._smoothAutoSwitchonFPSDrop=void 0===t.smoothAutoSwitchonFPSDrop?this.capLevelonFPSDrop:t.smoothAutoSwitchonFPSDrop,this._switchDownOnLevelError=void 0===t.switchDownOnLevelError||t.switchDownOnLevelError,this._seekMode=void 0===t.seekMode?"ACCURATE":t.seekMode,this._keyLoadMaxRetry=void 0===t.keyLoadMaxRetry?3:t.keyLoadMaxRetry,this._keyLoadMaxRetryTimeout=void 0===t.keyLoadMaxRetryTimeout?64e3:t.keyLoadMaxRetryTimeout,this._fragmentLoadMaxRetry=void 0===t.fragmentLoadMaxRetry?3:t.fragmentLoadMaxRetry,this._fragmentLoadMaxRetryTimeout=void 0===t.fragmentLoadMaxRetryTimeout?4e3:t.fragmentLoadMaxRetryTimeout,this._fragmentLoadSkipAfterMaxRetry=void 0===t.fragmentLoadSkipAfterMaxRetry||t.fragmentLoadSkipAfterMaxRetry,this._maxSkippedFragments=void 0===t.maxSkippedFragments?5:t.maxSkippedFragments,this._flushLiveURLCache=void 0!==t.flushLiveURLCache&&t.flushLiveURLCache,this._initialLiveManifestSize=void 0===t.initialLiveManifestSize?1:t.initialLiveManifestSize,this._manifestLoadMaxRetry=void 0===t.manifestLoadMaxRetry?3:t.manifestLoadMaxRetry,this._manifestLoadMaxRetryTimeout=void 0===t.manifestLoadMaxRetryTimeout?64e3:t.manifestLoadMaxRetryTimeout,this._manifestRedundantLoadmaxRetry=void 0===t.manifestRedundantLoadmaxRetry?3:t.manifestRedundantLoadmaxRetry,this._startFromBitrate=void 0===t.startFromBitrate?-1:t.startFromBitrate,this._startFromLevel=void 0===t.startFromLevel?-1:t.startFromLevel,this._autoStartMaxDuration=void 0===t.autoStartMaxDuration?-1:t.autoStartMaxDuration,this._seekFromLevel=void 0===t.seekFromLevel?-1:t.seekFromLevel,this._useHardwareVideoDecoder=void 0!==t.useHardwareVideoDecoder&&t.useHardwareVideoDecoder,this._hlsLogEnabled=void 0===t.hlsLogEnabled||t.hlsLogEnabled,this._logDebug=void 0!==t.logDebug&&t.logDebug,this._logDebug2=void 0!==t.logDebug2&&t.logDebug2,this._logWarn=void 0===t.logWarn||t.logWarn,this._logError=void 0===t.logError||t.logError,this._hlsMinimumDvrSize=void 0===t.hlsMinimumDvrSize?60:t.hlsMinimumDvrSize},e.prototype._addListeners=function(){var t=this;v["default"].on(this.cid+":flashready",(function(){return t._bootstrap()})),v["default"].on(this.cid+":timeupdate",(function(e){return t._updateTime(e)})),v["default"].on(this.cid+":playbackstate",(function(e){return t._setPlaybackState(e)})),v["default"].on(this.cid+":levelchanged",(function(e){return t._levelChanged(e)})),v["default"].on(this.cid+":error",(function(e,n,r){return t._flashPlaybackError(e,n,r)})),v["default"].on(this.cid+":fragmentloaded",(function(e){return t._onFragmentLoaded(e)})),v["default"].on(this.cid+":levelendlist",(function(e){return t._onLevelEndlist(e)}))},e.prototype.stopListening=function(){t.prototype.stopListening.call(this),v["default"].off(this.cid+":flashready"),v["default"].off(this.cid+":timeupdate"),v["default"].off(this.cid+":playbackstate"),v["default"].off(this.cid+":levelchanged"),v["default"].off(this.cid+":playbackerror"),v["default"].off(this.cid+":fragmentloaded"),v["default"].off(this.cid+":manifestloaded"),v["default"].off(this.cid+":levelendlist")},e.prototype._bootstrap=function(){var t=this;this.el.playerLoad?(this.el.width="100%",this.el.height="100%",this._isReadyState=!0,this._srcLoaded=!1,this._currentState="IDLE",this._setFlashSettings(),this._updatePlaybackType(),(this._autoPlay||this._shouldPlayOnManifestLoaded)&&this.play(),this.trigger(h["default"].PLAYBACK_READY,this.name)):(this._bootstrapAttempts=this._bootstrapAttempts||0,++this._bootstrapAttempts<=x?setTimeout((function(){return t._bootstrap()}),50):this.trigger(h["default"].PLAYBACK_ERROR,{message:"Max number of attempts reached"},this.name))},e.prototype._setFlashSettings=function(){this.el.playerSetAutoStartLoad(this._autoStartLoad),this.el.playerSetCapLevelToStage(this._capLevelToStage),this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode),this.el.playerSetMinBufferLength(this._minBufferLength),this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping),this.el.playerSetMaxBufferLength(this._maxBufferLength),this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength),this.el.playerSetLowBufferLength(this._lowBufferLength),this.el.playerSetMediaTimePeriod(this._mediaTimePeriod),this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod),this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold),this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop),this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop),this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError),this.el.playerSetSeekMode(this._seekMode),this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry),this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout),this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry),this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout),this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry),this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments),this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache),this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize),this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry),this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout),this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry),this.el.playerSetStartFromBitrate(this._startFromBitrate),this.el.playerSetStartFromLevel(this._startFromLevel),this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration),this.el.playerSetSeekFromLevel(this._seekFromLevel),this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder),this.el.playerSetLogInfo(this._hlsLogEnabled),this.el.playerSetLogDebug(this._logDebug),this.el.playerSetLogDebug2(this._logDebug2),this.el.playerSetLogWarn(this._logWarn),this.el.playerSetLogError(this._logError)},e.prototype.setAutoStartLoad=function(t){this._autoStartLoad=t,this.el.playerSetAutoStartLoad(this._autoStartLoad)},e.prototype.setCapLevelToStage=function(t){this._capLevelToStage=t,this.el.playerSetCapLevelToStage(this._capLevelToStage)},e.prototype.setMaxLevelCappingMode=function(t){this._maxLevelCappingMode=t,this.el.playerSetMaxLevelCappingMode(this._maxLevelCappingMode)},e.prototype.setSetMinBufferLength=function(t){this._minBufferLength=t,this.el.playerSetMinBufferLength(this._minBufferLength)},e.prototype.setMinBufferLengthCapping=function(t){this._minBufferLengthCapping=t,this.el.playerSetMinBufferLengthCapping(this._minBufferLengthCapping)},e.prototype.setMaxBufferLength=function(t){this._maxBufferLength=t,this.el.playerSetMaxBufferLength(this._maxBufferLength)},e.prototype.setMaxBackBufferLength=function(t){this._maxBackBufferLength=t,this.el.playerSetMaxBackBufferLength(this._maxBackBufferLength)},e.prototype.setLowBufferLength=function(t){this._lowBufferLength=t,this.el.playerSetLowBufferLength(this._lowBufferLength)},e.prototype.setMediaTimePeriod=function(t){this._mediaTimePeriod=t,this.el.playerSetMediaTimePeriod(this._mediaTimePeriod)},e.prototype.setFpsDroppedMonitoringPeriod=function(t){this._fpsDroppedMonitoringPeriod=t,this.el.playerSetFpsDroppedMonitoringPeriod(this._fpsDroppedMonitoringPeriod)},e.prototype.setFpsDroppedMonitoringThreshold=function(t){this._fpsDroppedMonitoringThreshold=t,this.el.playerSetFpsDroppedMonitoringThreshold(this._fpsDroppedMonitoringThreshold)},e.prototype.setCapLevelonFPSDrop=function(t){this._capLevelonFPSDrop=t,this.el.playerSetCapLevelonFPSDrop(this._capLevelonFPSDrop)},e.prototype.setSmoothAutoSwitchonFPSDrop=function(t){this._smoothAutoSwitchonFPSDrop=t,this.el.playerSetSmoothAutoSwitchonFPSDrop(this._smoothAutoSwitchonFPSDrop)},e.prototype.setSwitchDownOnLevelError=function(t){this._switchDownOnLevelError=t,this.el.playerSetSwitchDownOnLevelError(this._switchDownOnLevelError)},e.prototype.setSeekMode=function(t){this._seekMode=t,this.el.playerSetSeekMode(this._seekMode)},e.prototype.setKeyLoadMaxRetry=function(t){this._keyLoadMaxRetry=t,this.el.playerSetKeyLoadMaxRetry(this._keyLoadMaxRetry)},e.prototype.setKeyLoadMaxRetryTimeout=function(t){this._keyLoadMaxRetryTimeout=t,this.el.playerSetKeyLoadMaxRetryTimeout(this._keyLoadMaxRetryTimeout)},e.prototype.setFragmentLoadMaxRetry=function(t){this._fragmentLoadMaxRetry=t,this.el.playerSetFragmentLoadMaxRetry(this._fragmentLoadMaxRetry)},e.prototype.setFragmentLoadMaxRetryTimeout=function(t){this._fragmentLoadMaxRetryTimeout=t,this.el.playerSetFragmentLoadMaxRetryTimeout(this._fragmentLoadMaxRetryTimeout)},e.prototype.setFragmentLoadSkipAfterMaxRetry=function(t){this._fragmentLoadSkipAfterMaxRetry=t,this.el.playerSetFragmentLoadSkipAfterMaxRetry(this._fragmentLoadSkipAfterMaxRetry)},e.prototype.setMaxSkippedFragments=function(t){this._maxSkippedFragments=t,this.el.playerSetMaxSkippedFragments(this._maxSkippedFragments)},e.prototype.setFlushLiveURLCache=function(t){this._flushLiveURLCache=t,this.el.playerSetFlushLiveURLCache(this._flushLiveURLCache)},e.prototype.setInitialLiveManifestSize=function(t){this._initialLiveManifestSize=t,this.el.playerSetInitialLiveManifestSize(this._initialLiveManifestSize)},e.prototype.setManifestLoadMaxRetry=function(t){this._manifestLoadMaxRetry=t,this.el.playerSetManifestLoadMaxRetry(this._manifestLoadMaxRetry)},e.prototype.setManifestLoadMaxRetryTimeout=function(t){this._manifestLoadMaxRetryTimeout=t,this.el.playerSetManifestLoadMaxRetryTimeout(this._manifestLoadMaxRetryTimeout)},e.prototype.setManifestRedundantLoadmaxRetry=function(t){this._manifestRedundantLoadmaxRetry=t,this.el.playerSetManifestRedundantLoadmaxRetry(this._manifestRedundantLoadmaxRetry)},e.prototype.setStartFromBitrate=function(t){this._startFromBitrate=t,this.el.playerSetStartFromBitrate(this._startFromBitrate)},e.prototype.setStartFromLevel=function(t){this._startFromLevel=t,this.el.playerSetStartFromLevel(this._startFromLevel)},e.prototype.setAutoStartMaxDuration=function(t){this._autoStartMaxDuration=t,this.el.playerSetAutoStartMaxDuration(this._autoStartMaxDuration)},e.prototype.setSeekFromLevel=function(t){this._seekFromLevel=t,this.el.playerSetSeekFromLevel(this._seekFromLevel)},e.prototype.setUseHardwareVideoDecoder=function(t){this._useHardwareVideoDecoder=t,this.el.playerSetUseHardwareVideoDecoder(this._useHardwareVideoDecoder)},e.prototype.setSetLogInfo=function(t){this._hlsLogEnabled=t,this.el.playerSetLogInfo(this._hlsLogEnabled)},e.prototype.setLogDebug=function(t){this._logDebug=t,this.el.playerSetLogDebug(this._logDebug)},e.prototype.setLogDebug2=function(t){this._logDebug2=t,this.el.playerSetLogDebug2(this._logDebug2)},e.prototype.setLogWarn=function(t){this._logWarn=t,this.el.playerSetLogWarn(this._logWarn)},e.prototype.setLogError=function(t){this._logError=t,this.el.playerSetLogError(this._logError)},e.prototype._levelChanged=function(t){var e=this.el.getLevels()[t];e&&(this.highDefinition=e.height>=720||e.bitrate/1e3>=2e3,this.trigger(h["default"].PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this._levels&&0!==this._levels.length||this._fillLevels(),this.trigger(h["default"].PLAYBACK_BITRATE,{height:e.height,width:e.width,bandwidth:e.bandwidth,bitrate:e.bitrate,level:t}),this.trigger(h["default"].PLAYBACK_LEVEL_SWITCH_END))},e.prototype._updateTime=function(t){if("IDLE"!==this._currentState){var e=this._normalizeDuration(t.duration),n=Math.min(Math.max(t.position,0),e),r=this._dvrEnabled,i=this._playbackType===g["default"].LIVE;this._dvrEnabled=i&&e>this._hlsMinimumDvrSize,100!==e&&void 0!==i&&(this._dvrEnabled!==r&&(this._updateSettings(),this.trigger(h["default"].PLAYBACK_SETTINGSUPDATE,this.name)),!i||this._dvrEnabled&&this._dvrInUse||(n=e),this.trigger(h["default"].PLAYBACK_TIMEUPDATE,{current:n,total:e},this.name))}},e.prototype.play=function(){this.trigger(h["default"].PLAYBACK_PLAY_INTENT),"PAUSED"===this._currentState?this.el.playerResume():this._srcLoaded||"PLAYING"===this._currentState?this.el.playerPlay():this._firstPlay()},e.prototype.getPlaybackType=function(){return this._playbackType?this._playbackType:null},e.prototype.getCurrentLevelIndex=function(){return this._currentLevel},e.prototype.getCurrentLevel=function(){return this.levels[this.currentLevel]},e.prototype.getCurrentBitrate=function(){return this.levels[this.currentLevel].bitrate},e.prototype.setCurrentLevel=function(t){this.currentLevel=t},e.prototype.isHighDefinitionInUse=function(){return this.highDefinition},e.prototype.getLevels=function(){return this.levels},e.prototype._setPlaybackState=function(t){["PLAYING_BUFFERING","PAUSED_BUFFERING"].indexOf(t)>=0?(this._bufferingState=!0,this.trigger(h["default"].PLAYBACK_BUFFERING,this.name),this._updateCurrentState(t)):["PLAYING","PAUSED"].indexOf(t)>=0?(["PLAYING_BUFFERING","PAUSED_BUFFERING","IDLE"].indexOf(this._currentState)>=0&&(this._bufferingState=!1,this.trigger(h["default"].PLAYBACK_BUFFERFULL,this.name)),this._updateCurrentState(t)):"IDLE"===t&&(this._srcLoaded=!1,this._loop&&["PLAYING_BUFFERING","PLAYING"].indexOf(this._currentState)>=0?(this.play(),this.seek(0)):(this._updateCurrentState(t),this._hasEnded=!0,this.trigger(h["default"].PLAYBACK_TIMEUPDATE,{current:0,total:this.getDuration()},this.name),this.trigger(h["default"].PLAYBACK_ENDED,this.name)))},e.prototype._updateCurrentState=function(t){this._currentState=t,"IDLE"!==t&&(this._hasEnded=!1),this._updatePlaybackType(),"PLAYING"===t?this.trigger(h["default"].PLAYBACK_PLAY,this.name):"PAUSED"===t&&this.trigger(h["default"].PLAYBACK_PAUSE,this.name)},e.prototype._updatePlaybackType=function(){this._playbackType=this.el.getType(),this._playbackType&&(this._playbackType=this._playbackType.toLowerCase(),this._playbackType===g["default"].VOD?this._startReportingProgress():this._stopReportingProgress()),this.trigger(h["default"].PLAYBACK_PLAYBACKSTATE,{type:this._playbackType})},e.prototype._startReportingProgress=function(){this._reportingProgress||(this._reportingProgress=!0)},e.prototype._stopReportingProgress=function(){this._reportingProgress=!1},e.prototype._onFragmentLoaded=function(t){if(this.trigger(h["default"].PLAYBACK_FRAGMENT_LOADED,t),this._reportingProgress&&this.el.getPosition){var e=this.el.getPosition()+this.el.getbufferLength();this.trigger(h["default"].PLAYBACK_PROGRESS,{start:this.el.getPosition(),current:e,total:this.el.getDuration()})}},e.prototype._onLevelEndlist=function(){this._updatePlaybackType()},e.prototype._firstPlay=function(){var t=this;this._shouldPlayOnManifestLoaded=!0,this.el.playerLoad&&(v["default"].once(this.cid+":manifestloaded",(function(e,n){return t._manifestLoaded(e,n)})),this._setFlashSettings(),this.el.playerLoad(this._src),this._srcLoaded=!0)},e.prototype.volume=function(t){var e=this;this.isReady?this.el.playerVolume(t):this.listenToOnce(this,h["default"].PLAYBACK_BUFFERFULL,(function(){return e.volume(t)}))},e.prototype.pause=function(){(this._playbackType!==g["default"].LIVE||this._dvrEnabled)&&(this.el.playerPause(),this._playbackType===g["default"].LIVE&&this._dvrEnabled&&this._updateDvr(!0))},e.prototype.stop=function(){this._srcLoaded=!1,this.el.playerStop(),this.trigger(h["default"].PLAYBACK_STOP),this.trigger(h["default"].PLAYBACK_TIMEUPDATE,{current:0,total:0},this.name)},e.prototype.isPlaying=function(){return!!this._currentState&&!!this._currentState.match(/playing/i)},e.prototype.getDuration=function(){return this._normalizeDuration(this.el.getDuration())},e.prototype._normalizeDuration=function(t){return this._playbackType===g["default"].LIVE&&(t=Math.max(0,t-10)),t},e.prototype.seekPercentage=function(t){var e=this.el.getDuration(),n=0;t>0&&(n=e*t/100),this.seek(n)},e.prototype.seek=function(t){var e=this.getDuration();if(this._playbackType===g["default"].LIVE){var n=e-t>3;this._updateDvr(n)}this.el.playerSeek(t),this.trigger(h["default"].PLAYBACK_TIMEUPDATE,{current:t,total:e},this.name)},e.prototype._updateDvr=function(t){var e=!!this._dvrInUse;this._dvrInUse=t,this._dvrInUse!==e&&(this._updateSettings(),this.trigger(h["default"].PLAYBACK_DVR,this._dvrInUse),this.trigger(h["default"].PLAYBACK_STATS_ADD,{dvr:this._dvrInUse}))},e.prototype._flashPlaybackError=function(t,e,n){this.trigger(h["default"].PLAYBACK_ERROR,{code:t,url:e,message:n}),this.trigger(h["default"].PLAYBACK_STOP)},e.prototype._manifestLoaded=function(t,e){this._shouldPlayOnManifestLoaded&&(this._shouldPlayOnManifestLoaded=!1,this.el.playerPlay()),this._fillLevels(),this.trigger(h["default"].PLAYBACK_LOADEDMETADATA,{duration:t,data:e})},e.prototype._fillLevels=function(){var t=this.el.getLevels(),e=t.length;this._levels=[];for(var n=0;n<e;n++)this._levels.push({id:n,label:t[n].height+"p",level:t[n]});this.trigger(h["default"].PLAYBACK_LEVELS_AVAILABLE,this._levels)},e.prototype.destroy=function(){this.stopListening(),this.$el.remove()},e.prototype._updateSettings=function(){this.settings=S["default"].extend({},this._defaultSettings),this._playbackType===g["default"].VOD||this._dvrInUse?(this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=!0):this._dvrEnabled?(this.settings.left=["playpause"],this.settings.seekEnabled=!0):this.settings.seekEnabled=!1},e.prototype._createCallbacks=function(){var t=this;window.Clappr||(window.Clappr={}),window.Clappr.flashlsCallbacks||(window.Clappr.flashlsCallbacks={}),this.flashlsEvents=new E["default"](this.cid),window.Clappr.flashlsCallbacks[this.cid]=function(e,n){t.flashlsEvents[e].apply(t.flashlsEvents,n)}},e.prototype.render=function(){return t.prototype.render.call(this),this._createCallbacks(),this},s(e,[{key:"isReady",get:function(){return this._isReadyState}}]),e}(u["default"]);e["default"]=M,M.canPlay=function(t,e){var n=t.split("?")[0].match(/.*\.(.*)$/)||[];return b["default"].hasFlash&&(n.length>1&&"m3u8"===n[1]||"application/x-mpegURL"===e||"application/vnd.apple.mpegurl"===e)},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=n(16),o=r(a),s=function(){function t(e){i(this,t),this.instanceId=e}return t.prototype.ready=function(){o["default"].trigger(this.instanceId+":flashready")},t.prototype.videoSize=function(t,e){o["default"].trigger(this.instanceId+":videosizechanged",t,e)},t.prototype.complete=function(){o["default"].trigger(this.instanceId+":complete")},t.prototype.error=function(t,e,n){o["default"].trigger(this.instanceId+":error",t,e,n)},t.prototype.manifest=function(t,e){o["default"].trigger(this.instanceId+":manifestloaded",t,e)},t.prototype.audioLevelLoaded=function(t){o["default"].trigger(this.instanceId+":audiolevelloaded",t)},t.prototype.levelLoaded=function(t){o["default"].trigger(this.instanceId+":levelloaded",t)},t.prototype.levelEndlist=function(t){o["default"].trigger(this.instanceId+":levelendlist",t)},t.prototype.fragmentLoaded=function(t){o["default"].trigger(this.instanceId+":fragmentloaded",t)},t.prototype.fragmentPlaying=function(t){o["default"].trigger(this.instanceId+":fragmentplaying",t)},t.prototype.position=function(t){o["default"].trigger(this.instanceId+":timeupdate",t)},t.prototype.state=function(t){o["default"].trigger(this.instanceId+":playbackstate",t)},t.prototype.seekState=function(t){o["default"].trigger(this.instanceId+":seekstate",t)},t.prototype["switch"]=function(t){o["default"].trigger(this.instanceId+":levelchanged",t)},t.prototype.audioTracksListChange=function(t){o["default"].trigger(this.instanceId+":audiotracklistchanged",t)},t.prototype.audioTrackChange=function(t){o["default"].trigger(this.instanceId+":audiotrackchanged",t)},t}();e["default"]=s,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(22),u=r(l),c=n(66),h=r(c),d=n(1),f=r(d),p=n(7),g=r(p),m=n(11),v=r(m),y=n(25),b=r(y),_=-1,E=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r._minDvrSize=void 0===n.hlsMinimumDvrSize?60:n.hlsMinimumDvrSize,r._playbackType=g["default"].VOD,r._playableRegionStartTime=0,r._playableRegionDuration=0,r._durationExcludesAfterLiveSyncPoint=!1,n.autoPlay&&r._setupHls(),r._recoverAttemptsRemaining=n.hlsRecoverAttempts||16,r}return o(e,t),s(e,[{key:"name",get:function(){return"hls"}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?_:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(f["default"].PLAYBACK_LEVEL_SWITCH_START),this._hls.currentLevel=this._currentLevel}}]),e.prototype._setupHls=function(){var t=this;this._hls=new h["default"](this._options.hlsjsConfig||{}),this._hls.on(h["default"].Events.MEDIA_ATTACHED,(function(){return t._hls.loadSource(t._options.src)})),this._hls.on(h["default"].Events.LEVEL_LOADED,(function(e,n){return t._updatePlaybackType(e,n)})),this._hls.on(h["default"].Events.LEVEL_UPDATED,(function(e,n){return t._onLevelUpdated(e,n)})),this._hls.on(h["default"].Events.LEVEL_SWITCH,(function(e,n){return t._onLevelSwitch(e,n)})),this._hls.on(h["default"].Events.FRAG_LOADED,(function(e,n){return t._onFragmentLoaded(e,n)})),this._hls.on(h["default"].Events.ERROR,(function(e,n){return t._onHLSJSError(e,n)})),this._hls.attachMedia(this.el)},e.prototype._recover=function(t,e){this._recoveredDecodingError?this._recoveredAudioCodecError?(b["default"].error("hlsjs: failed to recover"),this.trigger(f["default"].PLAYBACK_ERROR,"hlsjs: could not recover from error, evt "+t+", data "+e+" ",this.name)):(this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError()):(this._recoveredDecodingError=!0,this._hls.recoverMediaError())},e.prototype._setupSrc=function(t){},e.prototype.getDuration=function(){return this._playableRegionDuration},e.prototype.getCurrentTime=function(){return this.el.currentTime-this._playableRegionStartTime},e.prototype.getStartTimeOffset=function(){return this._playableRegionStartTime},e.prototype.seekPercentage=function(t){var e=this._playableRegionDuration;t>0&&(e=this._playableRegionDuration*(t/100)),this.seek(e)},e.prototype.seek=function(e){e<0&&(b["default"].warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this._playableRegionStartTime,t.prototype.seek.call(this,e)},e.prototype.seekToLivePoint=function(){this.seek(this.getDuration())},e.prototype._updateDvr=function(t){this.trigger(f["default"].PLAYBACK_DVR,t),this.trigger(f["default"].PLAYBACK_STATS_ADD,{dvr:t})},e.prototype._updateSettings=function(){this._playbackType===g["default"].VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(f["default"].PLAYBACK_SETTINGSUPDATE)},e.prototype._onHLSJSError=function(t,e){if(e.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,e.type){case h["default"].ErrorTypes.NETWORK_ERROR:b["default"].warn("hlsjs: trying to recover from network error, evt "+t+", data "+e+" "),this._hls.startLoad();break;case h["default"].ErrorTypes.MEDIA_ERROR:b["default"].warn("hlsjs: trying to recover from media error, evt "+t+", data "+e+" "),this._recover(t,e);break;default:b["default"].error("hlsjs: trying to recover from error, evt "+t+", data "+e+" "),this.trigger(f["default"].PLAYBACK_ERROR,"hlsjs: could not recover from error, evt "+t+", data "+e+" ",this.name)}else b["default"].error("hlsjs: could not recover from error after maximum number of attempts, evt "+t+", data "+e+" "),this.trigger(f["default"].PLAYBACK_ERROR,{evt:t,data:e},this.name);else b["default"].warn("hlsjs: non-fatal error occurred, evt "+t+", data "+e+" ")},e.prototype._onTimeUpdate=function(){this.trigger(f["default"].PLAYBACK_TIMEUPDATE,{current:this.getCurrentTime(),total:this.getDuration()},this.name)},e.prototype._onProgress=function(){if(this.el.buffered.length){for(var t=0,e=0;e<this.el.buffered.length;e++)if(this.el.currentTime>=this.el.buffered.start(e)&&this.el.currentTime<=this.el.buffered.end(e)){t=e;break}this.trigger(f["default"].PLAYBACK_PROGRESS,{start:Math.max(0,this.el.buffered.start(t)-this._playableRegionStartTime),current:Math.max(0,this.el.buffered.end(t)-this._playableRegionStartTime),total:this.getDuration()})}},e.prototype.play=function(){this._hls||this._setupHls(),t.prototype.play.call(this)},e.prototype.pause=function(){this._hls&&(t.prototype.pause.call(this),this.dvrEnabled&&this._updateDvr(!0))},e.prototype.stop=function(){this._hls&&(t.prototype.stop.call(this),this._hls.destroy(),delete this._hls)},e.prototype._updatePlaybackType=function(t,e){this._playbackType=e.details.live?g["default"].LIVE:g["default"].VOD,this._fillLevels(),this._onLevelUpdated(t,e)},e.prototype._fillLevels=function(){this._levels=this._hls.levels.map((function(t,e){return{id:e,level:t,label:t.bitrate/1e3+"Kbps"}})),this.trigger(f["default"].PLAYBACK_LEVELS_AVAILABLE,this._levels)},e.prototype._onLevelUpdated=function(t,e){var n=!1,r=!1,i=e.details.fragments;i.length>0&&this._playableRegionStartTime!==i[0].start&&(n=!0,this._playableRegionStartTime=i[0].start);var a=e.details.totalduration;if(this._playbackType===g["default"].LIVE){var o=this._hls.levels[e.level],s=o.details.targetduration,l=this._options.hlsjsConfig||{},u=l.liveSyncDurationCount||h["default"].DefaultConfig.liveSyncDurationCount,c=s*u;c<=a?(a-=c,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}a!==this._playableRegionDuration&&(r=!0,this._playableRegionDuration=a),r&&this._onDurationChange(),n&&this._onProgress()},e.prototype._onFragmentLoaded=function(t,e){this.trigger(f["default"].PLAYBACK_FRAGMENT_LOADED,e)},e.prototype._onLevelSwitch=function(t,e){this.levels.length||this._fillLevels(),this.trigger(f["default"].PLAYBACK_LEVEL_SWITCH_END),this.trigger(f["default"].PLAYBACK_LEVEL_SWITCH,e);var n=this._hls.levels[e.level];n&&(this.highDefinition=n.height>=720||n.bitrate/1e3>=2e3,this.trigger(f["default"].PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(f["default"].PLAYBACK_BITRATE,{height:n.height,width:n.width,bandwidth:n.bandwidth,bitrate:n.bitrate,level:e.level}))},e.prototype.getPlaybackType=function(){return this._playbackType},e.prototype.isSeekEnabled=function(){return this._playbackType===g["default"].VOD||this.dvrEnabled},s(e,[{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._playableRegionDuration>=this._minDvrSize&&this.getPlaybackType()===g["default"].LIVE}}]),e}(u["default"]);e["default"]=E,E.canPlay=function(t,e){var n=t.split("?")[0].match(/.*\.(.*)$/)||[],r=n.length>1&&"m3u8"===n[1]||"application/x-mpegURL"===e||"application/vnd.apple.mpegurl"===e;return!(!h["default"].isSupported()||!r||v["default"].isSafari)},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),u=r(l),c=n(7),h=r(c),d=n(22),f=r(d),p=function(t){function e(){return i(this,e),a(this,t.apply(this,arguments))}return o(e,t),e.prototype.updateSettings=function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(u["default"].PLAYBACK_SETTINGSUPDATE)},e.prototype.getPlaybackType=function(){return h["default"].AOD},s(e,[{key:"name",get:function(){return"html5_audio"}},{key:"tagName",get:function(){return"audio"}}]),e}(f["default"]);e["default"]=p,p.canPlay=function(t,e){var n={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]};return f["default"]._canPlay("audio",n,t,e)},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(7),c=r(u),h=n(9),d=r(h),f=n(8),p=r(f),g=n(11),m=r(g),v=n(1),y=r(v),b=n(135),_=r(b),E=n(145),A=r(E),T=n(15),w=r(T),S=n(6),x=r(S),L={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(t){return'video/mp4; codecs="'+t+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};L.ogv=L.ogg,L["3gp"]=L["3gpp"];var M=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));r._loadStarted=!1,r._playheadMoving=!1,r._playheadMovingTimer=null,r._stopped=!1,r._options=n,r._setupSrc(n.src);var o=n.playbackConfig||{},s=o.preload||(m["default"].isSafari?"auto":n.preload);return x["default"].extend(r.el,{loop:n.loop,autoplay:n.autoPlay,poster:n.poster,preload:s||"metadata",controls:o.controls||n.useVideoTagDefaultControls,crossOrigin:o.crossOrigin}),r.settings={default:["seekbar"]},r.settings.left=["playpause","position","duration"],r.settings.right=["fullscreen","volume","hd-indicator"],r}return o(e,t),s(e,[{key:"name",get:function(){return"html5_video"}},{key:"tagName",get:function(){return"video"}},{key:"template",get:function(){return(0,d["default"])(A["default"])}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeked:"_handleBufferingEvents",seeking:"_handleBufferingEvents",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return!!this._bufferingState}}]),e.prototype._setupSrc=function(t){this._src=t,this.el.src=t},e.prototype._onLoadedMetadata=function(t){this._handleBufferingEvents(),this.trigger(y["default"].PLAYBACK_LOADEDMETADATA,{duration:t.target.duration,data:t}),this._updateSettings();var e="undefined"==typeof this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==c["default"].LIVE&&e&&this._checkInitialSeek()},e.prototype._onDurationChange=function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()},e.prototype._updateSettings=function(){this.getPlaybackType()===c["default"].VOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(y["default"].PLAYBACK_SETTINGSUPDATE)},e.prototype.isSeekEnabled=function(){return isFinite(this.getDuration())},e.prototype.getPlaybackType=function(){return[0,void 0,1/0].indexOf(this.el.duration)>=0?c["default"].LIVE:c["default"].VOD},e.prototype.isHighDefinitionInUse=function(){return!1},e.prototype.play=function(){this.trigger(y["default"].PLAYBACK_PLAY_INTENT),this._stopped=!1,this._handleBufferingEvents(),this.el.play()},e.prototype.pause=function(){this.el.pause()},e.prototype.stop=function(){this.pause(),this._stopped=!0,this.el.currentTime=0,this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(y["default"].PLAYBACK_STOP)},e.prototype.volume=function(t){this.el.volume=t/100},e.prototype.mute=function(){this.el.volume=0},e.prototype.unmute=function(){this.el.volume=1},e.prototype.isMuted=function(){return!!this.el.volume},e.prototype.isPlaying=function(){return!this.el.paused&&!this.el.ended},e.prototype._startPlayheadMovingChecks=function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))},e.prototype._stopPlayheadMovingChecks=function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)},e.prototype._determineIfPlayheadMoving=function(){var t=this._playheadMovingTimeOnCheck,e=this.el.currentTime;this._playheadMoving=t!==e,this._playheadMovingTimeOnCheck=e,this._handleBufferingEvents()},e.prototype._onWaiting=function(){this._loadStarted=!0,this._handleBufferingEvents()},e.prototype._onLoadedData=function(){this._loadStarted=!0,this._handleBufferingEvents()},e.prototype._onCanPlay=function(){this._handleBufferingEvents()},e.prototype._onPlaying=function(){this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(y["default"].PLAYBACK_PLAY)},e.prototype._onPause=function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(y["default"].PLAYBACK_PAUSE)},e.prototype._onEnded=function(){this._handleBufferingEvents(),this.trigger(y["default"].PLAYBACK_ENDED,this.name)},e.prototype._handleBufferingEvents=function(){var t=!this.el.ended&&!this.el.paused,e=this._loadStarted&&!this.el.ended&&!this.stopped&&(t&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._bufferingState!==e&&(this._bufferingState=e,e?this.trigger(y["default"].PLAYBACK_BUFFERING,this.name):this.trigger(y["default"].PLAYBACK_BUFFERFULL,this.name))},e.prototype._onError=function(){this.trigger(y["default"].PLAYBACK_ERROR,this.el.error,this.name)},e.prototype.destroy=function(){this.$el.remove(),this.el.src="",this._src=null},e.prototype.seek=function(t){this.el.currentTime=t},e.prototype.seekPercentage=function(t){var e=this.el.duration*(t/100);this.seek(e)},e.prototype._checkInitialSeek=function(){var t=(0,l.seekStringToSeconds)(window.location.href);0!==t&&this.seek(t)},e.prototype.getCurrentTime=function(){return this.el.currentTime},e.prototype.getDuration=function(){return this.el.duration},e.prototype._onTimeUpdate=function(){this._handleBufferingEvents(),this.getPlaybackType()===c["default"].LIVE?this.trigger(y["default"].PLAYBACK_TIMEUPDATE,{current:1,total:1},this.name):this.trigger(y["default"].PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:this.el.duration},this.name)},e.prototype._onProgress=function(){if(this.el.buffered.length){for(var t=0,e=0;e<this.el.buffered.length;e++)if(this.el.currentTime>=this.el.buffered.start(e)&&this.el.currentTime<=this.el.buffered.end(e)){t=e;break}this.trigger(y["default"].PLAYBACK_PROGRESS,{start:this.el.buffered.start(t),current:this.el.buffered.end(t),total:this.el.duration})}},e.prototype._typeFor=function(t){var e=t.split("?")[0].match(/.*\.(.*)$/)||[],n=e.length>1&&"m3u8"===e[1];return n?"application/vnd.apple.mpegurl":"video/mp4"},e.prototype._ready=function(){this._isReadyState||(this._isReadyState=!0,this.trigger(y["default"].PLAYBACK_READY,this.name))},e.prototype.render=function(){var t=p["default"].getStyleFor(_["default"]);return this._src&&this.$el.html(this.template({src:this._src,type:this._typeFor(this._src)})),this._options.useVideoTagDefaultControls&&this.$el.attr("controls","controls"),this._options.disableVideoTagContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this.$el.append(t),this._ready(),this},s(e,[{key:"isReady",get:function(){return this._isReadyState}}]),e}(c["default"]);e["default"]=M,M._canPlay=function(t,e,n,r){var i=(n.split("?")[0].match(/.*\.(.*)$/)||[])[1],a=r||e[i]||[];a=a.constructor===Array?a:[a];var o=document.createElement(t);return!!(0,w["default"])(a,(function(t){return!!o.canPlayType(t).replace(/no/,"")}))},M.canPlay=function(t,e){return M._canPlay("video",L,t,e)},t.exports=M,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(7),u=r(l),c=n(8),h=r(c),d=n(136),f=r(d),p=n(1),g=r(p),m=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.el.src=n.src,r}return o(e,t),e.prototype.getPlaybackType=function(){return u["default"].NO_OP},s(e,[{key:"name",get:function(){return"html_img"}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}}]),e.prototype.render=function(){var t=h["default"].getStyleFor(f["default"]);return this.$el.append(t),this.trigger(g["default"].PLAYBACK_READY,this.name),this},e.prototype._onLoad=function(){this.trigger(g["default"].PLAYBACK_ENDED,this.name)},e.prototype._onError=function(t){var e="error"===t.type?"load error":"loading aborted";this.trigger(g["default"].PLAYBACK_ERROR,{message:e},this.name)},e}(u["default"]);e["default"]=m,m.canPlay=function(t){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(t)},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(7),c=r(u),h=n(9),d=r(h),f=n(8),p=r(f),g=n(1),m=r(g),v=n(137),y=r(v),b=n(146),_=r(b),E=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.options=n,r._noiseFrameNum=-1,r}return o(e,t),e.prototype._getNoOpMessage=function(){var t={en:"Your browser does not support the playback of this video. Please try using a different browser.",es:"Su navegador no soporta la reproduccin de un video. Por favor, trate de usar un navegador diferente.",pt:"Seu navegador no supporta a reproduo deste video. Por favor, tente usar um navegador diferente."};t["en-us"]=t.en,t["es-419"]=t.es,t["pt-br"]=t.pt;var e=(0,l.getBrowserLanguage)();return e&&t[e]||t.en},s(e,[{key:"name",get:function(){return"no_op"}},{key:"template",get:function(){return(0,d["default"])(_["default"])}},{key:"attributes",get:function(){return{"data-no-op":""}}}]),e.prototype.render=function(){var t=p["default"].getStyleFor(y["default"]);return this.$el.html(this.template({message:this.options.playbackNotSupportedMessage||this._getNoOpMessage()})),this.$el.append(t),this._animate(),this.trigger(m["default"].PLAYBACK_READY,this.name),this},e.prototype._noise=function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height),e=void 0;try{e=new Uint32Array(t.data.buffer)}catch(n){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var r=t.data,i=0;i<r.length;i++)e[i]=r[i]}for(var a=e.length,o=0,s=0,l=6*Math.random()+4,u=0;u<a;){if(o<0){o=l*Math.random();var c=Math.pow(Math.random(),.4);s=255*c<<24}o-=1,e[u++]=s}this.context.putImageData(t,0,0)}},e.prototype._loop=function(){var t=this;this._stop||(this._noise(),this._animationHandle=(0,l.requestAnimationFrame)((function(){return t._loop()})))},e.prototype.destroy=function(){this._animationHandle&&((0,l.cancelAnimationFrame)(this._animationHandle),this._stop=!0)},e.prototype._animate=function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()},e}(c["default"]);e["default"]=E,E.canPlay=function(t){return!0},t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(18),u=r(l),c=n(1),h=r(c),d=n(7),f=r(d),p=function(t){function e(n){return i(this,e),a(this,t.call(this,n))}return o(e,t),s(e,[{key:"name",get:function(){return"click_to_pause"}}]),e.prototype.bindEvents=function(){this.listenTo(this.container,h["default"].CONTAINER_CLICK,this.click),this.listenTo(this.container,h["default"].CONTAINER_SETTINGSUPDATE,this.settingsUpdate)},e.prototype.click=function(){(this.container.getPlaybackType()!==f["default"].LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause():this.container.play())},e.prototype.settingsUpdate=function(){this.container.$el.removeClass("pointer-enabled"),(this.container.getPlaybackType()!==f["default"].LIVE||this.container.isDvrEnabled())&&this.container.$el.addClass("pointer-enabled")},e}(u["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(110)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(23),u=r(l),c=n(9),h=r(c),d=n(7),f=r(d),p=n(8),g=r(p),m=n(1),v=r(m),y=n(138),b=r(y),_=n(147),E=r(_),A=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.core=n,r.settingsUpdate(),r}return o(e,t),s(e,[{key:"template",get:function(){return(0,h["default"])(E["default"])}},{key:"name",get:function(){return"dvr_controls"}},{key:"events",get:function(){return{"click .live-button":"click"}}},{key:"attributes",get:function(){return{class:"dvr-controls","data-dvr-controls":""}}}]),e.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,v["default"].MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.listenTo(this.core.mediaControl,v["default"].MEDIACONTROL_RENDERED,this.settingsUpdate),this.listenTo(this.core,v["default"].CORE_OPTIONS_CHANGE,this.render),this.core.getCurrentContainer()&&(this.listenToOnce(this.core.getCurrentContainer(),v["default"].CONTAINER_TIMEUPDATE,this.render),this.listenTo(this.core.getCurrentContainer(),v["default"].CONTAINER_PLAYBACKDVRSTATECHANGED,this.dvrChanged))},e.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},e.prototype.dvrChanged=function(t){this.settingsUpdate(),this.core.mediaControl.$el.addClass("live"),t?(this.core.mediaControl.$el.addClass("dvr"),this.core.mediaControl.$el.find(".media-control-indicator[data-position], .media-control-indicator[data-duration]").hide()):this.core.mediaControl.$el.removeClass("dvr")},e.prototype.click=function(){var t=this.core.mediaControl,e=t.container;e.isPlaying()||e.play(),t.$el.hasClass("dvr")&&e.seek(e.getDuration())},e.prototype.settingsUpdate=function(){var t=this;this.stopListening(),this.shouldRender()&&(this.render(),this.$el.click((function(){return t.click()}))),this.bindEvents()},e.prototype.shouldRender=function(){var t=void 0===this.core.options.useDvrControls||!!this.core.options.useDvrControls;return t&&this.core.getPlaybackType()===f["default"].LIVE},e.prototype.render=function(){return this.style=this.style||g["default"].getStyleFor(b["default"],{baseUrl:this.core.options.baseUrl}),this.$el.html(this.template()),this.$el.append(this.style),this.shouldRender()&&(this.core.mediaControl.$el.addClass("live"),this.core.mediaControl.$(".media-control-left-panel[data-media-control]").append(this.$el)),this},e}(u["default"]);e["default"]=A,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(112)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),u=r(l),c=n(19),h=r(c),d=n(3),f=function(t){function e(){return i(this,e),a(this,t.apply(this,arguments))}return o(e,t),e.prototype.bindEvents=function(){this.listenTo(this.core.mediaControl,u["default"].MEDIACONTROL_CONTAINERCHANGED,this.containerChanged);var t=this.core.getCurrentContainer();t&&(this.listenTo(t,u["default"].CONTAINER_ENDED,this.ended),this.listenTo(t,u["default"].CONTAINER_STOP,this.ended))},e.prototype.containerChanged=function(){this.stopListening(),this.bindEvents()},e.prototype.ended=function(){var t="undefined"==typeof this.core.options.exitFullscreenOnEnd||this.core.options.exitFullscreenOnEnd;t&&d.Fullscreen.isFullscreen()&&this.core.toggleFullscreen()},s(e,[{key:"name",get:function(){return"end_video"}}]),e}(h["default"]);e["default"]=f,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(19),u=r(l),c=n(1),h=r(c),d=n(6),f=r(d),p=n(27),g=r(p),m=n(46),v=r(m),y=(0,f["default"])('link[rel="shortcut icon"]'),b=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.configure(),r}return o(e,t),s(e,[{key:"name",get:function(){return"favicon"}},{key:"oldIcon",get:function(){return y}}]),e.prototype.configure=function(){this.core.options.changeFavicon?this.enabled||(this.stopListening(this.core,h["default"].CORE_OPTIONS_CHANGE),this.enable()):this.enabled&&(this.disable(),this.listenTo(this.core,h["default"].CORE_OPTIONS_CHANGE,this.configure))},e.prototype.bindEvents=function(){this.listenTo(this.core,h["default"].CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core.mediaControl,h["default"].MEDIACONTROL_CONTAINERCHANGED,this.containerChanged),this.core.mediaControl.container&&this.containerChanged()},e.prototype.containerChanged=function(){this.stopListening(this.core.mediaControl.container),this.listenTo(this.core.mediaControl.container,h["default"].CONTAINER_PLAY,this.setPlayIcon),this.listenTo(this.core.mediaControl.container,h["default"].CONTAINER_PAUSE,this.setPauseIcon),this.listenTo(this.core.mediaControl.container,h["default"].CONTAINER_STOP,this.resetIcon),this.listenTo(this.core.mediaControl.container,h["default"].CONTAINER_ENDED,this.resetIcon),this.listenTo(this.core.mediaControl.container,h["default"].CONTAINER_ERROR,this.resetIcon),this.resetIcon()},e.prototype.disable=function(){t.prototype.disable.call(this),this.resetIcon()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.resetIcon()},e.prototype.createIcon=function(t){var e=(0,f["default"])("<canvas/>");e[0].width=16,e[0].height=16;var n=e[0].getContext("2d");n.fillStyle="#000";var r=(0,f["default"])(t).find("path").attr("d"),i=new Path2D(r);n.fill(i);var a=(0,f["default"])('<link rel="shortcut icon" type="image/png"/>');return a.attr("href",e[0].toDataURL("image/png")),a},e.prototype.setPlayIcon=function(){this.playIcon||(this.playIcon=this.createIcon(g["default"])),this.changeIcon(this.playIcon)},e.prototype.setPauseIcon=function(){this.pauseIcon||(this.pauseIcon=this.createIcon(v["default"])),this.changeIcon(this.pauseIcon)},e.prototype.resetIcon=function(){(0,f["default"])('link[rel="shortcut icon"]').remove(),(0,f["default"])("head").append(this.oldIcon)},e.prototype.changeIcon=function(t){t&&((0,f["default"])('link[rel="shortcut icon"]').remove(),(0,f["default"])("head").append(t))},e}(u["default"]);e["default"]=b,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(115)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(18),u=r(l),c=n(1),h=r(c),d=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.container.options.gaAccount&&(r.account=r.container.options.gaAccount,r.trackerName=r.container.options.gaTrackerName?r.container.options.gaTrackerName+".":"Clappr.",r.domainName=r.container.options.gaDomainName,r.currentHDState=void 0,r.embedScript()),r}return o(e,t),s(e,[{key:"name",get:function(){return"google_analytics"}}]),e.prototype.embedScript=function(){var t=this;if(window._gat)this.addEventListeners();else{var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("async","async"),e.setAttribute("src","//www.google-analytics.com/ga.js"),e.onload=function(){return t.addEventListeners()},document.body.appendChild(e)}},e.prototype.addEventListeners=function(){var t=this;this.container&&(this.listenTo(this.container,h["default"].CONTAINER_READY,this.onReady),this.listenTo(this.container,h["default"].CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,h["default"].CONTAINER_STOP,this.onStop),this.listenTo(this.container,h["default"].CONTAINER_PAUSE,this.onPause),this.listenTo(this.container,h["default"].CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,h["default"].CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,h["default"].CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,h["default"].CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,h["default"].CONTAINER_ERROR,this.onError),this.listenTo(this.container,h["default"].CONTAINER_PLAYBACKSTATE,this.onPlaybackChanged),this.listenTo(this.container,h["default"].CONTAINER_VOLUME,(function(e){return t.onVolumeChanged(e)})),this.listenTo(this.container,h["default"].CONTAINER_SEEK,(function(e){return t.onSeek(e)})),this.listenTo(this.container,h["default"].CONTAINER_FULL_SCREEN,this.onFullscreen),this.listenTo(this.container,h["default"].CONTAINER_HIGHDEFINITIONUPDATE,this.onHD),this.listenTo(this.container,h["default"].CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVR)),_gaq.push([this.trackerName+"_setAccount",this.account]),this.domainName&&_gaq.push([this.trackerName+"_setDomainName",this.domainName])},e.prototype.onReady=function(){this.push(["Video","Playback",this.container.playback.name])},e.prototype.onPlay=function(){this.push(["Video","Play",this.container.playback.src])},e.prototype.onStop=function(){this.push(["Video","Stop",this.container.playback.src])},e.prototype.onEnded=function(){this.push(["Video","Ended",this.container.playback.src])},e.prototype.onBuffering=function(){this.push(["Video","Buffering",this.container.playback.src])},e.prototype.onBufferFull=function(){this.push(["Video","Bufferfull",this.container.playback.src])},e.prototype.onError=function(){this.push(["Video","Error",this.container.playback.src])},e.prototype.onHD=function(t){var e=t?"ON":"OFF";e!==this.currentHDState&&(this.currentHDState=e,this.push(["Video","HD - "+e,this.container.playback.src]))},e.prototype.onPlaybackChanged=function(t){null!==t.type&&this.push(["Video","Playback Type - "+t.type,this.container.playback.src])},e.prototype.onDVR=function(t){var e=t?"ON":"OFF";this.push(["Interaction","DVR - "+e,this.container.playback.src])},e.prototype.onPause=function(){this.push(["Video","Pause",this.container.playback.src])},e.prototype.onSeek=function(){this.push(["Video","Seek",this.container.playback.src])},e.prototype.onVolumeChanged=function(){this.push(["Interaction","Volume",this.container.playback.src])},e.prototype.onFullscreen=function(){this.push(["Interaction","Fullscreen",this.container.playback.src])},e.prototype.push=function(t){var e=[this.trackerName+"_trackEvent"].concat(t);_gaq.push(e)},e}(u["default"]);e["default"]=d,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(117)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(26),a="font-weight: bold; font-size: 13px;",o="color: #006600;"+a,s="color: #0000ff;"+a,l="color: #ff8000;"+a,u="color: #ff0000;"+a,c=0,h=1,d=2,f=3,p=f,g=[s,o,l,u,u],m=["debug","info","warn","error","disabled"],v=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?h:arguments[0],a=arguments.length<=1||void 0===arguments[1]?p:arguments[1];r(this,t),this.kibo=new i.Kibo,this.kibo.down(["ctrl shift d"],(function(){return e.onOff()})),this.BLACKLIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=n,this.offLevel=a}return t.prototype.debug=function(t){this.log(t,c,Array.prototype.slice.call(arguments,1))},t.prototype.info=function(t){this.log(t,h,Array.prototype.slice.call(arguments,1))},t.prototype.warn=function(t){this.log(t,d,Array.prototype.slice.call(arguments,1))},t.prototype.error=function(t){this.log(t,f,Array.prototype.slice.call(arguments,1))},t.prototype.onOff=function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+m[this.level],l)},t.prototype.level=function(t){this.level=t},t.prototype.log=function(t,e,n){if(!(this.BLACKLIST.indexOf(n[0])>=0||e<this.level)){n||(n=t,t=null);var r="",i=g[e];t&&(r="["+t+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+m[e]+"]"+r,i].concat(n))}},t}();e["default"]=v,v.LEVEL_DEBUG=c,v.LEVEL_INFO=h,v.LEVEL_WARN=d,v.LEVEL_ERROR=f,v.getInstance=function(){return void 0===this._instance&&(this._instance=new this,this._instance.previousLevel=this._instance.level,this._instance.level=this._instance.offLevel),this._instance},v.setLevel=function(t){this.getInstance().level=t},v.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},v.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},v.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},v.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)},t.exports=e["default"]},function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(20),c=i(u),h=n(1),d=i(h),f=n(8),p=i(f),g=n(9),m=i(g),v=n(139),y=i(v),b=n(148),_=i(b),E=n(27),A=i(E),T=function(t){function e(n){a(this,e);var i=o(this,t.call(this,n));return i.hasStartedPlaying=!1,i.playRequested=!1,i.render(),r.nextTick((function(){return i.update()})),i}return s(e,t),l(e,[{key:"name",get:function(){return"poster"}},{key:"template",get:function(){return(0,m["default"])(_["default"])}},{key:"shouldRender",get:function(){return"html_img"!==this.container.playback.name}},{key:"attributes",get:function(){return{class:"player-poster","data-poster":""}}},{key:"events",get:function(){return{click:"clicked"}}}]),e.prototype.bindEvents=function(){this.listenTo(this.container,d["default"].CONTAINER_STOP,this.onStop),this.listenTo(this.container,d["default"].CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,d["default"].CONTAINER_ENDED,this.onStop),this.listenTo(this.container,d["default"].CONTAINER_STATE_BUFFERING,this.update),this.listenTo(this.container,d["default"].CONTAINER_STATE_BUFFERFULL,this.update),this.listenTo(this.container,d["default"].CONTAINER_OPTIONS_CHANGE,this.render)},e.prototype.stopListening=function(){t.prototype.stopListening.call(this)},e.prototype.onPlay=function(){this.hasStartedPlaying=!0,this.update()},e.prototype.onStop=function(){this.hasStartedPlaying=!1,this.playRequested=!1,this.update()},e.prototype.showPlayButton=function(t){!t||this.options.chromeless&&!this.options.allowUserInteraction?(this.$playButton.hide(),this.$el.removeClass("clickable")):(this.$playButton.show(),this.$el.addClass("clickable"))},e.prototype.clicked=function(){return this.options.chromeless&&!this.options.allowUserInteraction||(this.playRequested=!0,this.update(),this.container.play()),!1},e.prototype.shouldHideOnPlay=function(){return!("html5_audio"==this.container.playback.name||this.options.audioOnly)},e.prototype.update=function(){if(this.shouldRender){var t=!this.playRequested&&!this.hasStartedPlaying&&!this.container.buffering;this.showPlayButton(t),this.hasStartedPlaying?(this.container.enableMediaControl(),this.shouldHideOnPlay()&&this.$el.hide()):(this.container.disableMediaControl(),this.$el.show())}},e.prototype.render=function(){if(this.shouldRender){var t=p["default"].getStyleFor(y["default"],{baseUrl:this.options.baseUrl});this.$el.html(this.template()),this.$el.append(t),this.options.poster&&this.$el.css({"background-image":"url("+this.options.poster+")"}),this.container.$el.append(this.el),this.$playWrapper=this.$el.find(".play-wrapper"),this.$playWrapper.append(A["default"]),this.$playButton=this.$playWrapper.find("svg"),this.$playButton.addClass("poster-icon"),this.$playButton.attr("data-poster","");var e=this.options.mediacontrol&&this.options.mediacontrol.buttons;return e&&this.$el.find("svg path").css("fill",e),this.options.mediacontrol&&this.options.mediacontrol.buttons&&(e=this.options.mediacontrol.buttons,this.$playButton.css("color",e)),this.update(),this}},e}(c["default"]);e["default"]=T,t.exports=e["default"]}).call(e,n(34))},function(t,e,n){"use strict";t.exports=n(122)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(3),u=n(23),c=r(u),h=n(8),d=r(h),f=n(9),p=r(f),g=n(1),m=r(g),v=n(7),y=r(v),b=n(140),_=r(b),E=n(149),A=r(E),T=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.hoveringOverSeekBar=!1,r.hoverPosition=null,r.duration=null,r.actualLiveTime=!!r.mediaControl.options.actualLiveTime,r.actualLiveTime&&(r.mediaControl.options.actualLiveServerTime?r.actualLiveServerTimeDiff=(new Date).getTime()-new Date(r.mediaControl.options.actualLiveServerTime).getTime():r.actualLiveServerTimeDiff=0),r}return o(e,t),s(e,[{key:"name",get:function(){return"seek_time"}},{key:"template",get:function(){return(0,p["default"])(A["default"])}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===y["default"].LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.useActualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}}]),e.prototype.bindEvents=function(){this.listenTo(this.mediaControl,m["default"].MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,m["default"].MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,m["default"].MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,m["default"].MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,m["default"].CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,m["default"].CONTAINER_TIMEUPDATE,this.updateDuration))},e.prototype.onContainerChanged=function(){this.stopListening(),this.bindEvents()},e.prototype.updateDuration=function(t){this.duration=t.total,this.update()},e.prototype.showTime=function(t){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(t),this.update()},e.prototype.hideTime=function(){this.hoveringOverSeekBar=!1,this.update()},e.prototype.calculateHoverPosition=function(t){var e=t.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(e/this.mediaControl.$seekBarContainer.width(),0))},e.prototype.getSeekTime=function(){var t=null;if(this.useActualLiveTime){var e=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),n=new Date(e),r=(n-e.setHours(0,0,0,0))/1e3;t=r-this.duration+this.hoverPosition*this.duration,t<0&&(t+=86400)}else t=this.hoverPosition*this.duration;return{seekTime:t,secondsSinceMidnight:r}},e.prototype.update=function(){if(this.rendered)if(this.shouldBeVisible()){var t=this.getSeekTime(),e=(0,l.formatTime)(t.seekTime,this.useActualLiveTime);if(e!==this.displayedSeekTime&&(this.$seekTimeEl.text(e),this.displayedSeekTime=e),this.durationShown){this.$durationEl.show();var n=(0,l.formatTime)(this.actualLiveTime?t.secondsSinceMidnight:this.duration,this.actualLiveTime);n!==this.displayedDuration&&(this.$durationEl.text(n),this.displayedDuration=n)}else this.$durationEl.hide();this.$el.show();var r=this.mediaControl.$seekBarContainer.width(),i=this.$el.width(),a=this.hoverPosition*r;a-=i/2,a=Math.max(0,Math.min(a,r-i)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")},e.prototype.shouldBeVisible=function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration},e.prototype.render=function(){this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null;var t=d["default"].getStyleFor(_["default"]);this.$el.html(this.template()),this.$el.append(t),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()},e}(c["default"]);e["default"]=T,t.exports=e["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(19),u=r(l),c=n(1),h=r(c),d=n(15),f=r(d),p=function(t){function e(){return i(this,e),a(this,t.apply(this,arguments))}return o(e,t),e.prototype.bindEvents=function(){this.listenTo(this.core,h["default"].CORE_CONTAINERS_CREATED,this.onContainersCreated)},e.prototype.onContainersCreated=function(){var t=(0,f["default"])(this.core.containers,(function(t){return"no_op"!==t.playback.name}))||this.core.containers[0];t&&this.core.containers.forEach((function(e){e!==t&&e.destroy()}))},s(e,[{key:"name",get:function(){return"sources"}}]),e}(u["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(125)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(20),u=r(l),c=n(1),h=r(c),d=n(8),f=r(d),p=n(9),g=r(p),m=n(150),v=r(m),y=n(141),b=r(y),_=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.template=(0,g["default"])(v["default"]),r.showTimeout=null,r.listenTo(r.container,h["default"].CONTAINER_STATE_BUFFERING,r.onBuffering),r.listenTo(r.container,h["default"].CONTAINER_STATE_BUFFERFULL,r.onBufferFull),r.listenTo(r.container,h["default"].CONTAINER_STOP,r.onStop),r.listenTo(r.container,h["default"].CONTAINER_ENDED,r.onStop),r.listenTo(r.container,h["default"].CONTAINER_ERROR,r.onStop),r.render(),r}return o(e,t),s(e,[{key:"name",get:function(){return"spinner"}},{key:"attributes",get:function(){return{"data-spinner":"",class:"spinner-three-bounce"}}}]),e.prototype.onBuffering=function(){this.show()},e.prototype.onBufferFull=function(){this.hide()},e.prototype.onStop=function(){this.hide()},e.prototype.show=function(){var t=this;null===this.showTimeout&&(this.showTimeout=setTimeout((function(){return t.$el.show()}),300))},e.prototype.hide=function(){null!==this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.$el.hide()},e.prototype.render=function(){this.$el.html(this.template());var t=f["default"].getStyleFor(b["default"]);return this.container.$el.append(t),this.container.$el.append(this.$el),this.$el.hide(),this.container.buffering&&this.onBuffering(),this},e}(u["default"]);e["default"]=_,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(127)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(18),u=r(l),c=n(1),h=r(c),d=n(6),f=r(d),p=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.setInitialAttrs(),r.reportInterval=r.options.reportInterval||5e3,r.state="IDLE",r}return o(e,t),s(e,[{key:"name",get:function(){return"stats"}}]),e.prototype.bindEvents=function(){this.listenTo(this.container.playback,h["default"].PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,h["default"].CONTAINER_STOP,this.onStop),this.listenTo(this.container,h["default"].CONTAINER_ENDED,this.onStop),this.listenTo(this.container,h["default"].CONTAINER_DESTROYED,this.onStop),this.listenTo(this.container,h["default"].CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,h["default"].CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.listenTo(this.container,h["default"].CONTAINER_STATS_ADD,this.onStatsAdd),this.listenTo(this.container,h["default"].CONTAINER_BITRATE,this.onStatsAdd),this.listenTo(this.container.playback,h["default"].PLAYBACK_STATS_ADD,this.onStatsAdd)},e.prototype.setInitialAttrs=function(){this.firstPlay=!0,this.startupTime=0,this.rebufferingTime=0,this.watchingTime=0,this.rebuffers=0,this.externalMetrics={}},e.prototype.onPlay=function(){this.state="PLAYING",this.watchingTimeInit=Date.now(),this.intervalId||(this.intervalId=setInterval(this.report.bind(this),this.reportInterval))},e.prototype.onStop=function(){clearInterval(this.intervalId),this.report(),this.intervalId=void 0,this.state="STOPPED"},e.prototype.onBuffering=function(){this.firstPlay?this.startupTimeInit=Date.now():this.rebufferingTimeInit=Date.now(),this.state="BUFFERING",this.rebuffers++},e.prototype.onBufferFull=function(){this.firstPlay&&this.startupTimeInit?(this.firstPlay=!1,this.startupTime=Date.now()-this.startupTimeInit,this.watchingTimeInit=Date.now()):this.rebufferingTimeInit&&(this.rebufferingTime+=this.getRebufferingTime()),this.rebufferingTimeInit=void 0,this.state="PLAYING"},e.prototype.getRebufferingTime=function(){return Date.now()-this.rebufferingTimeInit},e.prototype.getWatchingTime=function(){var t=Date.now()-this.watchingTimeInit;return t-this.rebufferingTime},e.prototype.isRebuffering=function(){return!!this.rebufferingTimeInit},e.prototype.onStatsAdd=function(t){f["default"].extend(this.externalMetrics,t)},e.prototype.getStats=function(){var t={startupTime:this.startupTime,rebuffers:this.rebuffers,rebufferingTime:this.isRebuffering()?this.rebufferingTime+this.getRebufferingTime():this.rebufferingTime,watchingTime:this.isRebuffering()?this.getWatchingTime()-this.getRebufferingTime():this.getWatchingTime()};return f["default"].extend(t,this.externalMetrics),t},e.prototype.report=function(){this.container.statsReport(this.getStats())},e}(u["default"]);e["default"]=p,t.exports=e["default"]},function(t,e,n){"use strict";t.exports=n(129)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(20),u=r(l),c=n(1),h=r(c),d=n(8),f=r(d),p=n(9),g=r(p),m=n(142),v=r(m),y=n(151),b=r(y),_=function(t){function e(n){i(this,e);var r=a(this,t.call(this,n));return r.configure(),r}return o(e,t),s(e,[{key:"name",get:function(){return"watermark"}},{key:"template",get:function(){return(0,g["default"])(b["default"])}}]),e.prototype.bindEvents=function(){this.listenTo(this.container,h["default"].CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,h["default"].CONTAINER_STOP,this.onStop),this.listenTo(this.container,h["default"].CONTAINER_OPTIONS_CHANGE,this.configure)},e.prototype.configure=function(){this.position=this.options.position||"bottom-right",this.options.watermark?(this.imageUrl=this.options.watermark,this.imageLink=this.options.watermarkLink,this.render()):this.$el.remove()},e.prototype.onPlay=function(){this.hidden||this.$el.show()},e.prototype.onStop=function(){this.$el.hide()},e.prototype.render=function(){this.$el.hide();var t={position:this.position,imageUrl:this.imageUrl,imageLink:this.imageLink};this.$el.html(this.template(t));var e=f["default"].getStyleFor(v["default"]);return this.container.$el.append(e),this.container.$el.append(this.$el),this},e}(u["default"]);e["default"]=_,t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){this.element=t||window.document,this.initialize()};n.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},n.KEY_CODES_BY_NAME={},function(){for(var t in n.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(n.KEY_NAMES_BY_CODE,t)&&(n.KEY_CODES_BY_NAME[n.KEY_NAMES_BY_CODE[t]]=+t)}(),n.MODIFIERS=["shift","ctrl","alt"],n.registerEvent=function(){return document.addEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:document.attachEvent?function(t,e,n){t.attachEvent("on"+e,n)}:void 0}(),n.unregisterEvent=function(){return document.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1)}:document.detachEvent?function(t,e,n){t.detachEvent("on"+e,n)}:void 0}(),n.stringContains=function(t,e){return-1!==t.indexOf(e)},n.neatString=function(t){return t.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},n.capitalize=function(t){return t.toLowerCase().replace(/^./,(function(t){return t.toUpperCase()}))},n.isString=function(t){return n.stringContains(Object.prototype.toString.call(t),"String")},n.arrayIncludes=function(){return Array.prototype.indexOf?function(t,e){return-1!==t.indexOf(e)}:function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}}(),n.extractModifiers=function(t){var e,r;for(e=[],r=0;r<n.MODIFIERS.length;r++)n.stringContains(t,n.MODIFIERS[r])&&e.push(n.MODIFIERS[r]);return e},n.extractKey=function(t){var e,r;for(e=n.neatString(t).split(" "),r=0;r<e.length;r++)if(!n.arrayIncludes(n.MODIFIERS,e[r]))return e[r]},n.modifiersAndKey=function(t){var e,r;return n.stringContains(t,"any")?n.neatString(t).split(" ").slice(0,2).join(" "):(e=n.extractModifiers(t),r=n.extractKey(t),r&&!n.arrayIncludes(n.MODIFIERS,r)&&e.push(r),e.join(" "))},n.keyName=function(t){return n.KEY_NAMES_BY_CODE[t+""]},n.keyCode=function(t){return+n.KEY_CODES_BY_NAME[t]},n.prototype.initialize=function(){var t,e=this;for(this.lastKeyCode=-1,this.lastModifiers={},t=0;t<n.MODIFIERS.length;t++)this.lastModifiers[n.MODIFIERS[t]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),n.registerEvent(this.element,"keydown",this.downHandler),n.registerEvent(this.element,"keyup",this.upHandler),n.registerEvent(window,"unload",(function t(){n.unregisterEvent(e.element,"keydown",e.downHandler),n.unregisterEvent(e.element,"keyup",e.upHandler),n.unregisterEvent(window,"unload",t)}))},n.prototype.handler=function(t){var e=this;return function(r){var i,a,o;for(r=r||window.event,e.lastKeyCode=r.keyCode,i=0;i<n.MODIFIERS.length;i++)e.lastModifiers[n.MODIFIERS[i]]=r[n.MODIFIERS[i]+"Key"];for(n.arrayIncludes(n.MODIFIERS,n.keyName(e.lastKeyCode))&&(e.lastModifiers[n.keyName(e.lastKeyCode)]=!0),a=e["keys"+n.capitalize(t)],i=0;i<a.any.length;i++)!1===a.any[i](r)&&r.preventDefault&&r.preventDefault();if(o=e.lastModifiersAndKey(),a[o])for(i=0;i<a[o].length;i++)!1===a[o][i](r)&&r.preventDefault&&r.preventDefault()}},n.prototype.registerKeys=function(t,e,r){var i,a,o=this["keys"+n.capitalize(t)];for(n.isString(e)&&(e=[e]),i=0;i<e.length;i++)a=e[i],a=n.modifiersAndKey(a+""),o[a]?o[a].push(r):o[a]=[r];return this},n.prototype.unregisterKeys=function(t,e,r){var i,a,o,s=this["keys"+n.capitalize(t)];for(n.isString(e)&&(e=[e]),i=0;i<e.length;i++)if(o=e[i],o=n.modifiersAndKey(o+""),null===r)delete s[o];else if(s[o])for(a=0;a<s[o].length;a++)if(String(s[o][a])===String(r)){s[o].splice(a,1);break}return this},n.prototype.off=function(t){return this.unregisterKeys("down",t,null)},n.prototype.delegate=function(t,e,n){return null!==n||void 0!==n?this.registerKeys(t,e,n):this.unregisterKeys(t,e,n)},n.prototype.down=function(t,e){return this.delegate("down",t,e)},n.prototype.up=function(t,e){return this.delegate("up",t,e)},n.prototype.lastKey=function(t){return t?this.lastModifiers[t]:n.keyName(this.lastKeyCode)},n.prototype.lastModifiersAndKey=function(){var t,e;for(t=[],e=0;e<n.MODIFIERS.length;e++)this.lastKey(n.MODIFIERS[e])&&t.push(n.MODIFIERS[e]);return n.arrayIncludes(t,this.lastKey())||t.push(this.lastKey()),t.join(" ")},e["default"]=n,t.exports=e["default"]},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,".container[data-container]{position:absolute;background-color:#000;height:100%;width:100%}.container[data-container] .chromeless{cursor:default}[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled{cursor:pointer}",""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,'@font-face{font-family:Roboto;font-style:normal;font-weight:400;src:local("Roboto"),local("Roboto-Regular"),url('+n(158)+') format("truetype")}[data-player]{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-transform:translateZ(0);transform:translateZ(0);position:relative;margin:0;padding:0;border:0;font-style:normal;font-weight:400;text-align:center;overflow:hidden;font-size:100%;font-family:Roboto,Open Sans,Arial,sans-serif;text-shadow:0 0 0;box-sizing:border-box}[data-player] a,[data-player] abbr,[data-player] acronym,[data-player] address,[data-player] applet,[data-player] article,[data-player] aside,[data-player] audio,[data-player] b,[data-player] big,[data-player] blockquote,[data-player] canvas,[data-player] caption,[data-player] center,[data-player] cite,[data-player] code,[data-player] dd,[data-player] del,[data-player] details,[data-player] dfn,[data-player] div,[data-player] dl,[data-player] dt,[data-player] em,[data-player] embed,[data-player] fieldset,[data-player] figcaption,[data-player] figure,[data-player] footer,[data-player] form,[data-player] h1,[data-player] h2,[data-player] h3,[data-player] h4,[data-player] h5,[data-player] h6,[data-player] header,[data-player] hgroup,[data-player] i,[data-player] iframe,[data-player] img,[data-player] ins,[data-player] kbd,[data-player] label,[data-player] legend,[data-player] li,[data-player] mark,[data-player] menu,[data-player] nav,[data-player] object,[data-player] ol,[data-player] output,[data-player] p,[data-player] pre,[data-player] q,[data-player] ruby,[data-player] s,[data-player] samp,[data-player] section,[data-player] small,[data-player] span,[data-player] strike,[data-player] strong,[data-player] sub,[data-player] summary,[data-player] sup,[data-player] table,[data-player] tbody,[data-player] td,[data-player] tfoot,[data-player] th,[data-player] thead,[data-player] time,[data-player] tr,[data-player] tt,[data-player] u,[data-player] ul,[data-player] var,[data-player] video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}[data-player] table{border-collapse:collapse;border-spacing:0}[data-player] caption,[data-player] td,[data-player] th{text-align:left;font-weight:400;vertical-align:middle}[data-player] blockquote,[data-player] q{quotes:none}[data-player] blockquote:after,[data-player] blockquote:before,[data-player] q:after,[data-player] q:before{content:"";content:none}[data-player] a img{border:none}[data-player]:focus{outline:0}[data-player] *{max-width:none;box-sizing:inherit;float:none}[data-player] div{display:block}[data-player].fullscreen{width:100%!important;height:100%!important;top:0;left:0}[data-player].nocursor{cursor:none}.clappr-style{display:none!important}',""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,".media-control-notransition{-webkit-transition:none!important;transition:none!important}.media-control[data-media-control]{position:absolute;width:100%;height:100%;z-index:9999;pointer-events:none}.media-control[data-media-control].dragging{pointer-events:auto;cursor:-webkit-grabbing!important;cursor:grabbing!important;cursor:url("+n(47)+"),move}.media-control[data-media-control].dragging *{cursor:-webkit-grabbing!important;cursor:grabbing!important;cursor:url("+n(47)+'),move}.media-control[data-media-control] .media-control-background[data-background]{position:absolute;height:40%;width:100%;bottom:0;background:-webkit-linear-gradient(transparent,rgba(0,0,0,.9));background:linear-gradient(transparent,rgba(0,0,0,.9));-webkit-transition:opacity .6s ease-out;transition:opacity .6s ease-out}.media-control[data-media-control] .media-control-icon{line-height:0;letter-spacing:0;speak:none;color:#fff;opacity:.5;vertical-align:middle;text-align:left;-webkit-transition:all .1s ease;transition:all .1s ease}.media-control[data-media-control] .media-control-icon:hover{color:#fff;opacity:.75;text-shadow:hsla(0,0%,100%,.8) 0 0 5px}.media-control[data-media-control].media-control-hide .media-control-background[data-background]{opacity:0}.media-control[data-media-control].media-control-hide .media-control-layer[data-controls]{bottom:-50px}.media-control[data-media-control].media-control-hide .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar]{opacity:0}.media-control[data-media-control] .media-control-layer[data-controls]{position:absolute;bottom:7px;width:100%;height:32px;font-size:0;vertical-align:middle;pointer-events:auto;-webkit-transition:bottom .4s ease-out;transition:bottom .4s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-left-panel[data-media-control]{position:absolute;top:0;left:4px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-center-panel[data-media-control]{height:100%;text-align:center;line-height:32px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-right-panel[data-media-control]{position:absolute;top:0;right:4px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button{background-color:transparent;border:0;margin:0 6px;padding:0;cursor:pointer;display:inline-block;width:32px;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg{width:100%;height:22px}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button svg path{fill:#fff}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button:focus{outline:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-pause],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-play],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-stop]{float:left;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-fullscreen]{float:right;background-color:transparent;border:0;height:100%}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator]{cursor:default;float:right;background-color:transparent;border:0;height:100%;display:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled{opacity:1;display:block}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-hd-indicator].enabled:hover{opacity:1;text-shadow:none}.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playpause],.media-control[data-media-control] .media-control-layer[data-controls] button.media-control-button[data-playstop]{float:left}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration],.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position]{display:inline-block;font-size:10px;color:#fff;cursor:default;line-height:32px;position:relative}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-position]{margin:0 6px 0 7px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]{color:hsla(0,0%,100%,.5);margin-right:6px}.media-control[data-media-control] .media-control-layer[data-controls] .media-control-indicator[data-duration]:before{content:"|";margin-right:7px}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]{position:absolute;top:-20px;left:0;display:inline-block;vertical-align:middle;width:100%;height:25px;cursor:pointer}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar]{width:100%;height:1px;position:relative;top:12px;background-color:#666}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#c2c2c2;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#005aff;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:0;position:absolute;top:-3px;width:5px;height:7px;background-color:hsla(0,0%,100%,.5);-webkit-transition:opacity .1s ease;transition:opacity .1s ease}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled{cursor:default}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar].seek-disabled:hover .bar-background[data-seekbar] .bar-hover[data-seekbar]{opacity:0}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar]{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:2px;left:0;width:20px;height:20px;opacity:1;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar]{position:absolute;left:6px;top:6px;width:8px;height:8px;border-radius:10px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume]{float:right;display:inline-block;height:32px;cursor:pointer;margin:0 6px;box-sizing:border-box}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume]{float:left;bottom:0}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]{background-color:transparent;border:0;box-sizing:content-box;width:32px;height:32px;opacity:.5}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume]:hover{opacity:.75}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg{height:24px;position:relative;top:3px}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume] svg path{fill:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .drawer-icon-container[data-volume] .drawer-icon[data-volume].muted svg{margin-left:2px}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume]{float:left;position:relative;overflow:hidden;top:6px;width:42px;height:18px;padding:3px 0;-webkit-transition:width .2s ease-out;transition:width .2s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume]{height:1px;position:relative;top:7px;margin:0 3px;background-color:#666}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#c2c2c2;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-volume]{position:absolute;top:0;left:0;width:0;height:100%;background-color:#005aff;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume]{opacity:0;position:absolute;top:-3px;width:5px;height:7px;background-color:hsla(0,0%,100%,.5);-webkit-transition:opacity .1s ease;transition:opacity .1s ease}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume]{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:0;left:0;width:20px;height:20px;opacity:1;-webkit-transition:all .1s ease-out;transition:all .1s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume]{position:absolute;left:6px;top:6px;width:8px;height:8px;border-radius:10px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]{float:left;width:4px;padding-left:2px;height:12px;opacity:.5;box-shadow:inset 2px 0 0 #fff;-webkit-transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume].fill{box-shadow:inset 2px 0 0 #fff;opacity:1}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:nth-of-type(1){padding-left:0}.media-control[data-media-control] .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume] .segmented-bar-element[data-volume]:hover{-webkit-transform:scaleY(1.5);transform:scaleY(1.5)}.media-control[data-media-control].w320 .media-control-layer[data-controls] .drawer-container[data-volume] .bar-container[data-volume].volume-bar-hide{width:0;height:12px;top:9px;padding:0}',""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,".clappr-flash-playback[data-flash-playback]{display:block;position:absolute;top:0;left:0;height:100%;width:100%;pointer-events:none}",""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,"[data-html5-video]{position:absolute;height:100%;width:100%;display:block}",""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,"[data-html-img]{max-width:100%;max-height:100%}",""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,"[data-no-op]{z-index:1000;position:absolute;height:100%;width:100%;text-align:center}[data-no-op] p[data-no-op-msg]{position:absolute;text-align:center;font-size:25px;left:0;right:0;color:#fff;margin:10px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}[data-no-op] canvas[data-no-op-canvas]{background-color:#777;height:100%;width:100%}",""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,'.dvr-controls[data-dvr-controls]{display:inline-block;float:left;color:#fff;line-height:32px;font-size:10px;font-weight:700;margin-left:6px}.dvr-controls[data-dvr-controls] .live-info{cursor:default;font-family:Roboto,Open Sans,Arial,sans-serif}.dvr-controls[data-dvr-controls] .live-info:before{content:"";display:inline-block;position:relative;width:7px;height:7px;border-radius:3.5px;margin-right:3.5px;background-color:#ff0101}.dvr-controls[data-dvr-controls] .live-info.disabled{opacity:.3}.dvr-controls[data-dvr-controls] .live-info.disabled:before{background-color:#fff}.dvr-controls[data-dvr-controls] .live-button{cursor:pointer;outline:none;display:none;border:0;color:#fff;background-color:transparent;height:32px;padding:0;opacity:.7;font-family:Roboto,Open Sans,Arial,sans-serif;-webkit-transition:all .1s ease;transition:all .1s ease}.dvr-controls[data-dvr-controls] .live-button:before{content:"";display:inline-block;position:relative;width:7px;height:7px;border-radius:3.5px;margin-right:3.5px;background-color:#fff}.dvr-controls[data-dvr-controls] .live-button:hover{opacity:1;text-shadow:hsla(0,0%,100%,.75) 0 0 5px}.dvr .dvr-controls[data-dvr-controls] .live-info{display:none}.dvr .dvr-controls[data-dvr-controls] .live-button{display:block}.dvr.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{background-color:#005aff}.media-control.live[data-media-control] .media-control-layer[data-controls] .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar]{background-color:#ff0101}',""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,".player-poster[data-poster]{position:absolute;height:100%;width:100%;z-index:998;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#000;background-size:cover;background-repeat:no-repeat;background-position:50% 50%}.player-poster[data-poster].clickable{cursor:pointer}.player-poster[data-poster]:hover .play-wrapper[data-poster]{opacity:1}.player-poster[data-poster] .play-wrapper[data-poster]{width:100%;height:25%;margin:0 auto;opacity:.75;-webkit-transition:opacity .1s ease;transition:opacity .1s ease}.player-poster[data-poster] .play-wrapper[data-poster] svg{height:100%}.player-poster[data-poster] .play-wrapper[data-poster] svg path{fill:#fff}",""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,'.seek-time[data-seek-time]{position:absolute;white-space:nowrap;height:20px;line-height:20px;font-size:0;left:-100%;bottom:55px;background-color:rgba(2,2,2,.5);z-index:9999;-webkit-transition:opacity .1s ease;transition:opacity .1s ease}.seek-time[data-seek-time].hidden[data-seek-time]{opacity:0}.seek-time[data-seek-time] [data-seek-time]{display:inline-block;color:#fff;font-size:10px;padding-left:7px;padding-right:7px;vertical-align:top}.seek-time[data-seek-time] [data-duration]{display:inline-block;color:hsla(0,0%,100%,.5);font-size:10px;padding-right:7px;vertical-align:top}.seek-time[data-seek-time] [data-duration]:before{content:"|";margin-right:7px}',""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,".spinner-three-bounce[data-spinner]{position:absolute;margin:0 auto;width:70px;text-align:center;z-index:999;left:0;right:0;margin-left:auto;margin-right:auto;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.spinner-three-bounce[data-spinner]>div{width:18px;height:18px;background-color:#fff;border-radius:100%;display:inline-block;-webkit-animation:bouncedelay 1.4s infinite ease-in-out;animation:bouncedelay 1.4s infinite ease-in-out;-webkit-animation-fill-mode:both;animation-fill-mode:both}.spinner-three-bounce[data-spinner] [data-bounce1]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner-three-bounce[data-spinner] [data-bounce2]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes bouncedelay{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}",""])},function(t,e,n){e=t.exports=n(10)(),e.push([t.id,"[data-watermark]{position:absolute;min-width:70px;max-width:200px;width:12%;text-align:center;z-index:10}[data-watermark] a{outline:none;cursor:pointer}[data-watermark] img{max-width:100%}[data-watermark-bottom-left]{bottom:10px;left:10px}[data-watermark-bottom-right]{bottom:10px;right:42px}[data-watermark-top-left]{top:10px;left:10px}[data-watermark-top-right]{top:10px;right:37px}",""])},function(t,e){t.exports='<div class="media-control-background" data-background></div>\n<div class="media-control-layer" data-controls>\n  <%  var renderBar = function(name) { %>\n      <div class="bar-container" data-<%= name %>>\n        <div class="bar-background" data-<%= name %>>\n          <div class="bar-fill-1" data-<%= name %>></div>\n          <div class="bar-fill-2" data-<%= name %>></div>\n          <div class="bar-hover" data-<%= name %>></div>\n        </div>\n        <div class="bar-scrubber" data-<%= name %>>\n          <div class="bar-scrubber-icon" data-<%= name %>></div>\n        </div>\n      </div>\n  <%  }; %>\n  <%  var renderSegmentedBar = function(name, segments) {\n      segments = segments || 10; %>\n    <div class="bar-container" data-<%= name %>>\n    <% for (var i = 0; i < segments; i++) { %>\n      <div class="segmented-bar-element" data-<%= name %>></div>\n    <% } %>\n    </div>\n  <% }; %>\n  <% var renderDrawer = function(name, renderContent) { %>\n      <div class="drawer-container" data-<%= name %>>\n        <div class="drawer-icon-container" data-<%= name %>>\n          <div class="drawer-icon media-control-icon" data-<%= name %>></div>\n          <span class="drawer-text" data-<%= name %>></span>\n        </div>\n        <% renderContent(name); %>\n      </div>\n  <% }; %>\n  <% var renderIndicator = function(name) { %>\n      <div class="media-control-indicator" data-<%= name %>></div>\n  <% }; %>\n  <% var renderButton = function(name) { %>\n      <button class="media-control-button media-control-icon" data-<%= name %>></button>\n  <% }; %>\n  <%  var templates = {\n        bar: renderBar,\n        segmentedBar: renderSegmentedBar,\n      };\n      var render = function(settingsList) {\n        settingsList.forEach(function(setting) {\n          if(setting === "seekbar") {\n            renderBar(setting);\n          } else if (setting === "volume") {\n            renderDrawer(setting, settings.volumeBarTemplate ? templates[settings.volumeBarTemplate] : function(name) { return renderSegmentedBar(name); });\n          } else if (setting === "duration" || setting === "position") {\n            renderIndicator(setting);\n          } else {\n            renderButton(setting);\n          }\n        });\n      }; %>\n  <% if (settings.default && settings.default.length) { %>\n  <div class="media-control-center-panel" data-media-control>\n    <% render(settings.default); %>\n  </div>\n  <% } %>\n  <% if (settings.left && settings.left.length) { %>\n  <div class="media-control-left-panel" data-media-control>\n    <% render(settings.left); %>\n  </div>\n  <% } %>\n  <% if (settings.right && settings.right.length) { %>\n  <div class="media-control-right-panel" data-media-control>\n    <% render(settings.right); %>\n  </div>\n  <% } %>\n</div>\n'},function(t,e){t.exports='<param name="movie" value="<%= swfPath %>?inline=1">\n<param name="quality" value="autohigh">\n<param name="swliveconnect" value="true">\n<param name="allowScriptAccess" value="always">\n<param name="bgcolor" value="#000000">\n<param name="allowFullScreen" value="false">\n<param name="wmode" value="<%= wmode %>">\n<param name="tabindex" value="1">\n<param name="FlashVars" value="playbackId=<%= playbackId %>&callback=<%= callbackName %>">\n<embed\n  name="<%= cid %>"\n  type="application/x-shockwave-flash"\n  disabled="disabled"\n  tabindex="-1"\n  enablecontextmenu="false"\n  allowScriptAccess="always"\n  quality="autohigh"\n  pluginspage="http://www.macromedia.com/go/getflashplayer"\n  wmode="<%= wmode %>"\n  swliveconnect="true"\n  allowfullscreen="false"\n  bgcolor="#000000"\n  FlashVars="playbackId=<%= playbackId %>&callback=<%= callbackName %>"\n  src="<%= swfPath %>"\n  width="100%"\n  height="100%">\n</embed>\n'},function(t,e){t.exports='<source src="<%=src%>" type="<%=type%>">\n'},function(t,e){t.exports="<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%><p>\n"},function(t,e){t.exports='<div class="live-info">LIVE</div>\n<button class="live-button">BACK TO LIVE</button>\n'},function(t,e){t.exports='<div class="play-wrapper" data-poster></div>\n'},function(t,e){t.exports="<span data-seek-time></span>\n<span data-duration></span>\n"},function(t,e){t.exports="<div data-bounce1></div><div data-bounce2></div><div data-bounce3></div>\n"},function(t,e){t.exports="<div data-watermark data-watermark-<%=position %>>\n<% if(typeof imageLink !== 'undefined') { %>\n<a target=_blank href=\"<%= imageLink %>\">\n<% } %>\n<img src=\"<%= imageUrl %>\">\n<% if(typeof imageLink !== 'undefined') { %>\n</a>\n<% } %>\n</div>\n"},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M1.712 1.24h12.6v13.52h-12.6z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M11.5 11h-.002v1.502L7.798 10H4.5V6h3.297l3.7-2.502V4.5h.003V11zM11 4.49L7.953 6.5H5v3h2.953L11 11.51V4.49z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" fill="#010101" d="M9.75 11.51L6.7 9.5H3.75v-3H6.7L9.75 4.49v.664l.497.498V3.498L6.547 6H3.248v4h3.296l3.7 2.502v-2.154l-.497.5v.662zm3-5.165L12.404 6l-1.655 1.653L9.093 6l-.346.345L10.402 8 8.747 9.654l.346.347 1.655-1.653L12.403 10l.348-.346L11.097 8l1.655-1.655z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M7.156 8L4 11.156V8.5H3V13h4.5v-1H4.844L8 8.844 7.156 8zM8.5 3v1h2.657L8 7.157 8.846 8 12 4.844V7.5h1V3H8.5z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M13.5 3.344l-.844-.844L9.5 5.656V3h-1v4.5H13v-1h-2.656L13.5 3.344zM3 9.5h2.656L2.5 12.656l.844.844L6.5 10.344V13h1V8.5H3v1z"></path></svg>'},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#010101" d="M5.375 7.062H2.637V4.26H.502v7.488h2.135V8.9h2.738v2.848h2.133V4.26H5.375v2.802zm5.97-2.81h-2.84v7.496h2.798c2.65 0 4.195-1.607 4.195-3.77v-.022c0-2.162-1.523-3.704-4.154-3.704zm2.06 3.758c0 1.21-.81 1.896-2.03 1.896h-.83V6.093h.83c1.22 0 2.03.696 2.03 1.896v.02z"></path></svg>'},function(t,e,n){t.exports=n.p+"38861cba61c66739c1452c3a71e39852.ttf"},function(t,e,n){t.exports=n.p+"4b76590b32dab62bc95c1b7951efae78.swf"},function(t,e,n){t.exports=n.p+"d13d9f4847ef9af04b804c465624c7a8.swf"}])}))},b041:function(t,e,n){"use strict";var r=n("00ee"),i=n("f5df");t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},b0c0:function(t,e,n){var r=n("83ab"),i=n("9bf2").f,a=Function.prototype,o=a.toString,s=/^\s*function ([^ (]*)/,l="name";r&&!(l in a)&&i(a,l,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},b575:function(t,e,n){var r,i,a,o,s,l,u,c,h=n("da84"),d=n("06cf").f,f=n("c6b6"),p=n("2cf4").set,g=n("1cdc"),m=h.MutationObserver||h.WebKitMutationObserver,v=h.process,y=h.Promise,b="process"==f(v),_=d(h,"queueMicrotask"),E=_&&_.value;E||(r=function(){var t,e;b&&(t=v.domain)&&t.exit();while(i){e=i.fn,i=i.next;try{e()}catch(n){throw i?o():a=void 0,n}}a=void 0,t&&t.enter()},b?o=function(){v.nextTick(r)}:m&&!g?(s=!0,l=document.createTextNode(""),new m(r).observe(l,{characterData:!0}),o=function(){l.data=s=!s}):y&&y.resolve?(u=y.resolve(void 0),c=u.then,o=function(){c.call(u,r)}):o=function(){p.call(h,r)}),t.exports=E||function(t){var e={fn:t,next:void 0};a&&(a.next=e),i||(i=e,o()),a=e}},b622:function(t,e,n){var r=n("da84"),i=n("5692"),a=n("5135"),o=n("90e3"),s=n("4930"),l=n("fdbf"),u=i("wks"),c=r.Symbol,h=l?c:c&&c.withoutSetter||o;t.exports=function(t){return a(u,t)||(s&&a(c,t)?u[t]=c[t]:u[t]=h("Symbol."+t)),u[t]}},b64b:function(t,e,n){var r=n("23e7"),i=n("7b0b"),a=n("df75"),o=n("d039"),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return a(i(t))}})},b727:function(t,e,n){var r=n("0366"),i=n("44ad"),a=n("7b0b"),o=n("50c4"),s=n("65f0"),l=[].push,u=function(t){var e=1==t,n=2==t,u=3==t,c=4==t,h=6==t,d=5==t||h;return function(f,p,g,m){for(var v,y,b=a(f),_=i(b),E=r(p,g,3),A=o(_.length),T=0,w=m||s,S=e?w(f,A):n?w(f,0):void 0;A>T;T++)if((d||T in _)&&(v=_[T],y=E(v,T,b),t))if(e)S[T]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return T;case 2:l.call(S,v)}else if(c)return!1;return h?-1:u||c?c:S}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},b7f5:function(t,e,n){"use strict";
/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function r(t){return getComputedStyle(t)}function i(t,e){for(var n in e){var r=e[n];"number"===typeof r&&(r+="px"),t.style[n]=r}return t}function a(t){var e=document.createElement("div");return e.className=t,e}var o="undefined"!==typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function s(t,e){if(!o)throw new Error("No element matching method supported");return o.call(t,e)}function l(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function u(t,e){return Array.prototype.filter.call(t.children,(function(t){return s(t,e)}))}var c={main:"ps",rtl:"ps__rtl",element:{thumb:function(t){return"ps__thumb-"+t},rail:function(t){return"ps__rail-"+t},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(t){return"ps--active-"+t},scrolling:function(t){return"ps--scrolling-"+t}}},h={x:null,y:null};function d(t,e){var n=t.element.classList,r=c.state.scrolling(e);n.contains(r)?clearTimeout(h[e]):n.add(r)}function f(t,e){h[e]=setTimeout((function(){return t.isAlive&&t.element.classList.remove(c.state.scrolling(e))}),t.settings.scrollingThreshold)}function p(t,e){d(t,e),f(t,e)}var g=function(t){this.element=t,this.handlers={}},m={isEmpty:{configurable:!0}};g.prototype.bind=function(t,e){"undefined"===typeof this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},g.prototype.unbind=function(t,e){var n=this;this.handlers[t]=this.handlers[t].filter((function(r){return!(!e||r===e)||(n.element.removeEventListener(t,r,!1),!1)}))},g.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},m.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every((function(e){return 0===t.handlers[e].length}))},Object.defineProperties(g.prototype,m);var v=function(){this.eventElements=[]};function y(t){if("function"===typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function b(t,e,n,r,i){var a;if(void 0===r&&(r=!0),void 0===i&&(i=!1),"top"===e)a=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");a=["contentWidth","containerWidth","scrollLeft","x","left","right"]}_(t,n,a,r,i)}function _(t,e,n,r,i){var a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=n[5];void 0===r&&(r=!0),void 0===i&&(i=!1);var h=t.element;t.reach[l]=null,h[s]<1&&(t.reach[l]="start"),h[s]>t[a]-t[o]-1&&(t.reach[l]="end"),e&&(h.dispatchEvent(y("ps-scroll-"+l)),e<0?h.dispatchEvent(y("ps-scroll-"+u)):e>0&&h.dispatchEvent(y("ps-scroll-"+c)),r&&p(t,l)),t.reach[l]&&(e||i)&&h.dispatchEvent(y("ps-"+l+"-reach-"+t.reach[l]))}function E(t){return parseInt(t,10)||0}function A(t){return s(t,"input,[contenteditable]")||s(t,"select,[contenteditable]")||s(t,"textarea,[contenteditable]")||s(t,"button,[contenteditable]")}function T(t){var e=r(t);return E(e.width)+E(e.paddingLeft)+E(e.paddingRight)+E(e.borderLeftWidth)+E(e.borderRightWidth)}v.prototype.eventElement=function(t){var e=this.eventElements.filter((function(e){return e.element===t}))[0];return e||(e=new g(t),this.eventElements.push(e)),e},v.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},v.prototype.unbind=function(t,e,n){var r=this.eventElement(t);r.unbind(e,n),r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)},v.prototype.unbindAll=function(){this.eventElements.forEach((function(t){return t.unbindAll()})),this.eventElements=[]},v.prototype.once=function(t,e,n){var r=this.eventElement(t),i=function(t){r.unbind(e,i),n(t)};r.bind(e,i)};var w={isWebKit:"undefined"!==typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!==typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!==typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!==typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function S(t){var e=t.element,n=Math.floor(e.scrollTop),r=e.getBoundingClientRect();t.containerWidth=Math.ceil(r.width),t.containerHeight=Math.ceil(r.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(u(e,c.element.rail("x")).forEach((function(t){return l(t)})),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(u(e,c.element.rail("y")).forEach((function(t){return l(t)})),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=x(t,E(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=E((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=x(t,E(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=E(n*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),L(e,t),t.scrollbarXActive?e.classList.add(c.state.active("x")):(e.classList.remove(c.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?e.classList.add(c.state.active("y")):(e.classList.remove(c.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function x(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function L(t,e){var n={width:e.railXWidth},r=Math.floor(t.scrollTop);e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-r:n.top=e.scrollbarXTop+r,i(e.scrollbarXRail,n);var a={top:r,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?a.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:a.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?a.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:a.left=e.scrollbarYLeft+t.scrollLeft,i(e.scrollbarYRail,a),i(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),i(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}function M(t){t.element;t.event.bind(t.scrollbarY,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarYRail,"mousedown",(function(e){var n=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top,r=n>t.scrollbarYTop?1:-1;t.element.scrollTop+=r*t.containerHeight,S(t),e.stopPropagation()})),t.event.bind(t.scrollbarX,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarXRail,"mousedown",(function(e){var n=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left,r=n>t.scrollbarXLeft?1:-1;t.element.scrollLeft+=r*t.containerWidth,S(t),e.stopPropagation()}))}function k(t){C(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),C(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function C(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],u=e[7],h=e[8],p=t.element,g=null,m=null,v=null;function y(e){e.touches&&e.touches[0]&&(e[i]=e.touches[0].pageY),p[l]=g+v*(e[i]-m),d(t,u),S(t),e.stopPropagation(),e.preventDefault()}function b(){f(t,u),t[h].classList.remove(c.state.clicking),t.event.unbind(t.ownerDocument,"mousemove",y)}function _(e,o){g=p[l],o&&e.touches&&(e[i]=e.touches[0].pageY),m=e[i],v=(t[r]-t[n])/(t[a]-t[s]),o?t.event.bind(t.ownerDocument,"touchmove",y):(t.event.bind(t.ownerDocument,"mousemove",y),t.event.once(t.ownerDocument,"mouseup",b),e.preventDefault()),t[h].classList.add(c.state.clicking),e.stopPropagation()}t.event.bind(t[o],"mousedown",(function(t){_(t)})),t.event.bind(t[o],"touchstart",(function(t){_(t,!0)}))}function R(t){var e=t.element,n=function(){return s(e,":hover")},r=function(){return s(t.scrollbarX,":focus")||s(t.scrollbarY,":focus")};function i(n,r){var i=Math.floor(e.scrollTop);if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}t.event.bind(t.ownerDocument,"keydown",(function(a){if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||a.defaultPrevented)&&(n()||r())){var o=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(o){if("IFRAME"===o.tagName)o=o.contentDocument.activeElement;else while(o.shadowRoot)o=o.shadowRoot.activeElement;if(A(o))return}var s=0,l=0;switch(a.which){case 37:s=a.metaKey?-t.contentWidth:a.altKey?-t.containerWidth:-30;break;case 38:l=a.metaKey?t.contentHeight:a.altKey?t.containerHeight:30;break;case 39:s=a.metaKey?t.contentWidth:a.altKey?t.containerWidth:30;break;case 40:l=a.metaKey?-t.contentHeight:a.altKey?-t.containerHeight:-30;break;case 32:l=a.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:l=t.containerHeight;break;case 34:l=-t.containerHeight;break;case 36:l=t.contentHeight;break;case 35:l=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==s||t.settings.suppressScrollY&&0!==l||(e.scrollTop-=l,e.scrollLeft+=s,S(t),i(s,l)&&a.preventDefault())}}))}function P(t){var e=t.element;function n(n,r){var i,a=Math.floor(e.scrollTop),o=0===e.scrollTop,s=a+e.offsetHeight===e.scrollHeight,l=0===e.scrollLeft,u=e.scrollLeft+e.offsetWidth===e.scrollWidth;return i=Math.abs(r)>Math.abs(n)?o||s:l||u,!i||!t.settings.wheelPropagation}function i(t){var e=t.deltaX,n=-1*t.deltaY;return"undefined"!==typeof e&&"undefined"!==typeof n||(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!==e&&n!==n&&(e=0,n=t.wheelDelta),t.shiftKey?[-n,-e]:[e,n]}function a(t,n,i){if(!w.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(t))return!1;var a=t;while(a&&a!==e){if(a.classList.contains(c.element.consuming))return!0;var o=r(a);if(i&&o.overflowY.match(/(scroll|auto)/)){var s=a.scrollHeight-a.clientHeight;if(s>0&&(a.scrollTop>0&&i<0||a.scrollTop<s&&i>0))return!0}if(n&&o.overflowX.match(/(scroll|auto)/)){var l=a.scrollWidth-a.clientWidth;if(l>0&&(a.scrollLeft>0&&n<0||a.scrollLeft<l&&n>0))return!0}a=a.parentNode}return!1}function o(r){var o=i(r),s=o[0],l=o[1];if(!a(r.target,s,l)){var u=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(l?e.scrollTop-=l*t.settings.wheelSpeed:e.scrollTop+=s*t.settings.wheelSpeed,u=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(s?e.scrollLeft+=s*t.settings.wheelSpeed:e.scrollLeft-=l*t.settings.wheelSpeed,u=!0):(e.scrollTop-=l*t.settings.wheelSpeed,e.scrollLeft+=s*t.settings.wheelSpeed),S(t),u=u||n(s,l),u&&!r.ctrlKey&&(r.stopPropagation(),r.preventDefault())}}"undefined"!==typeof window.onwheel?t.event.bind(e,"wheel",o):"undefined"!==typeof window.onmousewheel&&t.event.bind(e,"mousewheel",o)}function O(t){if(w.supportsTouch||w.supportsIePointer){var e=t.element,n={},i=0,a={},o=null;w.supportsTouch?(t.event.bind(e,"touchstart",d),t.event.bind(e,"touchmove",p),t.event.bind(e,"touchend",g)):w.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",d),t.event.bind(e,"pointermove",p),t.event.bind(e,"pointerup",g)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",d),t.event.bind(e,"MSPointerMove",p),t.event.bind(e,"MSPointerUp",g)))}function s(n,r){var i=Math.floor(e.scrollTop),a=e.scrollLeft,o=Math.abs(n),s=Math.abs(r);if(s>o){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return 0===window.scrollY&&r>0&&w.isChrome}else if(o>s&&(n<0&&a===t.contentWidth-t.containerWidth||n>0&&0===a))return!0;return!0}function l(n,r){e.scrollTop-=r,e.scrollLeft-=n,S(t)}function u(t){return t.targetTouches?t.targetTouches[0]:t}function h(t){return(!t.pointerType||"pen"!==t.pointerType||0!==t.buttons)&&(!(!t.targetTouches||1!==t.targetTouches.length)||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function d(t){if(h(t)){var e=u(t);n.pageX=e.pageX,n.pageY=e.pageY,i=(new Date).getTime(),null!==o&&clearInterval(o)}}function f(t,n,i){if(!e.contains(t))return!1;var a=t;while(a&&a!==e){if(a.classList.contains(c.element.consuming))return!0;var o=r(a);if(i&&o.overflowY.match(/(scroll|auto)/)){var s=a.scrollHeight-a.clientHeight;if(s>0&&(a.scrollTop>0&&i<0||a.scrollTop<s&&i>0))return!0}if(n&&o.overflowX.match(/(scroll|auto)/)){var l=a.scrollWidth-a.clientWidth;if(l>0&&(a.scrollLeft>0&&n<0||a.scrollLeft<l&&n>0))return!0}a=a.parentNode}return!1}function p(t){if(h(t)){var e=u(t),r={pageX:e.pageX,pageY:e.pageY},o=r.pageX-n.pageX,c=r.pageY-n.pageY;if(f(t.target,o,c))return;l(o,c),n=r;var d=(new Date).getTime(),p=d-i;p>0&&(a.x=o/p,a.y=c/p,i=d),s(o,c)&&t.preventDefault()}}function g(){t.settings.swipeEasing&&(clearInterval(o),o=setInterval((function(){t.isInitialized?clearInterval(o):a.x||a.y?Math.abs(a.x)<.01&&Math.abs(a.y)<.01?clearInterval(o):(l(30*a.x,30*a.y),a.x*=.8,a.y*=.8):clearInterval(o)}),10))}}var D=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},I={"click-rail":M,"drag-thumb":k,keyboard:R,wheel:P,touch:O},N=function(t,e){var n=this;if(void 0===e&&(e={}),"string"===typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var o in this.element=t,t.classList.add(c.main),this.settings=D(),e)this.settings[o]=e[o];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s=function(){return t.classList.add(c.state.focus)},l=function(){return t.classList.remove(c.state.focus)};this.isRtl="rtl"===r(t).direction,!0===this.isRtl&&t.classList.add(c.rtl),this.isNegativeScroll=function(){var e=t.scrollLeft,n=null;return t.scrollLeft=-1,n=t.scrollLeft<0,t.scrollLeft=e,n}(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new v,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=a(c.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=a(c.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",s),this.event.bind(this.scrollbarX,"blur",l),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var u=r(this.scrollbarXRail);this.scrollbarXBottom=parseInt(u.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=E(u.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=E(u.borderLeftWidth)+E(u.borderRightWidth),i(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=E(u.marginLeft)+E(u.marginRight),i(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=a(c.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=a(c.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",s),this.event.bind(this.scrollbarY,"blur",l),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var h=r(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=E(h.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?T(this.scrollbarY):null,this.railBorderYWidth=E(h.borderTopWidth)+E(h.borderBottomWidth),i(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=E(h.marginTop)+E(h.marginBottom),i(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(t){return I[t](n)})),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",(function(t){return n.onScroll(t)})),S(this)};N.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,i(this.scrollbarXRail,{display:"block"}),i(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=E(r(this.scrollbarXRail).marginLeft)+E(r(this.scrollbarXRail).marginRight),this.railYMarginHeight=E(r(this.scrollbarYRail).marginTop)+E(r(this.scrollbarYRail).marginBottom),i(this.scrollbarXRail,{display:"none"}),i(this.scrollbarYRail,{display:"none"}),S(this),b(this,"top",0,!1,!0),b(this,"left",0,!1,!0),i(this.scrollbarXRail,{display:""}),i(this.scrollbarYRail,{display:""}))},N.prototype.onScroll=function(t){this.isAlive&&(S(this),b(this,"top",this.element.scrollTop-this.lastScrollTop),b(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},N.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),l(this.scrollbarX),l(this.scrollbarY),l(this.scrollbarXRail),l(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},N.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(t){return!t.match(/^ps([-_].+|)$/)})).join(" ")},e["a"]=N},c04e:function(t,e,n){var r=n("861d");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},c430:function(t,e){t.exports=!1},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var r=n("da84"),i=n("ce4e"),a="__core-js_shared__",o=r[a]||i(a,{});t.exports=o},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},c975:function(t,e,n){"use strict";var r=n("23e7"),i=n("4d64").indexOf,a=n("a640"),o=n("ae40"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,u=a("indexOf"),c=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:l||!u||!c},{indexOf:function(t){return l?s.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},ca84:function(t,e,n){var r=n("5135"),i=n("fc6a"),a=n("4d64").indexOf,o=n("d012");t.exports=function(t,e){var n,s=i(t),l=0,u=[];for(n in s)!r(o,n)&&r(s,n)&&u.push(n);while(e.length>l)r(s,n=e[l++])&&(~a(u,n)||u.push(n));return u}},cc12:function(t,e,n){var r=n("da84"),i=n("861d"),a=r.document,o=i(a)&&i(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},cca6:function(t,e,n){var r=n("23e7"),i=n("60da");r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},cdf9:function(t,e,n){var r=n("825a"),i=n("861d"),a=n("f069");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=a.f(t),o=n.resolve;return o(e),n.promise}},ce4e:function(t,e,n){var r=n("da84"),i=n("9112");t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var r=n("428f"),i=n("da84"),a=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?a(r[t])||a(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},d1e7:function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!r.call({1:2},1);e.f=a?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},d2bb:function(t,e,n){var r=n("825a"),i=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(a){}return function(n,a){return r(n),i(a),e?t.call(n,a):n.__proto__=a,n}}():void 0)},d3b7:function(t,e,n){var r=n("00ee"),i=n("6eeb"),a=n("b041");r||i(Object.prototype,"toString",a,{unsafe:!0})},d44e:function(t,e,n){var r=n("9bf2").f,i=n("5135"),a=n("b622"),o=a("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),a=n("b622"),o=n("9263"),s=n("9112"),l=a("species"),u=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c=function(){return"$0"==="a".replace(/./,"$0")}(),h=a("replace"),d=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),f=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var p=a(t),g=!i((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=g&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!g||!m||"replace"===t&&(!u||!c||d)||"split"===t&&!f){var v=/./[p],y=n(p,""[t],(function(t,e,n,r,i){return e.exec===o?g&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=y[0],_=y[1];r(String.prototype,t,b),r(RegExp.prototype,p,2==e?function(t,e){return _.call(t,this,e)}:function(t){return _.call(t,this)})}h&&s(RegExp.prototype[p],"sham",!0)}},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),a=n("56ef"),o=n("fc6a"),s=n("06cf"),l=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=o(t),i=s.f,u=a(r),c={},h=0;while(u.length>h)n=i(r,e=u[h++]),void 0!==n&&l(c,e,n);return c}})},ddb0:function(t,e,n){var r=n("da84"),i=n("fdbc"),a=n("e260"),o=n("9112"),s=n("b622"),l=s("iterator"),u=s("toStringTag"),c=a.values;for(var h in i){var d=r[h],f=d&&d.prototype;if(f){if(f[l]!==c)try{o(f,l,c)}catch(g){f[l]=c}if(f[u]||o(f,u,h),i[h])for(var p in a)if(f[p]!==a[p])try{o(f,p,a[p])}catch(g){f[p]=a[p]}}}},df75:function(t,e,n){var r=n("ca84"),i=n("7839");t.exports=Object.keys||function(t){return r(t,i)}},e017:function(t,e,n){(function(e){(function(e,n){t.exports=n()})(0,(function(){"use strict";var t=function(t){var e=t.id,n=t.viewBox,r=t.content;this.id=e,this.viewBox=n,this.content=r};t.prototype.stringify=function(){return this.content},t.prototype.toString=function(){return this.stringify()},t.prototype.destroy=function(){var t=this;["id","viewBox","content"].forEach((function(e){return delete t[e]}))};var n=function(t){var e=!!document.importNode,n=(new DOMParser).parseFromString(t,"image/svg+xml").documentElement;return e?document.importNode(n,!0):n};"undefined"!==typeof window?window:"undefined"!==typeof e||"undefined"!==typeof self&&self;function r(t,e){return e={exports:{}},t(e,e.exports),e.exports}var i=r((function(t,e){(function(e,n){t.exports=n()})(0,(function(){function t(t){var e=t&&"object"===typeof t;return e&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function e(t){return Array.isArray(t)?[]:{}}function n(n,r){var i=r&&!0===r.clone;return i&&t(n)?a(e(n),n,r):n}function r(e,r,i){var o=e.slice();return r.forEach((function(r,s){"undefined"===typeof o[s]?o[s]=n(r,i):t(r)?o[s]=a(e[s],r,i):-1===e.indexOf(r)&&o.push(n(r,i))})),o}function i(e,r,i){var o={};return t(e)&&Object.keys(e).forEach((function(t){o[t]=n(e[t],i)})),Object.keys(r).forEach((function(s){t(r[s])&&e[s]?o[s]=a(e[s],r[s],i):o[s]=n(r[s],i)})),o}function a(t,e,a){var o=Array.isArray(e),s=a||{arrayMerge:r},l=s.arrayMerge||r;return o?Array.isArray(t)?l(t,e,a):n(e,a):i(t,e,a)}return a.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return a(t,n,e)}))},a}))})),a=r((function(t,e){var n={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}};e.default=n,t.exports=e.default})),o=function(t){return Object.keys(t).map((function(e){var n=t[e].toString().replace(/"/g,"&quot;");return e+'="'+n+'"'})).join(" ")},s=a.svg,l=a.xlink,u={};u[s.name]=s.uri,u[l.name]=l.uri;var c=function(t,e){void 0===t&&(t="");var n=i(u,e||{}),r=o(n);return"<svg "+r+">"+t+"</svg>"},h=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={isMounted:{}};return r.isMounted.get=function(){return!!this.node},e.createFromExistingNode=function(t){return new e({id:t.getAttribute("id"),viewBox:t.getAttribute("viewBox"),content:t.outerHTML})},e.prototype.destroy=function(){this.isMounted&&this.unmount(),t.prototype.destroy.call(this)},e.prototype.mount=function(t){if(this.isMounted)return this.node;var e="string"===typeof t?document.querySelector(t):t,n=this.render();return this.node=n,e.appendChild(n),n},e.prototype.render=function(){var t=this.stringify();return n(c(t)).childNodes[0]},e.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(e.prototype,r),e}(t);return h}))}).call(this,n("c8ba"))},e163:function(t,e,n){var r=n("5135"),i=n("7b0b"),a=n("f772"),o=n("e177"),s=a("IE_PROTO"),l=Object.prototype;t.exports=o?Object.getPrototypeOf:function(t){return t=i(t),r(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},e177:function(t,e,n){var r=n("d039");t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,n){"use strict";var r=n("fc6a"),i=n("44d2"),a=n("3f8c"),o=n("69f3"),s=n("7dd0"),l="Array Iterator",u=o.set,c=o.getterFor(l);t.exports=s(Array,"Array",(function(t,e){u(this,{type:l,target:r(t),index:0,kind:e})}),(function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),a.Arguments=a.Array,i("keys"),i("values"),i("entries")},e2cc:function(t,e,n){var r=n("6eeb");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),a=n("fc6a"),o=n("06cf").f,s=n("83ab"),l=i((function(){o(1)})),u=!s||l;r({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})},e4d5:function(t,e){window.libpannellum=function(t,e,n){function r(r){function c(t,e){return 1==t.level&&1!=e.level?-1:1==e.level&&1!=t.level?1:e.timestamp-t.timestamp}function h(t,e){return t.level!=e.level?t.level-e.level:t.diff-e.diff}function d(t,e,n,r,i,a){this.vertices=t,this.side=e,this.level=n,this.x=r,this.y=i,this.path=a.replace("%s",e).replace("%l",n).replace("%x",r).replace("%y",i)}function f(t,e,n,r,i){var a,o=e.vertices;a=y(t,o.slice(0,3));var s=y(t,o.slice(3,6)),l=y(t,o.slice(6,9)),u=(o=y(t,o.slice(9,12)),a[0]+s[0]+l[0]+o[0]);if(-4==u||4==u?a=!1:(u=a[1]+s[1]+l[1]+o[1],a=-4!=u&&4!=u&&4!=a[2]+s[2]+l[2]+o[2]),a){for(a=e.vertices,s=a[0]+a[3]+a[6]+a[9],l=a[1]+a[4]+a[7]+a[10],o=a[2]+a[5]+a[8]+a[11],u=Math.sqrt(s*s+l*l+o*o),o=Math.asin(o/u),s=Math.atan2(l,s)-r,s+=s>Math.PI?-2*Math.PI:s<-Math.PI?2*Math.PI:0,s=Math.abs(s),e.diff=Math.acos(Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos(s)),s=!1,l=0;l<_.nodeCache.length;l++)if(_.nodeCache[l].path==e.path){s=!0,_.nodeCache[l].timestamp=_.nodeCacheTimestamp++,_.nodeCache[l].diff=e.diff,_.currentNodes.push(_.nodeCache[l]);break}if(s||(e.timestamp=_.nodeCacheTimestamp++,_.currentNodes.push(e),_.nodeCache.push(e)),e.level<_.level){o=M.cubeResolution*Math.pow(2,e.level-M.maxLevel),s=Math.ceil(o*M.invTileResolution)-1,l=o%M.tileResolution*2;var c=2*o%M.tileResolution;0===c&&(c=M.tileResolution),0===l&&(l=2*M.tileResolution),u=.5,e.x!=s&&e.y!=s||(u=1-M.tileResolution/(M.tileResolution+c));var h=1-u,p=(o=[],u),g=u,m=u,v=h,b=h,E=h;for(c<M.tileResolution&&(e.x==s&&e.y!=s?(b=g=.5,("d"==e.side||"u"==e.side)&&(E=m=.5)):e.x!=s&&e.y==s&&(v=p=.5,"l"==e.side||"r"==e.side)&&(E=m=.5)),l<=M.tileResolution&&(e.x==s&&(p=0,v=1,"l"==e.side||"r"==e.side)&&(m=0,E=1),e.y==s&&(g=0,b=1,"d"==e.side||"u"==e.side)&&(m=0,E=1)),c=[a[0],a[1],a[2],a[0]*p+a[3]*v,a[1]*u+a[4]*h,a[2]*m+a[5]*E,a[0]*p+a[6]*v,a[1]*g+a[7]*b,a[2]*m+a[8]*E,a[0]*u+a[9]*h,a[1]*g+a[10]*b,a[2]*m+a[11]*E],c=new d(c,e.side,e.level+1,2*e.x,2*e.y,M.fullpath),o.push(c),e.x==s&&l<=M.tileResolution||(c=[a[0]*p+a[3]*v,a[1]*u+a[4]*h,a[2]*m+a[5]*E,a[3],a[4],a[5],a[3]*u+a[6]*h,a[4]*g+a[7]*b,a[5]*m+a[8]*E,a[0]*p+a[6]*v,a[1]*g+a[7]*b,a[2]*m+a[8]*E],c=new d(c,e.side,e.level+1,2*e.x+1,2*e.y,M.fullpath),o.push(c)),e.x==s&&l<=M.tileResolution||e.y==s&&l<=M.tileResolution||(c=[a[0]*p+a[6]*v,a[1]*g+a[7]*b,a[2]*m+a[8]*E,a[3]*u+a[6]*h,a[4]*g+a[7]*b,a[5]*m+a[8]*E,a[6],a[7],a[8],a[9]*p+a[6]*v,a[10]*u+a[7]*h,a[11]*m+a[8]*E],c=new d(c,e.side,e.level+1,2*e.x+1,2*e.y+1,M.fullpath),o.push(c)),e.y==s&&l<=M.tileResolution||(c=[a[0]*u+a[9]*h,a[1]*g+a[10]*b,a[2]*m+a[11]*E,a[0]*p+a[6]*v,a[1]*g+a[7]*b,a[2]*m+a[8]*E,a[9]*p+a[6]*v,a[10]*u+a[7]*h,a[11]*m+a[8]*E,a[9],a[10],a[11]],c=new d(c,e.side,e.level+1,2*e.x,2*e.y+1,M.fullpath),o.push(c)),e=0;e<o.length;e++)f(t,o[e],n,r,i)}}}function p(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function g(t,e,n){var r=Math.sin(e);return e=Math.cos(e),"x"==n?[t[0],e*t[1]+r*t[2],e*t[2]-r*t[1],t[3],e*t[4]+r*t[5],e*t[5]-r*t[4],t[6],e*t[7]+r*t[8],e*t[8]-r*t[7]]:"y"==n?[e*t[0]-r*t[2],t[1],e*t[2]+r*t[0],e*t[3]-r*t[5],t[4],e*t[5]+r*t[3],e*t[6]-r*t[8],t[7],e*t[8]+r*t[6]]:"z"==n?[e*t[0]+r*t[1],e*t[1]-r*t[0],t[2],e*t[3]+r*t[4],e*t[4]-r*t[3],t[5],e*t[6]+r*t[7],e*t[7]-r*t[6],t[8]]:void 0}function m(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]}function v(t){B(t,t.path+"."+M.extension,(function(e,n){t.texture=e,t.textureLoaded=n?2:1}),I.crossOrigin)}function y(t,e){var n=[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[4]*e[0]+t[5]*e[1]+t[6]*e[2],t[11]+t[8]*e[0]+t[9]*e[1]+t[10]*e[2],1/(t[12]*e[0]+t[13]*e[1]+t[14]*e[2])],r=n[0]*n[3],i=n[1]*n[3],a=(n=n[2]*n[3],[0,0,0]);return-1>r&&(a[0]=-1),1<r&&(a[0]=1),-1>i&&(a[1]=-1),1<i&&(a[1]=1),(-1>n||1<n)&&(a[2]=1),a}function b(){console.log("Reducing canvas size due to error 1286!"),N.width=Math.round(N.width/2),N.height=Math.round(N.height/2)}var _,E,A,T,w,S,x,L,M,k,C,R,P,O,D,I,N=e.createElement("canvas");N.style.width=N.style.height="100%",r.appendChild(N),this.init=function(t,c,h,d,f,g,m,v){function y(t){if(U){var e=t*t*4,n=new Uint8ClampedArray(e),r=v.backgroundColor?v.backgroundColor:[0,0,0];r[0]*=255,r[1]*=255,r[2]*=255;for(var i=0;i<e;i++)n[i++]=r[0],n[i++]=r[1],n[i++]=r[2];for(t=new ImageData(n,t,t),F=0;6>F;F++)0==M[F].width&&(M[F]=t)}}if(c===n&&(c="equirectangular"),"equirectangular"!=c&&"cubemap"!=c&&"multires"!=c)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(k=c,M=t,C=h,I=v||{},_){if(A&&(E.detachShader(_,A),E.deleteShader(A)),T&&(E.detachShader(_,T),E.deleteShader(T)),E.bindBuffer(E.ARRAY_BUFFER,null),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,null),_.texture&&E.deleteTexture(_.texture),_.nodeCache)for(t=0;t<_.nodeCache.length;t++)E.deleteTexture(_.nodeCache[t].texture);E.deleteProgram(_),_=n}L=n;var F,B,U=!1;if("cubemap"==k)for(F=0;6>F;F++)0<M[F].width?(B===n&&(B=M[F].width),B!=M[F].width&&console.log("Cube faces have inconsistent widths: "+B+" vs. "+M[F].width)):U=!0;if("cubemap"==k&&0!==(B&B-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(E||(E=N.getContext("experimental-webgl",{alpha:!1,depth:!1})),E&&1286==E.getError()&&b()),!E&&("multires"==k&&M.hasOwnProperty("fallbackPath")||"cubemap"==k)&&("WebkitAppearance"in e.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||-1!==navigator.appVersion.indexOf("MSIE 10"))){S&&r.removeChild(S),S=e.createElement("div"),S.className="pnlm-world",d=M.basePath?M.basePath+M.fallbackPath:M.fallbackPath;var j="frblud".split(""),V=0;f=function(){var t=e.createElement("canvas");t.className="pnlm-face pnlm-"+j[this.side]+"face",S.appendChild(t);var n=t.getContext("2d");t.style.width=this.width+4+"px",t.style.height=this.height+4+"px",t.width=this.width+4,t.height=this.height+4,n.drawImage(this,2,2);var r,i,a=n.getImageData(0,0,t.width,t.height),o=a.data;for(r=2;r<t.width-2;r++)for(i=0;4>i;i++)o[4*(r+t.width)+i]=o[4*(r+2*t.width)+i],o[4*(r+t.width*(t.height-2))+i]=o[4*(r+t.width*(t.height-3))+i];for(r=2;r<t.height-2;r++)for(i=0;4>i;i++)o[4*(r*t.width+1)+i]=o[4*(r*t.width+2)+i],o[4*((r+1)*t.width-2)+i]=o[4*((r+1)*t.width-3)+i];for(i=0;4>i;i++)o[4*(t.width+1)+i]=o[4*(2*t.width+2)+i],o[4*(2*t.width-2)+i]=o[4*(3*t.width-3)+i],o[4*(t.width*(t.height-2)+1)+i]=o[4*(t.width*(t.height-3)+2)+i],o[4*(t.width*(t.height-1)-2)+i]=o[4*(t.width*(t.height-2)-3)+i];for(r=1;r<t.width-1;r++)for(i=0;4>i;i++)o[4*r+i]=o[4*(r+t.width)+i],o[4*(r+t.width*(t.height-1))+i]=o[4*(r+t.width*(t.height-2))+i];for(r=1;r<t.height-1;r++)for(i=0;4>i;i++)o[r*t.width*4+i]=o[4*(r*t.width+1)+i],o[4*((r+1)*t.width-1)+i]=o[4*((r+1)*t.width-2)+i];for(i=0;4>i;i++)o[i]=o[4*(t.width+1)+i],o[4*(t.width-1)+i]=o[4*(2*t.width-2)+i],o[t.width*(t.height-1)*4+i]=o[4*(t.width*(t.height-2)+1)+i],o[4*(t.width*t.height-1)+i]=o[4*(t.width*(t.height-1)-2)+i];n.putImageData(a,0,0),G.call(this)};var G=function(){0<this.width?(w===n&&(w=this.width),w!=this.width&&console.log("Fallback faces have inconsistent widths: "+w+" vs. "+this.width)):U=!0,V++,6==V&&(w=this.width,r.appendChild(S),m())};U=!1;for(F=0;6>F;F++)g=new Image,g.crossOrigin=I.crossOrigin?I.crossOrigin:"anonymous",g.side=F,g.onload=f,g.onerror=G,g.src="multires"==k?d.replace("%s",j[F])+"."+M.extension:M[F].src;y(w)}else{if(!E)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};for("cubemap"==k&&y(B),M.fullpath=M.basePath?M.basePath+M.path:M.path,M.invTileResolution=1/M.tileResolution,t=p(),x=[],F=0;6>F;F++)x[F]=t.slice(12*F,12*F+12),t=p();if(t=0,"equirectangular"==k){if(t=E.getParameter(E.MAX_TEXTURE_SIZE),Math.max(M.width/2,M.height)>t)throw console.log("Error: The image is too big; it's "+M.width+"px wide, but this device's maximum supported size is "+2*t+"px."),{type:"webgl size error",width:M.width,maxWidth:2*t}}else if("cubemap"==k&&B>E.getParameter(E.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+B+"px wide, but this device's maximum supported size is "+t+"px."),{type:"webgl size error",width:B,maxWidth:t};if(v===n||v.horizonPitch===n&&v.horizonRoll===n||(L=[v.horizonPitch==n?0:v.horizonPitch,v.horizonRoll==n?0:v.horizonRoll]),B=E.TEXTURE_2D,E.viewport(0,0,E.drawingBufferWidth,E.drawingBufferHeight),E.getShaderPrecisionFormat&&(c=E.getShaderPrecisionFormat(E.FRAGMENT_SHADER,E.HIGH_FLOAT))&&1>c.precision&&(o=o.replace("highp","mediump")),A=E.createShader(E.VERTEX_SHADER),c=i,"multires"==k&&(c=a),E.shaderSource(A,c),E.compileShader(A),T=E.createShader(E.FRAGMENT_SHADER),c=l,"cubemap"==k?(B=E.TEXTURE_CUBE_MAP,c=s):"multires"==k&&(c=u),E.shaderSource(T,c),E.compileShader(T),_=E.createProgram(),E.attachShader(_,A),E.attachShader(_,T),E.linkProgram(_),E.getShaderParameter(A,E.COMPILE_STATUS)||console.log(E.getShaderInfoLog(A)),E.getShaderParameter(T,E.COMPILE_STATUS)||console.log(E.getShaderInfoLog(T)),E.getProgramParameter(_,E.LINK_STATUS)||console.log(E.getProgramInfoLog(_)),E.useProgram(_),_.drawInProgress=!1,c=v.backgroundColor?v.backgroundColor:[0,0,0],E.clearColor(c[0],c[1],c[2],1),E.clear(E.COLOR_BUFFER_BIT),_.texCoordLocation=E.getAttribLocation(_,"a_texCoord"),E.enableVertexAttribArray(_.texCoordLocation),"multires"!=k?(R||(R=E.createBuffer()),E.bindBuffer(E.ARRAY_BUFFER,R),E.bufferData(E.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),E.STATIC_DRAW),E.vertexAttribPointer(_.texCoordLocation,2,E.FLOAT,!1,0,0),_.aspectRatio=E.getUniformLocation(_,"u_aspectRatio"),E.uniform1f(_.aspectRatio,E.drawingBufferWidth/E.drawingBufferHeight),_.psi=E.getUniformLocation(_,"u_psi"),_.theta=E.getUniformLocation(_,"u_theta"),_.f=E.getUniformLocation(_,"u_f"),_.h=E.getUniformLocation(_,"u_h"),_.v=E.getUniformLocation(_,"u_v"),_.vo=E.getUniformLocation(_,"u_vo"),_.rot=E.getUniformLocation(_,"u_rot"),E.uniform1f(_.h,d/(2*Math.PI)),E.uniform1f(_.v,f/Math.PI),E.uniform1f(_.vo,g/Math.PI*2),"equirectangular"==k&&(_.backgroundColor=E.getUniformLocation(_,"u_backgroundColor"),E.uniform4fv(_.backgroundColor,c.concat([1]))),_.texture=E.createTexture(),E.bindTexture(B,_.texture),"cubemap"==k?(E.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_X,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,M[1]),E.texImage2D(E.TEXTURE_CUBE_MAP_NEGATIVE_X,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,M[3]),E.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_Y,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,M[4]),E.texImage2D(E.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,M[5]),E.texImage2D(E.TEXTURE_CUBE_MAP_POSITIVE_Z,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,M[0]),E.texImage2D(E.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,M[2])):M.width<=t?(E.uniform1i(E.getUniformLocation(_,"u_splitImage"),0),E.texImage2D(B,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,M)):(E.uniform1i(E.getUniformLocation(_,"u_splitImage"),1),d=e.createElement("canvas"),d.width=M.width/2,d.height=M.height,d=d.getContext("2d"),d.drawImage(M,0,0),f=d.getImageData(0,0,M.width/2,M.height),E.texImage2D(B,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,f),_.texture2=E.createTexture(),E.activeTexture(E.TEXTURE1),E.bindTexture(B,_.texture2),E.uniform1i(E.getUniformLocation(_,"u_image1"),1),d.drawImage(M,-M.width/2,0),f=d.getImageData(0,0,M.width/2,M.height),E.texImage2D(B,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,f),E.texParameteri(B,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(B,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(B,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(B,E.TEXTURE_MAG_FILTER,E.LINEAR),E.activeTexture(E.TEXTURE0)),E.texParameteri(B,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(B,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(B,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(B,E.TEXTURE_MAG_FILTER,E.LINEAR)):(_.vertPosLocation=E.getAttribLocation(_,"a_vertCoord"),E.enableVertexAttribArray(_.vertPosLocation),P||(P=E.createBuffer()),O||(O=E.createBuffer()),D||(D=E.createBuffer()),E.bindBuffer(E.ARRAY_BUFFER,O),E.bufferData(E.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),E.STATIC_DRAW),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,D),E.bufferData(E.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),E.STATIC_DRAW),_.perspUniform=E.getUniformLocation(_,"u_perspMatrix"),_.cubeUniform=E.getUniformLocation(_,"u_cubeMatrix"),_.level=-1,_.currentNodes=[],_.nodeCache=[],_.nodeCacheTimestamp=0),d=E.getError(),0!==d)throw console.log("Error: Something went wrong with WebGL!",d),{type:"webgl error"};m()}},this.destroy=function(){if(r!==n&&(N!==n&&r.contains(N)&&r.removeChild(N),S!==n&&r.contains(S)&&r.removeChild(S)),E){var t=E.getExtension("WEBGL_lose_context");t&&t.loseContext()}},this.resize=function(){var e=t.devicePixelRatio||1;N.width=N.clientWidth*e,N.height=N.clientHeight*e,E&&(1286==E.getError()&&b(),E.viewport(0,0,E.drawingBufferWidth,E.drawingBufferHeight),"multires"!=k&&E.uniform1f(_.aspectRatio,N.clientWidth/N.clientHeight))},this.resize(),this.setPose=function(t,e){L=[t,e]},this.render=function(t,e,r,i){var a,o=0;if(i===n&&(i={}),i.roll&&(o=i.roll),L!==n){a=L[0];var s=L[1],l=t,u=e,p=Math.cos(s)*Math.sin(t)*Math.sin(a)+Math.cos(t)*(Math.cos(a)*Math.cos(e)+Math.sin(s)*Math.sin(a)*Math.sin(e)),y=-Math.sin(t)*Math.sin(s)+Math.cos(t)*Math.cos(s)*Math.sin(e);t=Math.cos(s)*Math.cos(a)*Math.sin(t)+Math.cos(t)*(-Math.cos(e)*Math.sin(a)+Math.cos(a)*Math.sin(s)*Math.sin(e)),t=Math.asin(Math.max(Math.min(t,1),-1)),e=Math.atan2(y,p),a=[Math.cos(l)*(Math.sin(s)*Math.sin(a)*Math.cos(u)-Math.cos(a)*Math.sin(u)),Math.cos(l)*Math.cos(s)*Math.cos(u),Math.cos(l)*(Math.cos(a)*Math.sin(s)*Math.cos(u)+Math.sin(u)*Math.sin(a))],s=[-Math.cos(t)*Math.sin(e),Math.cos(t)*Math.cos(e)],s=Math.acos(Math.max(Math.min((a[0]*s[0]+a[1]*s[1])/(Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2])*Math.sqrt(s[0]*s[0]+s[1]*s[1])),1),-1)),0>a[2]&&(s=2*Math.PI-s),o+=s}if(E||"multires"!=k&&"cubemap"!=k){if("multires"!=k)r=2*Math.atan(Math.tan(.5*r)/(E.drawingBufferWidth/E.drawingBufferHeight)),r=1/Math.tan(.5*r),E.uniform1f(_.psi,e),E.uniform1f(_.theta,t),E.uniform1f(_.rot,o),E.uniform1f(_.f,r),!0===C&&"equirectangular"==k&&(E.bindTexture(E.TEXTURE_2D,_.texture),E.texImage2D(E.TEXTURE_2D,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,M)),E.drawArrays(E.TRIANGLES,0,6);else{for(a=E.drawingBufferWidth/E.drawingBufferHeight,s=2*Math.atan(Math.tan(r/2)*E.drawingBufferHeight/E.drawingBufferWidth),s=1/Math.tan(s/2),a=[s/a,0,0,0,0,s,0,0,0,0,100.1/-99.9,20/-99.9,0,0,-1,0],s=1;s<M.maxLevel&&E.drawingBufferWidth>M.tileResolution*Math.pow(2,s-1)*Math.tan(r/2)*.707;)s++;if(_.level=s,s=[1,0,0,0,1,0,0,0,1],s=g(s,-o,"z"),s=g(s,-t,"x"),s=g(s,e,"y"),s=[s[0],s[1],s[2],0,s[3],s[4],s[5],0,s[6],s[7],s[8],0,0,0,0,1],E.uniformMatrix4fv(_.perspUniform,!1,new Float32Array(m(a))),E.uniformMatrix4fv(_.cubeUniform,!1,new Float32Array(m(s))),o=[a[0]*s[0],a[0]*s[1],a[0]*s[2],0,a[5]*s[4],a[5]*s[5],a[5]*s[6],0,a[10]*s[8],a[10]*s[9],a[10]*s[10],a[11],-s[8],-s[9],-s[10],0],_.nodeCache.sort(c),200<_.nodeCache.length&&_.nodeCache.length>_.currentNodes.length+50)for(a=_.nodeCache.splice(200,_.nodeCache.length-200),s=0;s<a.length;s++)E.deleteTexture(a[s].texture);for(_.currentNodes=[],s="fbudlr".split(""),a=0;6>a;a++)l=new d(x[a],s[a],1,0,0,M.fullpath),f(o,l,t,e,r);for(_.currentNodes.sort(h),t=F.length-1;0<=t;t--)-1===_.currentNodes.indexOf(F[t].node)&&(F[t].node.textureLoad=!1,F.splice(t,1));if(0===F.length)for(t=0;t<_.currentNodes.length;t++)if(e=_.currentNodes[t],!e.texture&&!e.textureLoad){e.textureLoad=!0,setTimeout(v,0,e);break}if(!_.drawInProgress){for(_.drawInProgress=!0,E.clear(E.COLOR_BUFFER_BIT),t=0;t<_.currentNodes.length;t++)1<_.currentNodes[t].textureLoaded&&(E.bindBuffer(E.ARRAY_BUFFER,P),E.bufferData(E.ARRAY_BUFFER,new Float32Array(_.currentNodes[t].vertices),E.STATIC_DRAW),E.vertexAttribPointer(_.vertPosLocation,3,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,O),E.vertexAttribPointer(_.texCoordLocation,2,E.FLOAT,!1,0,0),E.bindTexture(E.TEXTURE_2D,_.currentNodes[t].texture),E.drawElements(E.TRIANGLES,6,E.UNSIGNED_SHORT,0));_.drawInProgress=!1}}if(i.returnImage!==n)return N.toDataURL("image/png")}else for(a=w/2,i={f:"translate3d(-"+(a+2)+"px, -"+(a+2)+"px, -"+a+"px)",b:"translate3d("+(a+2)+"px, -"+(a+2)+"px, "+a+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(a+2)+"px, -"+a+"px, "+(a+2)+"px) rotateX(270deg)",d:"translate3d(-"+(a+2)+"px, "+a+"px, -"+(a+2)+"px) rotateX(90deg)",l:"translate3d(-"+a+"px, -"+(a+2)+"px, "+(a+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+a+"px, -"+(a+2)+"px, -"+(a+2)+"px) rotateY(270deg)"},r=1/Math.tan(r/2),r=r*N.clientWidth/2+"px",e="perspective("+r+") translateZ("+r+") rotateX("+t+"rad) rotateY("+e+"rad) ",r=Object.keys(i),t=0;6>t;t++)(o=S.querySelector(".pnlm-"+r[t]+"face"))&&(o.style.webkitTransform=e+i[r[t]],o.style.transform=e+i[r[t]])},this.isLoading=function(){if(E&&"multires"==k)for(var t=0;t<_.currentNodes.length;t++)if(!_.currentNodes[t].textureLoaded)return!0;return!1},this.getCanvas=function(){return N};var F=[],B=function(){function t(){var t=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=n||"anonymous";var e=function(){if(0<t.image.width&&0<t.image.height){var e=t.image;E.bindTexture(E.TEXTURE_2D,t.texture),E.texImage2D(E.TEXTURE_2D,0,E.RGB,E.RGB,E.UNSIGNED_BYTE,e),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.bindTexture(E.TEXTURE_2D,null),t.callback(t.texture,!0)}else t.callback(t.texture,!1);F.length?(e=F.shift(),t.loadTexture(e.src,e.texture,e.callback)):i[r++]=t};this.image.addEventListener("load",e),this.image.addEventListener("error",e)}function e(t,e,n,r){this.node=t,this.src=e,this.texture=n,this.callback=r}var n,r=4,i={};t.prototype.loadTexture=function(t,e,n){this.texture=e,this.callback=n,this.image.src=t};for(var a=0;a<r;a++)i[a]=new t;return function(t,a,o,s){return n=s,s=E.createTexture(),r?i[--r].loadTexture(a,s,o):F.push(new e(t,a,s,o)),s}}()}var i="attribute vec2 a_texCoord;varying vec2 v_texCoord;void main() {gl_Position = vec4(a_texCoord, 0.0, 1.0);v_texCoord = a_texCoord;}",a="attribute vec3 a_vertCoord;attribute vec2 a_texCoord;uniform mat4 u_cubeMatrix;uniform mat4 u_perspMatrix;varying mediump vec2 v_texCoord;void main(void) {gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);v_texCoord = a_texCoord;}",o="precision highp float;\nuniform float u_aspectRatio;\nuniform float u_psi;\nuniform float u_theta;\nuniform float u_f;\nuniform float u_h;\nuniform float u_v;\nuniform float u_vo;\nuniform float u_rot;\nconst float PI = 3.14159265358979323846264;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nuniform bool u_splitImage;\nuniform samplerCube u_imageCube;\nvarying vec2 v_texCoord;\nuniform vec4 u_backgroundColor;\nvoid main() {\nfloat x = v_texCoord.x * u_aspectRatio;\nfloat y = v_texCoord.y;\nfloat sinrot = sin(u_rot);\nfloat cosrot = cos(u_rot);\nfloat rot_x = x * cosrot - y * sinrot;\nfloat rot_y = x * sinrot + y * cosrot;\nfloat sintheta = sin(u_theta);\nfloat costheta = cos(u_theta);\nfloat a = u_f * costheta - rot_y * sintheta;\nfloat root = sqrt(rot_x * rot_x + a * a);\nfloat lambda = atan(rot_x / root, a / root) + u_psi;\nfloat phi = atan((rot_y * costheta + u_f * sintheta) / root);",s=o+"float cosphi = cos(phi);\ngl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));\n}",l=o+"lambda = mod(lambda + PI, PI * 2.0) - PI;\nvec2 coord = vec2(lambda / PI, phi / (PI / 2.0));\nif(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)\ngl_FragColor = u_backgroundColor;\nelse {\nif(u_splitImage) {\nif(coord.x < 0.0)\ngl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));\nelse\ngl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n} else {\ngl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));\n}\n}\n}",u="varying mediump vec2 v_texCoord;uniform sampler2D u_sampler;void main(void) {gl_FragColor = texture2D(u_sampler, v_texCoord);}";return{renderer:function(t,e,n,i){return new r(t,e,n,i)}}}(window,document),window.pannellum=function(t,e,n){function r(r,i){function a(){var r=e.createElement("div");if(r.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1==r.getElementsByTagName("i").length)u();else{var i;if(ct=rt.hfov,ht=rt.pitch,"cubemap"==rt.type){for(st=[],r=0;6>r;r++)st.push(new Image),st[r].crossOrigin=rt.crossOrigin;jt.load.lbox.style.display="block",jt.load.lbar.style.display="none"}else if("multires"==rt.type)r=JSON.parse(JSON.stringify(rt.multiRes)),rt.basePath&&rt.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(rt.multiRes.basePath)?r.basePath=rt.basePath+rt.multiRes.basePath:rt.multiRes.basePath?r.basePath=rt.multiRes.basePath:rt.basePath&&(r.basePath=rt.basePath),st=r;else if(!0===rt.dynamic)st=rt.panorama;else{if(rt.panorama===n)return void u(rt.strings.noPanoramaError);st=new Image}if("cubemap"==rt.type){var a=6,c=function(){a--,0===a&&s()},h=function(t){var n=e.createElement("a");n.href=t.target.src,n.textContent=n.href,u(rt.strings.fileAccessError.replace("%s",n.outerHTML))};for(r=0;r<st.length;r++)i=rt.cubeMap[r],"null"==i?(console.log("Will use background instead of missing cubemap face "+r),c()):(rt.basePath&&!o(i)&&(i=rt.basePath+i),st[r].onload=c,st[r].onerror=h,st[r].src=tt(i))}else if("multires"==rt.type)s();else if(i="",rt.basePath&&(i=rt.basePath),!0!==rt.dynamic){i=o(rt.panorama)?rt.panorama:i+rt.panorama,st.onload=function(){t.URL.revokeObjectURL(this.src),s()};var d=new XMLHttpRequest;d.onloadend=function(){if(200!=d.status){var t=e.createElement("a");t.href=i,t.textContent=t.href,u(rt.strings.fileAccessError.replace("%s",t.outerHTML))}l(this.response),jt.load.msg.innerHTML=""},d.onprogress=function(t){var e,n;t.lengthComputable?(jt.load.lbarFill.style.width=t.loaded/t.total*100+"%",1e6<t.total?(e="MB",n=(t.loaded/1e6).toFixed(2),t=(t.total/1e6).toFixed(2)):1e3<t.total?(e="kB",n=(t.loaded/1e3).toFixed(1),t=(t.total/1e3).toFixed(1)):(e="B",n=t.loaded,t=t.total),jt.load.msg.innerHTML=n+" / "+t+" "+e):(jt.load.lbox.style.display="block",jt.load.lbar.style.display="none")};try{d.open("GET",i,!0)}catch(Y){u(rt.strings.malformedURLError)}d.responseType="blob",d.setRequestHeader("Accept","image/*,*/*;q=0.9"),d.withCredentials="use-credentials"===rt.crossOrigin,d.send()}rt.draggable&&Nt.classList.add("pnlm-grab"),Nt.classList.remove("pnlm-grabbing"),Pt=!0===rt.dynamicUpdate,rt.dynamic&&Pt&&(st=rt.panorama,s())}}function o(t){return/^(?:[a-z]+:)?\/\//i.test(t)||"/"==t[0]||"blob:"==t.slice(0,5)}function s(){it||(it=new libpannellum.renderer(Ft)),Tt||(Tt=!0,Bt.addEventListener("mousedown",d,!1),e.addEventListener("mousemove",g,!1),e.addEventListener("mouseup",m,!1),rt.mouseZoom&&(Nt.addEventListener("mousewheel",T,!1),Nt.addEventListener("DOMMouseScroll",T,!1)),rt.doubleClickZoom&&Bt.addEventListener("dblclick",f,!1),r.addEventListener("mozfullscreenchange",H,!1),r.addEventListener("webkitfullscreenchange",H,!1),r.addEventListener("msfullscreenchange",H,!1),r.addEventListener("fullscreenchange",H,!1),t.addEventListener("resize",C,!1),t.addEventListener("orientationchange",C,!1),rt.disableKeyboardCtrl||(r.addEventListener("keydown",w,!1),r.addEventListener("keyup",x,!1),r.addEventListener("blur",S,!1)),e.addEventListener("mouseleave",m,!1),""===e.documentElement.style.pointerAction&&""===e.documentElement.style.touchAction?(Bt.addEventListener("pointerdown",_,!1),Bt.addEventListener("pointermove",E,!1),Bt.addEventListener("pointerup",A,!1),Bt.addEventListener("pointerleave",A,!1)):(Bt.addEventListener("touchstart",v,!1),Bt.addEventListener("touchmove",y,!1),Bt.addEventListener("touchend",b,!1)),t.navigator.pointerEnabled&&(r.style.touchAction="none")),N(),W(rt.hfov),setTimeout((function(){}),500)}function l(e){var r=new FileReader;r.addEventListener("loadend",(function(){var i=r.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var a=i.indexOf("");(0>a||65536<a)&&u(rt.strings.iOS8WebGLError)}if(a=i.indexOf("<x:xmpmeta"),-1<a&&!0!==rt.ignoreGPanoXMP){var o=i.substring(a,i.indexOf("</x:xmpmeta>")+12),s=function(t){var e;return 0<=o.indexOf(t+'="')?(e=o.substring(o.indexOf(t+'="')+t.length+2),e=e.substring(0,e.indexOf('"'))):0<=o.indexOf(t+">")&&(e=o.substring(o.indexOf(t+">")+t.length+1),e=e.substring(0,e.indexOf("<"))),e!==n?Number(e):null},l=(i=s("GPano:FullPanoWidthPixels"),a=s("GPano:CroppedAreaImageWidthPixels"),s("GPano:FullPanoHeightPixels")),c=s("GPano:CroppedAreaImageHeightPixels"),h=s("GPano:CroppedAreaTopPixels"),d=s("GPano:PoseHeadingDegrees"),f=s("GPano:PosePitchDegrees");s=s("GPano:PoseRollDegrees");null!==i&&null!==a&&null!==l&&null!==c&&null!==h&&(0>Rt.indexOf("haov")&&(rt.haov=a/i*360),0>Rt.indexOf("vaov")&&(rt.vaov=c/l*180),0>Rt.indexOf("vOffset")&&(rt.vOffset=-180*((h+c/2)/l-.5)),null!==d&&0>Rt.indexOf("northOffset")&&(rt.northOffset=d,!1!==rt.compass&&(rt.compass=!0)),null!==f&&null!==s&&(0>Rt.indexOf("horizonPitch")&&(rt.horizonPitch=f),0>Rt.indexOf("horizonRoll")&&(rt.horizonRoll=s)))}st.src=t.URL.createObjectURL(e)})),r.readAsBinaryString!==n?r.readAsBinaryString(e):r.readAsText(e)}function u(t){t===n&&(t=rt.strings.genericWebGLError),jt.errorMsg.innerHTML="<p>"+t+"</p>",Gt.load.style.display="none",jt.load.box.style.display="none",jt.errorMsg.style.display="table",At=!0,ot=n,Ft.style.display="none",nt("error",t)}function c(t){var e=h(t);Ut.style.left=e.x+"px",Ut.style.top=e.y+"px",clearTimeout(c.t1),clearTimeout(c.t2),Ut.style.display="block",Ut.style.opacity=1,c.t1=setTimeout((function(){Ut.style.opacity=0}),2e3),c.t2=setTimeout((function(){Ut.style.display="none"}),2500),t.preventDefault()}function h(t){var e=r.getBoundingClientRect(),n={};return n.x=(t.clientX||t.pageX)-e.left,n.y=(t.clientY||t.pageY)-e.top,n}function d(t){if(t.preventDefault(),r.focus(),ot&&rt.draggable){var e=h(t);if(rt.hotSpotDebug){var n=p(t);console.log("Pitch: "+n[0]+", Yaw: "+n[1]+", Center Pitch: "+rt.pitch+", Center Yaw: "+rt.yaw+", HFOV: "+rt.hfov)}K(),Z(),rt.roll=0,wt.hfov=0,ft=!0,pt=Date.now(),gt=e.x,mt=e.y,yt=rt.yaw,bt=rt.pitch,Nt.classList.add("pnlm-grabbing"),Nt.classList.remove("pnlm-grab"),nt("mousedown",t),R()}}function f(t){rt.minHfov===rt.hfov?dt.setHfov(ct,1e3):(t=p(t),dt.lookAt(t[0],t[1],rt.minHfov,1e3))}function p(t){var e=h(t);t=it.getCanvas();var n=t.clientWidth,r=t.clientHeight;t=e.x/n*2-1;r=(1-e.y/r*2)*r/n;var i=1/Math.tan(rt.hfov*Math.PI/360),a=Math.sin(rt.pitch*Math.PI/180),o=Math.cos(rt.pitch*Math.PI/180);e=i*o-r*a,n=Math.sqrt(t*t+e*e),r=180*Math.atan((r*o+i*a)/n)/Math.PI;return t=180*Math.atan2(t/n,e/n)/Math.PI+rt.yaw,-180>t&&(t+=360),180<t&&(t-=360),[r,t]}function g(t){if(ft&&ot){pt=Date.now();var e=it.getCanvas(),n=e.clientWidth;e=e.clientHeight;t=h(t);var r=180*(Math.atan(gt/n*2-1)-Math.atan(t.x/n*2-1))/Math.PI*rt.hfov/90+yt;wt.yaw=(r-rt.yaw)%360*.2,rt.yaw=r,n=360*Math.atan(Math.tan(rt.hfov/360*Math.PI)*e/n)/Math.PI,n=180*(Math.atan(t.y/e*2-1)-Math.atan(mt/e*2-1))/Math.PI*n/90+bt,wt.pitch=.2*(n-rt.pitch),rt.pitch=n}}function m(t){ft&&(ft=!1,15<Date.now()-pt&&(wt.pitch=wt.yaw=0),Nt.classList.add("pnlm-grab"),Nt.classList.remove("pnlm-grabbing"),pt=Date.now(),nt("mouseup",t))}function v(t){if(ot&&rt.draggable){K(),Z(),rt.roll=0,wt.hfov=0;var e=h(t.targetTouches[0]);if(gt=e.x,mt=e.y,2==t.targetTouches.length){var n=h(t.targetTouches[1]);gt+=.5*(n.x-e.x),mt+=.5*(n.y-e.y),vt=Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y))}ft=!0,pt=Date.now(),yt=rt.yaw,bt=rt.pitch,nt("touchstart",t),R()}}function y(t){if(rt.draggable&&(t.preventDefault(),ot&&(pt=Date.now()),ft&&ot)){var e=h(t.targetTouches[0]),n=e.x,r=e.y;2==t.targetTouches.length&&-1!=vt&&(t=h(t.targetTouches[1]),n+=.5*(t.x-e.x),r+=.5*(t.y-e.y),e=Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)),W(rt.hfov+.1*(vt-e)),vt=e),e=rt.hfov/360*rt.touchPanSpeedCoeffFactor,n=(gt-n)*e+yt,wt.yaw=(n-rt.yaw)%360*.2,rt.yaw=n,r=(r-mt)*e+bt,wt.pitch=.2*(r-rt.pitch),rt.pitch=r}}function b(){ft=!1,150<Date.now()-pt&&(wt.pitch=wt.yaw=0),vt=-1,pt=Date.now(),nt("touchend",event)}function _(t){"touch"==t.pointerType&&ot&&rt.draggable&&(Ht.push(t.pointerId),$t.push({clientX:t.clientX,clientY:t.clientY}),t.targetTouches=$t,v(t),t.preventDefault())}function E(t){if("touch"==t.pointerType&&rt.draggable)for(var e=0;e<Ht.length;e++)if(t.pointerId==Ht[e]){$t[e].clientX=t.clientX,$t[e].clientY=t.clientY,t.targetTouches=$t,y(t),t.preventDefault();break}}function A(t){if("touch"==t.pointerType){for(var e=!1,r=0;r<Ht.length;r++)t.pointerId==Ht[r]&&(Ht[r]=n),Ht[r]&&(e=!0);e||(Ht=[],$t=[],b()),t.preventDefault()}}function T(t){ot&&("fullscreenonly"!=rt.mouseZoom||Et)&&(t.preventDefault(),K(),pt=Date.now(),t.wheelDeltaY?(W(rt.hfov-.05*t.wheelDeltaY),wt.hfov=0>t.wheelDelta?1:-1):t.wheelDelta?(W(rt.hfov-.05*t.wheelDelta),wt.hfov=0>t.wheelDelta?1:-1):t.detail&&(W(rt.hfov+1.5*t.detail),wt.hfov=0<t.detail?1:-1),R())}function w(t){K(),pt=Date.now(),Z(),rt.roll=0;var e=t.which||t.keycode;0>rt.capturedKeyNumbers.indexOf(e)||(t.preventDefault(),27==e?Et&&Y():L(e,!0))}function S(){for(var t=0;10>t;t++)_t[t]=!1}function x(t){var e=t.which||t.keycode;0>rt.capturedKeyNumbers.indexOf(e)||(t.preventDefault(),L(e,!1))}function L(t,e){var n=!1;switch(t){case 109:case 189:case 17:case 173:_t[0]!=e&&(n=!0),_t[0]=e;break;case 107:case 187:case 16:case 61:_t[1]!=e&&(n=!0),_t[1]=e;break;case 38:_t[2]!=e&&(n=!0),_t[2]=e;break;case 87:_t[6]!=e&&(n=!0),_t[6]=e;break;case 40:_t[3]!=e&&(n=!0),_t[3]=e;break;case 83:_t[7]!=e&&(n=!0),_t[7]=e;break;case 37:_t[4]!=e&&(n=!0),_t[4]=e;break;case 65:_t[8]!=e&&(n=!0),_t[8]=e;break;case 39:_t[5]!=e&&(n=!0),_t[5]=e;break;case 68:_t[9]!=e&&(n=!0),_t[9]=e}n&&e&&(lt="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),R())}function M(){if(ot){var t,e=!1,r=rt.pitch,i=rt.yaw,a=rt.hfov;t="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),lt===n&&(lt=t);var o=(t-lt)*rt.hfov/1700;o=Math.min(o,1);if(_t[0]&&!0===rt.keyboardZoom&&(W(rt.hfov+(.8*wt.hfov+.5)*o),e=!0),_t[1]&&!0===rt.keyboardZoom&&(W(rt.hfov+(.8*wt.hfov-.2)*o),e=!0),(_t[2]||_t[6])&&(rt.pitch+=(.8*wt.pitch+.2)*o,e=!0),(_t[3]||_t[7])&&(rt.pitch+=(.8*wt.pitch-.2)*o,e=!0),(_t[4]||_t[8])&&(rt.yaw+=(.8*wt.yaw-.2)*o,e=!0),(_t[5]||_t[9])&&(rt.yaw+=(.8*wt.yaw+.2)*o,e=!0),e&&(pt=Date.now()),rt.autoRotate){if(.001<t-lt){e=(t-lt)/1e3;var s=(wt.yaw/e*o-.2*rt.autoRotate)*e;s=(0<-rt.autoRotate?1:-1)*Math.min(Math.abs(rt.autoRotate*e),Math.abs(s));rt.yaw+=s}rt.autoRotateStopDelay&&(rt.autoRotateStopDelay-=t-lt,0>=rt.autoRotateStopDelay&&(rt.autoRotateStopDelay=!1,Mt=rt.autoRotate,rt.autoRotate=0))}kt.pitch&&(k("pitch"),r=rt.pitch),kt.yaw&&(k("yaw"),i=rt.yaw),kt.hfov&&(k("hfov"),a=rt.hfov),0<o&&!rt.autoRotate&&(e=1-rt.friction,_t[4]||_t[5]||_t[8]||_t[9]||kt.yaw||(rt.yaw+=wt.yaw*o*e),_t[2]||_t[3]||_t[6]||_t[7]||kt.pitch||(rt.pitch+=wt.pitch*o*e),_t[0]||_t[1]||kt.hfov||W(rt.hfov+wt.hfov*o*e)),lt=t,0<o&&(wt.yaw=.8*wt.yaw+(rt.yaw-i)/o*.2,wt.pitch=.8*wt.pitch+(rt.pitch-r)/o*.2,wt.hfov=.8*wt.hfov+(rt.hfov-a)/o*.2,r=rt.autoRotate?Math.abs(rt.autoRotate):5,wt.yaw=Math.min(r,Math.max(wt.yaw,-r)),wt.pitch=Math.min(r,Math.max(wt.pitch,-r)),wt.hfov=Math.min(r,Math.max(wt.hfov,-r))),_t[0]&&_t[1]&&(wt.hfov=0),(_t[2]||_t[6])&&(_t[3]||_t[7])&&(wt.pitch=0),(_t[4]||_t[8])&&(_t[5]||_t[9])&&(wt.yaw=0)}}function k(t){var e=kt[t],n=Math.min(1,Math.max((Date.now()-e.startTime)/1e3/(e.duration/1e3),0));n=e.startPosition+rt.animationTimingFunction(n)*(e.endPosition-e.startPosition);(e.endPosition>e.startPosition&&n>=e.endPosition||e.endPosition<e.startPosition&&n<=e.endPosition||e.endPosition===e.startPosition)&&(n=e.endPosition,wt[t]=0,delete kt[t]),rt[t]=n}function C(){H("resize")}function R(){St||(St=!0,P())}function P(){if(!Dt)if(O(),ut&&clearTimeout(ut),ft||!0===xt)requestAnimationFrame(P);else if(_t[0]||_t[1]||_t[2]||_t[3]||_t[4]||_t[5]||_t[6]||_t[7]||_t[8]||_t[9]||rt.autoRotate||kt.pitch||kt.yaw||kt.hfov||.01<Math.abs(wt.yaw)||.01<Math.abs(wt.pitch)||.01<Math.abs(wt.hfov))M(),0<=rt.autoRotateInactivityDelay&&Mt&&Date.now()-pt>rt.autoRotateInactivityDelay&&!rt.autoRotate&&(rt.autoRotate=Mt,dt.lookAt(ht,n,ct,3e3)),requestAnimationFrame(P);else if(it&&(it.isLoading()||!0===rt.dynamic&&Pt))requestAnimationFrame(P);else{nt("animatefinished",{pitch:dt.getPitch(),yaw:dt.getYaw(),hfov:dt.getHfov()}),St=!1,lt=n;var t=rt.autoRotateInactivityDelay-(Date.now()-pt);0<t?ut=setTimeout((function(){rt.autoRotate=Mt,dt.lookAt(ht,n,ct,3e3),R()}),t):0<=rt.autoRotateInactivityDelay&&Mt&&(rt.autoRotate=Mt,dt.lookAt(ht,n,ct,3e3),R())}}function O(){var t;if(ot){var e=it.getCanvas();!1!==rt.autoRotate&&(360<rt.yaw?rt.yaw-=360:-360>rt.yaw&&(rt.yaw+=360)),t=rt.yaw;var r=0;if(rt.avoidShowingBackground){var i=rt.hfov/2,a=180*Math.atan2(Math.tan(i/180*Math.PI),e.width/e.height)/Math.PI;rt.vaov>rt.haov?Math.min(Math.cos((rt.pitch-i)/180*Math.PI),Math.cos((rt.pitch+i)/180*Math.PI)):r=i*(1-Math.min(Math.cos((rt.pitch-a)/180*Math.PI),Math.cos((rt.pitch+a)/180*Math.PI)))}i=rt.maxYaw-rt.minYaw,a=-180;var o=180;360>i&&(a=rt.minYaw+rt.hfov/2+r,o=rt.maxYaw-rt.hfov/2-r,i<rt.hfov&&(a=o=(a+o)/2),rt.yaw=Math.max(a,Math.min(o,rt.yaw))),!1===rt.autoRotate&&(360<rt.yaw?rt.yaw-=360:-360>rt.yaw&&(rt.yaw+=360)),!1!==rt.autoRotate&&t!=rt.yaw&&lt!==n&&(rt.autoRotate*=-1),t=2*Math.atan(Math.tan(rt.hfov/180*Math.PI*.5)/(e.width/e.height))/Math.PI*180,e=rt.minPitch+t/2,r=rt.maxPitch-t/2,rt.maxPitch-rt.minPitch<t&&(e=r=(e+r)/2),isNaN(e)&&(e=-90),isNaN(r)&&(r=90),rt.pitch=Math.max(e,Math.min(r,rt.pitch)),it.render(rt.pitch*Math.PI/180,rt.yaw*Math.PI/180,rt.hfov*Math.PI/180,{roll:rt.roll*Math.PI/180}),rt.hotSpots.forEach(V),rt.compass&&(Yt.style.transform="rotate("+(-rt.yaw-rt.northOffset)+"deg)",Yt.style.webkitTransform="rotate("+(-rt.yaw-rt.northOffset)+"deg)")}}function D(t,e,n,r){this.w=t,this.x=e,this.y=n,this.z=r}function I(e){var n;n=e.alpha;var r=e.beta;e=e.gamma,r=[r?r*Math.PI/180/2:0,e?e*Math.PI/180/2:0,n?n*Math.PI/180/2:0],n=[Math.cos(r[0]),Math.cos(r[1]),Math.cos(r[2])],r=[Math.sin(r[0]),Math.sin(r[1]),Math.sin(r[2])],n=new D(n[0]*n[1]*n[2]-r[0]*r[1]*r[2],r[0]*n[1]*n[2]-n[0]*r[1]*r[2],n[0]*r[1]*n[2]+r[0]*n[1]*r[2],n[0]*n[1]*r[2]+r[0]*r[1]*n[2]),n=n.multiply(new D(Math.sqrt(.5),-Math.sqrt(.5),0,0)),r=t.orientation?-t.orientation*Math.PI/180/2:0,n=n.multiply(new D(Math.cos(r),0,-Math.sin(r),0)).toEulerAngles(),"number"==typeof xt&&10>xt?xt+=1:10===xt?(Lt=n[2]/Math.PI*180+rt.yaw,xt=!0,requestAnimationFrame(P)):(rt.pitch=n[0]/Math.PI*180,rt.roll=-n[1]/Math.PI*180,rt.yaw=-n[2]/Math.PI*180+Lt)}function N(){try{var t={};rt.horizonPitch!==n&&(t.horizonPitch=rt.horizonPitch*Math.PI/180),rt.horizonRoll!==n&&(t.horizonRoll=rt.horizonRoll*Math.PI/180),rt.backgroundColor!==n&&(t.backgroundColor=rt.backgroundColor),it.init(st,rt.type,rt.dynamic,rt.haov*Math.PI/180,rt.vaov*Math.PI/180,rt.vOffset*Math.PI/180,F,t),!0!==rt.dynamic&&(st=n)}catch(e){if("webgl error"==e.type||"no webgl"==e.type)u();else{if("webgl size error"!=e.type)throw u(rt.strings.unknownError),e;u(rt.strings.textureSizeError.replace("%s",e.width).replace("%s",e.maxWidth))}}}function F(){if(rt.sceneFadeDuration&&it.fadeImg!==n){it.fadeImg.style.opacity=0;var t=it.fadeImg;delete it.fadeImg,setTimeout((function(){Ft.removeChild(t),nt("scenechangefadedone")}),rt.sceneFadeDuration)}Yt.style.display=rt.compass?"inline":"none",U(),jt.load.box.style.display="none",at!==n&&(Ft.removeChild(at),at=n),ot=!0,nt("load"),R()}function B(t){t.pitch=Number(t.pitch)||0,t.yaw=Number(t.yaw)||0;var n=e.createElement("div");n.className="pnlm-hotspot-base",n.className=t.cssClass?n.className+" "+t.cssClass:n.className+" pnlm-hotspot pnlm-sprite pnlm-"+Q(t.type);var r,i=e.createElement("span");if(t.text&&(i.innerHTML=Q(t.text)),t.video){r=e.createElement("video");var a=t.video;rt.basePath&&!o(a)&&(a=rt.basePath+a),r.src=tt(a),r.controls=!0,r.style.width=t.width+"px",Ft.appendChild(n),i.appendChild(r)}else if(t.image){a=t.image,rt.basePath&&!o(a)&&(a=rt.basePath+a),r=e.createElement("a"),r.href=tt(t.URL?t.URL:a,!0),r.target="_blank",i.appendChild(r);var s=e.createElement("img");s.src=tt(a),s.style.width=t.width+"px",s.style.paddingTop="5px",Ft.appendChild(n),r.appendChild(s),i.style.maxWidth="initial"}else if(t.URL){if(r=e.createElement("a"),r.href=tt(t.URL,!0),t.attributes)for(a in t.attributes)r.setAttribute(a,t.attributes[a]);else r.target="_blank";Ft.appendChild(r),n.className+=" pnlm-pointer",i.className+=" pnlm-pointer",r.appendChild(n)}else t.sceneId&&(n.onclick=n.ontouchend=function(){return n.clicked||(n.clicked=!0,q(t.sceneId,t.targetPitch,t.targetYaw,t.targetHfov)),!1},n.className+=" pnlm-pointer",i.className+=" pnlm-pointer"),Ft.appendChild(n);t.createTooltipFunc?t.createTooltipFunc(n,t.createTooltipArgs):(t.text||t.video||t.image)&&(n.classList.add("pnlm-tooltip"),n.appendChild(i),i.style.width=i.scrollWidth-20+"px",i.style.marginLeft=-(i.scrollWidth-n.offsetWidth)/2+"px",i.style.marginTop=-i.scrollHeight-12+"px"),t.clickHandlerFunc&&(n.addEventListener("click",(function(e){t.clickHandlerFunc(e,t.clickHandlerArgs)}),"false"),n.className+=" pnlm-pointer",i.className+=" pnlm-pointer"),t.div=n}function U(){Ot||(rt.hotSpots?(rt.hotSpots=rt.hotSpots.sort((function(t,e){return t.pitch<e.pitch})),rt.hotSpots.forEach(B)):rt.hotSpots=[],Ot=!0,rt.hotSpots.forEach(V))}function j(){var t=rt.hotSpots;if(Ot=!1,delete rt.hotSpots,t)for(var e=0;e<t.length;e++){var n=t[e].div;if(n){for(;n.parentNode&&n.parentNode!=Ft;)n=n.parentNode;Ft.removeChild(n)}delete t[e].div}}function V(t){var e=Math.sin(t.pitch*Math.PI/180),n=Math.cos(t.pitch*Math.PI/180),r=Math.sin(rt.pitch*Math.PI/180),i=Math.cos(rt.pitch*Math.PI/180),a=Math.cos((-t.yaw+rt.yaw)*Math.PI/180),o=e*r+n*a*i;if(90>=t.yaw&&-90<t.yaw&&0>=o||(90<t.yaw||-90>=t.yaw)&&0>=o)t.div.style.visibility="hidden";else{var s=Math.sin((-t.yaw+rt.yaw)*Math.PI/180),l=Math.tan(rt.hfov*Math.PI/360);t.div.style.visibility="visible";var u=it.getCanvas(),c=u.clientWidth;u=u.clientHeight,e=[-c/l*s*n/o/2,-c/l*(e*i-n*a*r)/o/2],n=Math.sin(rt.roll*Math.PI/180),r=Math.cos(rt.roll*Math.PI/180),e=[e[0]*r-e[1]*n,e[0]*n+e[1]*r];e[0]+=(c-t.div.offsetWidth)/2,e[1]+=(u-t.div.offsetHeight)/2,c="translate("+e[0]+"px, "+e[1]+"px) translateZ(9999px) rotate("+rt.roll+"deg)",t.scale&&(c+=" scale("+ct/rt.hfov/o+")"),t.div.style.webkitTransform=c,t.div.style.MozTransform=c,t.div.style.transform=c}}function G(t){rt={};var e,n,r="haov vaov vOffset northOffset horizonPitch horizonRoll".split(" ");for(e in Rt=[],It)It.hasOwnProperty(e)&&(rt[e]=It[e]);for(e in i.default)if(i.default.hasOwnProperty(e))if("strings"==e)for(n in i.default.strings)i.default.strings.hasOwnProperty(n)&&(rt.strings[n]=Q(i.default.strings[n]));else rt[e]=i.default[e],0<=r.indexOf(e)&&Rt.push(e);if(null!==t&&""!==t&&i.scenes&&i.scenes[t]){var a=i.scenes[t];for(e in a)if(a.hasOwnProperty(e))if("strings"==e)for(n in a.strings)a.strings.hasOwnProperty(n)&&(rt.strings[n]=Q(a.strings[n]));else rt[e]=a[e],0<=r.indexOf(e)&&Rt.push(e);rt.scene=t}for(e in i)if(i.hasOwnProperty(e))if("strings"==e)for(n in i.strings)i.strings.hasOwnProperty(n)&&(rt.strings[n]=Q(i.strings[n]));else rt[e]=i[e],0<=r.indexOf(e)&&Rt.push(e)}function z(t){if((t=t||!1)&&"preview"in rt){var r=rt.preview;rt.basePath&&!o(r)&&(r=rt.basePath+r),at=e.createElement("div"),at.className="pnlm-preview-img",at.style.backgroundImage="url('"+tt(r).replace(/"/g,"%22").replace(/'/g,"%27")+"')",Ft.appendChild(at)}r=rt.title;var i=rt.author;for(var s in t&&("previewTitle"in rt&&(rt.title=rt.previewTitle),"previewAuthor"in rt&&(rt.author=rt.previewAuthor)),rt.hasOwnProperty("title")||(jt.title.innerHTML=""),rt.hasOwnProperty("author")||(jt.author.innerHTML=""),rt.hasOwnProperty("title")||rt.hasOwnProperty("author")||(jt.container.style.display="none"),Gt.load.innerHTML="<p>"+rt.strings.loadButtonLabel+"</p>",jt.load.boxp.innerHTML=rt.strings.loadingLabel,rt)if(rt.hasOwnProperty(s))switch(s){case"title":jt.title.innerHTML=Q(rt[s]),jt.container.style.display="inline";break;case"author":var l=Q(rt[s]);rt.authorURL&&(l=e.createElement("a"),l.href=tt(rt.authorURL,!0),l.target="_blank",l.innerHTML=Q(rt[s]),l=l.outerHTML),jt.author.innerHTML=rt.strings.bylineLabel.replace("%s",l),jt.container.style.display="inline";break;case"fallback":l=e.createElement("a"),l.href=tt(rt[s],!0),l.target="_blank",l.textContent="Click here to view this panorama in an alternative viewer.";var u=e.createElement("p");u.textContent="Your browser does not support WebGL.",u.appendChild(e.createElement("br")),u.appendChild(l),jt.errorMsg.innerHTML="",jt.errorMsg.appendChild(u);break;case"hfov":W(Number(rt[s]));break;case"autoLoad":!0===rt[s]&&it===n&&(jt.load.box.style.display="inline",Gt.load.style.display="none",a());break;case"showZoomCtrl":Gt.zoom.style.display=rt[s]&&0!=rt.showControls?"block":"none";break;case"showFullscreenCtrl":Gt.fullscreen.style.display=rt[s]&&0!=rt.showControls&&("fullscreen"in e||"mozFullScreen"in e||"webkitIsFullScreen"in e||"msFullscreenElement"in e)?"block":"none";break;case"hotSpotDebug":Vt.style.display=rt[s]?"block":"none";break;case"showControls":rt[s]||(Gt.orientation.style.display="none",Gt.zoom.style.display="none",Gt.fullscreen.style.display="none");break;case"orientationOnByDefault":rt[s]&&J()}t&&(r?rt.title=r:delete rt.title,i?rt.author=i:delete rt.author)}function Y(){if(ot&&!At)if(Et)e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen();else try{r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullScreen()}catch(A){}}function H(t){e.fullscreenElement||e.fullscreen||e.mozFullScreen||e.webkitIsFullScreen||e.msFullscreenElement?(Gt.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Et=!0):(Gt.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),Et=!1),"resize"!==t&&nt("fullscreenchange",Et),it.resize(),W(rt.hfov),R()}function $(t){var e=rt.minHfov;if("multires"==rt.type&&it&&!rt.multiResMinHfov&&(e=Math.min(e,it.getCanvas().width/(rt.multiRes.cubeResolution/90*.9))),e>rt.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),rt.hfov;var n=rt.hfov;n=t<e?e:t>rt.maxHfov?rt.maxHfov:t;return rt.avoidShowingBackground&&it&&(t=it.getCanvas(),n=Math.min(n,360*Math.atan(Math.tan((rt.maxPitch-rt.minPitch)/360*Math.PI)/t.height*t.width)/Math.PI)),n}function W(t){rt.hfov=$(t),nt("zoomchange",rt.hfov)}function K(){kt={},Mt=rt.autoRotate?rt.autoRotate:Mt,rt.autoRotate=!1}function X(){At&&(jt.load.box.style.display="none",jt.errorMsg.style.display="none",At=!1,Ft.style.display="block",nt("errorcleared")),ot=!1,Gt.load.style.display="none",jt.load.box.style.display="inline",a()}function q(t,e,r,a,o){var s,l;if(ot||(o=!0),ot=!1,kt={},rt.sceneFadeDuration&&!o&&(s=it.render(rt.pitch*Math.PI/180,rt.yaw*Math.PI/180,rt.hfov*Math.PI/180,{returnImage:!0}),s!==n))return o=new Image,o.className="pnlm-fade-img",o.style.transition="opacity "+rt.sceneFadeDuration/1e3+"s",o.style.width="100%",o.style.height="100%",o.onload=function(){q(t,e,r,a,!0)},o.src=s,Ft.appendChild(o),void(it.fadeImg=o);o="same"===e?rt.pitch:e,s="same"===r?rt.yaw:"sameAzimuth"===r?rt.yaw+(rt.northOffset||0)-(i.scenes[t].northOffset||0):r,l="same"===a?rt.hfov:a,j(),G(t),wt.yaw=wt.pitch=wt.hfov=0,z(),o!==n&&(rt.pitch=o),s!==n&&(rt.yaw=s),l!==n&&(rt.hfov=l),nt("scenechange",t),X()}function Z(){t.removeEventListener("deviceorientation",I),Gt.orientation.classList.remove("pnlm-orientation-button-active"),xt=!1}function J(){"function"===typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"==e&&(xt=1,t.addEventListener("deviceorientation",I),Gt.orientation.classList.add("pnlm-orientation-button-active"))})):(xt=1,t.addEventListener("deviceorientation",I),Gt.orientation.classList.add("pnlm-orientation-button-active"))}function Q(t){return i.escapeHTML?String(t).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(t).split("\n").join("<br>")}function tt(t,e){try{var n=decodeURIComponent(et(t)).replace(/[^\w:]/g,"").toLowerCase()}catch(H){return"about:blank"}return 0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):e&&0===n.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):t}function et(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,(function(t,e){return e=e.toLowerCase(),"colon"===e?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""}))}function nt(t){if(t in Ct)for(var e=Ct[t].length;0<e;e--)Ct[t][Ct[t].length-e].apply(null,[].slice.call(arguments,1))}var rt,it,at,ot,st,lt,ut,ct,ht,dt=this,ft=!1,pt=Date.now(),gt=0,mt=0,vt=-1,yt=0,bt=0,_t=Array(10),Et=!1,At=!1,Tt=!1,wt={yaw:0,pitch:0,hfov:0},St=!1,xt=!1,Lt=0,Mt=0,kt={},Ct={},Rt=[],Pt=!1,Ot=!1,Dt=!1,It={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:n,maxPitch:n,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:n,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(t){return.5>t?2*t*t:(4-2*t)*t-1},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}};r="string"===typeof r?e.getElementById(r):r,r.classList.add("pnlm-container"),r.tabIndex=0;var Nt=e.createElement("div");Nt.className="pnlm-ui",r.appendChild(Nt);var Ft=e.createElement("div");Ft.className="pnlm-render-container",r.appendChild(Ft);var Bt=e.createElement("div");Bt.className="pnlm-dragfix",Nt.appendChild(Bt);var Ut=e.createElement("span");Ut.className="pnlm-about-msg",Ut.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a> 2.5.6',Nt.appendChild(Ut),Bt.addEventListener("contextmenu",c);var jt={},Vt=e.createElement("div");Vt.className="pnlm-sprite pnlm-hot-spot-debug-indicator",Nt.appendChild(Vt),jt.container=e.createElement("div"),jt.container.className="pnlm-panorama-info",jt.title=e.createElement("div"),jt.title.className="pnlm-title-box",jt.container.appendChild(jt.title),jt.author=e.createElement("div"),jt.author.className="pnlm-author-box",jt.container.appendChild(jt.author),Nt.appendChild(jt.container),jt.load={},jt.load.box=e.createElement("div"),jt.load.box.className="pnlm-load-box",jt.load.boxp=e.createElement("p"),jt.load.box.appendChild(jt.load.boxp),jt.load.lbox=e.createElement("div"),jt.load.lbox.className="pnlm-lbox",jt.load.lbox.innerHTML='<div class="pnlm-loading"></div>',jt.load.box.appendChild(jt.load.lbox),jt.load.lbar=e.createElement("div"),jt.load.lbar.className="pnlm-lbar",jt.load.lbarFill=e.createElement("div"),jt.load.lbarFill.className="pnlm-lbar-fill",jt.load.lbar.appendChild(jt.load.lbarFill),jt.load.box.appendChild(jt.load.lbar),jt.load.msg=e.createElement("p"),jt.load.msg.className="pnlm-lmsg",jt.load.box.appendChild(jt.load.msg),Nt.appendChild(jt.load.box),jt.errorMsg=e.createElement("div"),jt.errorMsg.className="pnlm-error-msg pnlm-info-box",Nt.appendChild(jt.errorMsg);var Gt={};Gt.container=e.createElement("div"),Gt.container.className="pnlm-controls-container",Nt.appendChild(Gt.container),Gt.load=e.createElement("div"),Gt.load.className="pnlm-load-button",Gt.load.addEventListener("click",(function(){z(),X()})),Nt.appendChild(Gt.load),Gt.zoom=e.createElement("div"),Gt.zoom.className="pnlm-zoom-controls pnlm-controls",Gt.zoomIn=e.createElement("div"),Gt.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",Gt.zoomIn.addEventListener("click",(function(){ot&&(W(rt.hfov-5),R())})),Gt.zoom.appendChild(Gt.zoomIn),Gt.zoomOut=e.createElement("div"),Gt.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",Gt.zoomOut.addEventListener("click",(function(){ot&&(W(rt.hfov+5),R())})),Gt.zoom.appendChild(Gt.zoomOut),Gt.container.appendChild(Gt.zoom),Gt.fullscreen=e.createElement("div"),Gt.fullscreen.addEventListener("click",Y),Gt.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled)&&Gt.container.appendChild(Gt.fullscreen),Gt.orientation=e.createElement("div"),Gt.orientation.addEventListener("click",(function(t){xt?Z():J()})),Gt.orientation.addEventListener("mousedown",(function(t){t.stopPropagation()})),Gt.orientation.addEventListener("touchstart",(function(t){t.stopPropagation()})),Gt.orientation.addEventListener("pointerdown",(function(t){t.stopPropagation()})),Gt.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var zt=!1;t.DeviceOrientationEvent&&"https:"==location.protocol&&0<=navigator.userAgent.toLowerCase().indexOf("mobi")&&(Gt.container.appendChild(Gt.orientation),zt=!0);var Yt=e.createElement("div");Yt.className="pnlm-compass pnlm-controls pnlm-control",Nt.appendChild(Yt),i.firstScene?G(i.firstScene):i.default&&i.default.firstScene?G(i.default.firstScene):G(null),z(!0);var Ht=[],$t=[];D.prototype.multiply=function(t){return new D(this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,this.x*t.w+this.w*t.x+this.y*t.z-this.z*t.y,this.y*t.w+this.w*t.y+this.z*t.x-this.x*t.z,this.z*t.w+this.w*t.z+this.x*t.y-this.y*t.x)},D.prototype.toEulerAngles=function(){var t=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),e=Math.asin(2*(this.w*this.y-this.z*this.x)),n=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[t,e,n]},this.isLoaded=function(){return Boolean(ot)},this.getPitch=function(){return rt.pitch},this.setPitch=function(t,e,r,i){return pt=Date.now(),1e-6>=Math.abs(t-rt.pitch)?("function"==typeof r&&r(i),this):((e=e==n?1e3:Number(e))?(kt.pitch={startTime:Date.now(),startPosition:rt.pitch,endPosition:t,duration:e},"function"==typeof r&&setTimeout((function(){r(i)}),e)):rt.pitch=t,R(),this)},this.getPitchBounds=function(){return[rt.minPitch,rt.maxPitch]},this.setPitchBounds=function(t){return rt.minPitch=Math.max(-90,Math.min(t[0],90)),rt.maxPitch=Math.max(-90,Math.min(t[1],90)),this},this.getYaw=function(){return(rt.yaw+540)%360-180},this.setYaw=function(t,e,r,i){return pt=Date.now(),1e-6>=Math.abs(t-rt.yaw)?("function"==typeof r&&r(i),this):(e=e==n?1e3:Number(e),t=(t+180)%360-180,e?(180<rt.yaw-t?t+=360:180<t-rt.yaw&&(t-=360),kt.yaw={startTime:Date.now(),startPosition:rt.yaw,endPosition:t,duration:e},"function"==typeof r&&setTimeout((function(){r(i)}),e)):rt.yaw=t,R(),this)},this.getYawBounds=function(){return[rt.minYaw,rt.maxYaw]},this.setYawBounds=function(t){return rt.minYaw=Math.max(-360,Math.min(t[0],360)),rt.maxYaw=Math.max(-360,Math.min(t[1],360)),this},this.getHfov=function(){return rt.hfov},this.setHfov=function(t,e,r,i){return pt=Date.now(),1e-6>=Math.abs(t-rt.hfov)?("function"==typeof r&&r(i),this):((e=e==n?1e3:Number(e))?(kt.hfov={startTime:Date.now(),startPosition:rt.hfov,endPosition:$(t),duration:e},"function"==typeof r&&setTimeout((function(){r(i)}),e)):W(t),R(),this)},this.getHfovBounds=function(){return[rt.minHfov,rt.maxHfov]},this.setHfovBounds=function(t){return rt.minHfov=Math.max(0,t[0]),rt.maxHfov=Math.max(0,t[1]),this},this.lookAt=function(t,e,r,i,a,o){return i=i==n?1e3:Number(i),t!==n&&1e-6<Math.abs(t-rt.pitch)&&(this.setPitch(t,i,a,o),a=n),e!==n&&1e-6<Math.abs(e-rt.yaw)&&(this.setYaw(e,i,a,o),a=n),r!==n&&1e-6<Math.abs(r-rt.hfov)&&(this.setHfov(r,i,a,o),a=n),"function"==typeof a&&a(o),this},this.getNorthOffset=function(){return rt.northOffset},this.setNorthOffset=function(t){return rt.northOffset=Math.min(360,Math.max(0,t)),R(),this},this.getHorizonRoll=function(){return rt.horizonRoll},this.setHorizonRoll=function(t){return rt.horizonRoll=Math.min(90,Math.max(-90,t)),it.setPose(rt.horizonPitch*Math.PI/180,rt.horizonRoll*Math.PI/180),R(),this},this.getHorizonPitch=function(){return rt.horizonPitch},this.setHorizonPitch=function(t){return rt.horizonPitch=Math.min(90,Math.max(-90,t)),it.setPose(rt.horizonPitch*Math.PI/180,rt.horizonRoll*Math.PI/180),R(),this},this.startAutoRotate=function(t,e){return t=t||Mt||1,e=e===n?ht:e,rt.autoRotate=t,dt.lookAt(e,n,ct,3e3),R(),this},this.stopAutoRotate=function(){return Mt=rt.autoRotate?rt.autoRotate:Mt,rt.autoRotate=!1,rt.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){K(),wt={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return it},this.setUpdate=function(t){return Pt=!0===t,it===n?s():R(),this},this.mouseEventToCoords=function(t){return p(t)},this.loadScene=function(t,e,n,r){return!1!==ot&&q(t,e,n,r),this},this.getScene=function(){return rt.scene},this.addScene=function(t,e){return i.scenes[t]=e,this},this.removeScene=function(t){return!(rt.scene===t||!i.scenes.hasOwnProperty(t))&&(delete i.scenes[t],!0)},this.toggleFullscreen=function(){return Y(),this},this.getConfig=function(){return rt},this.getContainer=function(){return r},this.addHotSpot=function(t,e){if(e===n&&rt.scene===n)rt.hotSpots.push(t);else{var r=e!==n?e:rt.scene;if(!i.scenes.hasOwnProperty(r))throw"Invalid scene ID!";i.scenes[r].hasOwnProperty("hotSpots")||(i.scenes[r].hotSpots=[],r==rt.scene&&(rt.hotSpots=i.scenes[r].hotSpots)),i.scenes[r].hotSpots.push(t)}return e!==n&&rt.scene!=e||(B(t),ot&&V(t)),this},this.removeHotSpot=function(t,e){if(e===n||rt.scene==e){if(!rt.hotSpots)return!1;for(var r=0;r<rt.hotSpots.length;r++)if(rt.hotSpots[r].hasOwnProperty("id")&&rt.hotSpots[r].id===t){for(var a=rt.hotSpots[r].div;a.parentNode!=Ft;)a=a.parentNode;return Ft.removeChild(a),delete rt.hotSpots[r].div,rt.hotSpots.splice(r,1),!0}}else{if(!i.scenes.hasOwnProperty(e))return!1;if(!i.scenes[e].hasOwnProperty("hotSpots"))return!1;for(r=0;r<i.scenes[e].hotSpots.length;r++)if(i.scenes[e].hotSpots[r].hasOwnProperty("id")&&i.scenes[e].hotSpots[r].id===t)return i.scenes[e].hotSpots.splice(r,1),!0}},this.resize=function(){it&&C()},this.isLoaded=function(){return ot},this.isOrientationSupported=function(){return zt||!1},this.stopOrientation=function(){Z()},this.startOrientation=function(){zt&&J()},this.isOrientationActive=function(){return Boolean(xt)},this.on=function(t,e){return Ct[t]=Ct[t]||[],Ct[t].push(e),this},this.off=function(t,e){if(!t)return Ct={},this;if(e){var n=Ct[t].indexOf(e);0<=n&&Ct[t].splice(n,1),0==Ct[t].length&&delete Ct[t]}else delete Ct[t];return this},this.destroy=function(){Dt=!0,clearTimeout(ut),it&&it.destroy(),Tt&&(e.removeEventListener("mousemove",g,!1),e.removeEventListener("mouseup",m,!1),r.removeEventListener("mozfullscreenchange",H,!1),r.removeEventListener("webkitfullscreenchange",H,!1),r.removeEventListener("msfullscreenchange",H,!1),r.removeEventListener("fullscreenchange",H,!1),t.removeEventListener("resize",C,!1),t.removeEventListener("orientationchange",C,!1),r.removeEventListener("keydown",w,!1),r.removeEventListener("keyup",x,!1),r.removeEventListener("blur",S,!1),e.removeEventListener("mouseleave",m,!1)),r.innerHTML="",r.classList.remove("pnlm-container")}}return{viewer:function(t,e){return new r(t,e)}}}(window,document)},e538:function(t,e,n){var r=n("b622");e.f=r},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e6cf:function(t,e,n){"use strict";var r,i,a,o,s=n("23e7"),l=n("c430"),u=n("da84"),c=n("d066"),h=n("fea9"),d=n("6eeb"),f=n("e2cc"),p=n("d44e"),g=n("2626"),m=n("861d"),v=n("1c0b"),y=n("19aa"),b=n("c6b6"),_=n("8925"),E=n("2266"),A=n("1c7e"),T=n("4840"),w=n("2cf4").set,S=n("b575"),x=n("cdf9"),L=n("44de"),M=n("f069"),k=n("e667"),C=n("69f3"),R=n("94ca"),P=n("b622"),O=n("2d00"),D=P("species"),I="Promise",N=C.get,F=C.set,B=C.getterFor(I),U=h,j=u.TypeError,V=u.document,G=u.process,z=c("fetch"),Y=M.f,H=Y,$="process"==b(G),W=!!(V&&V.createEvent&&u.dispatchEvent),K="unhandledrejection",X="rejectionhandled",q=0,Z=1,J=2,Q=1,tt=2,et=R(I,(function(){var t=_(U)!==String(U);if(!t){if(66===O)return!0;if(!$&&"function"!=typeof PromiseRejectionEvent)return!0}if(l&&!U.prototype["finally"])return!0;if(O>=51&&/native code/.test(U))return!1;var e=U.resolve(1),n=function(t){t((function(){}),(function(){}))},r=e.constructor={};return r[D]=n,!(e.then((function(){}))instanceof n)})),nt=et||!A((function(t){U.all(t)["catch"]((function(){}))})),rt=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},it=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;S((function(){var i=e.value,a=e.state==Z,o=0;while(r.length>o){var s,l,u,c=r[o++],h=a?c.ok:c.fail,d=c.resolve,f=c.reject,p=c.domain;try{h?(a||(e.rejection===tt&&lt(t,e),e.rejection=Q),!0===h?s=i:(p&&p.enter(),s=h(i),p&&(p.exit(),u=!0)),s===c.promise?f(j("Promise-chain cycle")):(l=rt(s))?l.call(s,d,f):d(s)):f(i)}catch(g){p&&!u&&p.exit(),f(g)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&ot(t,e)}))}},at=function(t,e,n){var r,i;W?(r=V.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),u.dispatchEvent(r)):r={promise:e,reason:n},(i=u["on"+t])?i(r):t===K&&L("Unhandled promise rejection",n)},ot=function(t,e){w.call(u,(function(){var n,r=e.value,i=st(e);if(i&&(n=k((function(){$?G.emit("unhandledRejection",r,t):at(K,t,r)})),e.rejection=$||st(e)?tt:Q,n.error))throw n.value}))},st=function(t){return t.rejection!==Q&&!t.parent},lt=function(t,e){w.call(u,(function(){$?G.emit("rejectionHandled",t):at(X,t,e.value)}))},ut=function(t,e,n,r){return function(i){t(e,n,i,r)}},ct=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=J,it(t,e,!0))},ht=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw j("Promise can't be resolved itself");var i=rt(n);i?S((function(){var r={done:!1};try{i.call(n,ut(ht,t,r,e),ut(ct,t,r,e))}catch(a){ct(t,r,a,e)}})):(e.value=n,e.state=Z,it(t,e,!1))}catch(a){ct(t,{done:!1},a,e)}}};et&&(U=function(t){y(this,U,I),v(t),r.call(this);var e=N(this);try{t(ut(ht,this,e),ut(ct,this,e))}catch(n){ct(this,e,n)}},r=function(t){F(this,{type:I,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:q,value:void 0})},r.prototype=f(U.prototype,{then:function(t,e){var n=B(this),r=Y(T(this,U));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=$?G.domain:void 0,n.parent=!0,n.reactions.push(r),n.state!=q&&it(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=N(t);this.promise=t,this.resolve=ut(ht,t,e),this.reject=ut(ct,t,e)},M.f=Y=function(t){return t===U||t===a?new i(t):H(t)},l||"function"!=typeof h||(o=h.prototype.then,d(h.prototype,"then",(function(t,e){var n=this;return new U((function(t,e){o.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof z&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return x(U,z.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:U}),p(U,I,!1,!0),g(I),a=c(I),s({target:I,stat:!0,forced:et},{reject:function(t){var e=Y(this);return e.reject.call(void 0,t),e.promise}}),s({target:I,stat:!0,forced:l||et},{resolve:function(t){return x(l&&this===a?U:this,t)}}),s({target:I,stat:!0,forced:nt},{all:function(t){var e=this,n=Y(e),r=n.resolve,i=n.reject,a=k((function(){var n=v(e.resolve),a=[],o=0,s=1;E(t,(function(t){var l=o++,u=!1;a.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,a[l]=t,--s||r(a))}),i)})),--s||r(a)}));return a.error&&i(a.value),n.promise},race:function(t){var e=this,n=Y(e),r=n.reject,i=k((function(){var i=v(e.resolve);E(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},e893:function(t,e,n){var r=n("5135"),i=n("56ef"),a=n("06cf"),o=n("9bf2");t.exports=function(t,e){for(var n=i(e),s=o.f,l=a.f,u=0;u<n.length;u++){var c=n[u];r(t,c)||s(t,c,l(e,c))}}},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},e95a:function(t,e,n){var r=n("b622"),i=n("3f8c"),a=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[a]===t)}},f069:function(t,e,n){"use strict";var r=n("1c0b"),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},f5df:function(t,e,n){var r=n("00ee"),i=n("c6b6"),a=n("b622"),o=a("toStringTag"),s="Arguments"==i(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(n){}};t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=l(e=Object(t),o))?n:s?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},f772:function(t,e,n){var r=n("5692"),i=n("90e3"),a=r("keys");t.exports=function(t){return a[t]||(a[t]=i(t))}},fb6a:function(t,e,n){"use strict";var r=n("23e7"),i=n("861d"),a=n("e8b5"),o=n("23cb"),s=n("50c4"),l=n("fc6a"),u=n("8418"),c=n("b622"),h=n("1dde"),d=n("ae40"),f=h("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),g=c("species"),m=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!f||!p},{slice:function(t,e){var n,r,c,h=l(this),d=s(h.length),f=o(t,d),p=o(void 0===e?d:e,d);if(a(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?i(n)&&(n=n[g],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(h,f,p);for(r=new(void 0===n?Array:n)(v(p-f,0)),c=0;f<p;f++,c++)f in h&&u(r,c,h[f]);return r.length=c,r}})},fc6a:function(t,e,n){var r=n("44ad"),i=n("1d80");t.exports=function(t){return r(i(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var r=n("4930");t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,n){var r=n("da84");t.exports=r.Promise}}]);
//# sourceMappingURL=chunk-vendors.js.map